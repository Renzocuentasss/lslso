/* dd: 2025-04-09__21-51-56 */
!(function (e) {
  'use strict';

  self.cdApi = {
    _eventListeners: {},
    configurationKeys: {
      serverURL: 'serverURL',
      customerID: 'customerID',
      logServerURL: 'logServerURL',
      enableCustomElementsProcessing: 'enableCustomElementsProcessing',
      collectionSettings: 'collectionSettings',
    },

    getConfigurations: function (callback) {
      const configurations = {};
      configurations[cdApi.configurationKeys.serverURL] ='https://wup-8286f985.us.v2.we-stats.com';
      configurations[cdApi.configurationKeys.customerID] = 'halo';
      configurations[cdApi.configurationKeys.logServerURL] ='https://log-8286f985.us.v2.we-stats.com/api/v1/sendLogs';
      configurations[cdApi.configurationKeys.enableCustomElementsProcessing] = true;
      configurations[cdApi.configurationKeys.collectionSettings] = {
        elementSettings: { customElementAttribute: 'data-bb' },
      };
      callback(configurations);
    },

    // set the page context
    changeContext: function (contextName) {
      window.postMessage(
        { type: 'ContextChange', context: contextName },
        window.location.href
      );
    },

    //set the customer session id - CSID
    setCustomerSessionId: function (csid) {
      window.postMessage(
        { type: 'cdSetCsid', csid: csid },
        window.location.href
      );
    },

    //set the session brand
    setCustomerBrand: function (brand) {
      window.postMessage(
        { type: 'cdSetCustomerBrand', brand: brand },
        window.location.href
      );
    },
  };
})();
/*! For license information please see main.bundle.js.LICENSE.txt */
var cdwpb;!function(){var t={344:function(t){t.exports={serif:["adobe jenson","adobe text","albertus","aldus","alexandria","algerian","american typewriter","antiqua","arno","aster","aurora","baskerville","bell","bembo","bembo schoolbook","benguiat","berkeley old style","bernhard modern","bodoni","book antiqua","bookman","bordeaux roman","californian fb","calisto","capitals","cambria","cartier","caslon","caslon antique","catull","centaur","century old style","century schoolbook","new century schoolbook","chaparral","charis sil","cheltenham","clearface","cochin","colonna","computer modern","concrete roman","constantia","cooper black","corona","dejavu fonts","ecotype","elephant","espy serif","excelsior","fairfield","ff scala","footlight","freeserif","friz quadrata","garamond","gentium","georgia","gloucester","goudy old style","goudy schoolbook","goudy pro font","granjon","heather","hercules","high tower text","hiroshige","hoefler text","humana serif","imprint","ionic no. 5","janson","jenson","joanna","korinna","kursivschrift","legacy serif","lexicon","liberation fonts","linux libertine","literaturnaya","lucida","melior","memphis","miller","minion","didone","mona lisa","mrs eaves","ms serif","new york","nimbus roman","nps rawlinson roadway","ocr a extended","palatino","perpetua","plantin","plantin schoolbook","playbill","poor richard","rawlinson roadway","renault","requiem","roman","rotis serif","sabon","seagull","sistina","souvenir","stix","stone informal","stone serif","sylfaen","times new roman","times","trajan","trinitÃ©","trump mediaeval","utopia","vale type","bitstream vera","versailles","wanted","weiss","wide latin","windsor","xits","apex","archer","athens","city","cholla slab","clarendon","courier","egyptienne","guardian egyptian","lexia","museo slab","rockwell","nilland","skeleton antique","tower","allegro","amiri","athelas","belwe","bookerly","bulmer","caledonia","constructium","copperplate Gothic","dejaVu serif","didot","droid serif","emerson","galliard","iowan old style","itc lubalin graph","ibm plex","ibm plex serif","junicode","literata","lucida bright","rotis","serifa","source serif pro","theano","zilla slab","bitstream charter","roboto slab","university of california old style","berkeley old style","candida","doves","hightower","liberation sans","lucida grande","vera sans","vercetti regular","computer modern sans","rotis ii sans","sherbrooke","tilson","triplex"],"sans-serif":["abadi","agency fb","akzidenz grotesk","aptifer","arial","arial unicode ms","avant garde","avenir","bank gothic","barmeno","bauhaus","bell centennial","bell gothic","benguiat gothic","berlin sans","beteckna","brandon grotesque","cabin","cafeteria","calibri","century gothic","charcoal","chicago","clearface gothic","clearview","co headline","co text","compacta","corbel","ff dax","dotum","droid","dyslexie","ecofont","eras","espy sans","nu sans","eurocrat","eurostile","ff meta","flama","formata","freesans","franklin gothic","frutiger","futura","geneva","gill sans","gill sans schoolbook","gotham","handel gothic","denmark","haettenschweiler","hei","helvetica","helvetica neue","swiss 721","highway gothic","hiroshige sans","hobo","impact","industria","interstate","johnston","kabel","lato","legacy sans","lexia readable","meiryo","microgramma","motorway","ms sans serif","museo sans","myriad","neutraface","neuzeit s","news gothic","nimbus sans l","nina","optima","parisine","pricedown","prima sans","pt sans","rail alphabet","revue","roboto","rotis sans","ff scala sans","segoe","skia","souvenir gothic","stone sans","syntax","tahoma","template gothic","tiresias","trade gothic","transport alphabet","trebuchet ms","trump gothic","tw cen","twentieth century","ubuntu font family","univers","zurich","verdana","virtue","acumin","akzidenz-grotesk","amplitude","andalÃ© sans","antique olive","archivo","austria","itc avant garde","itc avant garde gothic","averta","bahnschrift","barlow","bobcaygeon","breeze sans","cantarell","caractÃ¨res","cera Pro","cisco sans","adobe clean","clear sans","comic neue","dejaVu sans","din 1451","dosis","drogowskaz","droid sans","dubai","e-ukraine","fira sans","folio","gerstner programm","grand slang","harmonyos sans","ibm plex sans","inter","ge inspira","karrik","klavika","libre franklin","linux biolinum","fs me","ff meta","montserrat","national trust","nokia pure","noto sans","nunito sans","open sans","overpass","oxygen","poppins","proxima nova","radis sans","raleway","Selawik","semplicitÃ ","seravek","oneplus","snv","source sans pro","sweden sans","thesis sans","transport","tratex","unica","universalis","vag rounded","whitney","aphont","ff clan","gilroy","greycliff","nobel"],monospace:["andale mono","anonymous","consolas","courierhp","courier new","courierps","fontcraft courier","everson mono","fedra mono","fixed","fixedsys","fixedsys excelsior","inconsolata","hyperfont","letter gothic","magnetic ink character recognition","menlo","miriam fixed","monaco","monofur","monospace","ms gothic","ms mincho","nimbus mono l","ocr-a","ocr-b","orator","ormaxx","pragmatapro","prestige elite","profont","proggy programming fonts","small fonts","sydnie","terminal","tex gyre cursor","um typewriter","william monospace","balloon","brush script","dragonwick","choc","dom casual","mistral","papyrus","tempus sans","amazone","ams euler","apple chancery","aristocrat","bickley script","civitype","codex","edwardian script","forte","french script","kuenstler script","monotype corsiva","old english text mt","palace script","park avenue","scriptina","shelley volante","vivaldi","vladimir script","zapf chancery","zapfino","andy","ashley script","chalkboard","comic sans","cezanne","fontoon","irregularis","jefferson","kristen","lucida handwriting","rage italic","rufscript","scribble","soupbone","tekton","alecko","cinderella","cupola","curlz","magnificat","script","american text","cloister black","fraktur","goudy text","old english text","wedding text","aegyptus","aharoni","aisha","amienne","batak script","chandas","hanacaraka","japanese gothic typeface","jomolhari","kochi font","lontara script","maiola","minchÅ","mona font","nassim","nastaliq navees","neacademia","perpetua greek","simsun","skolar","skolar devanagari","sundanese unicode","sutturah","tai le valentinium","tengwar","tibetan machine uni","tunga","wadalab","apple symbols","bookshelf symbol 7","braille","commercial pi","corel","erler dingbats","hm phonetic","mathematical pi","morse code","opensymbol","richstyle","symbol","symbolps","wingdings","wingdings 2","wingdings 3","webdings","zapf dingbats","abracadabra","ad lib","allegro","andreas","arnold bÃ¶cklin","astur","balloon pop outlaw black","banco","beat","braggadocio","broadway","ellington","exablock","exocet","fig script","gigi","harlow solid","harrington","horizon","jim crow","jokerman","juice","lo-type","magneto","megadeth","neuland","peignot","ravie","san francisco","showcard gothic","snap","stencil","umbra","westminster","willow","bagel","lithos","aldhabi","andalus","angsana new","angsanaupc","aparajita","arabic typesetting","arial black","arial narrow","arial rounded mt bold","baskerville old face","batang","batangche","bauhaus 93","bell mt","berlin sans fb","berlin sans fb demi","bernard mt condensed","blackadder itc","bodoni mt","bodoni mt black","bodoni mt condensed","bodoni mt poster compressed","bookman old style","bradley hand itc","britannic bold","browallia new","browalliaupc","brush script mt","buxton sketch","calibri light","calisto mt","cambria math","candara","castellar","century","chiller","colonna mt","comic sans ms","copperplate gothic bold","copperplate gothic light","cordia new","cordiaupc","curlz mt","daunpenh","david","dfkai-sb","dilleniaupc","dokchampa","dotumche","ebrima","edwardian script itc","engravers mt","eras bold itc","eras demi itc","eras light itc","eras medium itc","estrangelo edessa","eucrosiaupc","euphemia","fangsong","felix titling","footlight mt light","franklin gothic book","franklin gothic demi","franklin gothic demi cond","franklin gothic heavy","franklin gothic medium","franklin gothic medium cond","frankruehl","freesiaupc","freestyle script","french script mt","gabriola","gadugi","gautami","gill sans mt","gill sans mt condensed","gill sans mt ext condensed bold","gill sans ultra bold","gill sans ultra bold condensed","gisha","gloucester mt extra condensed","goudy stout","gulim","gulimche","gungsuh","gungsuhche","harlow solid italic","imprint mt shadow","informal roman","irisupc","iskoola pota","jasmineupc","javanese text","juice itc","kaiti","kalinga","kartika","khmer ui","kodchiangupc","kokila","kristen itc","kunstler script","lao ui","latha","leelawadee","leelawadee ui","leelawadee ui semilight","levenim mt","lilyupc","lucida bright","lucida calligraphy","lucida console","lucida fax","lucida sans","lucida sans typewriter","lucida sans unicode","maiandra gd","malgun gothic","mangal","marlett","matura mt script capitals","meiryo ui","microsoft himalaya","microsoft jhenghei","microsoft jhenghei light","microsoft jhenghei ui","microsoft jhenghei ui light","microsoft new tai lue","microsoft phagspa","microsoft sans serif","microsoft tai le","microsoft uighur","microsoft yahei","microsoft yahei light","microsoft yahei ui","microsoft yahei ui light","microsoft yi baiti","mingliu","mingliu-extb","mingliu_hkscs","mingliu_hkscs-extb","miriam","modern","modern no. 20","mongolian baiti","moolboran","ms outlook","ms pgothic","ms pmincho","ms reference sans serif","ms reference specialty","ms ui gothic","mt extra","mv boli","myanmar text","narkisim","niagara engraved","niagara solid","nirmala ui","nirmala ui semilight","nsimsun","nyala","onyx","palace script mt","palatino linotype","parchment","perpetua titling mt","plantagenet cherokee","pmingliu","pmingliu-extb","pristina","raavi","rockwell condensed","rockwell extra bold","rod","sakkal majalla","script mt bold","segoe marker","segoe print","segoe script","segoe ui","segoe ui black","segoe ui emoji","segoe ui light","segoe ui semibold","segoe ui semilight","segoe ui symbol","shonar bangla","shruti","simhei","simplified arabic","simplified arabic fixed","simsun-extb","sitka banner","sitka display","sitka heading","sitka small","sitka subheading","sitka text","sketchflow print","snap itc","system","tempus sans itc","traditional arabic","tw cen mt","tw cen mt condensed","tw cen mt condensed extra bold","urdu typesetting","utsaah","vani","vijaya","viner hand itc","vrinda","yu gothic","yu gothic light","yu mincho","yu mincho demibold","yu mincho light","bitstream vera sans mono","cascadia code","century schoolbook monospace","comic mono","computer modern mono","typewriter","curier","cousine","dejavu sans mono","droid sans mono","envy code r","fantasque sans","fira code","fira mono","freemono","gnu freefont","go mono","hack","ibm monochrome display adapter","ibm mda","ibm plex mono","input","iosevka","jetbrains mono","juliamono","liberation mono","nk57 monospace","noto mono","operator mono","overpass mono","oxygen mono","pt mono","recursive mono","roboto mono","sf mono","source code pro","spleen","terminus","ubuntu mono","victor mono","wumpus mono"],rat_fonts:["Teamviewer11","Teamviewer12","Teamviewer13","Teamviewer14","Teamviewer15"]}},481:function(t){t.exports={"sans-serif":["Abel","Aboriginal Sans","Acumin","Adobe Gothic Std","Adobe Gothic Std B","Adobe Heiti Std R","Agency FB","Aharoni","Apple SD Gothic Neo","AppleGothic","Arial","Arial AMU","Arial Baltic","Arial Black","Arial CE","Arial CYR","Arial Cyr","Arial Greek","Arial Hebrew","Arial MT","Arial Narrow","Arial TUR","Arial Unicode MS","BankGothic Lt BT","BankGothic Md BT","Bell Gothic Std Black","Bell Gothic Std Light","Berlin Sans FB","Berlin Sans FB Demi","Calibri","Calibri Light","Candara","Century Gothic","Charcoal CY","Clear Sans","Comic Sans MS","Corbel","CordiaUPC","DejaVu Sans","DejaVu Sans Condensed","DejaVu Sans Light","Dotum","DotumChe","Droid Robot Regular","Droid Sans","Droid Sans Fallback","Droid Sans Hebrew","Droid Sans Japanese","Droid Sans Thai","DroidSansFallback","Ebrima","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","Euphemia UCAS","Eurostile","Fira Sans","Franklin Gothic Book","Franklin Gothic Demi","Franklin Gothic Demi Cond","Franklin Gothic Heavy","Franklin Gothic Medium","Franklin Gothic Medium Cond","Futura Md BT","Gadugi","Geneva","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","GothicE","GothicG","GothicI","Haettenschweiler","Heiti SC","Heiti TC","Helvetica","Helvetica Neue","Hiragino Kaku Gothic Pro","Hiragino Kaku Gothic ProN","ISOCPEUR","Impact","Kokila","Kozuka Gothic Pr6N B","Kozuka Gothic Pr6N EL","Kozuka Gothic Pr6N H","Kozuka Gothic Pr6N L","Kozuka Gothic Pr6N M","Kozuka Gothic Pr6N R","Kozuka Gothic Pro B","Kozuka Gothic Pro EL","Kozuka Gothic Pro H","Kozuka Gothic Pro L","Kozuka Gothic Pro M","Kozuka Gothic Pro R","LUCIDA GRANDE","Latha","Levenim MT","Liberation Sans","Liberation Sans Narrow","Lucida Grande","Lucida Sans","Lucida Sans Unicode","MS Gothic","MS Reference Sans Serif","MS Sans Serif","MYRIAD","MYRIAD PRO","Maiandra GD","Malgun Gothic","Meiryo","Microsoft PhagsPa","Microsoft Sans Serif","Mukti Narrow","Myriad Pro","Myriad Pro Cond","Myriad Pro Light","Myriad Web Pro","NanumGothic","Narkisim","Noto Sans","Noto Sans CJK JP","Noto Sans CJK KR","Noto Sans CJK SC","Noto Sans CJK TC","Noto Sans JP","Noto Sans KR","Noto Sans Lao ","Noto Sans SC","Noto Sans TC","PingFang SC","PingFang TC","Roboto","SansSerif","Square721 BT","Swis721 BT","Swis721 BdCnOul BT","Swis721 BdOul BT","Swis721 Blk BT","Swis721 BlkCn BT","Swis721 BlkEx BT","Swis721 BlkOul BT","Swis721 Cn BT","Swis721 Ex BT","Swis721 Hv BT","Swis721 Lt BT","Swis721 LtCn BT","Swis721 LtEx BT","Tahoma","Technic","TechnicBold","Tempus Sans ITC","Thonburi","Trebuchet MS","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","Ubuntu","Ubuntu Light","Ubuntu Bold","VL Gothic","VL PGothic","Verdana","WP Greek Helve","WP MultinationalA Helve","WP MultinationalB Helve","Yu Gothic","sans-serif",".VnArial",".VnArial Narrow",".VnArial NarrowH",".VnArialH",".VnAvant",".VnAvantH",".VnGothic",".VnGothicH",".VnHelvetIns",".VnHelvetInsH",".VnLucida sans",".VnUniverseH","AR BERKLEY","Abadi MT Condensed Extra Bold","Abadi MT Condensed Light","Abscissa","Abscissa Bold","Abscissa Bold Italic","Adobe Heiti Std","Agency FB Bold","AirCut Light","Amerika Sans","Antique Olive","Apple LiGothic","Apple LiGothic Medium","Architext Regular","Arial Bold","Arial Bold Italic","Arial Hebrew Bold","Arial Italic","Arial Narrow Bold","Arial Narrow Bold Italic","Arial Narrow Italic","Asenine Super Thin","Asenine Thin","AvantGarde Bk BT","AvantGarde Md BT","AvenirBlk_PFL","AvenirLt_PFL","AvenirMd_PFL","Bank Gothic","Bell Gothic Std Bold","Bitstream Vera Sans","BlairMdITC TT-Medium","Droid Sans Arabic","FreeSans","HelveticaNeueVN-Black","HelveticaNeueVN-BlackItalic","HelveticaNeueVN-Bold","HelveticaNeueVN-BoldCond","HelveticaNeueVN-BoldCondObl","HelveticaNeueVN-BoldItalic","HelveticaNeueVN-Condensed","HelveticaNeueVN-CondensedObl","HelveticaNeueVN-ExtBlackCond","HelveticaNeueVN-ExtBlackCondOb","HelveticaNeueVN-Heavy","HelveticaNeueVN-HeavyCond","HelveticaNeueVN-HeavyCondObl","HelveticaNeueVN-HeavyItalic","HelveticaNeueVN-Italic","HelveticaNeueVN-Light","HelveticaNeueVN-LightItalic","HelveticaNeueVN-Medium","HelveticaNeueVN-MediumCond","HelveticaNeueVN-MediumCondObl","HelveticaNeueVN-MediumItalic","HelveticaNeueVN-Roman","HelveticaNeueVN-Thin","HelveticaNeueVN-ThinItalic","HelveticaNeueVN-UltraLight","HelveticaNeueVN-UltraLightItal","Loma","Myriad Pro Cond It","Myriad Pro It","Myriad Pro Light Cond","Myriad Pro Semibold","Myriad Pro Semibold It","Myriad Web Pro Condensed","News Gothic MT","News GothicMT","NewsGoth BT","Nimbus Sans L","Optima","Optima ExtraBlack","Purisa","Sans","Skia","Stone Sans ITC TT","Stone Sans ITC TT-Bold","Stone Sans ITC TT-Semi","Stone Sans ITC TT-SemiIta","Stone Sans OS ITC TT-Bold","Stone Sans OS ITC TT-Semi","Stone Sans OS ITCTT-SemiIta","Stone Sans Sem ITC TT","Swiss911 XCm BT","Tahoma Bold","TakaoPGothic","Thonburi Bold","Trebuchet MS Bold","Trebuchet MS Bold Italic","Trebuchet MS Italic","Trebuchet_PFL","Tw Cen MT Bold","Tw Cen MT Bold Italic","URW Gothic L","URW Grotesk T","Ubuntu Condensed","Ume Gothic","Ume Gothic C4","Ume Gothic C5","Ume Gothic O5","Ume Gothic S4","Ume Gothic S5","Ume P Gothic","Ume P Gothic C4","Ume P Gothic C5","Ume P Gothic O5","Ume P Gothic S4","Ume P Gothic S5","UnDotum","Univers","Univers Condensed","VNI-Helve","VNI-Helve-Condense","VNI-Swiss-Condense","Verdana Bold","Verdana Bold Italic","Verdana Italic","WenQuanYi Micro Hei","Yu Gothic Light","ZapfHumnst BT","ZapfHumnst Dm BT","Zurich BlkEx BT","Zurich Ex BT","bankgothic lt bt","swis721 blkoul bt","swis721 bt","3M Circular TT Bold","3M Circular TT Book","3M Circular TT Light","ABeeZee","AR Sans Serif","Accent SF","Accord Heavy SF","Accord Light SF","Accord SF","Aileron","Aileron Black","Aileron Bold","Aileron Heavy","Aileron Light","Aileron SemiBold","Aileron Thin","Aileron UltraLight","Alegreya Sans SC","AlekyaExtraBold","AlekyaMedium","AlekyaThin","Alternate Gothic No2 D","AlternateGothic2 BT","Andale Sans for VST","Antonio","Apple SD Gothic Neo Bold","Apple SD Gothic Neo Heavy","Apple SD Gothic Neo Light","Apple SD Gothic Neo Medium","Apple SD Gothic Neo Regular","Apple SD Gothic Neo Thin","Apple SD Gothic Neo UltraLight","Apple SD GothicNeo ExtraBold","AppleGothic Regular","Arial (Arabic)","Arial Hebrew Light","Arial Hebrew Scholar","Arial Hebrew Scholar Bold","Arial Hebrew Scholar Light","Arial Nova","Arial Nova Cond","Arial Nova Cond Light","Arial Nova Light","Arial Symbol","Arimo","Arimo Bold","Arimo Bold Italic","Arimo Bold Italic for Powerline","Arimo Bold for Powerline","Arimo Italic","Arimo Italic for Powerline","Arimo for Powerline","Avenir","Avenir Black","Avenir Black Oblique","Avenir Book","Avenir Book Oblique","Avenir Heavy","Avenir Heavy Oblique","Avenir Light","Avenir Light Oblique","Avenir Medium","Avenir Medium Oblique","Avenir Next","Avenir Next Bold","Avenir Next Bold Italic","Avenir Next Condensed","Avenir Next Condensed Bold","Avenir Next Condensed Bold Italic","Avenir Next Condensed Demi Bold","Avenir Next Condensed Demi Bold Italic","Avenir Next Condensed Heavy","Avenir Next Condensed Heavy Italic","Avenir Next Condensed Italic","Avenir Next Condensed Medium","Avenir Next Condensed Medium Italic","Avenir Next Condensed Regular","Avenir Next Condensed Ultra Light","Avenir Next Condensed Ultra Light Italic","Avenir Next Demi Bold","Avenir Next Demi Bold Italic","Avenir Next Heavy","Avenir Next Heavy Italic","Avenir Next Italic","Avenir Next Medium","Avenir Next Medium Italic","Avenir Next Regular","Avenir Next Ultra Light","Avenir Next Ultra Light Italic","Avenir Next W1G Bold","Avenir Next W1G Bold Italic","Avenir Next W1G Demi","Avenir Next W1G Demi Italic","Avenir Next W1G Heavy","Avenir Next W1G Heavy Italic","Avenir Next W1G Italic","Avenir Next W1G Light","Avenir Next W1G Light Italic","Avenir Next W1G Medium","Avenir Next W1G Medium Italic","Avenir Next W1G Regular","Avenir Next W1G Thin","Avenir Next W1G Thin Italic","Avenir Next W1G Ultra Light","Avenir Next W1G Ultra Light Italic","Avenir Oblique","Avenir Roman","Averia","Averia Sans","Avinor","Bank Gothic Light","Bank Gothic Medium","Bariol Regular","Bariol Regular Italic","Baron Neue","Baron Neue Black","Baron Neue Bold","Bebas Neue Bold","Bebas Neue Book","Bebas Neue Light","Bebas Neue Regular","Bebas Neue Thin","Belfast Light SF","Belfast SF","Biko","BlairMdITC TT Medium","Bowlby One SC","Brandon Grotesque Black","Brandon Grotesque Bold","Brandon Grotesque Light","Brandon Grotesque Medium","Cabin","Cairo SF","Calibri Bold","Calibri Bold Italic","Calibri Italic","Candara Bold","Candara Bold Italic","Candara Italic","Cantarell Bold","Cantarell Bold Oblique","Cantarell Oblique","Cantarell Regular","Carlito","Carrois Gothic SC","Caviar Dreams","Caviar Dreams Bold","Caviar Dreams Bold Italic","Caviar Dreams Italic","Century Gothic Bold","Century Gothic Bold Italic","Century Gothic Italic","Cir Arial","Circular Std Black","Circular Std Black Italic","Circular Std Bold","Circular Std Bold Italic","Circular Std Book","Circular Std Book Italic","Circular Std Medium","Circular Std Medium Italic","Coda","Comfortaa","Comic Sans MS Bold","Commons","Coolvetica","Corbel Bold","Corbel Bold Italic","Corbel Italic","Corporate","Cronos Pro","DFKGothic-Md","DIN 1451 Mittelschrift","DIN Alternate","DIN Alternate Bold","DIN Condensed","DIN Condensed Bold","DIN-BlackAlternate","DIN-Bold","DIN-Light","DIN-LightAlternate","DIN-Medium","DIN-MediumAlternate","DIN-Regular","DIN-RegularAlternate","DINPro-Black","DINPro-Bold","DINPro-Light","DINPro-Medium","DINPro-Regular","Damascus Bold","Damascus Light","Damascus Medium","Damascus Semi Bold","Days Regular","Dayton","DengXian","DengXian Light","Dosis","Dosis Bold","Dosis ExtraBold","Dosis ExtraLight","Dosis Light","Dosis Medium","Dosis SemiBold","Droid Sans Armenian","Droid Sans Ethiopic","Droid Sans Georgian","Ela Sans Light Caps","Euclid","Euclid Bold","Euclid Extra Bold","Euphemia UCAS Bold","Eurostile Bold","Existence Light","Fabrica","Folio XBd BT","Formata Light Condensed","Formata Medium Condensed","Francois One","Franklin Gothic","Franklin Gothic Book Italic","Franklin Gothic Medium Italic","Futura","Futura Bold","Futura Bold Oblique","Futura Book","Futura Book BT","Futura Book Italic BT","Futura Book Oblique","Futura Condensed ExtraBold","Futura Condensed Medium","Futura Extra Bold","Futura Extra Bold Oblique","Futura Heavy","Futura Heavy Oblique","Futura LT Bold","Futura LT Bold Oblique","Futura LT Book","Futura LT Book Oblique","Futura LT Condensed Bold","Futura LT Condensed Bold Oblique","Futura LT Condensed Extra Bold","Futura LT Condensed Extra Bold Oblique","Futura LT Condensed Light","Futura LT Condensed Light Oblique","Futura LT Condensed Medium","Futura LT Condensed Medium Oblique","Futura LT Extra Bold","Futura LT Extra Bold Oblique","Futura LT Heavy","Futura LT Heavy Oblique","Futura LT Light","Futura LT Light Oblique","Futura LT Medium","Futura LT Medium Oblique","Futura Light","Futura Light BT","Futura Light Condensed BT","Futura Light Italic BT","Futura Light Oblique","Futura Medium","Futura Medium BT","Futura Medium Italic","Futura Medium Oblique","Futura Std Bold","Futura Std Bold Condensed","Futura Std Book","Futura Std Heavy","Futura Std Light","Futura Std Medium","Futura Std Medium Condensed","Gen W01 Light","Geotype TT","Gidole","Gill Sans","Gill Sans Bold","Gill Sans Bold Italic","Gill Sans Italic","Gill Sans Light","Gill Sans Light Italic","Gill Sans MT Bold","Gill Sans MT Bold Italic","Gill Sans MT Italic","Gill Sans Nova","Gill Sans Nova Cond","Gill Sans Nova Cond Lt","Gill Sans Nova Cond Ultra Bold","Gill Sans Nova Cond XBd","Gill Sans Nova Light","Gill Sans Nova Ultra Bold","Gill Sans SemiBold","Gill Sans SemiBold Italic","Gill Sans UltraBold","GillSans-Bold","Gillius ADF","Gillius ADF Cd","Gillius ADF No2","Gillius ADF No2 Cd","Gotham","Gotham Black","Gotham Black Italic","Gotham Bold","Gotham Bold Italic","Gotham Book","Gotham Book Italic","Gotham Extra Light","Gotham Extra Light Italic","Gotham Light","Gotham Medium","Gotham Medium Italic","Gotham Narrow Black Italic","Gotham Narrow Bold Italic","Gotham Narrow Book","Gotham Narrow Book Italic","Gotham Narrow Extra Light","Gotham Narrow Extra Light Italic","Gotham Narrow Light","Gotham Narrow Light Italic","Gotham Narrow Medium Italic","Gotham Narrow Thin","Gotham Narrow Thin Italic","Gotham Narrow Ultra","Gotham Narrow Ultra Italic","Gotham Thin","Gotham Thin Italic","Gotham Ultra","Gotham Ultra Italic","Gothic720 BT","Gothic720 Lt BT","GothicNo13 BT","HGHeiseiKakugothictaiW3","HGHeiseiKakugothictaiW5","HGP-AGothic2-Latin1K","HGPHeiseiKakugothictaiW3","HGPHeiseiKakugothictaiW5","HP Simplified","HP Simplified Light","Hannotate TC Bold","Hebar","Hei Medium","HeiT","Heiti SC Medium","Heiti TC Medium","HelvLight","Helvetica Bold","Helvetica Bold Oblique","Helvetica Light","Helvetica Light Oblique","Helvetica Neue Bold","Helvetica Neue Bold Italic","Helvetica Neue Condensed Black","Helvetica Neue Condensed Bold","Helvetica Neue Italic","Helvetica Neue Light","Helvetica Neue Light Italic","Helvetica Neue Medium","Helvetica Neue Medium Italic","Helvetica Neue Thin","Helvetica Neue Thin Italic","Helvetica Neue UltraLight","Helvetica Neue UltraLight Italic","Helvetica Oblique","HelveticaNeue","HelveticaNeue BlackCond","HelveticaNeue MediumCond","HelveticaNeueLT Pro 107 XBlkCn","HelveticaNeueLT Pro 23 UltLtEx","HelveticaNeueLT Pro 25 UltLt","HelveticaNeueLT Pro 27 UltLtCn","HelveticaNeueLT Pro 33 ThEx","HelveticaNeueLT Pro 35 Th","HelveticaNeueLT Pro 37 ThCn","HelveticaNeueLT Pro 43 LtEx","HelveticaNeueLT Pro 45 Lt","HelveticaNeueLT Pro 47 LtCn","HelveticaNeueLT Pro 53 Ex","HelveticaNeueLT Pro 55 Roman","HelveticaNeueLT Pro 57 Cn","HelveticaNeueLT Pro 63 MdEx","HelveticaNeueLT Pro 65 Md","HelveticaNeueLT Pro 67 MdCn","HelveticaNeueLT Pro 75 BdOu","HelveticaNeueLT Pro 93 BlkEx","HelveticaNeueLT Pro 95 Blk","HelveticaNeueLT Pro 97 BlkCn","HelveticaNeueLT Std","HelveticaNeueLT Std Blk","HelveticaNeueLT Std Blk Cn","HelveticaNeueLT Std Blk Ext","HelveticaNeueLT Std Bold Outln","HelveticaNeueLT Std Cn","HelveticaNeueLT Std Ext","HelveticaNeueLT Std ExtBlk Cn","HelveticaNeueLT Std Extended","HelveticaNeueLT Std Lt","HelveticaNeueLT Std Lt Cn","HelveticaNeueLT Std Lt Ext","HelveticaNeueLT Std Med","HelveticaNeueLT Std Med Cn","HelveticaNeueLT Std Med Ext","HelveticaNeueLT Std Thin","HelveticaNeueLT Std Thin Cn","HelveticaNeueLT Std Thin Ext","HelveticaNeueLT Std UltLt","HelveticaNeueLT Std UltLt Cn","HelveticaNeueLT Std UltLt Ext","Hiragino Kaku Gothic Pro W3","Hiragino Kaku Gothic Pro W6","Hiragino Kaku Gothic ProN W3","Hiragino Kaku Gothic ProN W6","Hiragino Kaku Gothic Std","Hiragino Kaku Gothic Std W8","Hiragino Kaku Gothic StdN","Hiragino Kaku Gothic StdN W8","Hiragino Maru Gothic Pro","Hiragino Maru Gothic Pro W4","Hiragino Maru Gothic ProN","Hiragino Maru Gothic ProN W4","Hiragino Sans","Hiragino Sans GB","Hiragino Sans GB W3","Hiragino Sans GB W6","Hiragino Sans W0","Hiragino Sans W1","Hiragino Sans W2","Hiragino Sans W3","Hiragino Sans W4","Hiragino Sans W5","Hiragino Sans W6","Hiragino Sans W7","Hiragino Sans W8","Hiragino Sans W9","Humanist","Hypatia Sans Pro","Hypatia Sans Pro Black","Hypatia Sans Pro ExtraLight","Hypatia Sans Pro Light","Hypatia Sans Pro Semibold","IPAGothic","IPAPGothic","IPAexGothic","Ideal Sans Book","Inder","Interstate-Black","Interstate-Bold","Interstate-Light","Interstate-Regular","JLS Data GothicC  NC","JLS Data GothicR  NC","Julius Sans One","Klee Demibold","Kozuka Gothic Pr6N","Kozuka Gothic Pro","Laila Medium","Lantinghei SC Demibold","Lantinghei SC Extralight","Latin Modern Sans","Latin Modern Sans Demi Cond","Latin Modern Sans Quotation","Lato","Lato Black","Lato Black Italic","Lato Bold","Lato Bold Italic","Lato Hairline","Lato Hairline Italic","Lato Heavy","Lato Heavy Italic","Lato Italic","Lato Light","Lato Light Italic","Lato Medium","Lato Medium Italic","Lato Regular","Lato Semibold","Lato Semibold Italic","Lato Thin","Lato Thin Italic","Linux Biolinum G","Linux Biolinum Keyboard O","Linux Biolinum O","Lucida Sans Demibold Italic","Lucida Sans Demibold Roman","Lucida Sans Italic","Lucida Sans Regular","LuzSans-Book","LuzSans-Light","MMCenturyNew Bold","MMVariable Bold","MMVariableD Bold","MMVariableF Bold","MMa Variable Bold","Marquisette BTN Light","Meiryo Bold","Meiryo Italic","Microsoft NeoGothic","Montserrat","Montserrat Black","Montserrat Bold","Montserrat Extra Bold","Montserrat Hairline","Montserrat Light","Montserrat Semi Bold","Montserrat Ultra Light","Muli","Muli Italic","Muli Light","Muli Light Italic","Muna Bold","Museo 100 Regular","Museo 300 Regular","Museo 500 Regular","Museo Sans 100","Museo Sans 300","Museo Sans 500","Museo Sans 500 Italic","Museo Sans 700","Myriad Arabic Bold","Myriad Arabic Bold Italic","Myriad CAD","Myriad Pro Black","Myriad Pro Black Cond","Myriad Pro Black Condensed","Myriad Pro Black Condensed Italic","Myriad Pro Black Italic","Myriad Pro Black SemiCond","Myriad Pro Black SemiCondensed","Myriad Pro Black SemiCondensed Italic","Myriad Pro Black SemiExt","Myriad Pro Black SemiExtended","Myriad Pro Black SemiExtended Italic","Myriad Pro Bold","Myriad Pro Bold Condensed","Myriad Pro Bold Condensed Italic","Myriad Pro Bold Italic","Myriad Pro Bold SemiCondensed","Myriad Pro Bold SemiCondensed Italic","Myriad Pro Bold SemiExtended","Myriad Pro Bold SemiExtended Italic","Myriad Pro Condensed","Myriad Pro Condensed Italic","Myriad Pro Italic","Myriad Pro Light Condensed","Myriad Pro Light Condensed Italic","Myriad Pro Light Italic","Myriad Pro Light Sans Hebrew","Myriad Pro Light SemiCond","Myriad Pro Light SemiCondensed","Myriad Pro Light SemiCondensed Italic","Myriad Pro Light SemiExt","Myriad Pro Light SemiExtended","Myriad Pro Light SemiExtended Italic","Myriad Pro Regular","Myriad Pro Semi bold","Myriad Pro SemiCond","Myriad Pro SemiCondensed","Myriad Pro SemiCondensed Italic","Myriad Pro SemiExt","Myriad Pro SemiExtended","Myriad Pro SemiExtended Italic","Myriad Pro Semibold Condensed","Myriad Pro Semibold Condensed Italic","Myriad Pro Semibold Italic","Myriad Pro Semibold SemiCondensed","Myriad Pro Semibold SemiCondensed Italic","Myriad Pro Semibold SemiExtended","Myriad Pro Semibold SemiExtended Italic","MyriadPro-Semibold","NEOLITH","Nanum Gothic","NanumBarunGothic","NanumGothic Bold","NanumGothic ExtraBold","Napa SF","Neo Sans Pro Light","NeueHaasGroteskText Pro","New Gulim","News Cycle","News Gothic MT Alt 1","News Gothic MT Alt 2","News Gothic MT Alt 3","News Gothic MT Alt 4","News Gothic MT Alt 5","News Gothic MT Alt 6","News Gothic MT Bold","News Gothic MT Italic","Nexa Black","Nexa Black Italic","Nexa Bold","Nexa Bold Italic","Nexa Book","Nexa Book Italic","Nexa Heavy","Nexa Heavy Italic","Nexa Light","Nexa Light Italic","Nexa Regular","Nexa Regular Italic","Nexa Thin","Nexa Thin Italic","Nexa XBold","Nexa XBold Italic","Nobile","Noto Sans Armenian","Noto Sans Avestan","Noto Sans Bamum","Noto Sans Batak","Noto Sans Brahmi","Noto Sans Buhid","Noto Sans Carian","Noto Sans Coptic","Noto Sans Cypriot","Noto Sans Devanagari","Noto Sans Ethiopic","Noto Sans Georgian","Noto Sans Glagolitic","Noto Sans Gothic","Noto Sans Gujarati","Noto Sans Gurmukhi","Noto Sans Hanunoo","Noto Sans Hebrew","Noto Sans Imperial Aramaic","Noto Sans Kayah Li","Noto Sans Kharoshthi","Noto Sans Lao","Noto Sans Limbu","Noto Sans Linear B","Noto Sans Lisu","Noto Sans Lycian","Noto Sans Lydian","Noto Sans Malayalam","Noto Sans Mandaic","Noto Sans Mongolian","Noto Sans NKo","Noto Sans New Tai Lue","Noto Sans Ogham","Noto Sans Ol Chiki","Noto Sans Old Italic","Noto Sans Old Persian","Noto Sans Old South Arabian","Noto Sans Old Turkic","Noto Sans Osmanya","Noto Sans Phags Pa","Noto Sans Phoenician","Noto Sans Rejang","Noto Sans Runic","Noto Sans Samaritan","Noto Sans Saurashtra","Noto Sans Shavian","Noto Sans Syloti Nagri","Noto Sans Syriac Eastern","Noto Sans Tagalog","Noto Sans Tagbanwa","Noto Sans Tai Le","Noto Sans Tai Viet","Noto Sans Tamil","Noto Sans Thai","Noto Sans Tifinagh","Noto Sans Ugaritic","Noto Sans Vai","Noto Sans Yi","Nova Flat","Nova Oval","Nova Slim","Nova Square","Nueva Std Bold Condensed","Nunito","Nunito Light","OLF SimpleSansOC","Open Sans","Open Sans Bold","Open Sans Bold Italic","Open Sans Condensed","Open Sans Extrabold","Open Sans Extrabold Italic","Open Sans Italic","Open Sans Light","Open Sans Light Italic","Open Sans Semibold","Open Sans Semibold Italic","Optima Bold","Optima Bold Italic","Optima Italic","Optima LT Std","Optima Regular","Opus Chords Sans","Opus Chords Sans Condensed","Ostrich Sans","Ostrich Sans Dashed","Ostrich Sans Rounded","Oswald","Oswald Regular","Oswald Stencil","Oswald Stencil Bold","Oxygen","PT Bold Heading","PT Sans","PT Sans Bold","PT Sans Bold Italic","PT Sans Caption","PT Sans Caption Bold","PT Sans Italic","PT Sans Narrow","PT Sans Narrow Bold","Padauk","Padauk Book","Paralucent Demi Bold","Paralucent Demi Bold Italic","Paralucent Extra Light","Paralucent ExtraLight Italic","Paralucent Medium","Paralucent Thin","Paralucent Thin Italic","PingFang SC Medium","Placard MT Condensed","PoetsenOne","Poiret One","Praxis","PrimaSans BT","Proxima Nova","Proxima Nova Black","Proxima Nova Bold","Proxima Nova Bold Italic","Proxima Nova Condensed","Proxima Nova Condensed Light","Proxima Nova Condensed Light Italic","Proxima Nova Condensed Regular Italic","Proxima Nova Condensed Semibold","Proxima Nova Condensed Semibold Italic","Proxima Nova Extrabold","Proxima Nova Light","Proxima Nova Light Italic","Proxima Nova Lt","Proxima Nova Regular Italic","Proxima Nova Rg","Proxima Nova Semibold","Proxima Nova Semibold Italic","Proxima Nova Soft Bold","Proxima Nova Soft Medium","Proxima Nova Soft Regular","Proxima Nova Soft Semibold","QTOptimum Bold","QuickType II Condensed","Quicksand","Quicksand Bold","Quicksand Book Oblique Regular","Quicksand Dash","Quicksand Italic","Quicksand Light","Quicksand Light Regular","Raanana Bold","Racing Sans One","Rakesly Lt","Raleway","Raleway Black","Raleway Black Italic","Raleway Bold","Raleway Bold Italic","Raleway ExtraBold","Raleway ExtraBold Italic","Raleway ExtraLight","Raleway ExtraLight Italic","Raleway Italic","Raleway Light","Raleway Light Italic","Raleway Medium","Raleway Medium Italic","Raleway SemiBold","Raleway SemiBold Italic","Raleway Thin","Raleway Thin Italic","Roboto Black","Roboto Black Italic","Roboto Bold","Roboto Bold Italic","Roboto Condensed","Roboto Condensed Bold","Roboto Condensed Bold Italic","Roboto Condensed Italic","Roboto Condensed Light","Roboto Condensed Light Italic","Roboto Condensed Regular","Roboto Italic","Roboto Light","Roboto Light Italic","Roboto Medium","Roboto Medium Italic","Roboto Regular","Roboto Thin","Roboto Thin Italic","Rondalo","Rotis Sans Serif Std 45 Light","Rotis Sans Serif Std 55 Regular","Rotis Sans Serif Std 56 Italic","Rotis Sans Serif Std 65 Bold","Rotis Sans Serif Std 75 Extra Bold","SF Compact Text","SFNS Display","STXihei","SWGothg","SWGothi","SamsungImaginationBold","Seravek","Seravek Bold","Seravek Bold Italic","Seravek ExtraLight","Seravek ExtraLight Italic","Seravek Italic","Seravek Light","Seravek Light Italic","Seravek Medium","Seravek Medium Italic","Skia Black","Skia Black Condensed","Skia Black Extended","Skia Bold","Skia Condensed","Skia Extended","Skia Light","Skia Light Condensed","Skia Light Extended","Skia Regular","Sofia","Soho Gothic Pro Bold","Soho Gothic Pro Bold Italic","Soho Gothic Pro ExtraBold","Soho Gothic Pro ExtraBold It","Soho Gothic Pro Italic","Soho Gothic Pro Light","Soho Gothic Pro Light Italic","Soho Gothic Pro Medium","Soho Gothic Pro Medium Italic","Soho Gothic Pro Regular","Soho Gothic Pro Thin","Soho Gothic Pro Thin Italic","Soho Gothic Pro Ultra","Soho Gothic Pro Ultra Italic","Source Sans Pro","Source Sans Pro Black","Source Sans Pro Black Italic","Source Sans Pro Bold","Source Sans Pro Bold Italic","Source Sans Pro ExtraLight","Source Sans Pro ExtraLight Italic","Source Sans Pro Italic","Source Sans Pro Light","Source Sans Pro Light Italic","Source Sans Pro Semibold","Source Sans Pro Semibold Italic","Stez Sans","Stone Sans ITC TT Bold","Stone Sans OS ITC TT Bold","Stone Sans Sem ITC TT Semi","Stone Sans Sem ITC TT SemiIta","Stone Sans Sem OS ITC TT Semi","Stone Sans Sem OS ITCTT SemiIta","Sukhumvit Set","Sukhumvit Set Bold","Sukhumvit Set Light","Sukhumvit Set Medium","Sukhumvit Set Semi Bold","Sukhumvit Set Text","Sukhumvit Set Thin","Swiss 721","Swiss 721 Bold BT","Swiss 721 Condensed","Swiss 721 Extended","Swiss 721 Roman","Swiss921 BT","Tahoma Negreta","TeX Gyre Heros","TeX Gyre Heros Cn","Thonburi Light","Titillium","Titillium Black","Titillium Bold","Titillium Bold Italic","Titillium Bold Upright","Titillium Light","Titillium Light Italic","Titillium Light Upright","Titillium Regular Italic","Titillium Regular Upright","Titillium Semibold","Titillium Semibold Italic","Titillium Semibold Upright","Titillium Thin","Titillium Thin Italic","Titillium Thin Upright","TitilliumText22L-Bold","TitilliumText22L-Light","TitilliumText22L-Medium","TitilliumText22L-Regular","TitilliumText22L-Thin","TitilliumText22L-XBold","Trade Gothic LT Std","Trade Gothic LT Std Bold","Trade Gothic LT Std Bold Condensed No. 20","Trade Gothic LT Std Bold Condensed No. 20 Oblique","Trade Gothic LT Std Bold Extended","Trade Gothic LT Std Bold No. 2","Trade Gothic LT Std Bold No. 2 Oblique","Trade Gothic LT Std Bold Oblique","Trade Gothic LT Std Condensed No. 18","Trade Gothic LT Std Condensed No. 18 Oblique","Trade Gothic LT Std Extended","Trade Gothic LT Std Light","Trade Gothic LT Std Light Oblique","Trade Gothic LT Std Oblique","Tsukushi A Round Gothic","Tsukushi A Round Gothic Bold","Tsukushi A Round Gothic Regular","Tsukushi B Round Gothic","Tsukushi B Round Gothic Bold","VNI Helve","VNI Helve Condense","VNI-Bauhaus","Verdana Pro","Verdana Pro Black","Verdana Pro Cond","Verdana Pro Cond Black","Verdana Pro Cond Light","Verdana Pro Cond SemiBold","Verdana Pro Light","Verdana Pro SemiBold","Verlag Book","Vodafone Rg","Vogue-ExtraBold","YuCiril Helvetica","YuGothic","YuGothic Bold","YuGothic Medium","ZapfHumnst Ult BT","Zolano Sans BTN","letter gothic","cmss10","cmss12","cmss17","cmss8","cmss9","cmssbx10","cmssdc10","cmssq8","future","lcmssb8","dubai","bahnschrift","chicago","hei"],serif:["Aboriginal Serif","Abyssinica SIL","Adobe Caslon","Adobe Caslon Pro","Adobe Caslon Pro Bold","Adobe Garamond","Adobe Garamond Pro","Adobe Garamond Pro Bold","Adobe Hebrew","Adobe Jenson","Adobe Ming Std L","Adobe Myungjo Std M","Adobe Naskh Medium","Amadeus","Andalus","Angsana New","Aparajita","AppleMyungjo","Ariston","Arno Pro","Arno Pro Caption","Arno Pro Display","Arno Pro Light Display","Arno Pro SmText","Arno Pro Smbd","Arno Pro Smbd Caption","Arno Pro Smbd Display","Arno Pro Smbd SmText","Arno Pro Smbd Subhead","Arno Pro Subhead","Baskerville Old Face","Batang","Bell MT","Bernard MT Condensed","Birch Std","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Book Antiqua","Bookman Old Style","Browallia New","Californian FB","Calisto MT","Cambria","Castellar","Centaur","Century","Century Schoolbook","Chaparral Pro","Chaparral Pro Light","Charis SIL Compact","Charlemagne Std","Clarendon BT","Clarendon Blk BT","Clarendon Lt BT","Colonna MT","Constantia","Copperplate Gothic Bold","Copperplate Gothic Light","Cordia New","DejaVu Serif","DejaVu Serif Condensed","Droid Serif","Dutch801 Rm BT","Dutch801 XBd BT","Engravers MT","Euphemia","EuroRoman","Felix Titling","Footlight MT Light","FrankRuehl","Gabriola","Garamond","Garamond Premr Pro","Garamond Premr Pro Smbd","Geeza Pro","Gentium Basic","Gentium Book Basic","Georgia","Gloucester MT Extra Condensed","Goudy Old Style","Gujarati MT","HYSerif","High Tower Text","Hiragino Mincho Pro","Hiragino Mincho ProN","Hoefler Text","Jomolhari","Kalinga","Kartika","Kozuka Mincho Pr6N B","Kozuka Mincho Pr6N EL","Kozuka Mincho Pr6N H","Kozuka Mincho Pr6N L","Kozuka Mincho Pr6N M","Kozuka Mincho Pr6N R","Kozuka Mincho Pro B","Kozuka Mincho Pro EL","Kozuka Mincho Pro H","Kozuka Mincho Pro L","Kozuka Mincho Pro M","Kozuka Mincho Pro R","Liberation Serfi","Lucida Bright","Lucida Fax","MS Mincho","MS PMincho","MS Serif","MingLiU","Minion Pro","Minion Pro Cond","Minion Pro Med","Minion Pro SmBd","Modern No. 20","Noto Naskh Arabic","Noto Serif","Noto Serif CJK JP","Noto Serif CJK KR","Noto Serif CJK SC","Noto Serif CJK TC","Noto Serif Ahom","Nueva Std","Nueva Std Cond","Nyala","Orator Std","Oriya Sangam MN","Palatino","Palatino Linotype","PanRoman","Perpetua","Perpetua Titling MT","Plantagenet Cherokee","Poor Richard","Poplar Std","Roboto Slab","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Roman","SimSun","Sinhala MN","Songti SC","Songti TC","Sylfaen","TeX Gyre Schola","Times","Times New Roman","Times New Roman Baltic","Times New Roman CE","Times New Roman CYR","Times New Roman Cyr","Times New Roman Greek","Times New Roman PS","Times New Roman TUR","Trajan Pro","Vijaya","WP Greek Century","WP MultinationalA Roman","WP MultinationalB Roman","Yu Mincho","serif",".VnAristote",".VnBodoni",".VnBodoniH",".VnBook-Antiqua",".VnBook-AntiquaH",".VnCentury Schoolbook",".VnCentury SchoolbookH",".VnClarendon",".VnClarendonH","AR HERMANN","Adler","Adobe Caslon Pro Bold Italic","Adobe Caslon Pro Italic","Adobe Caslon Pro SmBd","Adobe Caslon Pro SmBd Italic","Adobe Garamond Pro Bold Italic","Adobe Garamond Pro Italic","Adobe Hebrew Italic","Adobe Myungjo Std","Albertus Extra Bold","Albertus Medium","Amazone BT","Ambages","American Typewriter","American Typewriter Condensed","American Typewriter Condensed Light","American Typewriter Light","Angleterre Book - DGL","Angostura","Arno Pro Bold","Arno Pro Bold Caption","Arno Pro Bold Display","Arno Pro Bold Italic","Arno Pro Bold Italic Caption","Arno Pro Bold Italic Display","Arno Pro Bold Italic SmText","Arno Pro Bold Italic Subhead","Arno Pro Bold SmText","Arno Pro Bold Subhead","Arno Pro Italic","Arno Pro Italic Caption","Arno Pro Italic Display","Arno Pro Italic SmText","Arno Pro Italic Subhead","Arno Pro Light Italic Display","Arno Pro Smbd Italic","Arno Pro Smbd Italic Caption","Arno Pro Smbd Italic Display","Arno Pro Smbd Italic SmText","Arno Pro Smbd Italic Subhead","Baskerville","Baskerville Semibold","Benguiat Bk BT","BernhardFashion BT","BernhardMod BT","Big Caslon","Bitstream Charter","Bitstream Vera Serif","Bodoni MT Poste...d","Century Schoolbook L","FreeSerif","Javanese Text","Liberation Serif","NanumMyeongjo","New Peninim MT","New Peninim MT Bold","New Peninim MT Bold Inclined","New Peninim MT Inclined","Nimbus Roman No 9 L","Nimbus Roman No9 L","Nonfiction","Norasi","Nueva Std Bold Cond","Nueva Std Bold Cond Italic","Nueva Std Cond Italic","Odessa LET","Old Century","PCMyungjo","PTBarnum BT","Perpetua Bold","Perpetua Bold Italic","Perpetua Italic","PosterBodoni BT","Princetown LET","Serif","Serifa BT","Serifa Th BT","Sitka Banner","Sitka Display","Sitka Heading","Sitka Small","Sitka Subheading","Sitka Text","Souvenir Lt BT","Times CE","Times CY","Times New Roman Bold","Times New Roman Bold Italic","Times New Roman Italic","TimesTen","Tiranti Solid LET","Tlwg Typo","Trajan Pro Bold","Tw Cen MT Italic","URW Antiqua T","URW Bookman L","URW Palladio L","Ume Mincho","Ume Mincho S3","Ume P Mincho","Ume P Mincho S3","UnBatang","University Roman LET","Utopia","VNI-Bodon","VNI-Bodon-Poster","VNI-Cooper","VNI-Couri","VNI-Garam","VNI-Goudy","VNI-Palatin","VNI-Times","Verona","Warnock Pro","Warnock Pro Caption","Warnock Pro Display","Warnock Pro Light","Warnock Pro Light Caption","Warnock Pro Light Display","Warnock Pro Light Subhead","Warnock Pro SmBd","Warnock Pro SmBd Caption","Warnock Pro SmBd Display","Warnock Pro SmBd Subhead","Warnock Pro Subhead","Westminster","Yu Mincho Demibold","Yu Mincho Light","academy engraved let","new york","palatino","palatino linotype","18thCentury","Abril Fatface","Abril Fatface Regular","Academy Engraved LET","Academy Engraved LET Plain:1.0","Accanthis ADF Std","Accanthis ADF Std No2","Accanthis ADF Std No3","Adobe Caslon Pro Semibold","Adobe Caslon Pro Semibold Italic","Adobe Naskh","Akhbar MT","Albany AMT","Aleo","American Typewriter Bold","American Typewriter Condensed Bold","American Typewriter Semibold","Amiri","Amiri Quran","AppleMyungjo Regular","Arvo","Athelas","Athelas Bold","Athelas Bold Italic","Athelas Italic","Athelas Regular","Augusta","Autour One","Averia Serif","BacktalkSerif BTN","Banmai Times","Baron Neue Italic","Baskerville Bold","Baskerville Bold Italic","Baskerville Italic","Baskerville SemiBold","Baskerville SemiBold Italic","Bauer Bodoni Std 1 Bold","Bauer Bodoni Std 1 Bold Italic","Bauer Bodoni Std 1 Italic","Bauer Bodoni Std 1 Roman","BauerBodni BT","Bell MT Bold","Bell MT Italic","Bellota","Belwe Bd BT","Belwe Lt BT","Bentham","Berling","BerlingRoman","Bevan","Big Caslon Medium","Bodoni 72","Bodoni 72 Bold","Bodoni 72 Book","Bodoni 72 Book Italic","Bodoni 72 Oldstyle","Bodoni 72 Oldstyle Bold","Bodoni 72 Oldstyle Book","Bodoni 72 Oldstyle Book Italic","Bodoni 72 Smallcaps","Bodoni 72 Smallcaps Book","Book Antiqua Bold","Book Antiqua Bold Italic","Book Antiqua Italic","Bookman Old Style Bold","Bookman Old Style Bold Italic","Bookman Old Style Italic","Bordeaux Roman Bold LET","Bordeaux Roman Bold LET Plain","Bordeaux Roman Bold LET Plain:1.0","Bree Serif","Caladea","Calisto MT Bold","Calisto MT Bold Italic","Calisto MT Italic","Cambria Bold","Cambria Bold Italic","Cambria Italic","Canterbury Regular","Catull","CentSchbook BT","Century Schoolbook Bold","Century Schoolbook Bold Italic","Century Schoolbook Italic","Chandas","Chaparral Pro Bold","Chaparral Pro Bold Italic","Chaparral Pro Italic","Chaparral Pro Light Italic","Charlemagne Std Bold","Charter","Charter Black","Charter Black Italic","Charter Bold","Charter Bold Italic","Charter Italic","Charter Roman","ChunkFive Roman","Cinzel","Clarendon","Clarendon Cn BT","Clarendon Hv BT","CloisterBlack BT","Cochin","Cochin Bold","Cochin Bold Italic","Cochin Italic","Constantia Bold","Constantia Bold Italic","Constantia Italic","Cooper Std","Copperplate","Copperplate Bold","Copperplate Light","Cordia New Bold","Cumberland AMT","Day Roman","Diavlo Book","Didot","Didot Bold","Didot Italic","Dominican","Doulos SIL","Dutch 801 Roman","Egyptian710 BT","English157 BT","EngraverFontSet","EngraverTextH","EngraverTextNCS","EngraverTextT","EngraverTime","Engravers MT Bold","Euclid Fraktur","Euclid Fraktur Bold","Ezra SIL","Ezra SIL SR","Fanwood","Finale Copyist Text","Finale Copyist Text Ext","Firenze SF","Formal436 BT","Frankfurter Venetian TT","GFS Artemisia","GFS Baskerville","GFS BodoniClassic","GFS Complutum","GFS Didot","GFS Didot Classic","GFS Gazis","GFS Neohellenic","GFS Olga","GFS Porson","GFS Solomos","GFS Theokritos","Galatia SIL","Garamond Bold","Garamond Italic","Garamond Premier Pro","Garamond Premier Pro Semibold","Geeza Pro Bold","Geeza Pro Regular","Gentium","GentiumAlt","Georgia Bold","Georgia Bold Italic","Georgia Italic","Georgia Pro","Georgia Pro Black","Georgia Pro Cond","Georgia Pro Cond Black","Georgia Pro Cond Light","Georgia Pro Cond SemiBold","Georgia Pro Light","Georgia Pro SemiBold","Germanica","GiovanniITCTT","Glegoo","Goudy Old Style Bold","Goudy Old Style Italic","GoudyHandtooled BT","Granjon Bold","Granjon Italic","Granjon Roman","Gravur Condensed Light","HGMinchoL","HGPMinchoL","HGSMinchoL","Hiragino Mincho Pro W3","Hiragino Mincho Pro W6","Hiragino Mincho ProN W3","Hiragino Mincho ProN W6","Hoefler Text Black","Hoefler Text Black Italic","Hoefler Text Italic","Hoefler Text Ornaments","Humanst521 BT","Humanst521 XBd BT","Huxley Titling","IM FELL DW Pica","IPAMincho","IPAPMincho","IPAexMincho","Iowan Old Style","Iowan Old Style Black","Iowan Old Style Black Italic","Iowan Old Style Bold","Iowan Old Style Bold Italic","Iowan Old Style Italic","Iowan Old Style Roman","Iowan Old Style Titling","Italianate","JF Armenian Serif","JF Georgian Contrast","Joan","Josefin Slab","Judson","Junicode","Kalyani","Kievit Offc Pro","Kino MT","Kohinoor Bangla","Kohinoor Devanagari Book","Kozuka Mincho Pr6N","Kozuka Mincho Pro","Langdon","Latienne Pro","Latienne Pro Bold","Latienne Pro Bold Italic","Latienne Pro Italic","Latin Modern Roman","Latin Modern Roman Caps","Latin Modern Roman Demi","Latin Modern Roman Dunhill","Latin Modern Roman Slanted","Latin Modern Roman Unslanted","Leitura Display Italic","Leitura Display Roman","Lexia","Linden Hill","Linux Libertine Display G","Linux Libertine Display O","Linux Libertine G","Linux Libertine Initials O","Linux Libertine O","Lucida Bright Demibold","Lucida Bright Demibold Italic","Lucida Bright Italic","Lucida Fax Demibold","Lucida Fax Demibold Italic","Lucida Fax Italic","Lucida Fax Regular","MAC C Times","MMCenturyNew Bold Italic","MMCenturyNew Italic","MMCenturyOld Bold","MMCenturyOld Bold Italic","MMCenturyOld Italic","MMCenturyOldGreek","MMCenturyOldGreek Bold","MMCenturyOldGreek Bold Italic","MMCenturyOldGreek Italic","MMTextBook Italic","MMTextBookB Italic","MMTimes","MMTimes Bold","MMTimes Bold Italic","MMTimes Italic","MMa Century","MMa Century Bold","MMa Century Bold Italic","MMa Century Italic","MMa CenturyK","MMa CenturyK Bold","MMa CenturyK Bold Italic","MMa CenturyK Italic","MMa CenturyKS Bold","MMa CenturyKS Bold Italic","MMa CenturyKS Italic","MMa CenturyKSS Bold","MMa CenturyKSS Bold Italic","MMa CenturyKSS Italic","MMa CenturyS","MMa CenturyS Bold","MMa CenturyS Bold Italic","MMa CenturyS Italic","MMa CenturySS","MMa CenturySS Bold","MMa CenturySS Bold Italic","MMa CenturySS Italic","MMa Fraktur","MMa Fraktur Bold","MMa Pascal Bold","MMa TextBook Bold","MMa TextBook Bold Italic","MMa TextBook Italic","MS Reference Serif","MaestroTimes","Manorama","Marion Bold","Marion Italic","Marion Regular","Martina","Merriweather Bold","Merriweather Bold Italic","Merriweather Italic","Merriweather Light","Merriweather Light Italic","Merriweather Regular","Merriweather UltraBold","Merriweather UltraBold Italic","Minerva","Minion Pro Bold","Minion Pro Bold Cond","Minion Pro Bold Cond Italic","Minion Pro Bold Italic","Minion Pro Italic","Minion Pro Medium","Minion Pro Medium Italic","Minion Pro Semibold","Minion Pro Semibold Italic","Modern Antiqua","MrsEavesRoman","Mudir MT","Museo 700 Regular","Museo 900 Regular","Myanmar Sangam MN","Nafees Web Naskh","Nanum Myeongjo","NanumMyeongjo Bold","NanumMyeongjo ExtraBold","New Athena Unicode","Noto Serif Armenian","Noto Serif Georgian","Noto Serif Lao","Noto Serif Thai","Nueva Std Bold","Nueva Std Condensed","Nueva Std Condensed Italic","Nueva Std Italic","Opus Text","PT Serif","PT Serif Bold","PT Serif Bold Italic","PT Serif Caption","PT Serif Caption Italic","PT Serif Italic","Palatino Bold","Palatino Bold Italic","Palatino Italic","Palatino Linotype Bold","Palatino Linotype Bold Italic","Palatino Linotype Italic","Perpetua Titling MT Bold","Perpetua Titling MT Light","Persia BT","Petrucci","Piranesi It BT","Playfair Display","Playfair Display SC","Playfair Display SC Black","Playfair Display SC Black Italic","Playfair Display SC Bold","Playfair Display SC Bold Italic","Playfair Display SC Italic","Priori Serif OT","Roboto Slab Bold","Roboto Slab Light","Roboto Slab Regular","Roboto Slab Thin","Rockwell Bold","Rockwell Bold Italic","Rockwell Italic","Rockwell Nova","Rockwell Nova Cond","Rockwell Nova Cond Light","Rockwell Nova Extra Bold","Rockwell Nova Light","STLiti","SWRomns","Serifa Bold","Seville","Songti SC Black","Songti SC Bold","Songti SC Light","Songti SC Regular","Songti TC Bold","Songti TC Light","Songti TC Regular","Sorts Mill Goudy","Sorts Mill Goudy Italic","Source Serif Pro","Source Serif Pro Semibold","Superclarendon","Superclarendon Black","Superclarendon Black Italic","Superclarendon Bold","Superclarendon Bold Italic","Superclarendon Italic","Superclarendon Light","Superclarendon Light Italic","Superclarendon Regular","TeX Gyre Adventor","TeX Gyre Bonum","TeX Gyre Chorus","TeX Gyre Pagella","TeX Gyre Termes","Theatre Antoine","Thorndale AMT","Thorndale for VST","Times Bold","Times Bold Italic","Times Italic","Times New Roman (Arabic)","Times New Roman Symbol","Times New Roman Uni","Times Roman","Tinos Bold Italic for Powerline","Tinos Bold for Powerline","Tinos Italic for Powerline","Tinos for Powerline","Trajan Pro 3","Trajan Pro 3 Bold","Trocchi","Trocchi Bold","Uncial Antiqua","University Roman Alts LET","VNI Times","VNI-Chaucer","VNtimes new roman","VnTimes","VnTimes2","Vogue","Vollkorn Bold","Vollkorn Bold Italic","Vollkorn Italic","Vollkorn Regular","Waverly","YuMincho","YuMincho ","YuMincho  36p Kana","YuMincho  36p Kana Demibold","YuMincho  36p Kana Medium","YuMincho Demibold","YuMincho Medium","Zolano Serif BTN","bodoni","ceriph 05","ceriph 07","cmb10","cmbx10","cmbx12","cmbx5","cmbx6","cmbx7","cmbx8","cmbx9","cmbxsl10","cmbxti10","cmcsc10","cmcsc8","cmcsc9","cmr10","cmr12","cmr17","cmr5","cmr6","cmr7","cmr8","cmr9","cmti10","cmti12","cmti8","cmti9","cmu10","eurm10","stmary10","new century schoolbook","albertus","bodoni","copperplate Gothic","Menlo"],fangsong:["Adobe Fangsong Std","Adobe Fangsong Std R","Adobe Kaiti Std R","Adobe Song Std L","BatangChe","DFKai-SB","FangSong","KaiTi","KaiTi_GB2312","Kaiti SC","Kaiti TC","LiSong Pro","MS Song","Ming(for ISO10646)","MingLiU-ExtB","MingLiU_HKSCS","MingLiu_HKSCS","NSimSun","PMingLiu","STSong","SimSun-ExtB","Adobe Ming Std","Adobe Song Std","Apple LiSung","Apple LiSung Light","BiauKai","STFangsong","STKaiti","CSongGB18030C-Light","HGSHeiseiMinchotaiW3","HYSWLongFangSong","Kaiti SC Black","Kaiti SC Bold","Kaiti SC Regular","Kaiti TC Bold","Kaiti TC Regular","PCMyungjo Regular","STXingkai","STZhongsong","Weibei SC","Xingkai SC Bold","Xingkai SC Light"],cursive:["Alexandra Script","AnastasiaScript","Annabelle","Apple Casual","Apple Chancery","Bickham Script One","Bickham Script Pro Regular","Bickham Script Pro Semibold","Bickham Script Two","Blackadder ITC","Bradley Hand ITC","Brush Script MT","Brush Script Std","Calligraph","Ceremonious Two","CommercialScript BT","DaunPenh","Edwardian Script ITC","Freehand521 BT","Freestyle Script","French Script MT","Giddyup Std","Gigi","Harlow Solid Italic","Heather Script One","Informal Roman","JasmineUPC","Kristen ITC","Kunstler Script","Lucida Calligraphy","Lucida Handwriting","Matura MT Script Capitals","Mistral","Monotype Corsiva","Ouverture script","Palace Script MT","Parchment","Pristina","Romantic","Script","Script MT Bold","ScriptC","ScriptS","Segoe Print","Segoe Script","Stylus BT","Viner Hand ITC","Vivaldi","Vladimir Script","cursive",".VnCommercial Script",".VnCommercial ScriptH",".VnMonotype corsiva",".VnMonotype corsivaH","ALS Script","AR BONNIE","AR CHRISTY","AR DARLING","AR DELANEY","AdineKirnberg Regular","Alfredo's Dance","Amethyst Zucchini","Angelica","Aquaduct Italic","Bickham Script Pro Bold","Blackmoor LET","Buxton Sketch","One Stroke Script LET","OzHandicraft BT","Quixley LET","Rage Italic LET","Ruach LET","Santa Fe LET","Savoye LET","Sawasdee","SchoolHouse Cursive B","ShelleyVolante BT","SketchFlow Print","Smudger LET","Snell Roundhand","Snell Roundhand Black","Snell Roundhand Bold","URW Chancery L","VNI-Brush","VNI-Matisse","VNI-Script","Zapfino","orange let","scripts","scruff let","short hand","stylus bt","superfrench","victorian let","westwood let","AL Cinderella","AdineKirnberg","AdineKirnberg-Script","Alex Brush","Allura","Amatic","Amatic SC","Annie BTN","Architects Daughter","Baby Kruffy","BaluBrush","BaluScript","Becky","Berkshire Swash","Bickham Script Pro 3","Bickham Script Pro 3 Bold","Bickham Script Pro 3 Semibold","BlackJackRegular","Blackmoor LET Plain:2.0","Bradley Hand","Bradley Hand Bold","Brush Script","Brush Script MT Italic","Brush Script Std Medium","CAC Champagne","CabinSketch","Caflisch Script Pro","Calligraffitti","Calligraph421 BT","Calligraphic","Candles","Castro Script PERSONAL USE ONLY","Casual","Cataneo BT","Chalkboard SE Regular","Chancery Cursive","Complete in Him","Cookie","Corsiva Hebrew","Corsiva Hebrew Bold","Dancing Script","Dancing Script OT","Darlin BTN","Desdemona","Detente","Emily Austin","Emma Script Mvb","FFF Tusj","Farah","Flamenco","FlemishScript BT","Floraless","Fredericka the Great","Freebooter Script","Freehand","Freehand575 BT","Grafolita Script Medium","Grand Hotel","Great Vibes","Hand Me Down S (BRK)","Handwriting - Dakota","HanziPen SC","HanziPen SC Regular","HanziPen TC","Holiday Springs BTN Quill","IMG Love","Indie Flower","JACKIE","JaneAusten","Jazz LET","Jazz LET Plain:1.0","John Handy LET","JuneBug","Just Another Hand","KG Corner of the Sky","KG Fall For You","KG Neatly Printed","KG Part of Me","KG Primary Penmanship","KG Shake it Off Chunky","Kaushan Script","Kristi","LaurenScript","Lavanderia","LeviBrush","LittleLordFontleroy","Lobster","Lobster Two","Lucida Calligraphy Italic","Lucida Handwriting Italic","Madre Script","Marker Felt","Marker Felt Thin","Matisse ITC","Milano LET","MisterEarl BT","Monika Italic","Moon Flower","Moonbeam","Nanum Brush Script","Nanum Pen Script","Normande Italic","Noteworthy","Nova Script","Orange LET","PFDaVinciScriptPro-Inked","PFDaVinciScriptPro-Regular","Pacifico","Pamela want a Bike to Ride","Pamela wants to Ride","Patrick Hand SC","Permanent Marker","Pleasantly Plump","PujeetaItalic","Qaskin White Personal Use","Quickpen","Quincho Script PERSONAL USE","RamuBrush","RamuScript","RamuScriptMedium","Redressed","Reklame Script Black","Reklame Script Bold","Reklame Script Medium","Reklame Script Regular","Remachine Script Personal Use","Rock Salt","Rouge Script","Rundkursiv","Russel Write TT","SWScrps","Santa Fe LET Plain:1.0","Savoye LET Plain","Savoye LET Plain CC","Savoye LET Plain CC.:1.0","Savoye LET Plain:1.0","ScriptKleio","Scriptina","Scruff LET","Shorelines Script Bold","SignPainter","SignPainter-HouseScript","SignPainter-HouseScript Semibold","Smudger Alts LET","Spicy Rice","Spirituality","Sue Ellen Francisco","Sugarskin BTN","Tangerine","Trattatello","VNI-Scribble","Valerie Hand","Vanilla","Ventilla Script","Violetta","Yellowtail","Zapfino Extra LT Four","Zapfino Extra LT Ligatures","Zapfino Extra LT One","Zapfino Extra LT Two","croissant sandwich"],fantasy:["Algerian","Bauhaus 93","Blackoak Std","Broadway","Chiller","Comic Sans","Curlz MT","Elephant","Forte","Goudy Stout","Harrington","Hobo Std","Imprint MT Shadow","Jokerman","MV Boli","Magneto","Old English Text MT","Playbill","Rage Italic","Ravie","Rosewood Std Regular","Showcard Gothic","Snap ITC","SuperFrench","Vineta BT","Wide Latin","fantasy",".VnMystical",".VnMysticalH","28 Days Later","AajaxSurrealFreak","Action Jackson","African","Air Conditioner","Airstream NF","Alpha CLOWN","AntFarm GoneCamping","Aquaduct Warp","Blockbuster","Party LET","Poster","Rosewood Std","Space Age","Type Embellishments One LET","Unicorn","VNI-Disney","algerian","playbill","simpson","surfer","vineta bt","wide latin","Airstream","Alice and the Wicked Monster","Alien Encounters","Apple Boy BTN","Army","BadaBoom BB","Benguiat","Blackout","Blade Runner Movie Font","Boogaloo","Braggadocio","Broadway BT","Broadway Copyist","Broadway Copyist Perc","Broadway Copyist Text","Broadway Copyist Text Ext","Broken Planewing","Bubblegum Sans","Burst My Bubble","Candy Round BTN","Candy Round BTN Cond","Candy Round BTN Cond Lt","Candy Round BTN Lt","Canter Bold 3D","Canter Bold Shadow","Chalkduster","Chewy","Cinema Gothic BTN Shadow","Coaster Shadow","ColdSpaghetti BTN","Comic Relief","Coolsville","Cracked","Cracked Johnnie","Creepygirl","Cut Me Out","Cut Me Out 2","Cut Me Out 3","Dirty Headline","Distant Galaxy","Dot-Matrix","Drivebye 3","Drivebye 4","Dynalight","Ethnocentric","Fascinate","Finger Paint","Fingerpop","Flubber","Fluffy Slacks BTN","Galeforce BTN","Gelfling SF","Good Times","Greek Diner Inline TT","GrilledCheese BTN","GrilledCheese BTN Cn","GrilledCheese BTN Toasted","Gunplay","HELTERSKELTER","Harrington Bold","Harry P","Henny Penny","Holiday Springs BTN","HolidayPi BT","Hollywood Hills","Hot Mustard BTN","Hot Mustard BTN Poster","IMG Baby","Ice kingdom","IguanaLover BTN","Italic Outline Art","Jazz","JazzText","JazzTextExtended","Jokerman Alts LET","Jokerman LET","Kingthings Versalis","LA Headlights BTN","La Bamba LET","Lucida Blackletter","Luminari","Magic School One","Magic School Two","Marker Felt Wide","Master Of Break","Mekanik LET","Metamorphous","Monoton","Neon Lights","NewRocker","Nightclub BTN","Nightclub BTN Cn","Nightclub BTN UltraCn","Old Antic Decorative","Old Antic Outline","Old Antic Outline Shaded","Old English","PAINTSTROKE","PT Bold Stars","PUPPYLIKE","Parry Hotter","Party LET Plain:1.0","Phosphate Inline","Pirate","Pointedly Mad","Press Start 2P","Pricedown","Pricedown Bl","Razer Text Regular","SF Distant Galaxy","SF Distant Galaxy AltOutline","SF Distant Galaxy Alternate","SF Distant Galaxy Outline","SF Slapstick Comic","SF Slapstick Comic Bold","SF Slapstick Comic Bold Oblique","SF Slapstick Comic Oblique","SF Slapstick Comic Shaded","SF Slapstick Comic Shaded Oblique","Sacred Geometry","Sigmar","Simple Indust Shaded","Sneakerhead BTN","Sneakerhead BTN Condensed","Sneakerhead BTN Outline","Sneakerhead BTN Shadow","Sonic XBd BT","SonicCutThru Hv BT","Starliner BTN","Supernatural Knight","Tall Boy 3D","TanglewoodTales","Tarzan","Terminator Two","Titan One","True Lies","VNI-Shadow","Victorian LET","Virtual DJ","Western Bang Bang","Whimsy TT","Wolf in the City","Woodcut","X-Files","Year supply of fairy cakes","harlow solid","balonez fantasia","balonez fantasia br"],monospace:["Andale Mono","Bitstream Vera Sans Mono","Code2000","Consolas","Courier","Courier New","Courier New Baltic","Courier New CE","Courier New CYR","Courier New Cyr","Courier New Greek","Courier New TUR","DejaVu Sans Mono","Droid Sans Mono","Fira Code","Fira Mono","Fixed Miriam Transparent","Fixedsys","Letter Gothic Std","Liberation Mono","Lucida Console","Lucida Sans Typewriter","Miriam Fixed","Mitra Mono","Monaco","Monospac821 BT","Monotxt","Noto Mono","Noto Sans Mono CJK JP","Noto Sans Mono CJK KR","Noto Sans Mono CJK SC","Noto Sans Mono CJK TC","OCR A Extended","OCR A Std","OCR-A BT","OCR-B 10 BT","Osaka-Mono","Prestige Elite Std","Prestige Elite Std Bd","Roboto Mono","Terminal","Ubuntu Mono","WP Greek Courier","WP MultinationalA Courier","WP MultinationalB Courier","monospace",".VnCourier",".VnCourier New",".VnCourier NewH","Courier 10 Pitch","FreeMono","Monospace","Nimbus Mono L","Prestige Elite Std Bold","Teletype","Tlwg Typist","TlwgMono","TlwgTypewriter","WenQuanYi Micro Hei Mono","12x10","Andale Mono IPA","Anonymice Powerline","Anonymice Powerline Bold","Anonymice Powerline Bold Italic","Anonymice Powerline Italic","Arial monospaced for SAP","Consolas Bold","Consolas Bold Italic","Consolas Italic","Courier Bold","Courier Bold Oblique","Courier MM Screenwriter","Courier MM Screenwriter Bold","Courier MM Screenwriter BoldIt","Courier MM Screenwriter Italic","Courier New (Arabic)","Courier New Bold","Courier New Bold Italic","Courier New Italic","Courier Oblique","Courier Std","Courier10 BT","Cousine Bold Italic for Powerline","Cousine Bold for Powerline","Cousine Italic for Powerline","Cousine for Powerline","DV1-TTYogesh","DejaVu Sans Mono Bold Oblique for Powerline","DejaVu Sans Mono Bold for Powerline","DejaVu Sans Mono Oblique for Powerline","DejaVu Sans Mono for Powerline","Droid Sans Mono Dotted for Powerline","Droid Sans Mono Slashed for Powerline","Droid Sans Mono for Powerline","Fira Mono Bold for Powerline","Fira Mono Medium for Powerline","Hack Bold","Hack Bold Italic","Hack Italic","Hack Regular","IBM3270","Inconsolata","Inconsolata for Powerline","Inconsolata-dz for Powerline","Inconsolata-g for Powerline","Latin Modern Mono","Latin Modern Mono Caps","Latin Modern Mono Light","Latin Modern Mono Light Cond","Latin Modern Mono Prop","Latin Modern Mono Prop Light","Latin Modern Mono Slanted","Letter Gothic Std Bold","Letter Gothic Std Bold Slanted","Letter Gothic Std Medium","Letter Gothic Std Slanted","Linux Libertine Mono O","Literation Mono Powerline","Literation Mono Powerline Bold","Literation Mono Powerline Bold Italic","Literation Mono Powerline Italic","Lucida Sans Typewriter Bold","Lucida Sans Typewriter Bold Oblique","Lucida Sans Typewriter Oblique","Lucida Sans Typewriter Regular","Math1Mono","Math2Mono","Math3Mono","Math4Mono","Math5Mono","Menlo Bold","Menlo Bold Italic","Menlo Italic","Menlo Regular","Meslo LG L DZ Regular for Powerline","Meslo LG L Regular for Powerline","Meslo LG M DZ Regular for Powerline","Meslo LG M Regular for Powerline","Meslo LG S DZ Regular for Powerline","Meslo LG S Regular for Powerline","New Renex Terminal","OCR B MT","OCR-A II","OCRA","PT Mono","PT Mono Bold","QuickType II Mono","Roboto Mono Bold Italic for Powerline","Roboto Mono Bold for Powerline","Roboto Mono Italic for Powerline","Roboto Mono Light Italic for Powerline","Roboto Mono Light for Powerline","Roboto Mono Medium Italic for Powerline","Roboto Mono Medium for Powerline","Roboto Mono Thin Italic for Powerline","Roboto Mono Thin for Powerline","Roboto Mono for Powerline","Rocket Arabic Fixed","Roman Mono","SAS Monospace","SAS Monospace Bold","SWMono","Sauce Code Powerline","Sauce Code Powerline Black","Sauce Code Powerline Bold","Sauce Code Powerline ExtraLight","Sauce Code Powerline Light","Sauce Code Powerline Semibold","Source Code Pro","Source Code Pro Black","Source Code Pro Bold","Source Code Pro ExtraLight","Source Code Pro Light","Source Code Pro Medium","Source Code Pro Semibold","Special Elite","SymbolMono BT","TeX Gyre Cursor","Terminal Greek 737 (437G)","Terminal Greek 869","Tlwg Mono","Tlwg Typewriter","Typewriter","Typewriter Bold","Ubuntu Mono derivative Powerline","Ubuntu Mono derivative Powerline Bold","Ubuntu Mono derivative Powerline Bold Italic","Ubuntu Mono derivative Powerline Italic","WP BoxDrawing","courierps","cmtt10","cmtt12","cmtt8","cmtt9","cmvtt10","mono 07","mono 08","monoeger 05","monofur bold for Powerline","monofur for Powerline","monofur italic for Powerline","monooge 05","saxMono"],emoji:["Apple Color Emoji","Noto Color Emoji","Noto Emoji","Segoe UI Emoji","Twemoji Mozilla"],"ui-rounded":["Arial Rounded MT Bold","Nova Round","SF Compact Rounded","SF Compact Rounded Black","SF Compact Rounded Bold","SF Compact Rounded Heavy","SF Compact Rounded Light","SF Compact Rounded Medium","SF Compact Rounded Regular","SF Compact Rounded Semibold","SF Compact Rounded Thin","SF Compact Rounded Ultralight","Tsukushi B Round Gothic Regular","VAGRounded BT","VNI-Arial Rounded"],math:["Asana Math","Cambria Math","DejaVu Math TeX Gyre","Latin Modern Math","Libertinus Math","STIX Math","STIX Two Math","STIXGeneral","Symath","TeX Gyre Bonum Math","TeX Gyre Pagella Math","TeX Gyre Termes Math","UniversalMath1 BT","XITS Math","Euclid Math One","Euclid Math One Bold","Euclid Math Two","Euclid Math Two Bold","Math1","Math2","Math3","Math4","Math5","STIX","STIXGeneral-Bold","STIXGeneral-BoldItalic","STIXGeneral-Italic","STIXGeneral-Regular","STIXIntegralsD","STIXIntegralsD-Bold","STIXIntegralsD-Regular","STIXIntegralsSm","STIXIntegralsSm-Bold","STIXIntegralsSm-Regular","STIXIntegralsUp","STIXIntegralsUp-Bold","STIXIntegralsUp-Regular","STIXIntegralsUpD","STIXIntegralsUpD-Bold","STIXIntegralsUpD-Regular","STIXIntegralsUpSm","STIXIntegralsUpSm-Bold","STIXIntegralsUpSm-Regular","STIXNonUnicode","STIXNonUnicode-Bold","STIXNonUnicode-BoldItalic","STIXNonUnicode-Italic","STIXNonUnicode-Regular","STIXSizeFiveSym","STIXSizeFiveSym-Regular","STIXSizeFourSym","STIXSizeFourSym-Bold","STIXSizeFourSym-Regular","STIXSizeOneSym","STIXSizeOneSym-Bold","STIXSizeOneSym-Regular","STIXSizeThreeSym","STIXSizeThreeSym-Bold","STIXSizeThreeSym-Regular","STIXSizeTwoSym","STIXSizeTwoSym-Bold","STIXSizeTwoSym-Regular","STIXVariants","STIXVariants-Bold","STIXVariants-Regular","SWMath","TG Pagella Math","TG Termes Math","WP MathA","WP MathB","WP MathExtendedA","WP MathExtendedB","cmex10","cmex7","cmex8","cmex9","cmmi10","cmmi12","cmmi5","cmmi6","cmmi7","cmmi8","cmmi9","cmmib10","cmmib6","cmmib7","cmmib8","cmmib9","cmsy10","cmsy10orig","cmsy5","cmsy6","cmsy7","cmsy8","cmsy9","msam10","msam5","msam6","msam7","msam8","msam9","msbm10","msbm5","msbm6","msbm7","msbm8","msbm9"],"system-ui":["Droid Naskh System UI","Khmer OS System","San Francisco","System","MS Dialog","MS SystemEx","Segoe MDL2 Assets","System Font","System Font Black","System Font Bold","System Font Bold G1","System Font Bold G2","System Font Bold G3","System Font Bold Italic","System Font Bold Italic G1","System Font Bold Italic G2","System Font Bold Italic G3","System Font Heavy","System Font Heavy Italic","System Font Italic","System Font Italic G1","System Font Italic G2","System Font Italic G3","System Font Light","System Font Light Italic","System Font Medium","System Font Medium Italic","System Font Medium Italic P4","System Font Medium P4","System Font Regular","System Font Regular G1","System Font Regular G2","System Font Regular G3","System Font Semibold","System Font Semibold Italic","System Font Thin","System Font UltraLight","System Font Ultralight"],"ui-serif":["Droid Naskh UI"],"ui-sans-serif":["Khmer UI","Lao UI","MS PGothic","MS UI Gothic","Meiryo UI","Microsoft JhengHei","Microsoft JhengHei UI","Microsoft YaHei","Microsoft YaHei UI","Nirmala UI","STHeiti","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Semilight","Segoe UI Symbol","Skype UI Symbol","Leelawadee UI","Leelawadee UI Semilight","Lucida Grande Bold","Microsoft JhengHei Light","Microsoft JhengHei UI Light","Microsoft YaHei Light","Microsoft YaHei UI Light","Nirmala UI Semilight","Segoe Condensed","Segoe UI Black","Ume UI Gothic","Ume UI Gothic O5","Apple SD Gothic Neo SemiBold","Heiti SC Light","Heiti TC Light","MS Dialog Light","Malgun Gothic Semilight","Meiryo Bold Italic","Microsoft MHei","Noto Sans Devanagari UI","Noto Sans Lao UI","Noto Sans Tamil UI","Noto Sans Thai UI","Noto Sans UI","PingFang HK","PingFang HK Light","PingFang HK Medium","PingFang HK Regular","PingFang HK Semibold","PingFang HK Thin","PingFang HK Ultralight","PingFang SC Light","PingFang SC Regular","PingFang SC Semibold","PingFang SC Thin","PingFang SC Ultralight","PingFang TC Light","PingFang TC Medium","PingFang TC Regular","PingFang TC Semibold","PingFang TC Thin","PingFang TC Ultralight","Segoe UI Historic","Segoe WP","Segoe WP Black","Segoe WP Light","Segoe WP SemiLight","Segoe WP Semibold","Yu Gothic Medium","Yu Gothic UI","Yu Gothic UI Light","Yu Gothic UI Semibold","Yu Gothic UI Semilight","Yuanti SC Bold","Yuanti SC Light","Yuanti SC Regular","Yuanti TC Light"],unknown:["TeamViewer10","TeamViewer11","TeamViewer12","TeamViewer13","TeamViewer7","TeamViewer8","TeamViewer9",".Mondulkiri U GR 1.5","AIGDT","AMGDT","AcadEref","Adobe Arabic","Adobe Devanagari","Adobe Fan Heiti Std B","Akaash","Akshar Unicode","AksharUnicode","Al Bayan","AmdtSymbols","AngsanaUPC","AnjaliOldLipi","Arabic Transparent","Arabic Typesetting","Ayuthaya","BJCree Uni","BPG Classic 99U","BPG Paata Khutsuri U","Bangla MN","Bangla Sangam MN","Bernard Condensed","Bookshelf Symbol 7","Britannic Bold","BrowalliaUPC","CDT Khmer","Carolina","CityBlueprint","CommercialPi BT","Complex","Cooper Black","Cooper Std Black","Copyist","CountryBlueprint","David","DecoType Naskh","Decor","Devanagari MT","Devanagari Sangam MN","DilleniaUPC","DokChampa","Droid Naskh Shift","Droid Naskh Shift Alt","Eccentric Std","Ekushey Punarbhaba","Estrangelo Edessa","Ethiopia Jiret","EucrosiaUPC","FTEasci1","FTEasci1-f","FTEasci2","FTEasci2-f","FTEbaudo","FTEbaudo-f","FTEebcd1","FTEebcd1-f","FTEebcd2","FTEebcd2-f","FTEspec","FTEspec-f","FreesiaUPC","GDT","GENISO","GF Zemen Unicode","Gautami","GreekC","GreekS","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MT","Guttman Yad","ISOCP","ISOCP2","ISOCP3","ISOCT","ISOCT2","ISOCT3","ISOCTEUR","InaiMathi","IrisUPC","Iskoola Pota","Italic","ItalicC","ItalicT","Juice ITC","Kailasa","Kannada MN","Kannada Sangam MN","Kedage","Kefa","Kh-SrokKhleang","Khmer MN","Khmer OS","Khmer OS Fasthand","Khmer OS Freehand","Khmer OS Metal Chrieng","Khmer OS Muol","Khmer Sangam MN","KodchiangUPC","Ktav","KufiStandardGK","Leelawadee","LiHei Pro","Likhan","LilyUPC","Lithos Pro Regular","MS Outlook","MS Reference Specialty","fakefont2","MT Extra","Malayalam MN","Malayalam Sangam MN","Mangal","Marlett","Mesquite Std","Microsoft Himalaya","Microsoft New Tai Lue","Microsoft Tai Le","Microsoft Uighur","Microsoft Yi Baiti","MingLiU_HKSCS-ExtB","Miriam","Modern","Mongolian Baiti","MoolBoran","MotoyaLCedar","MotoyaLMaru","Mshtakan","Myriad Arabic","Myriad Hebrew","Niagara Engraved","Niagara Solid","Noto Kufi Arabic ","Onyx","OpenSymbol","Orator Std Slanted","Oriya MN","OskiDakelh","PMingLiU","PMingLiU-ExtB","Papyrus","PhnomPenh OT","Pigiarniq","Pothana","Power Clear","Power Green","Power Green Narrow","Power Green Small","Power Red and Blue","Power Red and Blue Intl","Power Red and Green","Proxy 1","Proxy 2","Proxy 3","Proxy 4","Proxy 5","Proxy 6","Proxy 7","Proxy 8","Proxy 9","Raavi","Rachana_w01","Raghindi","Rod","RomanC","RomanD","RomanS","RomanT","Saab","Sakkal Majalla","Shonar Bangla","Shruti","SimHei","Simplex","Simplified Arabic","Simplified Arabic Fixed","Sinhala Sangam MN","Small Fonts","SmartGothic","Stencil","Stencil Std","Sun-ExtA","Syastro","Symap","Symbol","Symeteo","Symusic","TITUS Cyberbit Basic","TechnicLite","Tekton Pro","Tekton Pro Cond","Tekton Pro Ext","Telugu MN","Telugu Sangam MN","ThoolikaUnicode","Tibetan Machine Uni","Traditional Arabic","Tunga","Txt","Uqammaq","Utsaah","Vani","Visual Geez Unicode","Visual Geez Unicode Agazian","Visual Geez Unicode Title","Vrinda","WP Arabic Sihafa","WP ArabicScript Sihafa","WP CyrillicA","WP CyrillicB","WP Hebrew David","WST_Czec","WST_Engl","WST_Fren","WST_Germ","WST_Ital","WST_Span","WST_Swed","Webdings","Wingdings","Wingdings 2","Wingdings 3","ZWAdobeF","Zuzumbo","ori1Uni",".Vn3DH",".VnArabia",".VnArabiaH",".VnAristoteH",".VnBahamasB",".VnBahamasBH",".VnBlack",".VnBlackH",".VnCooper",".VnCooperH",".VnExotic",".VnExoticH",".VnFree",".VnFreeH",".VnKoala",".VnKoalaH",".VnLincoln",".VnLincolnH",".VnLinus",".VnLinusH",".VnMemorandum",".VnMemorandumH",".VnPark",".VnParkH",".VnPresent",".VnPresentH",".VnRevue",".VnRevueH",".VnShelley Allegro",".VnSouthern",".VnSouthernH",".VnStamp",".VnTeknical",".VnTeknicalH",".VnTifani Heavy",".VnTifani HeavyH",".VnTime",".VnTimeH",".VnUniverse",".VnVogue",".VnVogueH","1942 report","36 days ago BRK","36 days ago Thick BRK","A bite","A.Lewis","AR BLANCA","AR CARTER","AR CENA","AR DECODE","AR DESTINE","AR ESSENCE","AR JULIAN","AT*Fujiyama","AT*Fujiyama Black","AT*Fujiyama Extra Bold","AT*Fujiyama Light","AT*Fujiyama2","Aarcover Regular","Aardvark Cafe","AardvarkBold","Abduction2002","Aberration","Abscissa Italic","Abstrakt","AddJazz","Adobe Arabic Bold","Adobe Arabic Bold Italic","Adobe Arabic Italic","Adobe Fan Heiti Std","Adobe Hebrew Bold","Adobe Hebrew Bold Italic","Adobe Kaiti Std","Aerovias Brasil NF","Aftermath","Aftershock Debris","Aftershock Debris CondSolid","Aftershock Debris CondSolid Italic","Aftershock Debris Condensed","Aftershock Debris Condensed Italic","Aftershock Debris Italic","Aftershock Debris Solid","Aftershock Debris Solid Italic","Ahnberg","Al Bayan Bold","Al Bayan Plain","Aldhabi","Alison Regular","All Caps","Allegro","Alligator Puree","Almonte Snow","AmerType Md BT","Amerika","Amerika Alternates","Analgesics","Angioma AOE","Angstrom","Ann Regular","Apple Braille","Apple Symbols","Aquaduct Plain","Aquaduct Reverse Italic","Aramis Italic","Arctic","Argos MF","Arrobatherapy","Arrus BT","Asenine","Asenine Wide","Atlas","Aurora Cn BT","Baghdad","Bazooka","BinnerD","Blackletter686 BT","BlairMdITC TT","Dingbats","Garuda","KacstArt","KacstBook","KacstDecorative","KacstDigital","KacstFarsi","KacstLetter","KacstNaskh","KacstOffice","KacstOne","KacstPen","KacstPoster","KacstQurn","KacstScreen","KacstTitle","KacstTitleL","Kinnari","Lohit Bengali","Lohit Gujarati","Lohit Hindi","Lohit Punjabi","Lohit Tamil","Mallige","Meera","Myanmar Text","Nadeem","Nina","Onyx BT","Osaka","Papyrus Condensed","ParkAvenue BT","Pegasus","Phetsarath OT","Pickwick","PilGi","PortagoITC TT","Pothana2000","Pythagoras","Raanana","Rachana","Rekha","Ribbon131 Bd BT","SWGamekeys MT","SWMacro","Sanpya","Sathu","Sceptre","SchoolHouse Printed A","Segoe Marker","Sherwood","Signboard","Silom","Socket","Staccato222 BT","Standard Symbols L","Steamer","Storybook","Subway","Synchro LET","TeX","Technical","Tekton Pro Bold","Tekton Pro BoldCond","Tekton Pro BoldExt","Tekton Pro BoldObl","TimeA1","Tristan","Tubular","TypoUpright BT","Umpush","UnDinaru","UnGraphic","UnGungseo","UnPilgi","Untitled1","Urdu Typesetting","VNI Cambodia","VNI Greece","VNI Laos","VNI Russia","VNI-Allegie","VNI-Aptima","VNI-Ariston","VNI-Auchon","VNI-Avo","VNI-Awchon","VNI-Aztek","VNI-Bandit","VNI-Baybuom","VNI-Book","VNI-Briquet","VNI-Broad","VNI-Butlong","VNI-Centur","VNI-Commerce","VNI-Coronet","VNI-DOS Sample Font ","VNI-Diudang","VNI-Dom","VNI-Duff","VNI-Dur","VNI-Fato","VNI-Franko","VNI-Free","VNI-HLThuphap","VNI-Hobo","VNI-Internet Mail","VNI-Jamai","VNI-Juni","VNI-Korin","VNI-Kun","VNI-Linus","VNI-Lithos","VNI-Maria","VNI-Meli","VNI-Murray","VNI-Netbut","VNI-Nhatban","VNI-OngDoHL","VNI-Park","VNI-Present","VNI-Revue","VNI-Souvir","VNI-Tekon","VNI-Thanhcao","VNI-Thufap1","VNI-Thufap2","VNI-Thufap3","VNI-Thufapfan","VNI-Top","VNI-Truck","VNI-Tubes","VNI-Univer","VNI-Vari","VNI-Viettay","VNI-Vivi","VNI-WIN Sample Font","VNI-Whimsy","VNI-Yahoo","VNI-Zap","VTC Tribal Regular","Vagabond","Vemana2000","Vinhan","Waree","Xerox Malfunction BRK","Zapf Dingbats","ZapfEllipt BT","akaDora","amaze","balthazar","bart","bimini","gargi","mry_KacstQurn","olddreadfulno7 bt","pump demi bold let","puppylike","roland","signs normal","simplex","symap","symbol","technic","terk","trendy","txt","vivian","webdings","western","wingdings"," 20","(AH) Manal Black","0","01 Digit","04b","1","18030","19","3 of 9 Barcode","36p Kana Demibold","36p Kana Medium","3ds Light","51","52","53","54","55","56","57","58","63","64","65","66","67","68","8514oem","8Pin Matrix","A Sensible Armadillo","ABIGAIL","ABSALOM","ADMUI2Lg","ADMUI2Sm","ADMUI3Lg","ADMUI3Sm","AG","AGA Arabesque","AGA Arabesque Desktop","ANDROID ROBOT","ARDS1","AS-TTDurga","AV-Font-Ben1","AV-Font-Guj1","AV-Font-Hin1","AV-Font-Kan1","AV-Font-Mal1","AV-Font-Sin","AV-Font-Sin1","AV-Font-Symbol","AV-Font-Tam1","AV-Web-Hin1","AV-Web-Tam1","AV-Web-Tel1","AVGmdBU","AcmeFont","Adamsky SF","Admisi Display SSi","Adobe Arabic Regular","Adobe Devanagari Bold","Adobe Devanagari Bold Italic","Adobe Devanagari Italic","Adobe Gurmukhi","Adobe Gurmukhi Bold","Adobe Hebrew Regular","Adobe Pi Std","Al Nile","Al Nile Bold","Al Tarikh","Al Tarikh Regular","AlekyaBold","Alfredo","Alibi","Amethyst","Amudham","AnandapatraCMJ","Ancuu","Andong","Angiang","AnticFont","Apple Braille Outline 6 Dot","Apple Braille Outline 8 Dot","Apple Braille Pinpoint 6 Dot","Apple Braille Pinpoint 8 Dot","Archicoco","Archive","ArhialkhanMJ","ArhialkhanOMJ","Arkhip","Ashwariya","Asimov","AtraiMJ","AtraiOMJ","Atzur","Autumn","Avanti","B095","BATAVIA","BN Jinx","BN Machine","BN-TTDurga","BOUTON International Symbols","BRADDON","Baamini","Baclieu","Baghdad Regular","Bahiana","Baiduan Number","Balthazar","BaluBold","Bamini","Bangkok Cirilica","Bangla MN Bold","Bangla Sangam MN Bold","Baoli SC","Baoli SC Regular","Baron Neue Black Italic","Baron Neue Bold Italic","Barrio","Bastion","Beatnik SF","Beirut","Beirut Regular","Belfast Heavy SF","Belwe Cn BT","BhagirathiMJ","BhagirathiOMJ","BhairabMJ","BhairabOMJ","Bhuma","Bienhoa","Bifurk","Binhdinh","Binhlong","Bobcat","Bodoni Ornaments","Bold Italic Art","BolsterBold","BongshaiMJ","BongshaiOMJ","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","BorakMJ","BorakOMJ","Borealis","BorhalMJ","BrahmaputraMJ","Brandish","BriLliant","Brussels","BuiltTitlingRg-Bold","BuiltTitlingRg-BoldItalic","BuiltTitlingRg-Regular","BurigangaKamalaOMJ","BurigangaMJ","BurigangaOMJ","BurigangaSushreeMJ","BurigangaSushreeOMJ","C-Medium","C-MediumHWL","CAMPBELL","CASMIRA","CATIA Symbols","CHANL","CL","CLARENCE","CSD16","CSongGB18030C-LightHWL","CZEC","Calvin","Camau","Camranh","Canter Bold","Canter Bold Strips","Canter Light","Canter Outline","Cantho","Capitals","Carbon Block","Chalkboard","Chalkboard Bold","Chalkboard SE","Chalkboard SE Bold","Chalkboard SE Light","ChandrabatiMJ","ChandrabatiMatraMJ","ChandrabatiMatraOMJ","ChandrabatiOMJ","ChandrabatiSushreeMJ","Chess Alpha","Chess Berlin","Chess Marroquin","Chess Maya","Chess Merida","Chinyen","Chipotle","ChitraMJ","ChitraOMJ","ChitraSMJ","ChondanaMJ","ChondanaOMJ","Clubland","Code39AzaleaNarrow1","Code39AzaleaNarrow2","Code39AzaleaNarrow3","Code39AzaleaRegular1","Code39AzaleaRegular2","Code39AzaleaRegular3","Code39AzaleaWide1","Code39AzaleaWide2","Code39AzaleaWide3","Colbert","ConcursoItalian BTN","ConcursoItalian BTN Wide","Cooper Std Black Italic","CopprplGoth BT","Cortoba","Crystal","Cuulong","Czec","DFMaruGothic-Md","DS Crystal","DV-TTYogesh","DYMO Symbols","DYMObvba","Daclac","Damascus","Damascus Regular","David Transparent","DecoType Naskh Extensions","DecoType Naskh Regular","DecoType Naskh Special","DecoType Naskh Swashes","DecoType Naskh Variants","DecoType Thuluth","Deepa","Deepak","Deneane","Devanagari MT Bold","Devanagari Sangam MN Bold","DhakarchithiMJ","DhakarchithiOMJ","DhanshirhiMJ","DhanshirhiOMJ","DholeshwariMJ","DholeshwariOMJ","DhonooMJ","DhonooOMJ","DhorolaMJ","DhorolaOMJ","Diavlo Black","Diavlo Bold","Diavlo Light","Diavlo Medium","DigifaceWide","Digifit","Digital Readout Upright","Divya","Diwan Kufi","Diwan Kufi Regular","Diwan Thuluth","Diwan Thuluth Regular","Diwani Bent","Diwani Letter","Diwani Outline Shaded","Diwani Simple Outline","Diwani Simple Outline 2","Diwani Simple Striped","Dollar","Dot","Drivebye 1","Drivebye 2","Droid Arabic Naskh","Ducmy","DynameBlackSSK","Dyuthi","ELANGO-TML-Panchali-Normal","ELEGANCE","ELLIS","ENGL","EQUIS","ESTO","EXCESS","ElegantIcons","Embassy BT","Emmett","Engl","EngraverFontExtras","Enliven","Euclid Bold Italic","Euclid Extra","Euclid Italic","Euclid Symbol","Euclid Symbol Bold","Euclid Symbol Bold Italic","Euclid Symbol Italic","Euphemia UCAS Italic","Euro Sign","FELIZ","FML-Akhila","FML-Indulekha","FML-IndulekhaHeavy","FML-Karthika","FML-Leela","FML-LeelaHeavy","FML-Mohini","FML-Nanditha","FML-Padmanabha","FML-Revathi","FML-Sruthy","FML-TTAathira","FML-TTAmbili","FML-TTAnakha","FML-TTAnjali","FML-TTAparna","FML-TTAshtamudi","FML-TTAshtamudiExBold","FML-TTAswathi","FML-TTAtchu","FML-TTAyilyamBold","FML-TTBeckalBold","FML-TTBhavana","FML-TTChandrika","FML-TTChithira","FML-TTChithiraHeavy","FML-TTDevika","FML-TTGauri","FML-TTGauriHeavy","FML-TTGeethika","FML-TTGopika","FML-TTGuruvayur","FML-TTIndulekha","FML-TTIndulekhaHeavy","FML-TTJaya","FML-TTJyothy","FML-TTJyotsna","FML-TTKala","FML-TTKamini","FML-TTKanika","FML-TTKarthika","FML-TTKaumudi","FML-TTKeerthi","FML-TTLeela","FML-TTLeelaHeavy","FML-TTMadhaviExBold","FML-TTMalavika","FML-TTMangalaExBold","FML-TTMayoori","FML-TTNalini","FML-TTNandini","FML-TTNanditha","FML-TTNarmadaExBold","FML-TTNila","FML-TTOnam","FML-TTPeriyar","FML-TTPooram","FML-TTPoornima","FML-TTRavivarma","FML-TTRevathi","FML-TTRohini","FML-TTSabari","FML-TTSankara","FML-TTSarada","FML-TTSruthy","FML-TTSugatha","FML-TTSuparna","FML-TTSurya","FML-TTSwathyBold","FML-TTThakazhi","FML-TTTheyyam","FML-TTThiruvathira","FML-TTThunchan","FML-TTVaisali","FML-TTVarsha","FML-TTVeenaHeavy","FML-TTVinay","FML-TTVisakham","FML-TTVishu","FML-TTYashasri","FMLTTAathira","FREH","FZLanTingHeiS-UL-GB","Farah Regular","Farisi","Farisi Regular","Farsi Simple Bold","Farsi Simple Outline","Fences","Ferro Rosso","Finale AlphaNotes","Finale Mallets","Finale Numerics","Finale Percussion","FontAwesome","FordLineDraw","Fren","GB18030 Bitmap","GENUINE","GJ-TTAvantika","GLYPHICONS Halflings","GROBOLD","GaneshBlack","GaneshBold","GaneshExtraBold","GaneshMedium","GaneshNarrow","GaneshThin","GangaMJ","GangaOMJ","GangaSagarMJ","Gauge","Gauge Heavy","Gayathri","Gazzarelli","Gen W01","Germ","GhorautraMJ","GhorautraOMJ","Giadinh","Giolinh","Glockenspiel","Gocong","GoomtiMJ","GoraiMJ","GoraiOMJ","Gotham Light Italic","Gravity","Gridnik","GrilledCheese BTN Wide Blk","Gujarati MT Bold","Gujarati Sangam MN Bold","GungSeo","GungSeo Regular","Gurmukhi MN","Gurmukhi MN Bold","Gurmukhi Sangam MN","Gurmukhi Sangam MN Bold","HANA","HERMAN","HGHangle","HGHeiseiKakugothictaiW9","HGHeiseiMinchotaiW3","HGHeiseiMinchotaiW9","HGPHeiseiKakugothictaiW9","HGPHeiseiMinchotaiW3","HGPHeiseiMinchotaiW9","HGSHeiseiKakugothictaiW3","HGSHeiseiKakugothictaiW5","HGSHeiseiKakugothictaiW9","HGSHeiseiMinchotaiW9","HKSCS","HKSCS-ExtB","HP PSG","HUNTSON","Hadong","HaldaMJ","HaldaOMJ","Halong","Hannotate SC","Hannotate SC Bold","Hannotate SC Regular","Hannotate TC","Hannotate TC Regular","Hansen","HanziPen SC Bold","HanziPen TC Bold","HanziPen TC Regular","HariSree","Harvest","HarvestItal","Haxton Logos TT","HeadLineA","HeadLineA Regular","Heather BTN","Heavy","Heavy Heap","Herculanum","Highlight LET","Hobo Std Medium","Hoian","Hombre","HooglyMJ","HooglyOMJ","HucklebuckJF","Hue","IDAutomationPDF417n2","IDAutomationPDF417n3","IDAutomationPDF417n4","IDAutomationPDF417n5","IMG Extreme","IMG Seasons","IMG Symbols","IMG Travel","INSPECTIONXPERT GDT FRAMES","INSPECTIONXPERT GDT NOFRMS","IRIS","ISABELLE","ITAN","ITF Devanagari","ITF Devanagari Bold","ITF Devanagari Book","ITF Devanagari Demi","ITF Devanagari Light","ITF Devanagari Marathi","ITF Devanagari Marathi Bold","ITF Devanagari Marathi Book","ITF Devanagari Marathi Demi","ITF Devanagari Marathi Light","ITF Devanagari Marathi Medium","ITF Devanagari Medium","IchamotiMJ","IchamotiOMJ","Impregnable Personal Use Only","Incised901 BdCn BT","Incised901 Ct BT","Incised901 Nd BT","Incised901 NdIt BT","Induction","Industrial736 BT","Ital","JLS Space GothicC  NC","JLS Space GothicR NC","JUSTICE","JaJaDiMJ","JaJaDiOMJ","Jameel Noori Nastaleeq","Janaranjani","Jayanthi","JazzCord","JazzPerc","JomunaMJ","JugantorMJ","JumunaOMJ","Jwala","KB Vibrocentric","KN-TTUma","KabinLightDB Bold","Kailasa Bold","Kailasa Regular","Kalakaumudi","KalegongaMJ","KalegongaOMJ","KalindiMJ","KalindiOMJ","KalindiSMJ","Kalpurush","Kalpurush ANSI","Kanalisirung","KanchanMJ","KanchanOMJ","Kannada MN Bold","Kannada Sangam MN Bold","KarnaphuliMJ","KarnaphuliOMJ","KasseFLF","KasseFLF-Bold","Kefa Bold","Kefa Regular","Kerala","Khalid Art bold","Khanhoa","Khmer MN Bold","KievitPro-Regular","Kiran","Klee","Klee Medium","Kohinoor Bangla Bold","Kohinoor Bangla Light","Kohinoor Bangla Medium","Kohinoor Bangla Semibold","Kohinoor Devanagari","Kohinoor Devanagari Bold","Kohinoor Devanagari Demi","Kohinoor Devanagari Light","Kohinoor Devanagari Medium","Kohinoor Devanagari Regular","Kohinoor Devanagari Semibold","Kohinoor Telugu","Kohinoor Telugu Bold","Kohinoor Telugu Light","Kohinoor Telugu Medium","Kohinoor Telugu Semibold","Kokonor","Kokonor Regular","Krungthep","Kruti Astro","Kufi Extended Outline","Kufi Outline Shaded","KufiStandardGK Regular","Kumudam","Kundli","Kundli English","LCD","LETT","LIVINGWELL","LKLUG","LT-ET-Ramya","LT-TM-Barani","LT-TM-Lakshman","LTHYSZK","Laksaman","Lantinghei SC","Lantinghei SC Heavy","Lantinghei TC","Lantinghei TC Demibold","Lantinghei TC Extralight","Lantinghei TC Heavy","Lao MN","Lao MN Bold","Lao Sangam MN","Lapidary333 Blk BT","Latino Elongated LET Plain:1.0","Learning Curve Dashed Pro","Learning Curve Pro","Led Italic Font","Leitura Display Swashes","LetterOMatic!","Libel Suit","Libian SC","Libian SC Regular","Light","LightSC","Limousine","Lingoes Unicode","Linowrite","Lithos Pro","Lithos Pro Black","Logo3Mtt","Logo3Mv3tt","Lohit Devanagari","Luna Bar","MANDELA","MARKETPRO","MATTEROFFACT","MAXIMO","ML-IndulekhaHeavy","ML-NILA01","ML-NILA02","ML-NILA03","ML-NILA04","ML-NILA05","ML-NILA06","ML-NILA07","ML-TTAathira","ML-TTAmbili","ML-TTAnakha","ML-TTAnjali","ML-TTAparna","ML-TTAshtamudi","ML-TTAshtamudiExBold","ML-TTAswathi","ML-TTAtchu","ML-TTAyilyamBold","ML-TTBeckalBold","ML-TTBhavana","ML-TTChandrika","ML-TTChithira","ML-TTChithiraHeavy","ML-TTDevika","ML-TTGauri","ML-TTGauriHeavy","ML-TTGeethika","ML-TTGopika","ML-TTGuruvayur","ML-TTIndulekha","ML-TTIndulekhaHeavy","ML-TTJaya","ML-TTJyothy","ML-TTJyotsna","ML-TTKala","ML-TTKamini","ML-TTKanika","ML-TTKarthika","ML-TTKaumudi","ML-TTKeerthi","ML-TTLeela","ML-TTLeelaHeavy","ML-TTMadhaviExBold","ML-TTMalavika","ML-TTMangalaExBold","ML-TTMayoori","ML-TTNalini","ML-TTNandini","ML-TTNanditha","ML-TTNarmadaExBold","ML-TTNila","ML-TTOnam","ML-TTPeriyar","ML-TTPooram","ML-TTPoornima","ML-TTRavivarma","ML-TTRevathi","ML-TTRohini","ML-TTSabari","ML-TTSankara","ML-TTSarada","ML-TTSruthy","ML-TTSugatha","ML-TTSuparna","ML-TTSurya","ML-TTSwathyBold","ML-TTThakazhi","ML-TTTheyyam","ML-TTThiruvathira","ML-TTThunchan","ML-TTVaisali","ML-TTVarsha","ML-TTVeenaHeavy","ML-TTVinay","ML-TTVisakham","ML-TTVishu","ML-TTYashasri","ML1-TTAmbili","ML1-TTAswathi","ML1-TTIndulekha","MLB-TTAmbili","MLB-TTAswathi","MLB-TTIndulekha","MLU-Panini","MLW-TTKarthika","MMArrow","MMArrow Bold","MMArrow Bold Italic","MMArrow Italic","MMBinary","MMBinary Bold","MMBinary Bold Italic","MMBinary Italic","MMCenturyNew","MMCenturyNewRD","MMCenturyNewRD Bold","MMCenturyNewRD Bold Italic","MMCenturyNewRD Italic","MMCenturyOld","MMEtc","MMEtc Bold","MMEtc Bold Italic","MMEtc Italic","MMExtra","MMExtra Bold","MMExtra Bold Italic","MMExtra Italic","MMGreek","MMGreek Bold","MMGreek Bold Italic","MMGreek Italic","MMNegate","MMNegate Bold","MMNegate Bold Italic","MMNegate Italic","MMRelation","MMRelation Bold","MMRelation Bold Italic","MMRelation Italic","MMSchoolRD","MMSchoolRD Bold","MMSchoolRD Bold Italic","MMSchoolRD Italic","MMTextBook","MMTextBook Bold","MMTextBook Bold Italic","MMTextBookB","MMTextBookB Bold","MMTextBookB Bold Italic","MMVariable","MMVariable2","MMVariable2 Bold","MMVariableA","MMVariableA Bold","MMVariableB","MMVariableB Bold","MMVariableC","MMVariableC Bold","MMVariableD","MMVariableF","MMa Arrow","MMa Arrow Bold","MMa Arrow Bold Italic","MMa Arrow Italic","MMa Arrow S","MMa Arrow SS","MMa Binary","MMa Binary Bold","MMa Binary Bold Italic","MMa Binary Italic","MMa Binary S","MMa Binary SS","MMa CenturyKS","MMa CenturyKSS","MMa Etc","MMa Etc Bold","MMa Etc Bold Italic","MMa Etc Italic","MMa Etc S","MMa Etc SS","MMa Extra","MMa Extra Bold","MMa Extra Bold Italic","MMa Extra Italic","MMa Extra S","MMa Extra SS","MMa Fermat","MMa Fermat Bold","MMa Gauss","MMa Gauss Bold","MMa Greek","MMa Greek Bold","MMa Greek Bold Italic","MMa Greek Italic","MMa GreekS","MMa GreekS Italic","MMa GreekSS","MMa GreekSS Italic","MMa Negate","MMa Negate Bold","MMa Negate Bold Italic","MMa Negate Italic","MMa Negate S","MMa Negate SS","MMa Pascal","MMa Relation","MMa Relation Bold","MMa Relation Bold Italic","MMa Relation Italic","MMa Relation S","MMa Relation SS","MMa TextBook","MMa Variable","MMa Variable S","MMa Variable SS","MMa Variable2","MMa Variable2 Bold","MMa Variable2 S","MMa Variable2 SS","MMa VariableA","MMa VariableA Bold","MMa VariableA S","MMa VariableA SS","MMa VariableB","MMa VariableB Bold","MMa VariableB S","MMa VariableB SS","MMa VariableC","MMa VariableC Bold","MMa VariableC S","MMa VariableC SS","MMa VariableD","MMa VariableD Bold","MMa VariableD S","MMa VariableD SS","MMa VariableF","MMa VariableF Bold","MMa VariableF S","MS Reference 1","MS Reference 2","MT Extra Tiger","MYingHei","Mael","Maestro","Maestro Percussion","Maestro Wide","Maiden Orange","Malayalam MN Bold","Malayalam Sangam MN Bold","Manorly","Map Symbols","MapInfo Cartographic","Marion","Marquisette BTN","Marquisette BTN Lined","Mathilde","Mayence Premium","Medlin","MelodBold","Mesquite Std Medium","Miama","Microdot","Microsoft Tai Le Bold","Minisystem","Miriam Transparent","Mishafi","Mishafi Gold","Mishafi Gold Regular","Mishafi Regular","Ml","Modena printed","Modern No","Mona Lisa Solid ITC TT","Monotype Koufi","Monotype Sorts","Monotype Sorts 2","Monotype.com","Moon Flower Bold","Mshtakan Bold","Mshtakan BoldOblique","Mshtakan Oblique","Muna","Muna Black","Muna Regular","Myanmar MN","Myanmar MN Bold","Myanmar Sangam MN Bold","Mycalc","Myriad Arabic Italic","Myriad Hebrew Bold","Myriad Hebrew Bold Italic","Myriad Hebrew Italic","Mytho","NATURALBORN","NBP Informa FiveSix","NBP Informa FiveThree","NORMAL","Nadeem Regular","Nasalization","New Renex Special Graphics","Newton Phonetic ABBYY","Nixie One","NixieOneRegular","No Flash","Note this","Noteworthy Bold","Noteworthy Light","Noto Sans Cuneiform","Noto Sans Egyptian Hieroglyphs","Noto Sans Inscriptional Pahlavi","Noto Sans Inscriptional Parthian","Notram","Nova Cut","November","Nueva Std Bold Condensed Italic","OLIVEOIL","OPENCLASSIC","OR-TTSarala","Old Antic Bold","OldDreadfulNo7 BT","One Dance Bold","OpineHeavy","Opus","Opus Chords","Opus Figured Bass","Opus Figured Bass Extras","Opus Function Symbols","Opus Japanese Chords","Opus Metronome","Opus Note Names","Opus Ornaments","Opus Percussion","Opus PlainChords","Opus Roman Chords","Opus Special","Opus Special Extra","Orator Std Medium","Origin","Oriya MN Bold","Oriya Sangam MN Bold","PFFuelPro-Regular","PN-TTAmar","POLI","PR Celtic Narrow","PRETEXT","PT Bold Arch","PT Bold Broken","PT Bold Dusky","PT Bold Mirror","PT Separated Baloon","PT Simple Bold Ruled","Paralucent Bold","Paralucent Bold Italic","Paralucent Heavy","Paralucent Heavy Italic","Paralucent Light","Paralucent Light Italic","Paralucent Medium Italic","Parisian BT","ParvathiBold","ParvathiMedium","ParvathiThin","Pegypta","Penultimate","PenultimateLight","PenultimateLightItal","Phatdiem","Phosphate","Phosphate Solid","Photoshop Large","Photoshop Small","PhrasticMedium","PilGi Regular","PondAllRounder","PondFreeBoss","PondFreeMe","PondFreeZoo","Poplar Std Black","Praveen","Prema","Prisoner SF","Pujeeta","PujeetaNarrow","PujeetaSpecial","Pump Demi Bold LET","QTOptimum Regular","Qaskin Black Personal Use","Quangngai","QuickType II","QuickType II Pi","Quinhon","QuiverItal","QumpellkaNo12","RADAGUND","RUMA","Rachgia","Radha","RadhaBold","RaghuMalayalam","Raisin des Sables","Rakesly Bk","Rakesly El","Rakesly Rg","Rakesly Ul","Razer Header Light","Razer Header Regular","Razer Header Regular Oblique","Realvirtue","Reginet","Reswysokr","Rod Transparent","Roland","RowdyHeavy","Rumburak","Rupee Foradian","SAF","SAPDings","SAPGUI-Icons","SAPIcons","SC","SD-TTSurekh","SERB","SF Movie Poster","SHELMAN","SOLIDWORKS GDT","SPAN","STHupo","STXinwei","SWAstro","SWComp","SWED","SWGDT","SWGothe","SWGrekc","SWGreks","SWIsop1","SWIsop2","SWIsop3","SWIsot1","SWIsot2","SWIsot3","SWItal","SWItalc","SWItalt","SWLink","SWMap","SWMeteo","SWMusic","SWRomnc","SWRomnd","SWRomnt","SWScrpc","SWSimp","SWTOR Trajan","SWTxt","Sabrina","SaiEmbed","SaiIndira","SaiMeera","SaiSai","SaiVrishin","Saint Andrew des Kiwis","Salilam","Salina","Samathwa","SamsungImagination","Sana","Sana Regular","Sanskrit","Sanskrit New","Sasfont","Seagull APL","Selena","SemiBold","Shree Devanagari 714","Shree Devanagari 714 Bold","Shree Devanagari 714 Bold Italic","Shree Devanagari 714 Italic","Shree-Kan-0853","Shree-Mal-0502","Shree-Tel-0900","Silent Reaction","Simple Bold Jut Out","Simple Indust Outline","Simple Outline Pat","Sinhala MN Bold","Sinhala Sangam MN Bold","Six Caps","Siyam Rupali","Siyam Rupali ANSI","Sketch Block","Sketch Match","Sketch Rockwell","Skinny","Smarty Pants BTN","Smokum","Smooth","Sniglet","Snowdrift","Sosa Regular","Space Bd BT","Span","Splash","St Marie Thin","Stencil Std Bold","Stephen","Steppes TT","Suruma","SutonnyMJ","SutonnyOMJ","Swed","Symbol MT","Symbol Neu for Powerline","Symbol Tiger","Symbol Tiger Expert","SymbolProp BT","Symbola","TAB","TAC-Barathi","TAC-Kabilar","TAC-Kambar","TAC-Valluvar","TAM","TAM-Kavi","TAM-Shree800","TAMElango","TAMILFIX","TAMILNET","TAMLKamban","TAU-Barathi","TAU-Kabilar","TAU-Kambar","TAU-Kaveri","TAU-Valluvar","TL-TTHemalatha","TLArabic","TLPashto","TLUrdu","TM-TTValluvar","TMBW-TTValluvar","TRENDY","TRIAL","TSCu","TURK","Tall Boy West","Tamburo","Tamil MN","Tamil MN Bold","Tamil Sangam MN","Tamil Sangam MN Bold","Tamil-Aiswarya","Teen","Tekton Pro Bold Condensed","Tekton Pro Bold Extended","Tekton Pro Bold Oblique","Tele-Marines","Telugu MN Bold","Telugu Sangam MN Bold","Tera Special","Terminator Real NFI","TextilePiEF","Thanhoa","Throw My Hands Up in the Air","Tiger","Tiger Expert","Timeless","Toledo","TtsNote","Tuyenduc","Type Embellishments One LET Embellishments One LET Plain:1.0","Ultra","UnitedStates","Unknown Caller BTN SC","Urdu Naskh Asiatype","Urvasi","Uttara","VANAVIL-Avvaiyar","VISCII Sample Font","VN-NTime","VNI Aptima","VNI-Algerian","VNI-Bazooka","VNI-Boston Black","VNI-Bragga","VNI-Colonna","VNI-DOS Sample Font","VNI-DesdemonaU","VNI-Fillmore","VNI-GlabXb","VNI-Harrington","VNI-Heather","VNI-Lydi","VNI-ShellaL","VNI-Slogan","VNI-StageCoach","VNI-Standout","VNI-StencilU","VNI-Stylus","VNI-Wide Latin","Valken","Valluvan","Vikatan","Visitor TT1 BRK","Visitor TT2 BRK","Vivian","Vonique 64","Voyager NBP","WP IconicSymbolsA","WP IconicSymbolsB","WP Japanese","WP Phonetic","WP TypographicSymbols","WST","Walter","Warsaw","Waseem","Waseem Light","Waseem Regular","Wawati SC","Wawati SC Regular","Wawati TC","Wawati TC Regular","Web Serveroff","Webdunia","Weibei SC Bold","Weibei TC","Weibei TC Bold","Wellfleet","Westwood LET","Wolf in the City Light","Xingkai SC","Xirod","Xpress Heavy SF","Xpress SF","YD2002","Yeseva One","Yuanti SC","Yuanti TC","Yuanti TC Bold","Yuanti TC Regular","Yuppy SC","Yuppy SC Regular","Yuppy TC","Yuppy TC Regular","Z@R11F8.tmp","Z@R120A.tmp","Z@R123A.tmp","Z@R13D5.tmp","Z@R16EB.tmp","Z@R16FD.tmp","Z@R170E.tmp","Z@R1720.tmp","Z@R1751.tmp","Z@R1762.tmp","Z@R1774.tmp","Z@R1816.tmp","Z@R1828.tmp","Z@R183A.tmp","Z@R184B.tmp","Z@R185D.tmp","Z@R195D.tmp","Z@R277C.tmp","ZDingbats","Zirkon","symbolps","ae","at most sphere","athletic","boot","cafeta","chs","cht","classic 10","cmbsy10","cmbsy6","cmbsy7","cmbsy8","cmbsy9","cmdunh10","cmff10","cmfi10","cmfib8","cminch","cmitt10","cmsl10","cmsl12","cmsl8","cmsl9","cmsltt10","cmssi10","cmssi12","cmssi17","cmssi8","cmssi9","cmssqi8","cmtcsc10","cmtex10","cmtex8","cmtex9","cmti7","cnefont","cnefonts","copy 08","copy 09","copy 10","dbldwrsw","euex10","euex7","euex8","euex9","eufb10","eufb5","eufb6","eufb7","eufb8","eufb9","eufm10","eufm5","eufm6","eufm7","eufm8","eufm9","eurb10","eurb5","eurb6","eurb7","eurb8","eurb9","eurm5","eurm6","eurm7","eurm8","eurm9","eusb10","eusb5","eusb6","eusb7","eusb8","eusb9","eusm10","eusm5","eusm6","eusm7","eusm8","eusm9","fox in the snow","header 08","header 17","hooge 04","hooge 05","hooge 06","iso 08","italic 08","jpn","kawoszeh","kor","kroeger 04","kroeger 05","kroeger 06","kroeger 07","lcircle10","lcirclew10","lcmss8","lcmssi8","lettau 06","line10","linew10","mixtapeMike","modstmary10","mry","schoenecker 10","smart watch","spinwerad","standard 07","standard 09","type 07","uni 05","w01","wgl4"]}},512:function(t){"use strict";t.exports=function(t,e,r,n){var o=self||window;try{try{var i;try{i=new o.Blob([t])}catch(e){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),i=i.getBlob()}var a=o.URL||o.webkitURL,s=a.createObjectURL(i),u=new o[e](s,r);return a.revokeObjectURL(s),u}catch(n){return new o[e]("data:application/javascript,".concat(encodeURIComponent(t)),r)}}catch(t){if(!n)throw Error("Inline worker is not supported");return new o[e](n,r)}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.amdO={},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}r.r(n),r.d(n,{BioCatchClient:function(){return v},initializeBioCatchClient:function(){return fj}});var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"isSupported",value:function(){return!("undefined"==typeof WeakMap||!window.Worker||!window.MutationObserver)}}],(r=null)&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}),!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()){var t=Object.defineProperty;Object.defineProperty=function(e,r,n){if(t)try{return t(e,r,n)}catch(t){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(e,r,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(e,r,n.set),"value"in n&&(e[r]=n.value),e}}var e,r,n,o;"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(t,e){if(t!==Object(t))throw TypeError("Object.defineProperties called on non-object");var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&Object.defineProperty(t,r,e[r]);return t}),"function"!=typeof Object.create&&(Object.create=function(t,e){if("object"!==a(t))throw TypeError();function r(){}r.prototype=t;var n=new r;if(t&&(n.constructor=r),void 0!==e){if(e!==Object(e))throw TypeError();Object.defineProperties(n,e)}return n}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw TypeError("Object.keys called on non-object");var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var r,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),n=0;n<i;){var a;n in o&&(a=o[n],t.call(r,a,n,o)),n++}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw TypeError("Bind must be called on a function");var e=[].slice,r=e.call(arguments,1),n=this,o=function(){return n.apply(this.prototype&&this instanceof i?this:t,r.concat(e.call(arguments)))};function i(){}return i.prototype=n.prototype,o.prototype=new i,o}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.from||(Array.from=(e=Object.prototype.toString,r=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,o=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),n)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!r(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var a,s=o(e.length),u=r(this)?Object(new this(s)):new Array(s),c=0;c<s;)a=e[c],u[c]=i?void 0===n?i(a,c):i.call(n,a,c):a,c+=1;return u.length=s,u})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=e[o];if(t.call(n,i,o,e))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var o,i,a=0|e,s=Math.max(a>=0?a:n-Math.abs(a),0);for(;s<n;){if((o=r[s])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;s++}return!1},configurable:!0,writable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),r=e.length;--r>=0&&e.item(r)!==this;);return r>-1}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},writable:!0,configurable:!0}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){if(t instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===e&&(e=0),-1!==this.indexOf(t,e)}),self.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t){if(!t.WeakMap){var e=Object.prototype.hasOwnProperty,r=function(t,e,r){Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,writable:!0,value:r}):t[e]=r};t.WeakMap=function(){function t(t,r){if(!n(t)||!e.call(t,"_id"))throw new TypeError(r+" method called on incompatible receiver "+u(t))}function o(){return Math.random().toString().substring(2)}function i(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(r(this,"_id","_WeakMap"+"_"+o()+"."+o()),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}return r(i.prototype,"delete",(function(e){if(t(this,"delete"),!n(e))return!1;var r=e[this._id];return!(!r||r[0]!==e)&&(delete e[this._id],!0)})),r(i.prototype,"get",(function(e){if(t(this,"get"),n(e)){var r=e[this._id];return r&&r[0]===e?r[1]:void 0}})),r(i.prototype,"has",(function(e){if(t(this,"has"),!n(e))return!1;var r=e[this._id];return!(!r||r[0]!==e)})),r(i.prototype,"set",(function(e,o){if(t(this,"set"),!n(e))throw new TypeError("Invalid value used as weak map key");var i=e[this._id];return i&&i[0]===e?(i[1]=o,this):(r(e,this._id,[e,o]),this)})),r(i,"_polyfill",!0),i}()}function n(t){return Object(t)===t}}function l(){!function(t){var e=Date.now?Date.now():+new Date,n=t.performance||{},o=[],i={},a=function(t,e){for(var r=0,n=o.length,i=[];r<n;r++)o[r][t]==e&&i.push(o[r]);return i},s=function(t,e){for(var r,n=o.length;n--;)(r=o[n]).entryType!=t||void 0!==e&&r.name!=e||o.splice(n,1)};n.now||(n.now=n.webkitNow||n.mozNow||n.msNow||function(){return(Date.now?Date.now():+new Date)-e}),n.mark||(n.mark=n.webkitMark||function(t){var e={name:t,entryType:"mark",startTime:n.now(),duration:0};o.push(e),i[t]=e}),n.measure||(n.measure=n.webkitMeasure||function(t,e,r){var a,s;if(void 0!==r&&void 0===i[r])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+r+"' does not exist.");if(void 0!==e&&void 0===i[e])throw new SyntaxError("Failed to execute 'measure' on 'Performance': The mark '"+e+"' does not exist.");a=i[e]?i[e].startTime:0,s=i[r]?i[r].startTime:n.now(),o.push({name:t,entryType:"measure",startTime:a,duration:s-a})}),n.getEntriesByType||(n.getEntriesByType=n.webkitGetEntriesByType||function(t){return a("entryType",t)}),n.getEntriesByName||(n.getEntriesByName=n.webkitGetEntriesByName||function(t){return a("name",t)}),n.clearMarks||(n.clearMarks=n.webkitClearMarks||function(t){s("mark",t)}),n.clearMeasures||(n.clearMeasures=n.webkitClearMeasures||function(t){s("measure",t)}),t.performance=n,"function"==typeof define&&r.amdO&&define("performance",[],(function(){return n}))}(self),s(),c("undefined"!=typeof self?self:"undefined"!=typeof window?window:this)}var f=3,h=4;function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:e+""}var v=function(){return t=function t(e,r,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(),i.isSupported()&&("cdApi"in window?e.autoStart(a):window.bcClient=this._createProxyInterface(e,o,n,r,a))},e=[{key:"_createProxyInterface",value:function(t,e,r,n,o){return{start:function(i,a,s,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h,l=e.resolve(i,a,c),f=r.mapStartupConfigurations(l,u);n.attachCdApi(window,s),t.manualStart(f,l,o)},stop:function(){t.stop()},pause:function(){t.pause()},resume:function(){t.resume()},updateCustomerSessionID:function(e){t.updateCustomerSessionID(e)},changeContext:function(e){t.changeContext(e)},startNewSession:function(e){t.startNewSession(e)},setCoordinatesMasking:function(e){t.setCoordinatesMasking(e)}}}}],e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m(e)?e:e+""}var _=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"attachCdApi",value:function(t,e){t.cdApi={_eventListeners:{},onMessage:function(t){var e=this._eventListeners[t.data.type];if(e)for(var r=0;r<e.length;r++)e[r](t.data.event)},listenToEvents:function(){t.addEventListener?t.addEventListener("message",this.onMessage.bind(this),!0):t.attachEvent("onmessage",this.onMessage.bind(this))},getCustomerSessionID:function(t){t(e||void 0)},registerSessionNumberChange:function(e){function r(t){var r=t.data;"SNumNotification"===r.type&&e(r.cdSNum)}t.addEventListener?t.addEventListener("message",r,!0):t.attachEvent("onmessage",r)},addEventListener:function(t,e){var r=this._eventListeners[t];r||(r=[],this._eventListeners[t]=r),r.push(e)},removeEventListener:function(t,e){var r=this._eventListeners[t];if(r)for(var n=0;n<r.length;n++)if(r[n]===e){r.splice(n,1);break}},changeContext:function(e){t.postMessage({type:"ContextChange",context:e},t.location.href)},startNewSession:function(e){t.postMessage({type:"ResetSession",resetReason:"customerApi",csid:e},t.location.href)},pauseCollection:function(){t.postMessage({type:"cdChangeState",toState:"pause"},t.location.href)},resumeCollection:function(){t.postMessage({type:"cdChangeState",toState:"run"},t.location.href)},sendMetadata:function(e){t.postMessage({type:"cdCustomerMetadata",data:e},t.location.href)},setCustomerSessionId:function(e){t.postMessage({type:"cdSetCsid",csid:e},t.location.href)},setCustomerBrand:function(e){t.postMessage({type:"cdSetCustomerBrand",brand:e},t.location.href)}},t.cdApi.listenToEvents()}}],e&&b(t.prototype,e),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),w="resetSessionApiThreshold",S="dataWupDispatchRateSettings",E="logWupDispatchRateSettings",k="enableMinifiedLogUri",P="serverCommunicationSettings",T="collectKeyRegionValue",C="crossDomainsList",O="crossDomainsTimeout",M="isMutationObserver",B="isEnabled",j="collectCustomElementAttribute",x="customElementAttribute",L="enableFramesProcessing",R="enableSameSiteNoneAndSecureCookies",A="logAddress",I="isCaptureKeyEvents",N="locationEventsTimeoutMsec",D="heartBeatMessageInterval",F="isMotionAroundTouchEnabled",U="motionPaddingAroundTouchMSec",H="isMotionOnSessionStart",G="motionPaddingOnSessionStartMSec",W="isScrollCollect",V="gyroEventsSamplePeriod",K="accelerometerEventsSamplePeriod",Q="orientationEventsSamplePeriod",z="stateChangeEnabled",q="logLevel",Y="enableCustomElementsProcessing",J="keyEventsMaskSpecialChars",X="collectSelectElementBlurAndFocusEvents",Z="allowedUnmaskedValuesList",$="enableUnmaskedValues",tt="cdsNumExpirationTime",et="enableCoordinatesMasking",rt="maskElementsAttributes",nt="parentElementSelector",ot="childElementWithCustomAttribute",it="elementDataAttribute",at="customButtons",st="enableAutoElementId",ut="autoElementIdLimit",ct="agentType",lt="collectionMode",ft="enableWupMessagesHashing",ht="enableStartupCustomerSessionId",dt="offloadFontsCollectionEnabled",pt="mutationMaxChunkSize",yt="mutationChunkDelayMs",vt="passwordIdMaskingList";function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mt(e)?e:e+""}var _t=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._customElementAttribute=e?e[x]:null,this._attributesToMask=e?e[rt]:null,this._keyEventsMaskSpecialChars=e?e[J]:null},(e=[{key:"getCustomElementAttribute",value:function(){return this._customElementAttribute}},{key:"getAttributesToMask",value:function(){return this._attributesToMask}},{key:"getKeyEventsMaskSpecialChars",value:function(){return this._keyEventsMaskSpecialChars}}])&&bt(t.prototype,e),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Et(n.key),n)}}function Et(t){var e=function(t,e){if("object"!=wt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wt(e)?e:e+""}var kt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._parentElementSelector=e?e[nt]:null,this._childElementWithCustomAttribute=e?e[ot]:null,this._elementDataAttribute=e?e[it]:null,this._customButtons=e?e[at]:null},(e=[{key:"getParentElementSelector",value:function(){return this._parentElementSelector}},{key:"getChildElementWithCustomAttribute",value:function(){return this._childElementWithCustomAttribute}},{key:"getElementDataAttribute",value:function(){return this._elementDataAttribute}},{key:"getCustomButtons",value:function(){return this._customButtons}}])&&St(t.prototype,e),r&&St(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Pt="wupServerURL",Tt="logServerURL",Ct="enableMinifiedLogUri",Ot="enableFramesProcessing",Mt="enableCustomElementsProcessing",Bt="enableSameSiteNoneAndSecureCookies",jt="serverURL",xt="customerID",Lt="useUrlWorker",Rt="workerUrl",At="clientSettings",It="collectionSettings",Nt="elementSettings",Dt="isWupServerURLProxy",Ft="customInputElementSettings",Ut="mode",Ht="enableStartupCustomerSessionId",Gt="mutationMaxChunkSize",Wt="mutationChunkDelayMs",Vt="isFlutterApp",Kt="enableMinifiedWupUri",Qt="maxShadowDepth",zt={PRIMARY:"primary",SECONDARY:"secondary"};Object.freeze(zt);var qt={FULL:"full",LEAN:"lean"};Object.freeze(qt);var Yt=10,Jt=20,Xt=30,Zt=40;function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ne(n.key),n)}}function re(t,e,r){return e&&ee(t.prototype,e),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ne(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$t(e)?e:e+""}var oe=function(){return re((function t(){te(this,t)}),null,[{key:"setLogger",value:function(t){this._logger=t}},{key:"attachSessionIdentifiers",value:function(t){if(this._logger)return this._logger.attachSessionIdentifiers(t)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(t,e){this._logger&&this._logger.error(t,e||null)}},{key:"warn",value:function(t,e){this._logger&&this._logger.warn(t,e||null)}},{key:"trace",value:function(t){this._logger&&this._logger.trace(t)}},{key:"debug",value:function(t){this._logger&&this._logger.debug(t)}},{key:"info",value:function(t){this._logger&&this._logger.info(t)}}])}(),ie=function(){return re((function t(e,r){te(this,t),this._logBridge=e,this._logLevel=r||Jt,this._sessionIdentifiers={}}),[{key:"attachSessionIdentifiers",value:function(t){Object.assign(this._sessionIdentifiers,t)}},{key:"trace",value:function(t){this._sendToLogBridge(t,Yt)}},{key:"debug",value:function(t){this._sendToLogBridge(t,Yt)}},{key:"info",value:function(t){this._sendToLogBridge(t,Jt)}},{key:"warn",value:function(t,e){this._sendToLogBridge(t,Xt,e)}},{key:"error",value:function(t,e){this._sendToLogBridge(t,Zt,e)}},{key:"isDebug",value:function(){return this._logLevel===Yt}},{key:"updateLogConfig",value:function(t){this._logLevel=t.get(q)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(t,e,r){e>=this._logLevel&&(r&&r.stack&&(t+=" ;stack: ".concat(r.stack)),this._logBridge.log(t,e,this._sessionIdentifiers))}}])}();function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function ue(t){var e=function(t,e){if("object"!=ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ae(e)?e:e+""}var ce=function(){return t=function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementSettings=new _t(null==e?void 0:e[Nt]),this._customInputElementSettings=new kt(null==e?void 0:e[Ft]),this._agentType=this._validateAgentType(null==e||null===(r=e[Ut])||void 0===r?void 0:r.agentType),this._collectionMode=this._setAgentCollectionMode(null==e||null===(n=e[Ut])||void 0===n?void 0:n.collectionMode)},(e=[{key:"getElementSettings",value:function(){return this._elementSettings}},{key:"getCustomInputElementSettings",value:function(){return this._customInputElementSettings}},{key:"getAgentType",value:function(){return this._agentType}},{key:"getAgentMode",value:function(){return this._collectionMode}},{key:"_setAgentCollectionMode",value:function(t){return this._agentType===zt.PRIMARY?qt.FULL:this._validateAgentMode(t)}},{key:"_validateAgentType",value:function(t){if(Object.values(zt).includes(t))return t;var e=zt.PRIMARY;return void 0!==t&&oe.warn("Invalid agent type: ".concat(t,". Defaulting to ").concat(e," agent type.")),e}},{key:"_validateAgentMode",value:function(t){if(Object.values(qt).includes(t))return t;var e=qt.LEAN;return void 0!==t&&oe.warn("Invalid collection mode: ".concat(t,". Defaulting to ").concat(e," collection mode.")),e}}])&&se(t.prototype,e),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,he(n.key),n)}}function he(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==le(e)?e:e+""}var de=function(){return t=function t(e,r,n,o,i,a,s,u,c,l,f,h,d,p,y,v,m,b,g,_,w){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerURL=e,this._logServerURL=r,this._enableFramesProcessing=n,this._enableCustomElementsProcessing=o,this._enableSameSiteNoneAndSecureCookies=i,this._useUrlWorker=a,this._workerUrl=s,this._isWupServerURLProxy=u,this._clientSettings=c,this._collectionSettings=l||new ce,this._enableStartupCustomerSessionId=f,this._mutationMaxChunkSize=h||0,this._mutationChunkDelayMs=d||100,this._passwordIdMaskingList=p,this._enableUnmaskedValues=y||!1,this._allowedUnmaskedValuesList=v||[],this._enableCoordinatesMasking=m||!1,this._isFlutterApp=b||!1,this._enableMinifiedWupUri=void 0===g||g,this._enableMinifiedLogUri=void 0!==_&&_,this._maxShadowDepth=w||0},(e=[{key:"getWupServerURL",value:function(){return this._wupServerURL}},{key:"getLogServerURL",value:function(){return this._logServerURL}},{key:"isMinifiedLogUriEnabled",value:function(){return this._enableMinifiedLogUri}},{key:"getEnableFramesProcessing",value:function(){return this._enableFramesProcessing}},{key:"getEnableCustomElementsProcessing",value:function(){return this._enableCustomElementsProcessing}},{key:"getEnableSameSiteNoneAndSecureCookies",value:function(){return this._enableSameSiteNoneAndSecureCookies}},{key:"getUseUrlWorker",value:function(){return this._useUrlWorker}},{key:"getWorkerUrl",value:function(){return this._workerUrl}},{key:"getIsWupServerURLProxy",value:function(){return this._isWupServerURLProxy}},{key:"getClientSettings",value:function(){return this._clientSettings}},{key:"getCollectionSettings",value:function(){return this._collectionSettings}},{key:"getEnableStartupCustomerSessionId",value:function(){return this._enableStartupCustomerSessionId}},{key:"getMutationMaxChunkSize",value:function(){return this._mutationMaxChunkSize}},{key:"getMutationChunkDelayMs",value:function(){return this._mutationChunkDelayMs}},{key:"getPasswordIdMaskingList",value:function(){return this._passwordIdMaskingList}},{key:"isUnmaskedValuesEnabled",value:function(){return this._enableUnmaskedValues}},{key:"getAllowedUnmaskedValuesList",value:function(){return this._allowedUnmaskedValuesList}},{key:"isCoordinatesMaskingEnabled",value:function(){return this._enableCoordinatesMasking}},{key:"isFlutterApp",value:function(){return this._isFlutterApp}},{key:"isMinifiedWupUriEnabled",value:function(){return this._enableMinifiedWupUri}},{key:"getMaxShadowDepth",value:function(){return this._maxShadowDepth}}])&&fe(t.prototype,e),r&&fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ve(n.key),n)}}function ve(t){var e=function(t,e){if("object"!=pe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pe(e)?e:e+""}var me=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"mapStartupConfigurations",value:function(t,e){return new de(t,e[Tt],e[Ot],e[Mt],e[Bt],e[Lt]||!1,e[Rt]||"",e[Dt]||!1,e[At],new ce(e[It]),e[Ht],e[Gt]||0,e[Wt]||100,e[vt],e[$]||!1,e[Z]||[],e[et]||!1,e[Vt]||!1,void 0===e[Kt]||e[Kt],void 0!==e[Ct]&&e[Ct],e[Qt]||0)}}])&&ye(t.prototype,e),r&&ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),be="api/v4/wup",ge="client/v3.1/web/wup";function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function we(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function Se(t){var e=function(t,e){if("object"!=_e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_e(e)?e:e+""}var Ee=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"resolve",value:function(t,e,r){var n=new URL(t),o="";return r===h?o="/".concat(be):r===f&&(o="/".concat(ge)),t.includes(ge)||t.includes(be)?r===h&&t.includes(ge)&&(n.pathname=o):n.pathname=o,e?n.searchParams.set("cid",e):n.searchParams.has("cid"),n.toString()}}])&&we(t.prototype,e),r&&we(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Te(n.key),n)}}function Te(t){var e=function(t,e){if("object"!=ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ke(e)?e:e+""}var Ce,Oe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}],(e=null)&&Pe(t.prototype,e),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Me=60,Be=1,je=44640,xe=1,Le=0,Re=-1;function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,De(n.key),n)}}function Ne(t,e,r){return(e=De(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function De(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ae(e)?e:e+""}var Fe,Ue,He,Ge=(Fe=null,function(t,e,r){var n=function(){return e};if(e.toString().indexOf("[native code]")>-1)r(n());else{var o=0,i=function(){if(Fe.contentWindow){for(var e=Fe.contentWindow,a=t.split("."),s=e,u=0;u<a.length;u++)s=s[a[u]];r(s)}else o<45?(setTimeout(i,o),o++):r(n())};Fe||((Fe=document.createElement("IFRAME")).setAttribute("sandbox","allow-same-origin"),Fe.style.display="none",document.documentElement.appendChild(Fe)),i()}}),We=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"isUndefinedNull",value:function(t){return null==t||void 0===t}},{key:"isBoolean",value:function(t){return"boolean"==typeof t}},{key:"isNumber",value:function(t){return"number"==typeof t}},{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,r,{capture:n,passive:o,once:i}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}},{key:"hasProtocol",value:function(t){return t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")}},{key:"clearTextFromNumbers",value:function(t){return t?t.replace(/(\d)/g,"*"):""}},{key:"getDropDownListValues",value:function(t,e){for(var r=[],n=0;n<t.length;n++){var o=t.options[n].text||t.options[n].value||"";r.push(e.maskText(o,t.id))}return r}},{key:"getDocUrl",value:function(){var e=window.location;return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+t.clearTextFromNumbers(e.pathname)}},{key:"getHash",value:function(t){for(var e=0,r=0,n=t.length;r<n;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e}},{key:"getTruncatedHash",value:function(t,e){return t?this.murmurhash3(t).toString().substring(e):""}},{key:"getDigestMethod",value:function(t){return"SHA-256"===t&&window.crypto.subtle&&window.crypto.subtle.digest?window.crypto.subtle.digest.bind(crypto.subtle):null}},{key:"digest_sha256",value:function(e){var r=t.getDigestMethod("SHA-256"),n=(new TextEncoder).encode(e);return r?r("SHA-256",n).then((function(t){return Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")})).catch((function(){return""})):new Promise((function(t){t("")}))}},{key:"murmurhash3",value:function(t,e){var r,n,o,i,a=3&t.length,s=t.length-a;r=e;var u=3432918353,c=461845907;for(i=0;i<s;)o=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24,++i,r=27492+(65535&(n=5*(65535&(r=(r^=o=(65535&(o=(o=(65535&o)*u+(((o>>>16)*u&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(o=0,a){case 3:o^=(255&t.charCodeAt(i+2))<<16;break;case 2:o^=(255&t.charCodeAt(i+1))<<8;break;case 1:r^=o=(65535&(o=(o=(65535&(o^=255&t.charCodeAt(i)))*u+(((o>>>16)*u&65535)<<16)&4294967295)<<15|o>>>17))*c+(((o>>>16)*c&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}},{key:"generateUUID",value:function(){var e=t.dateNow();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))}},{key:"convertToArrayByMap",value:function(t,e){for(var r=[null],n=0,o=t.length;n<o;n++)r[n+1]=e[t[n]];return r}},{key:"getPostUrl",value:function(t,e,r,n,o,i,a){var s=Oe.create();s instanceof self.XMLHttpRequest?(s.open(e,t,!0),void 0!==a&&(s.timeout=a),s.withCredentials=!1!==i,"POST"===e&&s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.onreadystatechange=function(){if(4===s.readyState){if(204===s.status)return;200===s.status?n&&n(s.responseText):o&&o(s.responseText)}},s.ontimeout=function(){o&&o("timeout",r)},s.send(r)):(s.onload=function(){n&&n(s.responseText)},s.onerror=function(){o&&o()},s.onprogress=function(){},s.ontimeout=function(){},s.open(e,t,!0),setTimeout((function(){s.send(r)}),0))}},{key:"minutesToMilliseconds",value:function(t){return 60*t*1e3}},{key:"cutDecimalPointDigits",value:function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}}],(r=null)&&Ie(e.prototype,r),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();Ce=We,Ne(We,"scriptVersion","2.46.0.2770.82aebf4"),Ne(We,"isPassiveSupported",function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}()),Ne(We,"dateNow",Date.now),Ne(We,"setZeroTimeout",(Ue=[],He="Window_"+Ce.generateUUID(),Ce.addEventListener(window,"message",(function(t){t.data===He&&(t.stopPropagation&&t.stopPropagation(),t.returnValue&&(t.returnValue=!1),t.cancelBubble&&(t.cancelBubble=!0),Ue.shift()())}),!0),function(t){Ue.push(t),window.postMessage(He,self.location.href)})),Ne(We,"asyncCall",(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=this;Ce.setZeroTimeout((function(){o.apply(t||window,r)}))})),Ne(We,"StorageUtils",{counter:0,getAndUpdateEventSequenceNumber:function(){return this.counter++},deserialize:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(e){return t||null}},getFromLocalStorage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;try{var r=this.deserialize(window.localStorage.getItem(t));return r?r.exp&&Ce.dateNow()-r.time>r.exp?(this.removeFromLocalStorage(t),null):void 0===e||e?r.val:r:null}catch(t){return null}},saveToLocalStorage:function(t,e,r){var n={val:e};r&&(n.exp=r,n.time=Ce.dateNow());try{window.localStorage.setItem(t,JSON.stringify(n))}catch(t){return null}return n},removeFromLocalStorage:function(t){try{window.localStorage.removeItem(t)}catch(t){return null}},setExpirationInLocalStorage:function(t,e){var r=this.getFromLocalStorage(t);return""===r||null===r?xe:this.saveToLocalStorage(t,r,e)?Le:Re},getFromSessionStorage:function(t){try{var e=this.deserialize(window.sessionStorage.getItem(t));return e||null}catch(t){return null}},saveToSessionStorage:function(t,e){try{return e?(window.sessionStorage.setItem(t,JSON.stringify(e)),e):window.sessionStorage.removeItem(t)}catch(t){return null}},removeFromSessionStorage:function(t){try{window.sessionStorage.removeItem(t)}catch(t){return null}},getCookie:function(t){var e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);return e?decodeURIComponent(e[1]):""},setCookie:function(t,e,r,n){var o="";if(r){var i=new Date;i.setTime(i.getTime()+r),o="; expires="+i.toUTCString()}for(var a=0,s=location.hostname,u=s.split("."),c="",l=!1;a<=u.length-1&&!l;)"localhost"===(s=u.slice(-1-++a).join("."))?c="":""!==s&&(c="; domain=."+s),l=this.setCookieWithAttributes(t,e,o,c,n);return l||(c="",l=this.setCookieWithAttributes(t,e,o,c,n)),l},setCookieWithAttributes:function(t,e,r,n,o){var i=encodeURIComponent(t)+"="+encodeURIComponent(e)+r+n+"; path=/;";return document.cookie=o?i+" ".concat("SameSite=None;"," ").concat("Secure"):i,this.getCookie(t)===e},setExpirationInCookie:function(t,e){var r=this.getCookie(t);return""===r||null===r?xe:this.setCookie(t,r,e)?Le:Re},removeCookie:function(t){try{document.cookie=t+"=; Max-Age=0"}catch(t){return null}},validateBcId:function(t){return/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)?t:null}}),Ne(We,"getNativeWindowFn",Ge),Ne(We,"JQueryUtils",{isJQueryAvailable:function(){return void 0!==window.jQuery},addEventListener:function(t,e,r){jQuery(t).on(e,r)},removeEventListener:function(t,e,r){jQuery(t).off(e,r)}}),Date.now?Ge("Date.now",Date.now,(function(t){We.dateNow=t})):We.dateNow=function(){return(new Date).getTime()};var Ve="startNewSessionCommand",Ke="resumeSessionCommand",Qe="changeContextCommand",ze="updateCsidCommand",qe="updatePsidCommand",Ye="updateLogUrl",Je="sendDataCommand",Xe="sendLogCommand",Ze="updateBrandCommand",$e="stateUpdateFromStorage",tr="setAgentTypeCommand",er="updateAgentIdCommand",rr="enableWupMessagesHashingCommand",nr="updateSDKState",or={stopped:"stopped",starting:"starting",started:"started",paused:"paused",faulted:"faulted"},ir=r(512),ar=r.n(ir);function sr(){return ar()('/*! For license information please see worker.js.LICENSE.txt */\n!function(){var t={9:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(a[i]=r(t.pow(n,.5))),u[i]=r(t.pow(n,1/3)),i++),n++}();var f=[],c=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=0;d<64;d++){if(d<16)f[d]=0|t[e+d];else{var p=f[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=f[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;f[d]=y+f[d-7]+g+f[d-16]}var m=n&i^n&o^i&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+u[d]+f[d];h=l,l=c,c=a,a=s+_|0,s=o,o=i,i=n,n=_+(b+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(c),e.HmacSHA256=o._createHmacHelper(c)}(Math),n.SHA256)},19:function(t,e,r){var n,i,o,s,a,u,f,c,l;t.exports=(l=r(21),r(9),r(25),i=(n=l).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.SHA256,f=a.HMAC,c=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:25e4}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=f.create(r.hasher,t),i=s.create(),o=s.create([1]),a=i.words,u=o.words,c=r.keySize,l=r.iterations;a.length<c;){var h=n.update(e).finalize(o);n.reset();for(var d=h.words,p=d.length,y=h,v=1;v<l;v++){y=n.finalize(y),n.reset();for(var g=y.words,m=0;m<p;m++)d[m]^=g[m]}i.concat(h),u[0]++}return i.sigBytes=4*c,i}}),n.PBKDF2=function(t,e,r){return c.create(r).compute(t,e)},l.PBKDF2)},21:function(t,e,r){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(477)}catch(t){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),s={},a=s.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=u.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(i());return new f.init(e,t)}}),c=s.enc={},l=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new f.init(r,e/2)}},h=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new f.init(r,e)}},d=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*u,o);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(i,l);r=i.splice(0,u),n.sigBytes-=c}return new f.init(r,c)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(a.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new y.HMAC.init(t,r).finalize(e)}}}),s.algo={});return s}(Math),n)},25:function(t,e,r){var n,i,o,s;t.exports=(n=r(21),o=(i=n).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=s.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,u=o.words,f=0;f<r;f++)a[f]^=1549556828,u[f]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}})))},56:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib,r=e.WordArray,i=e.Hasher,o=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,h,b,_,w,S,k,E,x,B,C,R=this._hash.words,P=c.words,A=l.words,I=s.words,T=a.words,M=u.words,D=f.words;for(S=o=R[0],k=h=R[1],E=b=R[2],x=_=R[3],B=w=R[4],r=0;r<80;r+=1)C=o+t[e+I[r]]|0,C+=r<16?d(h,b,_)+P[0]:r<32?p(h,b,_)+P[1]:r<48?y(h,b,_)+P[2]:r<64?v(h,b,_)+P[3]:g(h,b,_)+P[4],C=(C=m(C|=0,M[r]))+w|0,o=w,w=_,_=m(b,10),b=h,h=C,C=S+t[e+T[r]]|0,C+=r<16?g(k,E,x)+A[0]:r<32?v(k,E,x)+A[1]:r<48?y(k,E,x)+A[2]:r<64?p(k,E,x)+A[3]:d(k,E,x)+A[4],C=(C=m(C|=0,D[r]))+B|0,S=B,B=x,x=m(E,10),E=k,k=C;C=R[1]+b+x|0,R[1]=R[2]+_+B|0,R[2]=R[3]+w+S|0,R[3]=R[4]+o+k|0,R[4]=R[0]+h+E|0,R[0]=C},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,r){return t^e^r}function p(t,e,r){return t&e|~t&r}function y(t,e,r){return(t|~e)^r}function v(t,e,r){return t&r|e&~r}function g(t,e,r){return t^(e|~r)}function m(t,e){return t<<e|t>>>32-e}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(Math),n.RIPEMD160)},73:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,i=n-r%n,o=r+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Ansix923)},124:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},128:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function u(t,e){let r=e>>24&255,n=e>>16&255,i=e>>8&255,o=255&e,s=t.sbox[0][r]+t.sbox[1][n];return s^=t.sbox[2][i],s+=t.sbox[3][o],s}function f(t,e,r){let n,o=e,s=r;for(let e=0;e<i;++e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[i],o^=t.pbox[i+1],{left:o,right:s}}function c(t,e,r){let n,o=e,s=r;for(let e=i+1;e>1;--e)o^=t.pbox[e],s=u(t,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=t.pbox[1],o^=t.pbox[0],{left:o,right:s}}function l(t,e,r){for(let e=0;e<4;e++){t.sbox[e]=[];for(let r=0;r<256;r++)t.sbox[e][r]=s[e][r]}let n=0;for(let s=0;s<i+2;s++)t.pbox[s]=o[s]^e[n],n++,n>=r&&(n=0);let a=0,u=0,c=0;for(let e=0;e<i+2;e+=2)c=f(t,a,u),a=c.left,u=c.right,t.pbox[e]=a,t.pbox[e+1]=u;for(let e=0;e<4;e++)for(let r=0;r<256;r+=2)c=f(t,a,u),a=c.left,u=c.right,t.sbox[e][r]=a,t.sbox[e][r+1]=u;return!0}var h=r.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4;l(a,e,r)}},encryptBlock:function(t,e){var r=f(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},decryptBlock:function(t,e){var r=c(a,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=e._createHelper(h)}(),n.Blowfish)},155:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){var e=t.words,r=t.sigBytes-1;for(r=t.sigBytes-1;r>=0;r--)if(e[r>>>2]>>>24-r%4*8&255){t.sigBytes=r+1;break}}},n.pad.ZeroPadding)},165:function(t,e,r){var n;t.exports=(n=r(21),r(506),void(n.lib.Cipher||function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=e.enc,u=(a.Utf8,a.Base64),f=e.algo.EvpKDF,c=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:g}return function(e){return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}()}),l=(r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),h=r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=l.CBC=function(){var e=h.extend();function r(e,r,n){var i,o=this._iv;o?(i=o,this._iv=t):i=this._prevBlock;for(var s=0;s<n;s++)e[r+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;r.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);n.decryptBlock(t,e),r.call(this,t,e,i),this._prevBlock=o}}),e}(),p=(e.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var u=o.create(s,n);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:p}),reset:function(){var t;c.reset.call(this);var e=this.cfg,r=e.iv,n=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=n.createEncryptor:(t=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(n,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;return(r?o.create([1398893684,1701076831]).concat(r).concat(e):e).toString(u)},parse:function(t){var e,r=u.parse(t),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(e=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:e})}},g=r.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),s=i.cfg;return y.create({ciphertext:o,key:r,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,r,n,i){if(n||(n=o.random(8)),i)s=f.create({keySize:e+r,hasher:i}).compute(t,n);else var s=f.create({keySize:e+r}).compute(t,n);var a=o.create(s.words.slice(e),4*r);return s.sigBytes=4*e,y.create({key:s,iv:a,salt:n})}},b=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize,n.salt,n.hasher);n.iv=i.iv;var o=g.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt,n.hasher);return n.iv=i.iv,g.decrypt.call(this,t,e,i.key,n)}})}()))},169:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CFB=function(){var t=n.lib.BlockCipherMode.extend();function e(t,e,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)t[e+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i,n),this._prevBlock=t.slice(r,r+i)}}),t.Decryptor=t.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);e.call(this,t,r,i,n),this._prevBlock=o}}),t}(),n.mode.CFB)},193:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=r.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=e[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var u=n[i];n[i]=n[o],n[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[r],t[r]=o,n|=t[(t[e]+t[r])%256]<<24-8*i}return this._i=e,this._j=r,n}t.RC4=e._createHelper(i);var s=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(s)}(),n.RC4)},240:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.Base,o=r.WordArray,s=e.x64={};s.Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var i=t[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}})}(),n)},273:function(t,e,r){var n,i,o,s;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}s=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,(function(t){var r=e[s][1][t];return i(r||t)}),f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder,r.createCodec=t("./ext").createCodec,r.codec=t("./codec").codec},{"./codec":10,"./decode":12,"./decoder":13,"./encode":15,"./encoder":16,"./ext":20}],2:[function(t,e,r){(function(t){function r(t){return t&&t.isBuffer&&t}e.exports=r(void 0!==t&&t)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:29}],3:[function(t,e,r){r.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},r.toString=function(t,e,r){var n=this,i=0|e;r||(r=n.length);for(var o="",s=0;i<r;)(s=n[i++])<128?o+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[i++]:224==(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):o+=String.fromCharCode(s));return o},r.write=function(t,e){for(var r=this,n=e||(e|=0),i=t.length,o=0,s=0;s<i;)(o=t.charCodeAt(s++))<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=65536+(o-55296<<10|t.charCodeAt(s++)-56320),r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-e}},{}],4:[function(t,e,r){function n(t){return new Array(t)}var i=t("./bufferish");(r=e.exports=n(0)).alloc=n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return Array.prototype.slice.call(t)}},{"./bufferish":8}],5:[function(t,e,r){function n(t){return new o(t)}var i=t("./bufferish"),o=i.global;(r=e.exports=i.hasBuffer?n(0):[]).alloc=i.hasBuffer&&o.alloc||n,r.concat=i.concat,r.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return o.from&&1!==o.from.length?o.from(t):new o(t)}},{"./bufferish":8}],6:[function(t,e,r){function n(t,e,r,n){var a=s.isBuffer(this),u=s.isBuffer(t);if(a&&u)return this.copy(t,e,r,n);if(f||a||u||!s.isView(this)||!s.isView(t))return o.copy.call(this,t,e,r,n);var c=r||null!=n?i.call(this,r,n):this;return t.set(c,e),c.length}function i(t,e){var r=this.slice||!f&&this.subarray;if(r)return r.call(this,t,e);var i=s.alloc.call(this,e-t);return n.call(this,i,0,t,e),i}var o=t("./buffer-lite");r.copy=n,r.slice=i,r.toString=function(t,e,r){return(!u&&s.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},r.write=function(t){return function(){return(this[t]||o[t]).apply(this,arguments)}}("write");var s=t("./bufferish"),a=s.global,u=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in a,f=u&&!a.TYPED_ARRAY_SUPPORT},{"./buffer-lite":3,"./bufferish":8}],7:[function(t,e,r){function n(t){return new Uint8Array(t)}var i=t("./bufferish");(r=e.exports=i.hasArrayBuffer?n(0):[]).alloc=n,r.concat=i.concat,r.from=function(t){if(i.isView(t)){var e=t.byteOffset,n=t.byteLength;(t=t.buffer).byteLength!==n&&(t.slice?t=t.slice(e,e+n):(t=new Uint8Array(t)).byteLength!==n&&(t=Array.prototype.slice.call(t,e,e+n)))}else{if("string"==typeof t)return i.from.call(r,t);if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\')}return new Uint8Array(t)}},{"./bufferish":8}],8:[function(t,e,r){function n(t){return o(this).alloc(t)}function i(t){var e=3*t.length,r=n.call(this,e),i=g.write.call(r,t);return e!==i&&(r=g.slice.call(r,0,i)),r}function o(t){return h(t)?y:d(t)?v:l(t)?p:f?y:c?v:p}function s(){return!1}function a(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}var u=r.global=t("./buffer-global"),f=r.hasBuffer=u&&!!u.isBuffer,c=r.hasArrayBuffer="undefined"!=typeof ArrayBuffer,l=r.isArray=t("isarray");r.isArrayBuffer=c?function(t){return t instanceof ArrayBuffer||m(t)}:s;var h=r.isBuffer=f?u.isBuffer:s,d=r.isView=c?ArrayBuffer.isView||a("ArrayBuffer","buffer"):s;r.alloc=n,r.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,(function(t){e+=t.length})));var i=this!==r&&this||t[0],o=n.call(i,e),s=0;return Array.prototype.forEach.call(t,(function(t){s+=g.copy.call(t,o,s)})),o},r.from=function(t){return"string"==typeof t?i.call(this,t):o(this).from(t)};var p=r.Array=t("./bufferish-array"),y=r.Buffer=t("./bufferish-buffer"),v=r.Uint8Array=t("./bufferish-uint8array"),g=r.prototype=t("./bufferish-proto"),m=a("ArrayBuffer")},{"./buffer-global":2,"./bufferish-array":4,"./bufferish-buffer":5,"./bufferish-proto":6,"./bufferish-uint8array":7,isarray:34}],9:[function(t,e,r){function n(t){return this instanceof n?(this.options=t,void this.init()):new n(t)}function i(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function o(t){return new n(t)}var s=t("isarray");r.createCodec=o,r.install=function(t){for(var e in t)n.prototype[e]=i(n.prototype[e],t[e])},r.filter=function(t){return s(t)?function(t){function e(t,e){return e(t)}return t=t.slice(),function(r){return t.reduce(e,r)}}(t):t};var a=t("./bufferish");n.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=a.Uint8Array),this},r.preset=o({preset:!0})},{"./bufferish":8,isarray:34}],10:[function(t,e,r){t("./read-core"),t("./write-core"),r.codec={preset:t("./codec-base").preset}},{"./codec-base":9,"./read-core":22,"./write-core":25}],11:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.DecodeBuffer=n;var i=t("./read-core").preset;t("./flex-buffer").FlexDecoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":21,"./read-core":22}],12:[function(t,e,r){r.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":11}],13:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Decoder=n;var i=t("event-lite"),o=t("./decode-buffer").DecodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},n.prototype.push=function(t){this.emit("data",t)},n.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":11,"event-lite":31}],14:[function(t,e,r){function n(t){if(!(this instanceof n))return new n(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r.EncodeBuffer=n;var i=t("./write-core").preset;t("./flex-buffer").FlexEncoder.mixin(n.prototype),n.prototype.codec=i,n.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":21,"./write-core":25}],15:[function(t,e,r){r.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":14}],16:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}r.Encoder=n;var i=t("event-lite"),o=t("./encode-buffer").EncodeBuffer;n.prototype=new o,i.mixin(n.prototype),n.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},n.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":14,"event-lite":31}],17:[function(t,e,r){r.ExtBuffer=function t(e,r){return this instanceof t?(this.buffer=n.from(e),void(this.type=r)):new t(e,r)};var n=t("./bufferish")},{"./bufferish":8}],18:[function(t,e,r){function n(e){return a||(a=t("./encode").encode),a(e)}function i(t){return t.valueOf()}function o(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function s(t){var e={};for(var r in l)e[r]=t[r];return e}r.setExtPackers=function(t){t.addExtPacker(14,Error,[s,n]),t.addExtPacker(1,EvalError,[s,n]),t.addExtPacker(2,RangeError,[s,n]),t.addExtPacker(3,ReferenceError,[s,n]),t.addExtPacker(4,SyntaxError,[s,n]),t.addExtPacker(5,TypeError,[s,n]),t.addExtPacker(6,URIError,[s,n]),t.addExtPacker(10,RegExp,[o,n]),t.addExtPacker(11,Boolean,[i,n]),t.addExtPacker(12,String,[i,n]),t.addExtPacker(13,Date,[Number,n]),t.addExtPacker(15,Number,[i,n]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,c),t.addExtPacker(18,Uint8Array,c),t.addExtPacker(19,Int16Array,c),t.addExtPacker(20,Uint16Array,c),t.addExtPacker(21,Int32Array,c),t.addExtPacker(22,Uint32Array,c),t.addExtPacker(23,Float32Array,c),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,c),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,c),t.addExtPacker(26,ArrayBuffer,c),t.addExtPacker(29,DataView,c)),u.hasBuffer&&t.addExtPacker(27,f,u.from)};var a,u=t("./bufferish"),f=u.global,c=u.Uint8Array.from,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./encode":15}],19:[function(t,e,r){function n(e){return u||(u=t("./decode").decode),u(e)}function i(t){return RegExp.apply(null,t)}function o(t){return function(e){var r=new t;for(var n in l)r[n]=e[n];return r}}function s(t){return function(e){return new t(e)}}function a(t){return new Uint8Array(t).buffer}r.setExtUnpackers=function(t){t.addExtUnpacker(14,[n,o(Error)]),t.addExtUnpacker(1,[n,o(EvalError)]),t.addExtUnpacker(2,[n,o(RangeError)]),t.addExtUnpacker(3,[n,o(ReferenceError)]),t.addExtUnpacker(4,[n,o(SyntaxError)]),t.addExtUnpacker(5,[n,o(TypeError)]),t.addExtUnpacker(6,[n,o(URIError)]),t.addExtUnpacker(10,[n,i]),t.addExtUnpacker(11,[n,s(Boolean)]),t.addExtUnpacker(12,[n,s(String)]),t.addExtUnpacker(13,[n,s(Date)]),t.addExtUnpacker(15,[n,s(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,s(Int8Array)),t.addExtUnpacker(18,s(Uint8Array)),t.addExtUnpacker(19,[a,s(Int16Array)]),t.addExtUnpacker(20,[a,s(Uint16Array)]),t.addExtUnpacker(21,[a,s(Int32Array)]),t.addExtUnpacker(22,[a,s(Uint32Array)]),t.addExtUnpacker(23,[a,s(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[a,s(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,s(Uint8ClampedArray)),t.addExtUnpacker(26,a),t.addExtUnpacker(29,[a,s(DataView)])),f.hasBuffer&&t.addExtUnpacker(27,s(c))};var u,f=t("./bufferish"),c=f.global,l={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./decode":12}],20:[function(t,e,r){t("./read-core"),t("./write-core"),r.createCodec=t("./codec-base").createCodec},{"./codec-base":9,"./read-core":22,"./write-core":25}],21:[function(t,e,r){function n(){if(!(this instanceof n))return new n}function i(){if(!(this instanceof i))return new i}function o(){throw new Error("method not implemented: write()")}function s(){throw new Error("method not implemented: fetch()")}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function u(t){(this.buffers||(this.buffers=[])).push(t)}function f(){return(this.buffers||(this.buffers=[])).shift()}function c(t){return function(e){for(var r in t)e[r]=t[r];return e}}r.FlexDecoder=n,r.FlexEncoder=i;var l=t("./bufferish"),h=2048,d=65536,p="BUFFER_SHORTAGE";n.mixin=c({bufferish:l,write:function(t){var e=this.offset?l.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:s,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=p)throw t;this.offset=e;break}this.push(t)}},push:u,pull:f,read:a,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(p);return this.offset=r,e},offset:0}),n.mixin(n.prototype),i.mixin=c({bufferish:l,write:o,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return l.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:u,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);l.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:d,minBufferSize:h,offset:0,start:0}),i.mixin(i.prototype)},{"./bufferish":8}],22:[function(t,e,r){function n(){var t=this.options;return this.decode=function(t){var e=a.getReadToken(t);return function(t){var r=s(t),n=e[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&o.setExtUnpackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-unpacker"),s=t("./read-format").readUint8,a=t("./read-token"),u=t("./codec-base");u.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=u.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new i(e,t)}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-unpacker":19,"./read-format":23,"./read-token":24}],23:[function(t,e,r){function n(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function i(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function o(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function s(t,e){var r=t.reserve(e),n=r+e;return R.toString.call(t.buffer,"utf-8",r,n)}function a(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.from(i)}function u(t,e){var r=t.reserve(e),n=r+e,i=R.slice.call(t.buffer,r,n);return C.Uint8Array.from(i).buffer}function f(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(R.slice.call(t.buffer,r,i))}function c(t){var e=t.reserve(1);return t.buffer[e]}function l(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function h(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function d(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function p(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function y(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function v(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,A)}}function g(t){return new x(this,t).toNumber()}function m(t){return new B(this,t).toNumber()}function b(t){return new x(this,t)}function _(t){return new B(this,t)}function w(t){return k.read(this,t,!1,23,4)}function S(t){return k.read(this,t,!1,52,8)}var k=t("ieee754"),E=t("int64-buffer"),x=E.Uint64BE,B=E.Int64BE;r.getReadFormat=function(t){var e=C.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:P&&t&&t.usemap?i:n,array:o,str:s,bin:e?u:a,ext:f,uint8:c,uint16:h,uint32:p,uint64:v(8,r?b:g),int8:l,int16:d,int32:y,int64:v(8,r?_:m),float32:v(4,w),float64:v(8,S)}},r.readUint8=c;var C=t("./bufferish"),R=t("./bufferish-proto"),P="undefined"!=typeof Map,A=!0},{"./bufferish":8,"./bufferish-proto":6,ieee754:32,"int64-buffer":33}],24:[function(t,e,r){function n(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=i(e);for(e=128;e<=143;e++)r[e]=s(e-128,t.map);for(e=144;e<=159;e++)r[e]=s(e-144,t.array);for(e=160;e<=191;e++)r[e]=s(e-160,t.str);for(r[192]=i(null),r[193]=null,r[194]=i(!1),r[195]=i(!0),r[196]=o(t.uint8,t.bin),r[197]=o(t.uint16,t.bin),r[198]=o(t.uint32,t.bin),r[199]=o(t.uint8,t.ext),r[200]=o(t.uint16,t.ext),r[201]=o(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=s(1,t.ext),r[213]=s(2,t.ext),r[214]=s(4,t.ext),r[215]=s(8,t.ext),r[216]=s(16,t.ext),r[217]=o(t.uint8,t.str),r[218]=o(t.uint16,t.str),r[219]=o(t.uint32,t.str),r[220]=o(t.uint16,t.array),r[221]=o(t.uint32,t.array),r[222]=o(t.uint16,t.map),r[223]=o(t.uint32,t.map),e=224;e<=255;e++)r[e]=i(e-256);return r}function i(t){return function(){return t}}function o(t,e){return function(r){var n=t(r);return e(r,n)}}function s(t,e){return function(r){return e(r,t)}}var a=t("./read-format");r.getReadToken=function(t){var e=a.getReadFormat(t);return t&&t.useraw?function(t){var e,r=n(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=s(e-160,t.bin);return r}(e):n(e)}},{"./read-format":23}],25:[function(t,e,r){function n(){var t=this.options;return this.encode=function(t){var e=s.getWriteType(t);return function(t,r){var n=e[a(r)];if(!n)throw new Error(\'Unsupported type "\'+a(r)+\'": \'+r);n(t,r)}}(t),t&&t.preset&&o.setExtPackers(this),this}var i=t("./ext-buffer").ExtBuffer,o=t("./ext-packer"),s=t("./write-type"),u=t("./codec-base");u.install({addExtPacker:function(t,e,r){function n(e){return r&&(e=r(e)),new i(e,t)}r=u.filter(r);var o=e.name;o&&"Object"!==o?(this.extPackers||(this.extPackers={}))[o]=n:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,n])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:n}),r.preset=n.call(u.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-packer":18,"./write-type":27}],26:[function(t,e,r){function n(){var t=v.slice();return t[196]=i(196),t[197]=o(197),t[198]=s(198),t[199]=i(199),t[200]=o(200),t[201]=s(201),t[202]=a(202,4,_.writeFloatBE||c,!0),t[203]=a(203,8,_.writeDoubleBE||l,!0),t[204]=i(204),t[205]=o(205),t[206]=s(206),t[207]=a(207,8,u),t[208]=i(208),t[209]=o(209),t[210]=s(210),t[211]=a(211,8,f),t[217]=i(217),t[218]=o(218),t[219]=s(219),t[220]=o(220),t[221]=s(221),t[222]=o(222),t[223]=s(223),t}function i(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function o(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function s(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function a(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function u(t,e){new p(this,e,t)}function f(t,e){new y(this,e,t)}function c(t,e){h.write(this,t,e,!1,23,4)}function l(t,e){h.write(this,t,e,!1,52,8)}var h=t("ieee754"),d=t("int64-buffer"),p=d.Uint64BE,y=d.Int64BE,v=t("./write-uint8").uint8,g=t("./bufferish"),m=g.global,b=g.hasBuffer&&"TYPED_ARRAY_SUPPORT"in m&&!m.TYPED_ARRAY_SUPPORT,_=g.hasBuffer&&m.prototype||{};r.getWriteToken=function(t){return t&&t.uint8array?function(){var t=n();return t[202]=a(202,4,c),t[203]=a(203,8,l),t}():b||g.hasBuffer&&t&&t.safe?function(){var t=v.slice();return t[196]=a(196,1,m.prototype.writeUInt8),t[197]=a(197,2,m.prototype.writeUInt16BE),t[198]=a(198,4,m.prototype.writeUInt32BE),t[199]=a(199,1,m.prototype.writeUInt8),t[200]=a(200,2,m.prototype.writeUInt16BE),t[201]=a(201,4,m.prototype.writeUInt32BE),t[202]=a(202,4,m.prototype.writeFloatBE),t[203]=a(203,8,m.prototype.writeDoubleBE),t[204]=a(204,1,m.prototype.writeUInt8),t[205]=a(205,2,m.prototype.writeUInt16BE),t[206]=a(206,4,m.prototype.writeUInt32BE),t[207]=a(207,8,u),t[208]=a(208,1,m.prototype.writeInt8),t[209]=a(209,2,m.prototype.writeInt16BE),t[210]=a(210,4,m.prototype.writeInt32BE),t[211]=a(211,8,f),t[217]=a(217,1,m.prototype.writeUInt8),t[218]=a(218,2,m.prototype.writeUInt16BE),t[219]=a(219,4,m.prototype.writeUInt32BE),t[220]=a(220,2,m.prototype.writeUInt16BE),t[221]=a(221,4,m.prototype.writeUInt32BE),t[222]=a(222,2,m.prototype.writeUInt16BE),t[223]=a(223,4,m.prototype.writeUInt32BE),t}():n()}},{"./bufferish":8,"./write-uint8":28,ieee754:32,"int64-buffer":33}],27:[function(t,e,r){var n=t("isarray"),i=t("int64-buffer"),o=i.Uint64BE,s=i.Int64BE,a=t("./bufferish"),u=t("./bufferish-proto"),f=t("./write-token"),c=t("./write-uint8").uint8,l=t("./ext-buffer").ExtBuffer,h="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,r.getWriteType=function(t){function e(t,e){if(null===e)return r(t,e);if(b(e))return _(t,e);if(n(e))return function(t,e){var r=e.length,n=r<16?144+r:r<=65535?220:221;v[n](t,r);for(var i=t.codec.encode,o=0;o<r;o++)i(t,e[o])}(t,e);if(o.isUint64BE(e))return function(t,e){v[207](t,e.toArray())}(t,e);if(s.isInt64BE(e))return function(t,e){v[211](t,e.toArray())}(t,e);var i=t.codec.getExtPacker(e);return i&&(e=i(e)),e instanceof l?function(t,e){var r=e.buffer,n=r.length,i=p[n]||(n<255?199:n<=65535?200:201);v[i](t,n),c[e.type](t),t.send(r)}(t,e):void w(t,e)}function r(t,e){v[192](t,e)}function i(t,e){var r=e.length;v[r<255?196:r<=65535?197:198](t,r),t.send(e)}function y(t,e){var r=Object.keys(e),n=r.length;v[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;r.forEach((function(r){i(t,r),i(t,e[r])}))}var v=f.getWriteToken(t),g=t&&t.useraw,m=h&&t&&t.binarraybuffer,b=m?a.isArrayBuffer:a.isBuffer,_=m?function(t,e){i(t,new Uint8Array(e))}:i,w=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return y(t,e);var r=e.size;v[r<16?128+r:r<=65535?222:223](t,r);var n=t.codec.encode;e.forEach((function(e,r,i){n(t,r),n(t,e)}))}:y,S={boolean:function(t,e){v[e?195:194](t,e)},function:r,number:function(t,e){var r=0|e;return e!==r?void v[203](t,e):void v[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](t,r)},object:g?function(t,r){return b(r)?function(t,e){var r=e.length,n=r<32?160+r:r<=65535?218:219;v[n](t,r),t.send(e)}(t,r):void e(t,r)}:e,string:function(t){return function(e,r){var n=r.length,i=5+3*n;e.offset=e.reserve(i);var o=e.buffer,s=t(n),a=e.offset+s;n=u.write.call(o,r,a);var f=t(n);if(s!==f){var c=a+f-s,l=a+n;u.copy.call(o,o,c,a,l)}v[1===f?160+n:f<=3?215+f:219](e,n),e.offset+=n}}(g?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:r,undefined:r};return S}},{"./bufferish":8,"./bufferish-proto":6,"./ext-buffer":17,"./write-token":26,"./write-uint8":28,"int64-buffer":33,isarray:34}],28:[function(t,e,r){function n(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}for(var i=r.uint8=new Array(256),o=0;o<=255;o++)i[o]=n(o)},{}],29:[function(t,e,n){(function(e){"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("\'offset\' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("\'length\' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError(\'"encoding" must be a valid string encoding\');var n=0|l(e,r),s=(t=i(t,n)).write(e,r);return s!==n&&(t=t.slice(0,s)),t}(t,e,r):function(t,e){if(o.isBuffer(e)){var r=0|c(e.length);return 0===(t=i(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&F(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function a(t){if("number"!=typeof t)throw new TypeError(\'"size" argument must be a number\');if(t<0)throw new RangeError(\'"size" argument must not be negative\')}function u(t,e){if(a(e),t=i(t,e<0?0:0|c(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|c(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function c(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function l(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(n)return j(t).length;e=(""+e).toLowerCase(),n=!0}}function h(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,u=t.length,f=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,f/=2,r/=2}if(i){var c=-1;for(s=r;s<u;s++)if(o(t,s)===o(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===f)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(r+f>u&&(r=u-f),s=r;s>=0;s--){for(var l=!0,h=0;h<f;h++)if(o(t,s+h)!==o(e,h)){l=!1;break}if(l)return s}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function g(t,e,r,n){return z(j(e,t.length-r),t,r,n)}function m(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return m(t,e,r,n)}function _(t,e,r,n){return z(U(e),t,r,n)}function w(t,e,r,n){return z(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?N.fromByteArray(t):N.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(t){var e=t.length;if(e<=H)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=H));return r}(n)}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=O(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(e>i||e<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function T(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,e,r,n,i){return i||T(t,0,r,4),L.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,i){return i||T(t,0,r,8),L.write(t,e,r,n,52,8),r+8}function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(t){return N.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}var N=t("base64-js"),L=t("ieee754"),F=t("isarray");n.Buffer=o,n.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return s(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return function(t,e,r,n){return a(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}(null,t,e,r)},o.allocUnsafe=function(t){return u(null,t)},o.allocUnsafeSlow=function(t){return u(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!F(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!o.isBuffer(s))throw new TypeError(\'"list" argument must be an Array of Buffers\');s.copy(n,i),i+=s.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):h.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),f=this.slice(n,i),c=t.slice(e,r),l=0;l<u;++l)if(f[l]!==c[l]){s=f[l],a=c[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return g(this,t,e,r);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;o.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),o.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),L.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),L.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return M(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return M(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:j(new o(t,n).toString()),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var W=/[^+\\/0-9A-Za-z-_]/g}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:32,isarray:34}],30:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(n));return o.join("")}r.byteLength=function(t){return 3*t.length/4-n(t)},r.toByteArray=function(t){var e,r,i,o,s,f,c=t.length;s=n(t),f=new u(3*c/4-s),i=s>0?c-4:c;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],f[l++]=o>>16&255,f[l++]=o>>8&255,f[l++]=255&o;return 2===s?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,f[l++]=255&o):1===s&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,f[l++]=o>>8&255,f[l++]=255&o),f},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i="",a=[],u=16383,f=0,c=r-n;f<c;f+=u)a.push(o(t,f,f+u>c?c:f+u));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)s[c]=f[c],a[f.charCodeAt(c)]=c;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],31:[function(t,e,r){!function(t){function r(t){for(var e in s)t[e]=s[e];return t}function n(t,e){var r,s=this;if(arguments.length){if(e){if(r=i(s,t,!0)){if(r=r.filter((function(t){return t!==e&&t.originalListener!==e})),!r.length)return n.call(s,t);s[o][t]=r}}else if((r=s[o])&&(delete r[t],!Object.keys(r).length))return n.call(s)}else delete s[o];return s}function i(t,e,r){if(!r||t[o]){var n=t[o]||(t[o]={});return n[e]||(n[e]=[])}}void 0!==e&&(e.exports=t);var o="listeners",s={on:function(t,e){return i(this,t).push(e),this},once:function(t,e){function r(){n.call(o,t,r),e.apply(this,arguments)}var o=this;return r.originalListener=e,i(o,t).push(r),o},off:n,emit:function(t,e){var r=this,n=i(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var s=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,s)}))}return!!n.length}};r(t.prototype),t.mixin=r}((function t(){if(!(this instanceof t))return new t}))},{}],32:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,l=r?i-1:0,h=r?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=f}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+d]=255&s,d+=p,s/=256,f-=8);t[r+d-p]|=128*y}},{}],33:[function(t,e,r){(function(t){!function(e){function r(t,r,_){function k(t,e,r,n){return this instanceof k?function(t,e,r,n,i){g&&m&&(e instanceof m&&(e=new g(e)),n instanceof m&&(n=new g(n))),e||r||n||p?(s(e,r)||(i=r,n=e,r=0,e=new(p||Array)(8)),t.buffer=e,t.offset=r|=0,y!==a(n)&&("string"==typeof n?function(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var f=parseInt(r[i++],n);if(!(f>=0))break;a=a*n+f,s=s*n+Math.floor(a/w),a%=w}u&&(s=~s,a?a=w-a:s++),x(t,e+C,s),x(t,e+R,a)}(e,r,n,i||10):s(n,i)?u(e,r,n,i):"number"==typeof i?(x(e,r+C,n),x(e,r+R,i)):n>0?M(e,r,n):n<0?D(e,r,n):u(e,r,b,0))):t.buffer=f(b,0)}(this,t,e,r,n):new k(t,e,r,n)}function E(){var t=this.buffer,e=this.offset,r=B(t,e+C),n=B(t,e+R);return _||(r|=0),r?r*w+n:n}function x(t,e,r){t[e+T]=255&r,r>>=8,t[e+I]=255&r,r>>=8,t[e+A]=255&r,r>>=8,t[e+P]=255&r}function B(t,e){return t[e+P]*S+(t[e+A]<<16)+(t[e+I]<<8)+t[e+T]}var C=r?0:4,R=r?4:0,P=r?0:3,A=r?1:2,I=r?2:1,T=r?3:0,M=r?c:h,D=r?l:d,O=k.prototype,j="is"+t,U="_"+j;return O.buffer=void 0,O.offset=0,O[U]=!0,O.toNumber=E,O.toString=function(t){var e=this.buffer,r=this.offset,n=B(e,r+C),i=B(e,r+R),o="",s=!_&&2147483648&n;for(s&&(n=~n,i=w-i),t=t||10;;){var a=n%t*w+i;if(n=Math.floor(n/t),i=Math.floor(a/t),o=(a%t).toString(t)+o,!n&&!i)break}return s&&(o="-"+o),o},O.toJSON=E,O.toArray=n,v&&(O.toBuffer=i),g&&(O.toArrayBuffer=o),k[j]=function(t){return!(!t||!t[U])},e[t]=k,k}function n(t){var e=this.buffer,r=this.offset;return p=null,!1!==t&&0===r&&8===e.length&&_(e)?e:f(e,r)}function i(e){var r=this.buffer,n=this.offset;if(p=v,!1!==e&&0===n&&8===r.length&&t.isBuffer(r))return r;var i=new v(8);return u(i,0,r,n),i}function o(t){var e=this.buffer,r=this.offset,n=e.buffer;if(p=g,!1!==t&&0===r&&n instanceof m&&8===n.byteLength)return n;var i=new g(8);return u(i,0,e,r),i.buffer}function s(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function u(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function f(t,e){return Array.prototype.slice.call(t,e,e+8)}function c(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function l(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function h(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function d(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}var p,y="undefined",v=y!==a(t)&&t,g=y!==("undefined"==typeof Uint8Array?"undefined":a(Uint8Array))&&Uint8Array,m=y!==("undefined"==typeof ArrayBuffer?"undefined":a(ArrayBuffer))&&ArrayBuffer,b=[0,0,0,0,0,0,0,0],_=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},w=4294967296,S=16777216;r("Uint64BE",!0,!0),r("Int64BE",!0,!1),r("Uint64LE",!1,!0),r("Int64LE",!1,!1)}("object"==a(r)&&"string"!=typeof r.nodeName?r:this||{})}).call(this,t("buffer").Buffer)},{buffer:29}],34:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}]},{},[1])(1)},"object"==a(e)?t.exports=s():(i=[],void 0===(o="function"==typeof(n=s)?n.apply(e,i):n)||(t.exports=o))},298:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(i[0]^=f,i[1]^=l,i[2]^=c,i[3]^=h,i[4]^=f,i[5]^=l,i[6]^=c,i[7]^=h,r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(a)}(),n.Rabbit)},308:function(t,e,r){var n,i,o,s,a,u;t.exports=(u=r(21),r(9),i=(n=u).lib.WordArray,o=n.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=4,t}}),n.SHA224=s._createHelper(a),n.HmacSHA224=s._createHmacHelper(a),u.SHA224)},372:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.mode.CTRGladman=function(){var t=n.lib.BlockCipherMode.extend();function e(t){if(255&~(t>>24))t+=1<<24;else{var e=t>>16&255,r=t>>8&255,n=255&t;255===e?(e=0,255===r?(r=0,255===n?n=0:++n):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=n}return t}function r(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var u=0;u<i;u++)t[e+u]^=a[u]}});return t.Decryptor=i,t}(),n.mode.CTRGladman)},380:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(){var t=n,e=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,s=t.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],f=[];!function(){for(var t=0;t<80;t++)f[t]=a()}();var c=s.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],h=r[7],d=n.high,p=n.low,y=i.high,v=i.low,g=o.high,m=o.low,b=s.high,_=s.low,w=a.high,S=a.low,k=c.high,E=c.low,x=l.high,B=l.low,C=h.high,R=h.low,P=d,A=p,I=y,T=v,M=g,D=m,O=b,j=_,U=w,z=S,N=k,L=E,F=x,H=B,W=C,q=R,Y=0;Y<80;Y++){var Z,K,G=f[Y];if(Y<16)K=G.high=0|t[e+2*Y],Z=G.low=0|t[e+2*Y+1];else{var X=f[Y-15],V=X.high,Q=X.low,J=(V>>>1|Q<<31)^(V>>>8|Q<<24)^V>>>7,$=(Q>>>1|V<<31)^(Q>>>8|V<<24)^(Q>>>7|V<<25),tt=f[Y-2],et=tt.high,rt=tt.low,nt=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,it=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),ot=f[Y-7],st=ot.high,at=ot.low,ut=f[Y-16],ft=ut.high,ct=ut.low;K=(K=(K=J+st+((Z=$+at)>>>0<$>>>0?1:0))+nt+((Z+=it)>>>0<it>>>0?1:0))+ft+((Z+=ct)>>>0<ct>>>0?1:0),G.high=K,G.low=Z}var lt,ht=U&N^~U&F,dt=z&L^~z&H,pt=P&I^P&M^I&M,yt=A&T^A&D^T&D,vt=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),gt=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),mt=(U>>>14|z<<18)^(U>>>18|z<<14)^(U<<23|z>>>9),bt=(z>>>14|U<<18)^(z>>>18|U<<14)^(z<<23|U>>>9),_t=u[Y],wt=_t.high,St=_t.low,kt=W+mt+((lt=q+bt)>>>0<q>>>0?1:0),Et=gt+yt;W=F,q=H,F=N,H=L,N=U,L=z,U=O+(kt=(kt=(kt=kt+ht+((lt+=dt)>>>0<dt>>>0?1:0))+wt+((lt+=St)>>>0<St>>>0?1:0))+K+((lt+=Z)>>>0<Z>>>0?1:0))+((z=j+lt|0)>>>0<j>>>0?1:0)|0,O=M,j=D,M=I,D=T,I=P,T=A,P=kt+(vt+pt+(Et>>>0<gt>>>0?1:0))+((A=lt+Et|0)>>>0<lt>>>0?1:0)|0}p=n.low=p+A,n.high=d+P+(p>>>0<A>>>0?1:0),v=i.low=v+T,i.high=y+I+(v>>>0<T>>>0?1:0),m=o.low=m+D,o.high=g+M+(m>>>0<D>>>0?1:0),_=s.low=_+j,s.high=b+O+(_>>>0<j>>>0?1:0),S=a.low=S+z,a.high=w+U+(S>>>0<z>>>0?1:0),E=c.low=E+L,c.high=k+N+(E>>>0<L>>>0?1:0),B=l.low=B+H,l.high=x+F+(B>>>0<H>>>0?1:0),R=h.low=R+q,h.high=C+W+(R>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(c),t.HmacSHA512=e._createHmacHelper(c)}(),n.SHA512)},396:function(t,e,r){var n;t.exports=(n=r(21),r(240),r(440),r(503),r(754),r(725),r(636),r(471),r(9),r(308),r(380),r(557),r(953),r(56),r(25),r(19),r(506),r(165),r(169),r(939),r(372),r(797),r(454),r(73),r(905),r(482),r(155),r(124),r(406),r(955),r(628),r(193),r(298),r(696),r(128),n)},406:function(t,e,r){var n,i,o,s;t.exports=(s=r(21),r(165),i=(n=s).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},s.format.Hex)},440:function(t,e,r){var n;t.exports=(n=r(21),function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init,r=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var r=t.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=t[i]<<24-i%4*8;e.call(this,n,r)}else e.apply(this,arguments)};r.prototype=t}}(),n.lib.WordArray)},454:function(t,e,r){var n,i;t.exports=(i=r(21),r(165),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),n.Decryptor=n.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),n),i.mode.ECB)},471:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),i=(n=c).lib,o=i.WordArray,s=i.Hasher,a=n.algo,u=[],f=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],f=0;f<80;f++){if(f<16)u[f]=0|t[e+f];else{var c=u[f-3]^u[f-8]^u[f-14]^u[f-16];u[f]=c<<1|c>>>31}var l=(n<<5|n>>>27)+a+u[f];l+=f<20?1518500249+(i&o|~i&s):f<40?1859775393+(i^o^s):f<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=s._createHelper(f),n.HmacSHA1=s._createHmacHelper(f),c.SHA1)},477:function(){},482:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso97971={pad:function(t,e){t.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(t,e)},unpad:function(t){n.pad.ZeroPadding.unpad(t),t.sigBytes--}},n.pad.Iso97971)},503:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray,r=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(n,2*r)}},r.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var r=t.length,n=[],o=0;o<r;o++)n[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(n,2*r)}}}(),n.enc.Utf16)},506:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(471),r(25),i=(n=c).lib,o=i.Base,s=i.WordArray,a=n.algo,u=a.MD5,f=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,n=this.cfg,i=n.hasher.create(),o=s.create(),a=o.words,u=n.keySize,f=n.iterations;a.length<u;){r&&i.update(r),r=i.update(t).finalize(e),i.reset();for(var c=1;c<f;c++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*u,o}}),n.EvpKDF=function(t,e,r){return f.create(r).compute(t,e)},c.EvpKDF)},557:function(t,e,r){var n,i,o,s,a,u,f,c;t.exports=(c=r(21),r(240),r(380),i=(n=c).x64,o=i.Word,s=i.WordArray,a=n.algo,u=a.SHA512,f=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),n.SHA384=u._createHelper(f),n.HmacSHA384=u._createHmacHelper(f),c.SHA384)},628:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib,r=e.WordArray,i=e.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=s[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var f=i[o]=[],c=u[o];for(r=0;r<24;r++)f[r/6|0]|=e[(a[r]-1+c)%28]<<31-r%6,f[4+(r/6|0)]|=e[28+(a[r+24]-1+c)%28]<<31-r%6;for(f[0]=f[0]<<1|f[0]>>>31,r=1;r<7;r++)f[r]=f[r]>>>4*(r-1)+3;f[7]=f[7]<<5|f[7]>>>27}var l=this._invSubKeys=[];for(r=0;r<16;r++)l[r]=i[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=f[u][((s^i[u])&c[u])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function d(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}t.DES=i._createHelper(l);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),n=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=l.createEncryptor(r.create(e)),this._des2=l.createEncryptor(r.create(n)),this._des3=l.createEncryptor(r.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),n.TripleDES)},636:function(t,e,r){var n;t.exports=(n=r(21),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],m=t[e+7],b=t[e+8],_=t[e+9],w=t[e+10],S=t[e+11],k=t[e+12],E=t[e+13],x=t[e+14],B=t[e+15],C=o[0],R=o[1],P=o[2],A=o[3];C=f(C,R,P,A,s,7,a[0]),A=f(A,C,R,P,u,12,a[1]),P=f(P,A,C,R,d,17,a[2]),R=f(R,P,A,C,p,22,a[3]),C=f(C,R,P,A,y,7,a[4]),A=f(A,C,R,P,v,12,a[5]),P=f(P,A,C,R,g,17,a[6]),R=f(R,P,A,C,m,22,a[7]),C=f(C,R,P,A,b,7,a[8]),A=f(A,C,R,P,_,12,a[9]),P=f(P,A,C,R,w,17,a[10]),R=f(R,P,A,C,S,22,a[11]),C=f(C,R,P,A,k,7,a[12]),A=f(A,C,R,P,E,12,a[13]),P=f(P,A,C,R,x,17,a[14]),C=c(C,R=f(R,P,A,C,B,22,a[15]),P,A,u,5,a[16]),A=c(A,C,R,P,g,9,a[17]),P=c(P,A,C,R,S,14,a[18]),R=c(R,P,A,C,s,20,a[19]),C=c(C,R,P,A,v,5,a[20]),A=c(A,C,R,P,w,9,a[21]),P=c(P,A,C,R,B,14,a[22]),R=c(R,P,A,C,y,20,a[23]),C=c(C,R,P,A,_,5,a[24]),A=c(A,C,R,P,x,9,a[25]),P=c(P,A,C,R,p,14,a[26]),R=c(R,P,A,C,b,20,a[27]),C=c(C,R,P,A,E,5,a[28]),A=c(A,C,R,P,d,9,a[29]),P=c(P,A,C,R,m,14,a[30]),C=l(C,R=c(R,P,A,C,k,20,a[31]),P,A,v,4,a[32]),A=l(A,C,R,P,b,11,a[33]),P=l(P,A,C,R,S,16,a[34]),R=l(R,P,A,C,x,23,a[35]),C=l(C,R,P,A,u,4,a[36]),A=l(A,C,R,P,y,11,a[37]),P=l(P,A,C,R,m,16,a[38]),R=l(R,P,A,C,w,23,a[39]),C=l(C,R,P,A,E,4,a[40]),A=l(A,C,R,P,s,11,a[41]),P=l(P,A,C,R,p,16,a[42]),R=l(R,P,A,C,g,23,a[43]),C=l(C,R,P,A,_,4,a[44]),A=l(A,C,R,P,k,11,a[45]),P=l(P,A,C,R,B,16,a[46]),C=h(C,R=l(R,P,A,C,d,23,a[47]),P,A,s,6,a[48]),A=h(A,C,R,P,m,10,a[49]),P=h(P,A,C,R,x,15,a[50]),R=h(R,P,A,C,v,21,a[51]),C=h(C,R,P,A,k,6,a[52]),A=h(A,C,R,P,p,10,a[53]),P=h(P,A,C,R,w,15,a[54]),R=h(R,P,A,C,u,21,a[55]),C=h(C,R,P,A,b,6,a[56]),A=h(A,C,R,P,B,10,a[57]),P=h(P,A,C,R,g,15,a[58]),R=h(R,P,A,C,E,21,a[59]),C=h(C,R,P,A,y,6,a[60]),A=h(A,C,R,P,S,10,a[61]),P=h(P,A,C,R,d,15,a[62]),R=h(R,P,A,C,_,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+R|0,o[2]=o[2]+P|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,f=0;f<4;f++){var c=u[f];u[f]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function f(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e}function c(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),n.MD5)},696:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.StreamCipher,r=t.algo,i=[],o=[],s=[],a=r.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=f>>>16|4294901760&c,h=c<<16|65535&f;for(n[0]^=f,n[1]^=l,n[2]^=c,n[3]^=h,n[4]^=f,n[5]^=l,n[6]^=c,n[7]^=h,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)o[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=t[r]+e[r],i=65535&n,a=n>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,f=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=u^f}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(a)}(),n.RabbitLegacy)},725:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64url={stringify:function(t,e){void 0===e&&(e=!0);var r=t.words,n=t.sigBytes,i=e?this._safe_map:this._map;t.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,u=0;u<4&&s+.75*u<n;u++)o.push(i.charAt(a>>>6*(3-u)&63));var f=i.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(t,e){void 0===e&&(e=!0);var n=t.length,i=e?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var u=t.indexOf(a);-1!==u&&(n=u)}return r(t,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},754:function(t,e,r){var n;t.exports=(n=r(21),function(){var t=n,e=t.lib.WordArray;function r(t,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return r(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},797:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}}),n.Decryptor=i,n),o.mode.OFB)},860:function(t,e){var r,n,i,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}o=function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,(function(t){return i(e[s][1][t]||t)}),f,f.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(s[r]);this._dict_set=!0}}function c(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(t,e){var r,s,a=this.strm,f=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(f),a.next_out=0,a.avail_out=f),1!==(r=n.deflate(a,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(a.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=f,r.deflate=c,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),c=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new f,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[r])}function h(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,u,f,l,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(r=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===y&&(r=s.Z_OK,y=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),f=h.next_out-u,l=o.buf2string(h.output,u),h.next_out=f,h.avail_out=d-f,f&&i.arraySet(h.output,h.output,u,f,0),this.onData(l)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(y=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=l,r.inflate=h,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},r.ungzip=h},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=s(i))throw new TypeError(i+"must be non-object");for(var o in i)e=i,r=o,Object.prototype.hasOwnProperty.call(e,r)&&(t[o]=i[o])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),o=s=0;s<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,a=e||t.length,f=new Array(2*a);for(r=n=0;r<a;)if((i=t[r++])<128)f[n++]=i;else if(4<(o=s[i]))f[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<a;)i=i<<6|63&t[r++],o--;1<o?f[n++]=65533:i<65536?f[n++]=i:(i-=65536,f[n++]=55296|i>>10&1023,f[n++]=56320|1023&i)}return u(f,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t,o=t>>>16&65535,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;o=o+(i=i+e[n++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return~t}},{}],8:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),u=t("./messages"),f=-2,c=258,l=262,h=113;function d(t,e){return t.msg=u[e],e}function p(t){return(t<<1)-(4<t?9:0)}function y(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function g(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function m(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function _(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-l?t.strstart-(t.w_size-l):0,f=t.window,h=t.w_mask,d=t.prev,p=t.strstart+c,y=f[o+s-1],v=f[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(f[(r=e)+s]===v&&f[r+s-1]===y&&f[r]===f[o]&&f[++r]===f[o+1]){o+=2,r++;do{}while(f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&o<p);if(n=c-(p-o),o=p-c,s<n){if(t.match_start=e,a<=(s=n))break;y=f[o+s-1],v=f[o+s]}}}while((e=d[e&h])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function w(t){var e,r,n,o,u,f,c,h,d,p,y=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=y+(y-l)){for(i.arraySet(t.window,t.window,y,y,0),t.match_start-=y,t.strstart-=y,t.block_start-=y,e=r=t.hash_size;n=t.head[--e],t.head[e]=y<=n?n-y:0,--r;);for(e=r=y;n=t.prev[--e],t.prev[e]=y<=n?n-y:0,--r;);o+=y}if(0===t.strm.avail_in)break;if(f=t.strm,c=t.window,h=t.strstart+t.lookahead,p=void 0,(d=o)<(p=f.avail_in)&&(p=d),r=0===p?0:(f.avail_in-=p,i.arraySet(c,f.input,f.next_in,p,h),1===f.state.wrap?f.adler=s(f.adler,c,p,h):2===f.state.wrap&&(f.adler=a(f.adler,c,p,h)),f.next_in+=p,f.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<l&&0!==t.strm.avail_in)}function S(t,e){for(var r,n;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var r,n,i;;){if(t.lookahead<l){if(w(t),t.lookahead<l&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-l&&(t.match_length=_(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:h,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):d(t,f)}function C(t){var e,r=B(t);return 0===r&&((e=t.state).window_size=2*e.w_size,y(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function R(t,e,r,n,o,s){if(!t)return f;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),o<1||9<o||8!==r||n<8||15<n||e<0||9<e||s<0||4<s)return d(t,f);8===n&&(n=9);var u=new x;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,C(t)}n=[new E(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-l&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(g(t,!1),t.strm.avail_out),1)})),new E(4,4,8,4,S),new E(4,5,16,8,S),new E(4,6,32,32,S),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],r.deflateInit=function(t,e){return R(t,e,8,15,8,0)},r.deflateInit2=R,r.deflateReset=C,r.deflateResetKeep=B,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,0):f},r.deflate=function(t,e){var r,i,s,u;if(!t||!t.state||5<e||e<0)return t?d(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return d(t,0===t.avail_out?-5:f);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),m(i,3),i.status=h);else{var l=8+(i.w_bits-8<<4)<<8;l|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(l|=32),l+=31-l%31,i.status=h,b(i,l),0!==i.strstart&&(b(i,t.adler>>>16),b(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),v(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}m(i,u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(t),i.pending+2<=i.pending_buf_size&&(m(i,255&t.adler),m(i,t.adler>>8&255),t.adler=0,i.status=h)):i.status=h),0!==i.pending){if(v(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(r)&&4!==e)return d(t,-5);if(666===i.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var _=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=c){if(w(t),t.lookahead<=c&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=t.strstart+c;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=c-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(y(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&t.adler),m(i,t.adler>>8&255),m(i,t.adler>>16&255),m(i,t.adler>>24&255),m(i,255&t.total_in),m(i,t.total_in>>8&255),m(i,t.total_in>>16&255),m(i,t.total_in>>24&255)):(b(i,t.adler>>>16),b(i,65535&t.adler)),v(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==h&&666!==e?d(t,f):(t.state=null,e===h?d(t,-3):0):f},r.deflateSetDictionary=function(t,e){var r,n,o,a,u,c,l,h,d=e.length;if(!t||!t.state)return f;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(y(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,e,d-r.w_size,r.w_size,0),e=h,d=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,w(r);r.lookahead>=3;){for(n=r.strstart,o=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,s,a,u,f,c,l,h,d,p,y,v,g,m,b,_,w,S,k,E,x,B;r=t.state,n=t.next_in,x=t.input,i=n+(t.avail_in-5),o=t.next_out,B=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,f=r.wsize,c=r.whave,l=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=y[d&g];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))B[o++]=65535&b;else{if(!(16&_)){if(!(64&_)){b=y[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=x[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=v[d&m];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(!(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&b,p<(_&=15)&&(d+=x[n++]<<p,(p+=8)<_&&(d+=x[n++]<<p,p+=8)),u<(S+=d&(1<<_)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,(_=o-s)<S){if(c<(_=S-_)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=h,(k=0)===l){if(k+=f-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}}else if(l<_){if(k+=f+l-_,(_-=l)<w){for(w-=_;B[o++]=h[k++],--_;);if(k=0,l<w){for(w-=_=l;B[o++]=h[k++],--_;);k=o-S,E=B}}}else if(k+=l-_,_<w){for(w-=_;B[o++]=h[k++],--_;);k=o-S,E=B}for(;2<w;)B[o++]=E[k++],B[o++]=E[k++],B[o++]=E[k++],w-=3;w&&(B[o++]=E[k++],1<w&&(B[o++]=E[k++]))}else{for(k=o-S;B[o++]=B[k++],B[o++]=B[k++],B[o++]=B[k++],2<(w-=3););w&&(B[o++]=B[k++],1<w&&(B[o++]=B[k++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}},{}],11:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=-2;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):u}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):u}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):u}function p(t,e){var r,n;return t?(n=new c,(t.state=n).window=null,0!==(r=d(t,e))&&(t.state=null),r):u}var y,v,g=!0;function m(t){if(g){var e;for(y=new n.Buf32(512),v=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,y,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),g=!1}t.lencode=y,t.lenbits=9,t.distcode=v,t.distbits=5}function b(t,e,r,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),n.arraySet(s.window,e,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=h,r.inflateReset2=d,r.inflateResetKeep=l,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,c,l,h,d,p,y,v,g,_,w,S,k,E,x,B,C,R,P,A,I,T,M,D,O=0,j=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,_=p,w=y,T=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(2&r.wrap&&35615===v){j[r.check=0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0),g=v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",r.mode=30;break}if(g-=4,I=8+(15&(v>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&v?10:12,g=v=0;break;case 2:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.flags=v,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=3;case 3:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.time=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,j[2]=v>>>16&255,j[3]=v>>>24&255,r.check=o(r.check,j,4,0)),g=v=0,r.mode=4;case 4:for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(j[0]=255&v,j[1]=v>>>8&255,r.check=o(r.check,j,2,0)),g=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(S=r.length)&&(S=p),S&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,h,S,I)),512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,r.length-=S),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;for(S=0;I=c[h+S++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I)),I&&S<p;);if(512&r.flags&&(r.check=o(r.check,c,S,h)),p-=S,h+=S,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}t.adler=r.check=f(v),g=v=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){v>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}switch(r.last=1&v,g-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(m(r),r.mode=20,6!==e)break;v>>>=2,g-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,g=v=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(S=r.length){if(p<S&&(S=p),y<S&&(S=y),0===S)break t;n.arraySet(l,c,h,S,d),p-=S,h+=S,y-=S,d+=S,r.length-=S;break}r.mode=12;break;case 17:for(;g<14;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(r.nlen=257+(31&v),v>>>=5,g-=5,r.ndist=1+(31&v),v>>>=5,g-=5,r.ncode=4+(15&v),v>>>=4,g-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.lens[U[r.have++]]=7&v,v>>>=3,g-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},T=a(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;B=(O=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&O,!((x=O>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(C<16)v>>>=x,g-=x,r.lens[r.have++]=C;else{if(16===C){for(D=x+2;g<D;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v>>>=x,g-=x,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],S=3+(3&v),v>>>=2,g-=2}else if(17===C){for(D=x+3;g<D;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=3+(7&(v>>>=x)),v>>>=3,g-=3}else{for(D=x+7;g<D;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}g-=x,I=0,S=11+(127&(v>>>=x)),v>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},T=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,T){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},T=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,T){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=p&&258<=y){t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,s(t,w),d=t.next_out,l=t.output,y=t.avail_out,h=t.next_in,c=t.input,p=t.avail_in,v=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;B=(O=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,C=65535&O,!((x=O>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(B&&!(240&B)){for(R=x,P=B,A=C;B=(O=r.lencode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&O,!(R+(x=O>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,r.length=C,0===B){r.mode=26;break}if(32&B){r.back=-1,r.mode=12;break}if(64&B){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&B,r.mode=22;case 22:if(r.extra){for(D=r.extra;g<D;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;B=(O=r.distcode[v&(1<<r.distbits)-1])>>>16&255,C=65535&O,!((x=O>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(!(240&B)){for(R=x,P=B,A=C;B=(O=r.distcode[A+((v&(1<<R+P)-1)>>R)])>>>16&255,C=65535&O,!(R+(x=O>>>24)<=g);){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}v>>>=R,g-=R,r.back+=R}if(v>>>=x,g-=x,r.back+=x,64&B){t.msg="invalid distance code",r.mode=30;break}r.offset=C,r.extra=15&B,r.mode=24;case 24:if(r.extra){for(D=r.extra;g<D;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===y)break t;if(S=w-y,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}S>r.wnext?(S-=r.wnext,k=r.wsize-S):k=r.wnext-S,S>r.length&&(S=r.length),E=r.window}else E=l,k=d-r.offset,S=r.length;for(y<S&&(S=y),y-=S,r.length-=S;l[d++]=E[k++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===y)break t;l[d++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===p)break t;p--,v|=c[h++]<<g,g+=8}if(w-=y,t.total_out+=w,r.total+=w,w&&(t.adler=r.check=r.flags?o(r.check,l,w,d-w):i(r.check,l,w,d-w)),w=y,(r.flags?v:f(v))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===p)break t;p--,v+=c[h++]<<g,g+=8}if(v!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=v=0}r.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;default:return u}return t.next_out=d,t.avail_out=y,t.next_in=h,t.avail_in=p,r.hold=v,r.bits=g,(r.wsize||w!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&b(t,t.output,t.next_out,w-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,w-=t.avail_out,t.total_in+=_,t.total_out+=w,r.total+=w,r.wrap&&w&&(t.adler=r.check=r.flags?o(r.check,l,w,t.next_out-w):i(r.check,l,w,t.next_out-w)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===w||4===e)&&0===T&&(T=-5),T)},r.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state&&2&(r=t.state).wrap?((r.head=e).done=!1,0):u},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,e,n,0)!==r.check?-3:b(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,f,c,l,h){var d,p,y,v,g,m,b,_,w,S=h.bits,k=0,E=0,x=0,B=0,C=0,R=0,P=0,A=0,I=0,T=0,M=null,D=0,O=new n.Buf16(16),j=new n.Buf16(16),U=null,z=0;for(k=0;k<=15;k++)O[k]=0;for(E=0;E<u;E++)O[e[r+E]]++;for(C=S,B=15;1<=B&&0===O[B];B--);if(B<C&&(C=B),0===B)return f[c++]=20971520,f[c++]=20971520,h.bits=1,0;for(x=1;x<B&&0===O[x];x++);for(C<x&&(C=x),k=A=1;k<=15;k++)if(A<<=1,(A-=O[k])<0)return-1;if(0<A&&(0===t||1!==B))return-1;for(j[1]=0,k=1;k<15;k++)j[k+1]=j[k]+O[k];for(E=0;E<u;E++)0!==e[r+E]&&(l[j[e[r+E]]++]=E);if(0===t?(M=U=l,m=19):1===t?(M=i,D-=257,U=o,z-=257,m=256):(M=s,U=a,m=-1),k=x,g=c,P=E=T=0,y=-1,v=(I=1<<(R=C))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(b=k-P,l[E]<m?(_=0,w=l[E]):l[E]>m?(_=U[z+l[E]],w=M[D+l[E]]):(_=96,w=0),d=1<<k-P,x=p=1<<R;f[g+(T>>P)+(p-=d)]=b<<24|_<<16|w,0!==p;);for(d=1<<k-1;T&d;)d>>=1;if(0!==d?(T&=d-1,T+=d):T=0,E++,0==--O[k]){if(k===B)break;k=e[r+l[E]]}if(C<k&&(T&v)!==y){for(0===P&&(P=C),g+=x,A=1<<(R=k-P);R+P<B&&!((A-=O[R+P])<=0);)R++,A<<=1;if(I+=1<<R,1===t&&852<I||2===t&&592<I)return 1;f[y=T&v]=C<<24|R<<16|g-c}}return 0!==T&&(f[g+T]=k-P<<24|64<<16),h.bits=C,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,u=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var p=new Array(60);i(p);var y=new Array(512);i(y);var v=new Array(256);i(v);var g=new Array(29);i(g);var m,b,_,w=new Array(a);function S(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?y[t]:y[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function C(t,e,r){B(t,r[2*e],r[2*e+1])}function R(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function P(t,e,r){var n,i,o=new Array(16),s=0;for(n=1;n<=u;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=R(o[a]++,a))}}function A(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function M(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function D(t,e,r){var n,i,s,a,u=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===n?C(t,i,e):(C(t,(s=v[i])+o+1,e),0!==(a=f[s])&&B(t,i-=g[s],a),C(t,s=E(--n),r),0!==(a=c[s])&&B(t,n-=w[s],a)),u<t.last_lit;);C(t,256,e)}function O(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,f=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<f;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;1<=r;r--)M(t,o,r);for(i=f;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,M(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,s,a,f=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,y=e.stat_desc.max_length,v=0;for(o=0;o<=u;o++)t.bl_count[o]=0;for(f[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)y<(o=f[2*f[2*(n=t.heap[r])+1]+1]+1)&&(o=y,v++),f[2*n+1]=o,c<n||(t.bl_count[o]++,s=0,p<=n&&(s=d[n-p]),a=f[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==v){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,v-=2}while(0<v);for(o=y;0!==o;o--)for(n=t.bl_count[o];0!==n;)c<(i=t.heap[--r])||(f[2*i+1]!==o&&(t.opt_len+=(o-f[2*i+1])*f[2*i],f[2*i+1]=o),n--)}}(t,e),P(o,c,t.bl_count)}function j(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(a<f?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4))}function U(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<u&&i===s)){if(a<f)for(;C(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==o&&(C(t,i,t.bl_tree),a--),C(t,16,t.bl_tree),B(t,a-3,2)):a<=10?(C(t,17,t.bl_tree),B(t,a-3,3)):(C(t,18,t.bl_tree),B(t,a-11,7));o=i,(a=0)===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4)}}i(w);var z=!1;function N(t,e,r,i){var o,s,a;B(t,0+(i?1:0),3),s=e,a=r,I(o=t),x(o,a),x(o,~a),n.arraySet(o.pending_buf,o.window,s,a,o.pending),o.pending+=a}r._tr_init=function(t){z||(function(){var t,e,r,n,i,o=new Array(16);for(n=r=0;n<28;n++)for(g[n]=r,t=0;t<1<<f[n];t++)v[r++]=n;for(v[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,t=0;t<1<<c[n];t++)y[i++]=n;for(i>>=7;n<a;n++)for(w[n]=i<<7,t=0;t<1<<c[n]-7;t++)y[256+i++]=n;for(e=0;e<=u;e++)o[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,o[8]++;for(;t<=255;)d[2*t+1]=9,t++,o[9]++;for(;t<=279;)d[2*t+1]=7,t++,o[7]++;for(;t<=287;)d[2*t+1]=8,t++,o[8]++;for(P(d,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=R(t,5);m=new S(d,f,257,s,u),b=new S(p,c,0,a,u),_=new S(new Array(0),l,0,19,7)}(),z=!0),t.l_desc=new k(t.dyn_ltree,m),t.d_desc=new k(t.dyn_dtree,b),t.bl_desc=new k(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,A(t)},r._tr_stored_block=N,r._tr_flush_block=function(t,e,r,n){var i,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),O(t,t.l_desc),O(t,t.d_desc),a=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),O(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?N(t,e,r,n):4===t.strategy||s===i?(B(t,2+(n?1:0),3),D(t,d,p)):(B(t,4+(n?1:0),3),function(t,e,r,n){var i;for(B(t,e-257,5),B(t,r-1,5),B(t,n-4,4),i=0;i<n;i++)B(t,t.bl_tree[2*h[i]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),D(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&I(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(v[r]+o+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){var e;B(t,2,3),C(t,256,d),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},"object"==s(e)?t.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(e,n):r)||(t.exports=i))},905:function(t,e,r){var n;t.exports=(n=r(21),r(165),n.pad.Iso10126={pad:function(t,e){var r=4*e,i=r-t.sigBytes%r;t.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Iso10126)},939:function(t,e,r){var n,i,o;t.exports=(o=r(21),r(165),o.mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)t[e+a]^=s[a]}}),n.Decryptor=i,n),o.mode.CTR)},953:function(t,e,r){var n;t.exports=(n=r(21),r(240),function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,s=e.x64.Word,a=e.algo,u=[],f=[],c=[];!function(){for(var t=1,e=0,r=0;r<24;r++){u[t+5*e]=(r+1)*(r+2)/2%64;var n=(2*t+3*e)%5;t=e%5,e=n}for(t=0;t<5;t++)for(e=0;e<5;e++)f[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?l^=1<<d:a^=1<<d-32}128&i?i=i<<1^113:i<<=1}c[o]=s.create(a,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=s.create()}();var h=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(R=r[i]).high^=s,R.low^=o}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var d=0,p=0,y=0;y<5;y++)d^=(R=r[h+5*y]).high,p^=R.low;var v=l[h];v.high=d,v.low=p}for(h=0;h<5;h++){var g=l[(h+4)%5],m=l[(h+1)%5],b=m.high,_=m.low;for(d=g.high^(b<<1|_>>>31),p=g.low^(_<<1|b>>>31),y=0;y<5;y++)(R=r[h+5*y]).high^=d,R.low^=p}for(var w=1;w<25;w++){var S=(R=r[w]).high,k=R.low,E=u[w];E<32?(d=S<<E|k>>>32-E,p=k<<E|S>>>32-E):(d=k<<E-32|S>>>64-E,p=S<<E-32|k>>>64-E);var x=l[f[w]];x.high=d,x.low=p}var B=l[0],C=r[0];for(B.high=C.high,B.low=C.low,h=0;h<5;h++)for(y=0;y<5;y++){var R=r[w=h+5*y],P=l[w],A=l[(h+1)%5+5*y],I=l[(h+2)%5+5*y];R.high=P.high^~A.high&I.high,R.low=P.low^~A.low&I.low}R=r[0];var T=c[a];R.high^=T.high,R.low^=T.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,f=[],c=0;c<u;c++){var l=s[c],h=l.high,d=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f.push(d),f.push(h)}return new i.init(f,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});e.SHA3=o._createHelper(h),e.HmacSHA3=o._createHmacHelper(h)}(Math),n.SHA3)},955:function(t,e,r){var n;t.exports=(n=r(21),r(754),r(636),r(506),r(165),function(){var t=n,e=t.lib.BlockCipher,r=t.algo,i=[],o=[],s=[],a=[],u=[],f=[],c=[],l=[],h=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var y=t[r],v=t[y],g=t[v],m=257*t[p]^16843008*p;s[r]=m<<24|m>>>8,a[r]=m<<16|m>>>16,u[r]=m<<8|m>>>24,f[r]=m,m=16843009*g^65537*v^257*y^16843008*r,c[p]=m<<24|m>>>8,l[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,d[p]=m,r?(r=y^t[t[t[g^y]]],n^=t[t[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=e[s]:(f=o[s-1],s%r?r>6&&s%r==4&&(f=i[f>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f]):(f=i[(f=f<<8|f>>>24)>>>24]<<24|i[f>>>16&255]<<16|i[f>>>8&255]<<8|i[255&f],f^=p[s/r|0]<<24),o[s]=o[s-r]^f);for(var a=this._invKeySchedule=[],u=0;u<n;u++){if(s=n-u,u%4)var f=o[s];else f=o[s-4];a[u]=u<4||s<=4?f:c[i[f>>>24]]^l[i[f>>>16&255]]^h[i[f>>>8&255]]^d[i[255&f]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,u,f,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,c,l,h,d,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var u=this._nRounds,f=t[e]^r[0],c=t[e+1]^r[1],l=t[e+2]^r[2],h=t[e+3]^r[3],d=4,p=1;p<u;p++){var y=n[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^r[d++],v=n[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^r[d++],g=n[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^r[d++],m=n[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^r[d++];f=y,c=v,l=g,h=m}y=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^r[d++],v=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^r[d++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^r[d++],m=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^r[d++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=m},keySize:8});t.AES=e._createHelper(y)}(),n.AES)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pairs=[],this.size=0},(r=[{key:"has",value:function(t){return this._indexOf(t)>-1}},{key:"get",value:function(t){var e=this._indexOf(t);if(e>-1)return this._pairs[e][1]}},{key:"set",value:function(t,e){var r=this._indexOf(t);r>-1?this._pairs[r][1]=e:(this._pairs.push([t,e]),this.size++)}},{key:"delete",value:function(t){var e=this._indexOf(t);return e>-1&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function(t){for(var e=0;e<this._pairs.length;e++)t(this._pairs[e][1],this._pairs[e][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(t){for(var e=0;e<this._pairs.length;e++)if(this._pairs[e][0]===t)return e;return-1}}])&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),o=function(){return new(self.Map||i)};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=[],this.size=0},(e=[{key:"add",value:function(t){return this._set.push(t),this.size++,this}},{key:"has",value:function(t){return this._set.indexOf(t)>-1}},{key:"delete",value:function(t){for(var e=0;e<this._set.length;e++)if(this._set[e]===t)return this._set.splice(e,1),this.size--,!0;return!1}},{key:"forEach",value:function(t){for(var e=0;e<this._set.length;e++)t(this._set[e])}},{key:"clear",value:function(){this._set=[]}}])&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),c=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new(self.Set||f),r=0;r<t.length;r++)e.add(t[r]);return e};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function d(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._msgListeners=o()},e=[{key:"setMessagingPort",value:function(t){var e=this;this._messagePort=t,t.setonmessage((function(t){var r=t.data,n=[],i=e._msgListeners.get(r.msgType);i&&i.forEach((function(t){t.callback(r.data),t.isOneTime&&n.push(t)})),n.forEach((function(t){i.delete(t)}))}))}},{key:"sendAsync",value:function(t,e,r,n,i){n&&r&&this.addMessageListener(r,n,i),this._messagePort.postMessage({msgType:t,data:e})}},{key:"addMessageListener",value:function(t,e,r){var n=null;this._msgListeners.has(t)?n=this._msgListeners.get(t):(n=c(),this._msgListeners.set(t,n)),n.add({callback:e,isOneTime:r})}}],e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),y="dataWupDispatchRateSettings",v="logWupDispatchRateSettings",g="forceDynamicDataWupDispatchSettings",m="wupStatisticsLogIntervalMs",b="serverCommunicationSettings",_="wupResponseTimeout",w="wupMessageRequestTimeout",S="logMessageRequestTimeout",k="crossDomainsList",E="logLevel",x="allowedUnmaskedValuesList",B="wupMessageNumToRetry",C="wupMessageRetryInterval",R="wupIncrementalGrowthBetweenFailures",P="wupMaxIntervalBetweenFailures",A="logMessageNumToRetry",I="logMessageRetryInterval",T="logIncrementalGrowthBetweenFailures",M="logMaxIntervalBetweenFailures",D="NewSessionStartedEvent",O="ConfigurationLoadedEvent",j="ServerStateUpdatedEvent",U="HeartBeatStatusEvent",z="ServerRestoredMuidEvent",N="ServerNewAgentIdEvent",L=10,F=20,H=30,W=40;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Z(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q(e)?e:e+""}var K={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},G=["keyEventsMaskSpecialChars","passwordIdMaskingList","maskElementsAttributes",x,"enableUnmaskedValues","enableCoordinatesMasking"],X=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requireParseFields=o(),this._requireParseFields.set(y,y),this._requireParseFields.set(v,v),this._requireParseFields.set(k,k),this._requireParseFields.set(x,x),this._requireParseFields.set(b,b),this._configurationList={},this.configDefault={logLevel:F,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableDebugInfoFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:K.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,offloadFontsCollectionEnabled:!1,passwordIdMaskingList:[]},this.loadConfigurations(this.configDefault)},(e=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(t,e){var r=this;t&&(this._isDefaultConfiguration=t===this.configDefault,Object.keys(t).forEach((function(n){if(e||r._isDefaultConfiguration||!G.includes(n)){var i=t[n];if(r._requireParseFields.has(n)){var o=r._tryParseConfigurationValue(i);o&&(i=o)}r._configurationList[n]=i}})))}},{key:"get",value:function(t){return this._configurationList[t]}},{key:"set",value:function(t,e){this._configurationList[t]=e}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){}return null}}])&&Y(t.prototype,e),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V(e)?e:e+""}var $=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[]},(e=[{key:"subscribe",value:function(t){this._listeners.push(t)}},{key:"publish",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)this._listeners[e](t)}},{key:"unsubscribe",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)if(t===this._listeners[e]){this._listeners.splice(e,1);break}}}])&&Q(t.prototype,e),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,it(n.key),n)}}function nt(t,e,r){return e&&rt(t.prototype,e),r&&rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function it(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:e+""}var ot=function(){return nt((function t(){et(this,t)}),null,[{key:"setLogger",value:function(t){this._logger=t}},{key:"attachSessionIdentifiers",value:function(t){if(this._logger)return this._logger.attachSessionIdentifiers(t)}},{key:"isDebug",value:function(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function(t,e){this._logger&&this._logger.error(t,e||null)}},{key:"warn",value:function(t,e){this._logger&&this._logger.warn(t,e||null)}},{key:"trace",value:function(t){this._logger&&this._logger.trace(t)}},{key:"debug",value:function(t){this._logger&&this._logger.debug(t)}},{key:"info",value:function(t){this._logger&&this._logger.info(t)}}])}(),st=function(){return nt((function t(e,r){et(this,t),this._logBridge=e,this._logLevel=r||F,this._sessionIdentifiers={}}),[{key:"attachSessionIdentifiers",value:function(t){Object.assign(this._sessionIdentifiers,t)}},{key:"trace",value:function(t){this._sendToLogBridge(t,L)}},{key:"debug",value:function(t){this._sendToLogBridge(t,L)}},{key:"info",value:function(t){this._sendToLogBridge(t,F)}},{key:"warn",value:function(t,e){this._sendToLogBridge(t,H,e)}},{key:"error",value:function(t,e){this._sendToLogBridge(t,W,e)}},{key:"isDebug",value:function(){return this._logLevel===L}},{key:"updateLogConfig",value:function(t){this._logLevel=t.get(E)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function(t,e,r){e>=this._logLevel&&(r&&r.stack&&(t+=" ;stack: ".concat(r.stack)),this._logBridge.log(t,e,this._sessionIdentifiers))}}])}();function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function ft(t){var e=function(t,e){if("object"!=at(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==at(e)?e:e+""}var ct=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onServerStateUpdated=new $,this.reset()},e=[{key:"getSts",value:function(){return this._sts}},{key:"getStd",value:function(){return this._std}},{key:"getSid",value:function(){return this._sid}},{key:"setCid",value:function(t){this._cid=t}},{key:"getCid",value:function(){return this._cid}},{key:"getCsid",value:function(){return this._csid}},{key:"getPsid",value:function(){return this._psid}},{key:"getMuid",value:function(){return this._muid}},{key:"getContextName",value:function(){return this._contextName}},{key:"getRequestId",value:function(){return this._requestId}},{key:"getWupDispatchRate",value:function(){return this._wupDispatchRate}},{key:"getBrand",value:function(){return this._brand}},{key:"setSts",value:function(t){this._sts=t}},{key:"setStd",value:function(t){this._std=t}},{key:"setSid",value:function(t){this._sid=t}},{key:"setCsid",value:function(t){this._csid=t}},{key:"setPsid",value:function(t){this._psid=t}},{key:"setMuid",value:function(t){this._muid=t||null}},{key:"setOtt",value:function(t){this._ott=t}},{key:"getOtt",value:function(){return this._ott}},{key:"setContextName",value:function(t){this._contextName=t}},{key:"setRequestId",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._requestId=t,e&&this._publish(),this._requestId}},{key:"setWupDispatchRate",value:function(t){t?this._wupDispatchRate=t:ot.warn("Wup dispatch rate of ".concat(t," is invalid. Ignoring update"))}},{key:"setBrand",value:function(t){this._brand=t}},{key:"setAgentType",value:function(t){this._agent_type=t}},{key:"getAgentType",value:function(){return this._agent_type}},{key:"setAgentId",value:function(t){this._agent_id=t}},{key:"getAgentId",value:function(){return this._agent_id}},{key:"markConfigurationRequested",value:function(){this._hasConfiguration?ot.warn("We already have configuration. Ignoring the attempt to mark a pending configuration request."):this._hasPendingConfigurationRequest=!0}},{key:"markConfigurationReceived",value:function(){this._hasConfiguration?ot.warn("Marking that we received configuration although we already received configuration from the server. We shouldn\'t have received it again."):this._hasPendingConfigurationRequest||ot.warn("Marking that we received configurations although we didn\'t have a pending request for configurations."),this._hasPendingConfigurationRequest=!1,this._hasConfiguration=!0}},{key:"getHasConfiguration",value:function(){return this._hasConfiguration}},{key:"getHasPendingConfigurationRequest",value:function(){return this._hasPendingConfigurationRequest}},{key:"incrementRequestId",value:function(){return this._requestId++,this._publish(),this._requestId}},{key:"resetRequestId",value:function(){this._requestId=0}},{key:"reset",value:function(){this._ott=null,this._sts=null,this._std=null,this._sid=null,this._cid=null,this._csid=null,this._muid=null,this._contextName=null,this._requestId=0,this._wupDispatchRate=5e3,this._hasConfiguration=!1,this._hasPendingConfigurationRequest=!1,this._brand=null,this._agent_type=null,this._agent_id=null,this._baseServerUrl=null,this._protocolType=null,this._shouldMinifyUri=!1}},{key:"setBaseServerUrl",value:function(t){this._baseServerUrl=t}},{key:"getBaseServerUrl",value:function(){return this._baseServerUrl}},{key:"setProtocolType",value:function(t){this._protocolType=t}},{key:"setShouldMinifyUri",value:function(t){this._shouldMinifyUri=t}},{key:"getShouldMinifyUri",value:function(){return this._shouldMinifyUri}},{key:"getProtocolType",value:function(){return this._protocolType}},{key:"_publish",value:function(){this.onServerStateUpdated.publish({requestId:this._requestId,sid:this._sid,sts:this._sts,std:this._std,ott:this._ott})}}],e&&ut(t.prototype,e),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dt(n.key),n)}}function dt(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}var pt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"build",value:function(t){return t.getInternalMessage()}}])&&ht(t.prototype,e),r&&ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yt(e)?e:e+""}var mt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buffer=[]},(e=[{key:"hasItems",value:function(){return this.length()>0}},{key:"length",value:function(){return this._buffer.length}},{key:"enqueue",value:function(t){this._buffer.push(t)}},{key:"enqueueToHead",value:function(t){this._buffer.unshift(t)}},{key:"dequeue",value:function(){return this._buffer.shift()}},{key:"getItem",value:function(t){return this._buffer[t]}}])&&vt(t.prototype,e),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wt(n.key),n)}}function wt(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}var St,kt,Et,xt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,r,{capture:n,passive:i,once:o}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}},{key:"outerHTML",value:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)}},{key:"onDocumentBody",value:function(t,e){t.document.body?e():window.addEventListener?window.addEventListener("DOMContentLoaded",e,!0):window.attachEvent("onload",e)}},{key:"onPageLoad",value:function(e,r){t.addEventListener(e,"load",r,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&r()}},{key:"awaitWindowDocumentReady",value:function(t){var e=this;return new Promise((function(r,n){try{e.onWindowDocumentReady(t,(function(){r()}))}catch(t){n(t)}}))}},{key:"onWindowDocumentReady",value:function(e,r){var n=window.addEventListener?"DOMContentLoaded":"load";if("complete"===e.document.readyState||"interactive"===e.document.readyState)r();else{var i=function(){t.removeEventListener(e,n,i,!0),r()};t.addEventListener(e,n,i,!0)}}},{key:"isWindowDocumentReady",value:function(t){return t&&"complete"===t.document.readyState}},{key:"canAccessIFrame",value:function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e}},{key:"matches",value:function(t,e){var r=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){var e=this.document||this.ownerDocument;if(!e)return!1;for(var r=e.querySelectorAll(t),n=r.length;--n>=0&&(r.item?r.item(n):r[n])!==this;);return n>-1};return r.call(t,e)}},{key:"isWebWorkerFetchSupported",value:function(){var t="Request"in self,e="fetch"in self;if(!t)return!1;var r="keepalive"in Request.prototype;return e&&r}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(r=null)&&_t(e.prototype,r),n&&_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();St=xt,kt="isPassiveSupported",Et=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),(kt=wt(kt))in St?Object.defineProperty(St,kt,{value:Et,enumerable:!0,configurable:!0,writable:!0}):St[kt]=Et;var Bt="X-h",Ct=r(396),Rt=r.n(Ct);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function At(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,It(n.key),n)}}function It(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pt(e)?e:e+""}var Tt=function(){return function(t,e,r){return e&&At(t.prototype,e),r&&At(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"hashSha256",value:function(t,e){if(!xt.isSubtleCryptoSupported())return ot.info("HashService: SubtleCrypto is not supported using fallback hashing"),void e(null,Rt().SHA256(t).toString(Rt().enc.Hex));var r=(new TextEncoder).encode(t);crypto.subtle.digest("SHA-256",r).then((function(t){var r=Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("");e(null,r)})).catch((function(t){e(t)}))}}])}(),Mt="POST";function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jt(n.key),n)}}function jt(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:e+""}var Ut=function(){return function(t,e,r){return e&&Ot(t.prototype,e),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requestBodyBuilder=e,this.updateSettings(r),this._workerUtils=n,this._acceptNoResponse=o,this._messageDescriptor=s,this.retryMessage=i,this._dataQueue=new mt,this._awaitingServerResponse=!1,this._currentSentItem=null,this._sendRetryTimeoutId=null,this._shouldRetryToSendMessage=!1,this._messageIdentifier=0,this._enableRequestBodyHashing=!1,this._isPaused=!1}),[{key:"updateSettings",value:function(t){this._queueLoadThershold=t.queueLoadThreshold}},{key:"getRetryMessage",value:function(){return this.retryMessage}},{key:"updateEnableWupMessagesHashing",value:function(t){this._enableRequestBodyHashing=t}},{key:"sendMessage",value:function(t,e,r,n,i,o,s,a){var u=this;this._enqueueMessage(t,e,r,n,(function(t){u._onMessageSendSuccess(t,i)}),(function(t,e,r){u._onMessageSendFailure(t,e,r,o,s)}),a)}},{key:"flush",value:function(){this._flushData()}},{key:"setIsPaused",value:function(t){this._isPaused=t}},{key:"isReadyToSendData",value:function(){return!this._isPaused}},{key:"_onMessageSendSuccess",value:function(t,e){this._awaitingServerResponse=!1,this._currentSentItem=null,this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),e(t),this._processNextQueueItem()}},{key:"_onMessageSendFailure",value:function(t,e,r,n,i){if(!this._currentSentItem)return ot.error("An unexpected error has occurred while handling a ".concat(this._messageDescriptor," message send failure. Could not find sent item value. Moving to next queued item")),void this._processNextQueueItem();ot.warn("Failed sending ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier,". ").concat(this._buildFailureLog(t,e,r))),this._awaitingServerResponse=!1;var o=0===this._currentSentItem.maxNumberOfSendAttempts;!this._isPaused&&this.retryMessage.shouldReMessage(o)?(this._shouldRetryToSendMessage=!0,ot.info("Trying to send ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," again. Number of send failures is ").concat(this.retryMessage.getNumberOfSendFailures())),this._prepareMessageForSendRetry(),n&&n(this.retryMessage.getNumberOfSendFailures())):(this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),ot.warn("Discarding ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," after ").concat(this.retryMessage.getNumberOfSendFailures()," failed send attempts.")),n&&n(this.retryMessage.getNumberOfSendFailures()),this._currentSentItem=null,i&&i(t),this._processNextQueueItem())}},{key:"_enqueueMessage",value:function(t,e,r,n,i,o,s){this._dataQueue.enqueue({identifier:this._messageIdentifier++,messageToSend:t,onSuccess:i,onError:o,timeout:e,maxNumberOfSendAttempts:r,serverUrl:s}),this._shouldRetryToSendMessage||(this._clearRetryTimeout(),n&&this._flushData(),this._awaitingServerResponse||this._processNextQueueItem(n))}},{key:"_processNextQueueItem",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._dataQueue.hasItems()||!r){var n=null;r?(n=this._dataQueue.dequeue(),this._currentSentItem=n):n=this._currentSentItem;var i=this._requestBodyBuilder.build(n.messageToSend,e);this._enableRequestBodyHashing?Tt.hashSha256(i,(function(r,o){r?ot.error(r):t._sendProcessedQueueItem(i,n,e,o)})):this._sendProcessedQueueItem(i,n,e)}}},{key:"_sendProcessedQueueItem",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(xt.isWebWorkerFetchSupported()&&r){var i=new Headers;n&&i.append(Bt,n);var o={method:Mt,headers:i,body:t,keepalive:!0};this._sendWithFetch(o,e.serverUrl)}else this._sendWithXMLHttpRequest(t,e,n);this._checkQueueLength()}},{key:"_sendWithFetch",value:function(t,e){this._currentSentItem=null,self.fetch(e,t),ot.info("Flush data was sent by fetch")}},{key:"_sendWithXMLHttpRequest",value:function(t,e,r){this._awaitingServerResponse=!0,this._workerUtils.getPostUrl(e.serverUrl,Mt,t,e.onSuccess,e.onError,this._acceptNoResponse,e.timeout,r)}},{key:"_checkQueueLength",value:function(){this._dataQueue.length()>this._queueLoadThershold&&ot.warn("Data queue has ".concat(this._dataQueue.length()," items in queue. Might indicate slow\\\\unstable communication issues."))}},{key:"_flushData",value:function(){for(;this._dataQueue.hasItems();)this._processNextQueueItem(!0)}},{key:"_prepareMessageForSendRetry",value:function(){var t=this;this._clearRetryTimeout(),this.retryMessage.updateRetryInterval();var e=this.retryMessage.getNextInterval();this._sendRetryTimeoutId=setTimeout((function(){t._processNextQueueItem(!1,!1)}),e)}},{key:"_clearRetryTimeout",value:function(){this._sendRetryTimeoutId&&clearTimeout(this._sendRetryTimeoutId)}},{key:"_buildFailureLog",value:function(t,e,r){var n="";return t&&(n+="Response Text: ".concat(t,".")),e&&(n+="Status: ".concat(e,".")),r&&(n+="Status Text: ".concat(r,".")),n}}])}();function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zt(e)?e:e+""}var Ft=function(){return function(t,e,r){return e&&Nt(t.prototype,e),r&&Nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"setData",value:function(t){this._data=t}},{key:"getInternalMessage",value:function(){return this._data}}])}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qt(n.key),n)}}function qt(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ht(e)?e:e+""}var Yt=function(){return function(t,e,r){return e&&Wt(t.prototype,e),r&&Wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataPacker=e}),[{key:"build",value:function(t){var e=new Ft;return e.setData(this._dataPacker.pack(t)),e}}])}(),Zt=self.btoa?self.btoa.bind(self):function(t){for(var e,r,n=String(t),i="",o=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.charAt(0|o)||(s="=",o%1);i+=s.charAt(63&e>>8-o%1*8)){if((r=n.charCodeAt(o+=3/4))>255)throw new Error("\'btoa\' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return i};function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function Xt(t){var e=function(t,e){if("object"!=Kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kt(e)?e:e+""}var Vt=r(273),Qt=r(860),Jt=function(){return function(t,e,r){return e&&Gt(t.prototype,e),r&&Gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._compressData=function(t){var e=Vt.encode(t);return e=Qt.deflateRaw(e,{to:"string"}),Zt(e)}}),[{key:"pack",value:function(t){return this._getCompressedData(t)}},{key:"_getCompressedData",value:function(t){return this._compressData(t)}}])}(),$t=5,te=1,ee=1e3,re=1e3,ne=100,ie=1e4,oe=3500,se=0,ae=1e4,ue=16e3,fe=100,ce=3e5;function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function he(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,de(n.key),n)}}function de(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==le(e)?e:e+""}var pe=function(){return function(t,e,r){return e&&he(t.prototype,e),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageNumToRetry=e,this.messageRetryInterval=r,this.incrementalGrowthBetweenFailures=n,this.maxIntervalBetweenFailures=i,this.init()}),[{key:"init",value:function(){this._validateReMessageSettings()}},{key:"getMessageNumToRetry",value:function(){return this.messageNumToRetry}},{key:"getMessageRetryInterval",value:function(){return this.messageRetryInterval}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.maxIntervalBetweenFailures}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.incrementalGrowthBetweenFailures}},{key:"_validateReMessageSettings",value:function(){var t="The provided configuration is invalid, it must be  ";if(isNaN(this.messageNumToRetry))ot.warn("".concat(t," a number. setting to default: ").concat($t)),this.messageNumToRetry=$t;else{var e=parseInt(this.messageNumToRetry);this.messageNumToRetry=e}(this.messageNumToRetry<te||this.messageNumToRetry>ee)&&(ot.warn("messageNumToRetry - ".concat(t," in the following range: \\n            ").concat(te," - ").concat(ee," setting to default: ").concat($t)),this.messageNumToRetry=$t),(this.messageRetryInterval<ne||this.messageRetryInterval>ie)&&(ot.warn("messageRetryInterval - ".concat(t," in the following range: \\n            [").concat(ne," - ").concat(ie,"], \\n            setting to default: ").concat(re)),this.messageRetryInterval=re),(this.incrementalGrowthBetweenFailures<se||this.incrementalGrowthBetweenFailures>ae)&&(ot.warn("incrementalGrowthBetweenFailures - ".concat(t," in the following range: \\n            [").concat(se," - ").concat(ae,"],\\n                setting to default: ").concat(oe)),this.incrementalGrowthBetweenFailures=oe),(this.maxIntervalBetweenFailures<fe||this.maxIntervalBetweenFailures>ce)&&(ot.warn("maxIntervalBetweenFailures - ".concat(t," in the following range: \\n            [").concat(fe," - ").concat(ce,"]\\n                setting to default: ").concat(ue)),this.maxIntervalBetweenFailures=ue),this.maxIntervalBetweenFailures<this.messageRetryInterval&&(ot.warn(" maxIntervalBetweenFailures - ".concat(t," greater than minimum interval: \\n            [").concat(fe,"], setting to defaults:\\n                ").concat(ue)),this.maxIntervalBetweenFailures=ue,this.messageRetryInterval=re)}}])}();function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function ge(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:e+""}var me=function(){return function(t,e,r){return e&&ve(t.prototype,e),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logMessageNumToRetry=e.get(A),this.logMessageRetryInterval=e.get(I),this.logIncrementalGrowthBetweenFailures=e.get(T),this.logMaxIntervalBetweenFailures=e.get(M)}),[{key:"createReMessageSettings",value:function(){return new pe(this.logMessageNumToRetry,this.logMessageRetryInterval,this.logIncrementalGrowthBetweenFailures,this.logMaxIntervalBetweenFailures)}}])}();function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,we(n.key),n)}}function we(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==be(e)?e:e+""}var Se=function(){return function(t,e,r){return e&&_e(t.prototype,e),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._logMessageBuilder=r,this._configurationRepository=n,this._serverUrl=null,this._MESSAGE_SEND_RETRIES=5,this._requestTimeout=this._configurationRepository.get(S)}),[{key:"setServerUrl",value:function(t){this._serverUrl=t}},{key:"setIsPaused",value:function(t){this._serverCommunicator.setIsPaused(t)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._serverUrl){var r=this._logMessageBuilder.build(t);this._serverCommunicator.sendMessage(r,this._requestTimeout,this._serverCommunicator.getRetryMessage().getMessageNumToRetry(),e,this._onSendDataSuccess.bind(this),null,this._onSendDataFailure.bind(this),this._serverUrl),e&&this._serverCommunicator.flush()}else ot.error("Cannot send log message: server URL is not set")}},{key:"isReady",value:function(){return this._serverCommunicator.isReadyToSendData()}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationLogMessage",value:function(){this._configurationWraperLogMessage=new me(this._configurationRepository),this._reLogMessageSettings=this._configurationWraperLogMessage.createReMessageSettings(),this._serverCommunicator.getRetryMessage().updateSettings(this._reLogMessageSettings)}},{key:"_onSendDataSuccess",value:function(){}},{key:"_onSendDataFailure",value:function(t){ot.warn("Failed sending log message. Error: ".concat(t,"."))}}])}();function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xe(n.key),n)}}function xe(t){var e=function(t,e){if("object"!=ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ke(e)?e:e+""}var Be=function(){return function(t,e,r){return e&&Ee(t.prototype,e),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._statisticsLogIntervalMs=e,this.resetCounters(),this._setPeriodicStatisticsLog()}),[{key:"getSentWupsCount",value:function(){return this._sentWupsCount}},{key:"incrementSentWupCount",value:function(){this._sentWupsCount++,this._sentWupsInCurrentIntervalCount++}},{key:"updateSettings",value:function(t){this._statisticsLogIntervalMs=t,this._setPeriodicStatisticsLog()}},{key:"resetCounters",value:function(){this._sentWupsCount=0,this._sentWupsInCurrentIntervalCount=0}},{key:"stop",value:function(){this._stopPeriodicStatisticsLog()}},{key:"_writeStatisticsLog",value:function(){0!==this._sentWupsInCurrentIntervalCount&&(ot.debug("Sent ".concat(this._sentWupsInCurrentIntervalCount," wup in the last ").concat(this._statisticsLogIntervalMs," ms. Sent a total of ").concat(this._sentWupsCount," in the session")),this._sentWupsInCurrentIntervalCount=0)}},{key:"_stopPeriodicStatisticsLog",value:function(){this._periodicLogIntervalId&&clearInterval(this._periodicLogIntervalId)}},{key:"_setPeriodicStatisticsLog",value:function(){this._stopPeriodicStatisticsLog(),this._periodicLogIntervalId=setInterval(this._writeStatisticsLog.bind(this),this._statisticsLogIntervalMs)}}])}(),Ce="incremental",Re="constant",Pe="dynamic";function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Te(n.key),n)}}function Te(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ae(e)?e:e+""}var Me=function(){return function(t,e,r){return e&&Ie(t.prototype,e),r&&Ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateSettings(e)}),[{key:"getRate",value:function(){return this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Re)throw new Error("Invalid settings provided to constant calculator");this._currentRate=t.initialRateValueMs}}])}();function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,je(n.key),n)}}function je(t){var e=function(t,e){if("object"!=De(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==De(e)?e:e+""}var Ue=function(){return function(t,e,r){return e&&Oe(t.prototype,e),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=r,this.updateSettings(e)}),[{key:"getRate",value:function(){if(this._wupStatisticsService.getSentWupsCount()<this._incrementStartWupSendCount)return this._currentRate;var t=this._currentRate+this._incrementStepMs;return t<=this._incrementStopMs&&(this._currentRate=t),this._currentRate}},{key:"updateSettings",value:function(t){if(t.type!==Ce)throw new Error("Invalid settings provided to incremental calculator");this._currentRate=t.initialRateValueMs,this._incrementStepMs=t.incrementStepMs,this._incrementStopMs=t.incrementStopMs,this._incrementStartWupSendCount=t.incrementStartWupSendCount}}])}();function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Le(n.key),n)}}function Le(t){var e=function(t,e){if("object"!=ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ze(e)?e:e+""}var Fe=function(){return function(t,e,r){return e&&Ne(t.prototype,e),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e}),[{key:"getRate",value:function(){return this._wupServerSessionState.getWupDispatchRate()}},{key:"updateSettings",value:function(){}}])}();function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}function qe(t){var e=function(t,e){if("object"!=He(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==He(e)?e:e+""}var Ye=function(){return function(t,e,r){return e&&We(t.prototype,e),r&&We(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupStatisticsService=e,this._wupServerSessionState=r}),[{key:"create",value:function(t){if(t.type===Re)return new Me(t);if(t.type===Ce)return new Ue(t,this._wupStatisticsService);if(t.type===Pe)return new Fe(this._wupServerSessionState);throw new Error("Unsupported dispatch rate type ".concat(t.type))}}])}();function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ge(n.key),n)}}function Ge(t){var e=function(t,e){if("object"!=Ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ze(e)?e:e+""}var Xe=function(){return function(t,e,r){return e&&Ke(t.prototype,e),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverClient=e,this._aggregator=r,this._wupDispatchRateCalculatorFactory=n,this._wupDispatchRateSettings=i,this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(this._wupDispatchRateSettings),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval)}),[{key:"add",value:function(t){this._aggregator.add(t)}},{key:"sendIfRequired",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0===this._sendToServerInterval||t)&&this._sendToServer(t)}},{key:"updateByConfig",value:function(t){t&&(t.type!==this._wupDispatchRateSettings.type?this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(t):this._wupDispatchRateCalculator.updateSettings(t),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval),this._wupDispatchRateSettings=t)}},{key:"scheduleNextDispatching",value:function(){var t=this._wupDispatchRateCalculator.getRate();t!==this._sendToServerInterval&&(this._sendToServerInterval=t,this._setDispatchInterval(this._sendToServerInterval))}},{key:"_sendToServer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ot.debug("Sending a message to the server"),this._serverClient.isReady()?this._aggregator.isEmpty()||(this._serverClient.sendData(this._aggregator.take(),t),this.scheduleNextDispatching()):ot.info("".concat(this._serverClient.constructor.name," is not ready. Message will not be sent to server"))}},{key:"_setDispatchInterval",value:function(t){this._sendIntervalId&&(clearInterval(this._sendIntervalId),this._sendIntervalId=null),0!==t&&(this._sendIntervalId=setInterval(this._sendToServer.bind(this),t))}}])}();function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Je(n.key),n)}}function Je(t){var e=function(t,e){if("object"!=Ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ve(e)?e:e+""}var $e=function(){return function(t,e,r){return e&&Qe(t.prototype,e),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}),[{key:"setLogLevel",value:function(t){this._logLevel=t}},{key:"add",value:function(t){var e=t.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function(){var t=this._Q;return this.reset(),t}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?F:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(t){this._Q=this._Q.filter((function(e,r,n){return e.level>=t}))}}])}();function tr(t){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(t)}function er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rr(n.key),n)}}function rr(t){var e=function(t,e){if("object"!=tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tr(e)?e:e+""}var nr=function(){return function(t,e,r){return e&&er(t.prototype,e),r&&er(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataDispatcher=e}),[{key:"process",value:function(t){if(!t)throw new Error("Invalid message received for processing.");var e=!1;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)e=this._processSingleMessage(t[r])||e;else e=this._processSingleMessage(t)||e;this._dataDispatcher.sendIfRequired(e)}},{key:"_processSingleMessage",value:function(t){if(this._isEmptyFlushMessage(t))return!0;var e=!1;if(t.shouldFlush&&(e=!0),!this._isDataValid(t)){var r="Received a message with invalid structure. Missing eventName or Data fields";throw ot.error(r),new Error(r)}return this._dataDispatcher.add(t),e}},{key:"_isEmptyFlushMessage",value:function(t){return"flushData"===t.eventName}},{key:"_isDataValid",value:function(t){return t.eventName&&t.data}}])}(),ir="js";function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function sr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ar(n.key),n)}}function ar(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==or(e)?e:e+""}var ur=function(){return function(t,e,r){return e&&sr(t.prototype,e),r&&sr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageStruct={ds:ir}}),[{key:"getDataSource",value:function(){return this._messageStruct.ds}},{key:"getSid",value:function(){return this._messageStruct.cdsnum}},{key:"setSid",value:function(t){this._messageStruct.cdsnum=t}},{key:"getCsid",value:function(){return this._messageStruct.csid}},{key:"setCsid",value:function(t){this._messageStruct.csid=t}},{key:"getPsid",value:function(){return this._messageStruct.psid}},{key:"setPsid",value:function(t){this._messageStruct.psid=t}},{key:"getMuid",value:function(){return this._messageStruct.muid}},{key:"setMuid",value:function(t){this._messageStruct.muid=t}},{key:"getContextName",value:function(){return this._messageStruct.context_name}},{key:"setContextName",value:function(t){this._messageStruct.context_name=t}},{key:"getRequestId",value:function(){return this._messageStruct.requestId}},{key:"setRequestId",value:function(t){this._messageStruct.requestId=t}},{key:"getSts",value:function(){return this._messageStruct.sts}},{key:"setSts",value:function(t){this._messageStruct.sts=t}},{key:"getStd",value:function(){return this._messageStruct.std}},{key:"setStd",value:function(t){this._messageStruct.std=t}},{key:"setFlush",value:function(t){this._messageStruct.f=t}},{key:"getConfigurationName",value:function(){return this._messageStruct.c}},{key:"setConfigurationName",value:function(t){this._messageStruct.c=t}},{key:"getData",value:function(){return this._messageStruct.d}},{key:"setData",value:function(t){this._messageStruct.d=t}},{key:"getInternalMessage",value:function(){return this._messageStruct}},{key:"setOtt",value:function(t){this._messageStruct.ott=t}},{key:"getOtt",value:function(){return this._messageStruct.ott}},{key:"setAgentType",value:function(t){this._messageStruct.agent_type=t}},{key:"getAgentType",value:function(){return this._messageStruct.agent_type}},{key:"setAgentId",value:function(t){this._messageStruct.agent_id=t}},{key:"getAgentId",value:function(){return this._messageStruct.agent_id}}])}();function fr(t){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function cr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lr(n.key),n)}}function lr(t){var e=function(t,e){if("object"!=fr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fr(e)?e:e+""}var hr=function(){return function(t,e,r){return e&&cr(t.prototype,e),r&&cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._dataPacker=r}),[{key:"build",value:function(t,e){var r=new ur;this._updateDataWithBrand(e),r.setSid(this._wupServerSessionState.getSid()),r.setCsid(this._wupServerSessionState.getCsid()),r.setPsid(this._wupServerSessionState.getPsid()),r.setMuid(this._wupServerSessionState.getMuid()),r.setContextName(this._wupServerSessionState.getContextName()),r.setRequestId(this._wupServerSessionState.getRequestId()),r.setAgentType(this._wupServerSessionState.getAgentType()),r.setAgentId(this._wupServerSessionState.getAgentId()),this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd()&&(r.setSts(this._wupServerSessionState.getSts()),r.setStd(this._wupServerSessionState.getStd()));var n=this._wupServerSessionState.getOtt();return n&&r.setOtt(n),t===ir?r.setConfigurationName(t):r.setData([this._dataPacker.pack(e)]),r}},{key:"_updateDataWithBrand",value:function(t){var e=this._wupServerSessionState.getBrand();e&&(t.static_fields||(t.static_fields=[]),t.static_fields.push(["brand",e]))}}])}();function dr(t){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(t)}function pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yr(n.key),n)}}function yr(t){var e=function(t,e){if("object"!=dr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dr(e)?e:e+""}var vr=function(){return function(t,e,r){return e&&pr(t.prototype,e),r&&pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e}),[{key:"build",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.setSid(this._wupServerSessionState.getSid()),t.setSts(this._wupServerSessionState.getSts()),t.setStd(this._wupServerSessionState.getStd()),t.setOtt(this._wupServerSessionState.getOtt()),e&&t.setFlush(ir),JSON.stringify(t.getInternalMessage())}}])}(),gr="ConfigurationLoadedEvent",mr="NewSessionStartedEvent",br="WupDispatchRateUpdatedEvent",_r="ServerStateUpdatedEvent",wr="ServerRestoredMuidEvent",Sr="ServerNewAgentIdEvent",kr="WorkerSystemStatusEvent";function Er(t){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(t)}function xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Br(n.key),n)}}function Br(t){var e=function(t,e){if("object"!=Er(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Er(e)?e:e+""}var Cr=function(){return function(t,e,r){return e&&xr(t.prototype,e),r&&xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this._messageBus=r,this._configurationRepository=n}),[{key:"process",value:function(t,e){var r=!1;e&&(this._wupServerSessionState.markConfigurationReceived(),this._configurationRepository.loadConfigurations(t),r=!0),t.sts&&this._wupServerSessionState.setSts(t.sts),t.std&&this._wupServerSessionState.setStd(t.std),t.ott&&this._wupServerSessionState.setOtt(t.ott),t.reset_session&&t.new_sid&&this._wupServerSessionState.setSid(t.new_sid),t.rmd&&(this._wupServerSessionState.setMuid(t.rmd),this._messageBus.publish(wr,t.rmd)),t.agent_id&&(this._wupServerSessionState.setAgentId(t.agent_id),this._messageBus.publish(Sr,t.agent_id)),this._messageBus.publish(_r,{requestId:this._wupServerSessionState.getRequestId(),sid:this._wupServerSessionState.getSid(),sts:this._wupServerSessionState.getSts(),std:this._wupServerSessionState.getStd(),ott:this._wupServerSessionState.getOtt()}),r&&this._messageBus.publish(gr,this._configurationRepository),t.reset_session&&(t.new_sid?this._messageBus.publish(mr,t.new_sid):ot.warn("Received a reset session flag from the server without a new sid. Ignoring reset.")),t.nextWupInterval?t.nextWupInterval!==this._wupServerSessionState.getWupDispatchRate()&&(this._wupServerSessionState.setWupDispatchRate(t.nextWupInterval),this._messageBus.publish(br,this._wupServerSessionState.getWupDispatchRate())):ot.warn("Received an invalid nextWupInterval value of ".concat(t.nextWupInterval,". Ignoring value."))}}])}(),Rr="701",Pr="702",Ar="703",Ir="704";function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function Mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Or(n.key),n)}}function Dr(t,e,r){return e&&Mr(t.prototype,e),r&&Mr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Or(t){var e=function(t,e){if("object"!=Tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tr(e)?e:e+""}var jr="oK",Ur="Error",zr=Dr((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.category=e,this.status=r}));function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fr(n.key),n)}}function Fr(t){var e=function(t,e){if("object"!=Nr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nr(e)?e:e+""}var Hr=function(){return function(t,e,r){return e&&Lr(t.prototype,e),r&&Lr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wupMessageNumToRetry=e.get(B),this.wupMessageRetryInterval=e.get(C),this.wupIncrementalGrowthBetweenFailures=e.get(R),this.wupMaxIntervalBetweenFailures=e.get(P)}),[{key:"createReMessageSettings",value:function(){return new pe(this.wupMessageNumToRetry,this.wupMessageRetryInterval,this.wupIncrementalGrowthBetweenFailures,this.wupMaxIntervalBetweenFailures)}}])}(),Wr={PRIMARY:"primary",SECONDARY:"secondary"};function qr(t,e,r,n){var i;return n?(i=3===e?"v3.1":"v4",i+="/"+function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(11*Math.random())+10,r="",n=0;n<e;n++){r+=t[Math.floor(Math.random()*t.length)]}return r}()):(i=3===e?"client/v3.1/web/wup":"api/v4/wup",i+="?cid="+r),t+"/"+i}function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function Zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kr(n.key),n)}}function Kr(t){var e=function(t,e){if("object"!=Yr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yr(e)?e:e+""}Object.freeze(Wr);var Gr=function(){return function(t,e,r){return e&&Zr(t.prototype,e),r&&Zr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverCommunicator=e,this._wupMessageBuilder=r,this._wupServerSessionState=n,this._wupStatisticsService=i,this._wupResponseProcessor=o,this._configurationRepository=s,this._msgBus=a,this._INFINITE_MESSAGE_SEND_RETRIES=0,this._retryMessage=this._serverCommunicator.getRetryMessage(),this._MESSAGE_SEND_RETRIES=this._configurationRepository.get(B),this._requestTimeout=this._configurationRepository.get(w)}),[{key:"startNewSession",value:function(t,e,r,n,i,o,s,a){this._validateCommonSessionRelatedParameters(o,a),this._wupServerSessionState.setRequestId(0),this._wupServerSessionState.setBrand(null),this._sendSessionMessage(null,t,e,r,n,i,o,s,a,null,this._wupServerSessionState.getRequestId())}},{key:"_sendSessionMessage",value:function(t,e,r,n,i,o,s,a,u,f,c){var l=this;this._initSession(t,e,r,n,i,o,s,a,u,f,c);var h=this._createStaticFieldsPart(),d=!this._wupServerSessionState.getHasConfiguration()&&!this._wupServerSessionState.getHasPendingConfigurationRequest();d&&this._wupServerSessionState.markConfigurationRequested();var p=this._wupMessageBuilder.build(d?ir:"0",h),y=qr(u,r,e,n);this._serverCommunicator.sendMessage(p,this._requestTimeout,d?this._INFINITE_MESSAGE_SEND_RETRIES:this._MESSAGE_SEND_RETRIES,!1,(function(t){l._onSendDataSuccess(t,d)}),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),y)}},{key:"resumeSession",value:function(t,e,r,n,i,o,s,a,u,f){this._validateResumeSessionRelatedParameters(t,s,u);var c=f&&f.requestId?this._wupServerSessionState.setRequestId(f.requestId+1):this._wupServerSessionState.setRequestId(0);this._sendSessionMessage(t,e,r,n,i,o,s,a,u,f,c)}},{key:"sendData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupServerSessionState.getOtt(),n=this._wupServerSessionState.getProtocolType(),i=4===n,o=3===n,s=this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd();if(r&&i||s&&o)this._sendMessage(t,e);else{var a=i?"ott":"sts or std";ot.error("Unable to send data. ".concat(a," is undefined"))}}},{key:"setRequestTimeout",value:function(t){this._requestTimeout=t}},{key:"setConfigurationWupMessage",value:function(){this._configurationWrapperWupMessage=new Hr(this._configurationRepository),this._reWupMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._retryMessage.updateSettings(this._reWupMessageSettings)}},{key:"_initSession",value:function(t,e,r,n,i,o,s,a,u,f,c){ot.debug("Initializing session. wupUrl:".concat(u,", sid:").concat(t)),this._wupServerSessionState.setBaseServerUrl(u),this._wupServerSessionState.setSid(t),this._wupServerSessionState.setCid(e),this._wupServerSessionState.setCsid(i),this._wupServerSessionState.setPsid(o),this._wupServerSessionState.setMuid(s),this._wupServerSessionState.setProtocolType(r),this._wupServerSessionState.setShouldMinifyUri(n),this._wupServerSessionState.setContextName(a||""),this._wupServerSessionState.setRequestId(c,!1),f?(this._wupServerSessionState.setSts(f.sts),this._wupServerSessionState.setStd(f.std),this._wupServerSessionState.setOtt(f.ott)):(ot.info("Resetting server state of server communicator. Deleting sts and std"),this._wupServerSessionState.setSts(null),this._wupServerSessionState.setStd(null),this._wupServerSessionState.setOtt(null),this._wupStatisticsService.resetCounters())}},{key:"updateCsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setCsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updatePsid",value:function(t){var e=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setPsid(t);var r={static_fields:[]};r.static_fields.push(["requestId",e],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(r)}},{key:"updateBrand",value:function(t){this._wupServerSessionState.setBrand(t)}},{key:"isReady",value:function(){var t=this._serverCommunicator.isReadyToSendData();if(4===this._wupServerSessionState.getProtocolType())return!(!t||!this._wupServerSessionState.getOtt());var e=this._wupServerSessionState.getStd()&&this._wupServerSessionState.getSts();return!(!t||!e)}},{key:"_validateResumeSessionRelatedParameters",value:function(t,e,r){if(!t)throw new Error("Invalid sid parameter ".concat(t,". Unable to start new session"));this._validateCommonSessionRelatedParameters(e,r)}},{key:"_validateCommonSessionRelatedParameters",value:function(t,e){if(!t&&this._wupServerSessionState.getAgentType()!==Wr.SECONDARY)throw new Error("Invalid muid parameter ".concat(t,". Unable to start new session"));if(!e)throw new Error("Invalid serverAddress parameter ".concat(e,". Unable to start new session"))}},{key:"_createStaticFieldsPart",value:function(){var t={static_fields:[]};return t.static_fields.push(["requestId",this._wupServerSessionState.getRequestId()],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),t}},{key:"_sendMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._wupMessageBuilder.build("0",t),n=qr(this._wupServerSessionState.getBaseServerUrl(),this._wupServerSessionState.getProtocolType(),this._wupServerSessionState.getCid(),this._wupServerSessionState.getShouldMinifyUri());this._serverCommunicator.sendMessage(r,this._requestTimeout,this._MESSAGE_SEND_RETRIES,e,this._onSendDataSuccess.bind(this),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this),n)}},{key:"_onSendDataSuccess",value:function(t,e){e=e||!1,this._publishWorkerSystemStatus(Ir,jr),this._publishWorkerSystemStatus(Ir,jr),this._handleSuccessResponse(t,e),this._wupStatisticsService.incrementSentWupCount()}},{key:"_onSendDataRetryFailure",value:function(t){t===this._MESSAGE_SEND_RETRIES&&this._publishWorkerSystemStatus(Ir,Ur)}},{key:"_onSendDataFailure",value:function(){}},{key:"_handleSuccessResponse",value:function(t,e){var r=e?Pr:Ar;try{var n=JSON.parse(t);this._wupResponseProcessor.process(n,e),this._publishWorkerSystemStatus(r,jr)}catch(t){this._publishWorkerSystemStatus(r,Ur);var i="Failed to parse message from server: ".concat(t.message);ot.error(i,t)}}},{key:"_publishWorkerSystemStatus",value:function(t,e){this._msgBus.publish(kr,new zr(t,e))}}])}();function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qr(n.key),n)}}function Qr(t){var e=function(t,e){if("object"!=Xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xr(e)?e:e+""}var Jr=function(){return function(t,e,r){return e&&Vr(t.prototype,e),r&&Vr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wupServerSessionState=e,this.reset()}),[{key:"add",value:function(t){var e=t.eventName,r=t.data;if(!e)throw new Error("Unable to add data message. Missing eventName field");if(!r)throw new Error("Unable to add data message. Missing data field");this._isEmpty=!1,this._dataObj[e]=this._dataObj[e]||[],this._dataObj[e].push(r)}},{key:"take",value:function(){this._isEmpty||this._dataObj.static_fields.push(["requestId",this._wupServerSessionState.incrementRequestId()]);var t=this._dataObj;return this.reset(),t}},{key:"reset",value:function(){this._isEmpty=!0,this._dataObj=this.getFreshDataObj()}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"getFreshDataObj",value:function(){return{static_fields:[],key_events:[],mouse_events:[]}}}])}();function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function tn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,en(n.key),n)}}function en(t){var e=function(t,e){if("object"!=$r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$r(e)?e:e+""}var rn=function(){return function(t,e,r){return e&&tn(t.prototype,e),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a,u,f){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._wupStatisticsService=r,this._dataDispatcher=n,this._logDataDispatcher=i,this._serverCommunicator=o,this._wupServerClient=s,this._logServerClient=a,this._logger=u,this._mainCommunicator=f,this._messageBus.subscribe(gr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._wupStatisticsService.updateSettings(t.get(m));var e=t.get(g)?K.defaultDynamicWupDispatchRateConfiguration:t.get(y);this._dataDispatcher.updateByConfig(e),this._logDataDispatcher.updateByConfig(t.get(v)),this._serverCommunicator.updateSettings(t.get(b)),this._logger.updateLogConfig(t),this._wupServerClient.setRequestTimeout(t.get(w)||t.get(_)),this._logServerClient.setRequestTimeout(t.get(S)),this._wupServerClient.setConfigurationWupMessage(),this._logServerClient.setConfigurationLogMessage(),this._mainCommunicator.sendAsync(O,t.getAll())}}])}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sn(n.key),n)}}function sn(t){var e=function(t,e){if("object"!=nn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nn(e)?e:e+""}var an=function(){return function(t,e,r){return e&&on(t.prototype,e),r&&on(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(mr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.info("Worker received a new session id ".concat(t," from server.")),this._mainCommunicator.sendAsync(D,t)}}])}();function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cn(n.key),n)}}function cn(t){var e=function(t,e){if("object"!=un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==un(e)?e:e+""}var ln=function(){return function(t,e,r){return e&&fn(t.prototype,e),r&&fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._logger=r,this._mainCommunicator=n,this._messageBus.subscribe(_r,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.debug("Worker received an updated server state."),this._mainCommunicator.sendAsync(j,t)}}])}();function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}function pn(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hn(e)?e:e+""}var yn=function(){return function(t,e,r){return e&&dn(t.prototype,e),r&&dn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._dataDispatcher=r,this._logger=n,this._messageBus.subscribe(br,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.info("Worker received a wup dispatch rate ".concat(t," from server.")),this._dataDispatcher.scheduleNextDispatching()}}])}(),vn="startNewSessionCommand",gn="resumeSessionCommand",mn="changeContextCommand",bn="updateCsidCommand",_n="updatePsidCommand",wn="updateLogUrl",Sn="sendDataCommand",kn="sendLogCommand",En="updateBrandCommand",xn="stateUpdateFromStorage",Bn="setAgentTypeCommand",Cn="updateAgentIdCommand",Rn="enableWupMessagesHashingCommand",Pn="updateSDKState";function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function In(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tn(n.key),n)}}function Tn(t){var e=function(t,e){if("object"!=An(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==An(e)?e:e+""}var Mn=function(){return function(t,e,r){return e&&In(t.prototype,e),r&&In(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o,s,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerClient=r,this._logServerClient=n,this._configurationRepository=i,this._messageProcessor=o,this._logMessageProcessor=s,this._wupServerSessionState=a,this._dataServerCommunicator=u}),[{key:"start",value:function(){ot.debug("Starting Worker Service"),this._mainCommunicator.addMessageListener(vn,this._onStartNewSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(gn,this._onResumeSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(mn,this._onChangeContextCommand.bind(this)),this._mainCommunicator.addMessageListener(bn,this._onUpdateCsidCommand.bind(this)),this._mainCommunicator.addMessageListener(_n,this._onUpdatePsidCommand.bind(this)),this._mainCommunicator.addMessageListener(wn,this._onUpdateLogUrlCommand.bind(this)),this._mainCommunicator.addMessageListener(Sn,this._onSendDataCommand.bind(this)),this._mainCommunicator.addMessageListener(kn,this._onSendLogCommand.bind(this)),this._mainCommunicator.addMessageListener(En,this._onUpdateBrandCommand.bind(this)),this._mainCommunicator.addMessageListener(Bn,this._setSessionAgentType.bind(this)),this._mainCommunicator.addMessageListener(Cn,this._onUpdateAgentId.bind(this)),this._mainCommunicator.addMessageListener(Rn,this._setWupMessagesHashing.bind(this))}},{key:"_onStartNewSessionCommand",value:function(t){this._wupServerClient.startNewSession(t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress)}},{key:"_onResumeSessionCommand",value:function(t){this._wupServerClient.resumeSession(t.cdsnum,t.cid,t.protocolType,t.minifiedUri,t.csid,t.psid,t.muid,t.contextName,t.serverAddress,t.serverState)}},{key:"_onChangeContextCommand",value:function(t){ot.debug("Worker received a ChangeContextCommand from main."),this._wupServerSessionState.setContextName(t.contextName)}},{key:"_onUpdateCsidCommand",value:function(t){ot.debug("Worker received an UpdateCsidCommand from main. CSID: ".concat(t.csid,".")),this._wupServerClient.updateCsid(t.csid)}},{key:"_onUpdatePsidCommand",value:function(t){ot.debug("Worker received an UpdatePsidCommand from main. PSID: ".concat(t.psid,".")),this._wupServerClient.updatePsid(t.psid)}},{key:"_onUpdateLogUrlCommand",value:function(t){ot.attachSessionIdentifiers(t.sessionIdentifiers),this._logServerClient.setServerUrl(t.logAddress)}},{key:"_onSendDataCommand",value:function(t){this._messageProcessor.process(t)}},{key:"_onSendLogCommand",value:function(t){this._logMessageProcessor.process(t)}},{key:"_onUpdateBrandCommand",value:function(t){this._wupServerClient.updateBrand(t.brand)}},{key:"_setSessionAgentType",value:function(t){this._wupServerSessionState.setAgentType(t.agentType)}},{key:"_onUpdateAgentId",value:function(t){this._wupServerSessionState.setAgentId(t.agentId)}},{key:"_setWupMessagesHashing",value:function(t){this._dataServerCommunicator.updateEnableWupMessagesHashing(t.enableWupMessagesHashing)}}])}();function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function On(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jn(n.key),n)}}function jn(t){var e=function(t,e){if("object"!=Dn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dn(e)?e:e+""}var Un=function(){return function(t,e,r){return e&&On(t.prototype,e),r&&On(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"create",value:function(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}])}();function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ln(n.key),n)}}function Ln(t){var e=function(t,e){if("object"!=zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zn(e)?e:e+""}var Fn=function(){return function(t,e,r){return e&&Nn(t.prototype,e),r&&Nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"isUndefinedNull",value:function(t){return null==t||void 0===t}},{key:"getPostUrl",value:function(t,e,r,n,i,o,s,a){var u=Un.create();try{u instanceof self.XMLHttpRequest?(u.open(e,t,!0),u.timeout=s||12e3,a&&u.setRequestHeader(Bt,a),u.onload=function(){200===u.status||204===u.status&&o?n&&n(u.responseText):i&&i(u.responseText,u.status,u.statusText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.ontimeout=function(){i&&i("timeout")},u.onabort=function(){i&&i("abort")},u.send(r)):(u.onload=function(){n&&u.responseText&&n(u.responseText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.onprogress=function(){},u.ontimeout=function(){i&&i("timeout")},u.open(e,t,!0),a&&u.setRequestHeader(Bt,a),u.timeout=s||12e3,setTimeout((function(){u.send(r)}),0))}catch(t){throw t}}}])}();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qn(n.key),n)}}function qn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:e+""}var Yn=function(){return function(t,e,r){return e&&Wn(t.prototype,e),r&&Wn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._messageBus=r,this._logger=n,this.errors={},this._messageBus.subscribe(kr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._logger.debug("Sending new HeartBeatStatusEvent - ".concat(t.category,", ").concat(t.status)),this._mainCommunicator.sendAsync(U,t)}}])}();function Zn(t){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(t)}function Kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kn(Object(r),!0).forEach((function(e){Xn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xn(t,e,r){return(e=Qn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qn(n.key),n)}}function Qn(t){var e=function(t,e){if("object"!=Zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zn(e)?e:e+""}var Jn=function(){return function(t,e,r){return e&&Vn(t.prototype,e),r&&Vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sn=0,this.url=r,this.logAggregator=e,this.msgPrefix=n}),[{key:"log",value:function(t,e,r){this.logAggregator.add({eventName:"log",data:Gn(Gn({msg:this.msgPrefix+t},r),{},{url:this.url,level:e,sn:this.sn++})})}},{key:"setLogLevel",value:function(t){this.logAggregator instanceof $e&&this.logAggregator.setLogLevel(t)}},{key:"clearLogEntriesByLogLevel",value:function(t){this.logAggregator.filterOutByLogLevel(t)}}])}();function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ei(n.key),n)}}function ei(t){var e=function(t,e){if("object"!=$n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$n(e)?e:e+""}var ri=function(){return function(t,e,r){return e&&ti(t.prototype,e),r&&ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentMessageNumberOfSendFailures=0,this.reMessageSettings=e,this.currentInterval=this.getMessageRetryInterval()}),[{key:"restartMessageSettings",value:function(){this.currentMessageNumberOfSendFailures=0,this.currentInterval=this.getMessageRetryInterval()}},{key:"updateSettings",value:function(t){this.reMessageSettings=t}},{key:"updateAllSettings",value:function(t){t.init(),this.reMessageSettings=t}},{key:"getNumberOfSendFailures",value:function(){return this.currentMessageNumberOfSendFailures}},{key:"getNextInterval",value:function(){return this.currentInterval}},{key:"getMessageNumToRetry",value:function(){return this.reMessageSettings.getMessageNumToRetry()}},{key:"getMessageRetryInterval",value:function(){return this.reMessageSettings.getMessageRetryInterval()}},{key:"getMaxIntervalBetweenFailures",value:function(){return this.reMessageSettings.getMaxIntervalBetweenFailures()}},{key:"getIncrementalGrowthBetweenFailures",value:function(){return this.reMessageSettings.getIncrementalGrowthBetweenFailures()}},{key:"_incrementNumberOfSendFailures",value:function(){this.currentMessageNumberOfSendFailures++}},{key:"shouldReMessage",value:function(t){return t||this.getNumberOfSendFailures()<this.getMessageNumToRetry()}},{key:"updateRetryInterval",value:function(){var t=this.currentInterval+this.currentMessageNumberOfSendFailures*this.getIncrementalGrowthBetweenFailures();t>this.getMaxIntervalBetweenFailures()?this.currentInterval=this.getMaxIntervalBetweenFailures():this.currentInterval=t,this._incrementNumberOfSendFailures()}}])}();function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oi(n.key),n)}}function oi(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}var si=function(){return function(t,e,r){return e&&ii(t.prototype,e),r&&ii(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(wr,this._handler.bind(this),!0)}),[{key:"_handler",value:function(t){this._mainCommunicator.sendAsync(z,t)}}])}();function ai(t){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ai(t)}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fi(n.key),n)}}function fi(t){var e=function(t,e){if("object"!=ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ai(e)?e:e+""}var ci=function(){return function(t,e,r){return e&&ui(t.prototype,e),r&&ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._wupServerSessionState=r,this._logServerClient=n,this._mainCommunicator.addMessageListener(xn,this._handle.bind(this)),this._mainCommunicator.addMessageListener(Pn,this._handleStateChanged.bind(this))}),[{key:"_handle",value:function(t){null!=t&&t.requestId&&(null!=t&&t.ott||null!=t&&t.sts)&&(this._wupServerSessionState.setRequestId(t.requestId,!1),this._wupServerSessionState.setOtt(t.ott),this._wupServerSessionState.setSts(t.sts),this._wupServerSessionState.setStd(t.std))}},{key:"_handleStateChanged",value:function(t){this._logServerClient.setIsPaused(t.SDK_state)}}])}();function li(t){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(t)}function hi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,di(n.key),n)}}function di(t){var e=function(t,e){if("object"!=li(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==li(e)?e:e+""}var pi=function(){return function(t,e,r){return e&&hi(t.prototype,e),r&&hi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._mainCommunicator=r,this._messageBus.subscribe(Sr,this._handle.bind(this))}),[{key:"_handle",value:function(t){this._mainCommunicator.sendAsync(N,t)}}])}();function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!=yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yi(e)?e:e+""}var mi=function(){return function(t,e,r){return e&&vi(t.prototype,e),r&&vi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainCommunicator=e,this._msgBus=r,this._eventHandlers=[]}),[{key:"loadSystem",value:function(){var t=this;this._configurationRepository=new X,this._wupServerSessionState=new ct,this._logRequestBodyBuilder=new pt,this._configurationWrapperLogMessage=new me(this._configurationRepository),this._logReMessageSettings=this._configurationWrapperLogMessage.createReMessageSettings(),this._logRetryMessage=new ri(this._logReMessageSettings),this._logServerCommunicator=new Ut(this._logRequestBodyBuilder,this._configurationRepository.get(b),Fn,this._logRetryMessage,!0,"log"),this._logMessageBuilder=new Yt(new Jt),this._logServerClient=new Se(this._logServerCommunicator,this._logMessageBuilder,this._configurationRepository),this._wupStatisticsService=new Be(this._configurationRepository.get(m)),this._wupDispatchRateCalculatorFactory=new Ye(this._wupStatisticsService,this._wupServerSessionState);var e=new $e;this._logDataDispatcher=new Xe(this._logServerClient,e,this._wupDispatchRateCalculatorFactory,this._configurationRepository.get(v));var r=new Jn(e,"worker");this._logMessageProcessor=new nr(this._logDataDispatcher);var n=new st(r);ot.setLogger(n),this._wupMessageBuilder=new hr(this._wupServerSessionState,new Jt),this._wupRequestBodyBuilder=new vr(this._wupServerSessionState),this._configurationWrapperWupMessage=new Hr(this._configurationRepository),this._wupReMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._wupRetryMessage=new ri(this._wupReMessageSettings),this._dataServerCommunicator=new Ut(this._wupRequestBodyBuilder,this._configurationRepository.get(b),Fn,this._wupRetryMessage,!1,"wup"),this._wupResponseProcessor=new Cr(this._wupServerSessionState,this._msgBus,this._configurationRepository),this._wupServerClient=new Gr(this._dataServerCommunicator,this._wupMessageBuilder,this._wupServerSessionState,this._wupStatisticsService,this._wupResponseProcessor,this._configurationRepository,this._msgBus);var i=this._configurationRepository.get(g)?K.defaultDynamicWupDispatchRateConfiguration:this._configurationRepository.get(y);this._dataDispatcher=new Xe(this._wupServerClient,new Jr(this._wupServerSessionState),this._wupDispatchRateCalculatorFactory,i),this._messageProcessor=new nr(this._dataDispatcher),this._eventHandlers.push(new rn(this._msgBus,this._wupStatisticsService,this._dataDispatcher,this._logDataDispatcher,this._dataServerCommunicator,this._wupServerClient,this._logServerClient,n,this._mainCommunicator)),this._eventHandlers.push(new an(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new ln(this._msgBus,n,this._mainCommunicator)),this._eventHandlers.push(new yn(this._msgBus,this._dataDispatcher,n)),this._eventHandlers.push(new Yn(this._mainCommunicator,this._msgBus,n)),this._eventHandlers.push(new si(this._msgBus,this._mainCommunicator)),this._eventHandlers.push(new ci(this._mainCommunicator,this._wupServerSessionState,this._logServerClient)),this._eventHandlers.push(new pi(this._msgBus,this._mainCommunicator)),this._wupServerSessionState.onServerStateUpdated.subscribe((function(e){t._mainCommunicator.sendAsync(j,e)})),this._workerService=new Mn(this._mainCommunicator,this._wupServerClient,this._logServerClient,this._configurationRepository,this._messageProcessor,this._logMessageProcessor,this._wupServerSessionState,this._dataServerCommunicator),this._workerService.start(),ot.info("Loaded worker")}}])}();function bi(t){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(t)}function _i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wi(n.key),n)}}function wi(t){var e=function(t,e){if("object"!=bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bi(e)?e:e+""}var Si=function(){return function(t,e,r){return e&&_i(t.prototype,e),r&&_i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscribers=o()}),[{key:"subscribe",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;this.subscribers.has(t)?(r=this.subscribers.get(t))&&r.forEach((function(t){e===t.handler&&(i=!0)})):(r=c(),this.subscribers.set(t,r)),i||r.add({handler:e,isOneTime:n})}},{key:"unsubscribe",value:function(t,e){if(t&&this.subscribers.has(t)){var r=this.subscribers.get(t);r&&r.forEach((function(t){e===t.handler&&r.delete(t)})),0===r.size&&this.subscribers.delete(t)}}},{key:"publish",value:function(t,e){if(!t)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(t,e)}},{key:"_notifySubscribers",value:function(t,e){var r=this.subscribers.get(t);r&&r.forEach((function(t){t.handler(e),t.isOneTime&&r.delete(t)}))}}])}(),ki=Si;function Ei(t){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(t)}function xi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bi(n.key),n)}}function Bi(t){var e=function(t,e){if("object"!=Ei(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ei(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ei(e)?e:e+""}var Ci=function(){return function(t,e,r){return e&&xi(t.prototype,e),r&&xi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._portNativeWorker=e}),[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(t){this._portNativeWorker.onmessage=t}}])}();function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ai(n.key),n)}}function Ai(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ri(e)?e:e+""}var Ii=function(){return function(t,e,r){return e&&Pi(t.prototype,e),r&&Pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"start",value:function(){var t=new p,e=new ki,r=new mi(t,e);this._loadWorkerSystem(t,e,r,new Ci(self))}},{key:"_loadWorkerSystem",value:function(t,e,r,n){try{t.setMessagingPort(n),r.loadSystem(),e.publish(kr,new zr(Rr,jr))}catch(t){e.publish(kr,new zr(Rr,Ur))}}}])}();function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Mi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Di(n.key),n)}}function Di(t){var e=function(t,e){if("object"!=Ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ti(e)?e:e+""}var Oi=function(){return function(t,e,r){return e&&Mi(t.prototype,e),r&&Mi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=self,"undefined"==typeof TextEncoder&&(e.TextEncoder=function(){},TextEncoder.prototype.encode=function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(e)})}),[{key:"start",value:function(){(new Ii).start()}}])}();(new Oi).start()}()}();',"Worker",void 0,void 0)}function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function cr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lr(n.key),n)}}function lr(t){var e=function(t,e){if("object"!=ur(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ur(e)?e:e+""}var fr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._portNativeWorker=e},e=[{key:"postMessage",value:function(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function(t){this._portNativeWorker.onmessage=t}}],e&&cr(t.prototype,e),r&&cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pr(n.key),n)}}function pr(t){var e=function(t,e){if("object"!=hr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hr(e)?e:e+""}var yr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nativeWorker=e,this.port=new fr(this._nativeWorker)},(e=[{key:"close",value:function(){this.port.close()}}])&&dr(t.prototype,e),r&&dr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function br(t){var e=function(t,e){if("object"!=vr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vr(e)?e:e+""}var gr=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._useUrlWorker=e,this._workerUrl=r},e=[{key:"create",value:function(){return this._useUrlWorker?this._createWorkerFromUrl():this._createInlineWorker()}},{key:"_createInlineWorker",value:function(){var t=new sr;return oe.info("Created a dedicated worker."),new yr(t)}},{key:"_createWorkerFromUrl",value:function(){try{var t=new Worker(this._workerUrl);return oe.info("Created worker from url - ".concat(this._workerUrl)),new yr(t)}catch(t){throw oe.error("Failed to construct worker from url."),t}}}],e&&mr(t.prototype,e),r&&mr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sr(n.key),n)}}function Sr(t){var e=function(t,e){if("object"!=_r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_r(e)?e:e+""}var Er=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pairs=[],this.size=0},(e=[{key:"has",value:function(t){return this._indexOf(t)>-1}},{key:"get",value:function(t){var e=this._indexOf(t);if(e>-1)return this._pairs[e][1]}},{key:"set",value:function(t,e){var r=this._indexOf(t);r>-1?this._pairs[r][1]=e:(this._pairs.push([t,e]),this.size++)}},{key:"delete",value:function(t){var e=this._indexOf(t);return e>-1&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function(t){for(var e=0;e<this._pairs.length;e++)t(this._pairs[e][1],this._pairs[e][0])}},{key:"clear",value:function(){this._pairs=[]}},{key:"_indexOf",value:function(t){for(var e=0;e<this._pairs.length;e++)if(this._pairs[e][0]===t)return e;return-1}}])&&wr(t.prototype,e),r&&wr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),kr=function(){return new(self.Map||Er)};function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function Tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cr(n.key),n)}}function Cr(t){var e=function(t,e){if("object"!=Pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pr(e)?e:e+""}var Or=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=[],this.size=0},(e=[{key:"add",value:function(t){return this._set.push(t),this.size++,this}},{key:"has",value:function(t){return this._set.indexOf(t)>-1}},{key:"delete",value:function(t){for(var e=0;e<this._set.length;e++)if(this._set[e]===t)return this._set.splice(e,1),this.size--,!0;return!1}},{key:"forEach",value:function(t){for(var e=0;e<this._set.length;e++)t(this._set[e])}},{key:"clear",value:function(){this._set=[]}}])&&Tr(t.prototype,e),r&&Tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Mr=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new(self.Set||Or),r=0;r<t.length;r++)e.add(t[r]);return e};function Br(t){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xr(n.key),n)}}function xr(t){var e=function(t,e){if("object"!=Br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Br(e)?e:e+""}var Lr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._msgListeners=kr()},e=[{key:"setMessagingPort",value:function(t){var e=this;this._messagePort=t,t.setonmessage((function(t){var r=t.data,n=[],o=e._msgListeners.get(r.msgType);o&&o.forEach((function(t){t.callback(r.data),t.isOneTime&&n.push(t)})),n.forEach((function(t){o.delete(t)}))}))}},{key:"sendAsync",value:function(t,e,r,n,o){n&&r&&this.addMessageListener(r,n,o),this._messagePort.postMessage({msgType:t,data:e})}},{key:"addMessageListener",value:function(t,e,r){var n=null;this._msgListeners.has(t)?n=this._msgListeners.get(t):(n=Mr(),this._msgListeners.set(t,n)),n.add({callback:e,isOneTime:r})}}],e&&jr(t.prototype,e),r&&jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ir(n.key),n)}}function Ir(t){var e=function(t,e){if("object"!=Rr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rr(e)?e:e+""}var Nr=function(){return t=function t(e,r,n,o,i,a){var s,u,c,l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,c="BC",(u=Ir(u="_dataOrigin"))in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,this._serverWorkerCommunicator=r,this._contextManager=n,this._passToWorkerInterval=a||0,this._intervalConfigKey=o,this._msgToWorker=i,this._Q=[],this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)),e.addEventListener(window,"beforeunload",(function(){l._onUnload()}),!0)},(e=[{key:"addToQueue",value:function(t,e,r,n){(r=!(null!=r&&!0!==r))&&e.push&&(e[0]=this._contextManager.contextHash),0!==this._passToWorkerInterval?(this._Q.push({eventName:t,data:e,shouldFlush:n,origin:this._dataOrigin}),n&&this._sendQToServerWorker()):this._serverWorkerCommunicator.sendAsync(this._msgToWorker,{eventName:t,data:e,shouldFlush:n,origin:this._dataOrigin})}},{key:"updateWithConfig",value:function(t){var e=t.get(this._intervalConfigKey);void 0!==e&&e!==this._passToWorkerInterval&&(this._passToWorkerInterval=e,clearInterval(this._intervalId),this._intervalId=null,0!==this._passToWorkerInterval&&(this._intervalId=setInterval(this._sendQToServerWorker.bind(this),this._passToWorkerInterval)))}},{key:"flushAllMessages",value:function(){this._Q.push({eventName:"flushData"}),this._sendQToServerWorker()}},{key:"_sendQToServerWorker",value:function(){try{this._Q.length&&(this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q),this._Q=[])}catch(t){oe.error("Failed sending data to worker. ".concat(t)),this._sendQInSingleMessagesToServerWorker()}}},{key:"_sendQInSingleMessagesToServerWorker",value:function(){for(var t=0;t<this._Q.length;t++)try{this._serverWorkerCommunicator.sendAsync(this._msgToWorker,this._Q[t])}catch(t){oe.error("Failed sending single message data to worker. ".concat(t))}this._Q=[]}},{key:"_onUnload",value:function(){this.flushAllMessages()}},{key:"filterOut",value:function(t){this._Q=this._Q.filter(t)}}])&&Ar(t.prototype,e),r&&Ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ur(n.key),n)}}function Ur(t){var e=function(t,e){if("object"!=Dr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dr(e)?e:e+""}var Hr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._perfDataQ=e,this._now=window.performance&&window.performance.now?window.performance.now.bind(window.performance):We.dateNow.bind(Date),this._monitors=kr()},e=[{key:"startMonitor",value:function(t){oe.debug("PerfMonitor:startMonitor on ".concat(t)),this._monitors.set(t,this._now())}},{key:"stopMonitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this._monitors.has(t)){var r=this._now()-this._monitors.get(t);this._perfDataQ.addToQueue("perf",{orig:e,name:t,val:r}),oe.debug("PerfMonitor:stopMonitor on ".concat(t,": time = ").concat(r)),this._monitors.delete(t)}}},{key:"cancelMonitor",value:function(t){oe.debug("PerfMonitor:cancelMonitor on ".concat(t)),this._monitors.has(t)&&this._monitors.delete(t)}},{key:"reportMonitor",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";oe.debug("PerfMonitor:reportMonitor on ".concat(t)),this._perfDataQ.addToQueue("perf",{orig:r,name:t,val:e})}}],e&&Fr(t.prototype,e),r&&Fr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr(t)}function Wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vr(n.key),n)}}function Vr(t){var e=function(t,e){if("object"!=Gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gr(e)?e:e+""}var Kr=function(){return t=function t(e,r,n,o,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:200;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mutationObserver=e,this._siteMapKey=o,this._keyUrl=o+"_isUrlNonMasked",this._stopOnFirstMappingMatch=a,this._siteMap=null,this._observers=[],this._utils=r,this._domUtils=n,this._onMatchCB=i,this._maxMappings=s,this._maxTriggers=10},(e=[{key:"updateObserver",value:function(t){this._onMatchCB=t}},{key:"_observeChange",value:function(t,e){if(t)try{var r=window.document.querySelector(t);if(r){var n=new this._mutationObserver((function(t){t.length>0&&e()}));n.observe(r,{childList:!0,characterData:!0,attributes:!0,subtree:!0}),this._observers.push(n)}else oe.error("Selector:".concat(JSON.stringify(t)," not found on page. Check ").concat(this._siteMapKey," configuration"))}catch(t){oe.error("SiteMapper._observeChange: ".concat(t.message),t)}}},{key:"initTracking",value:function(){var t=this,e=function(){try{for(var e=0;e<t._siteMap.mappings.length;e++){var r=t._siteMap.mappings[e];if(!r.url||t._url.indexOf(r.url)>-1)if(r.selector){var n=window.document.querySelector(r.selector);if(n)if(r.byText){if((void 0!==n.innerText&&-1!==n.innerText.indexOf(r.byText)||n.value===r.byText||n.textContent===r.byText)&&(t._onMatchCB(r),t._stopOnFirstMappingMatch))return}else if(t._onMatchCB(r),t._stopOnFirstMappingMatch)return}else if(t._url.indexOf(r.url)>-1&&(t._onMatchCB(r),t._stopOnFirstMappingMatch))return}}catch(t){oe.error("SiteMapper:testQuerySelector failed. ex: ".concat(t.message),t)}};if(!this._siteMap){var r=this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey);r&&r.triggers.length<=this._maxTriggers&&r.mappings.length<=this._maxMappings&&(this._siteMap=r),this._isNonMaskedUrl=this._utils.StorageUtils.getFromSessionStorage(this._keyUrl)}this._siteMap&&(this._url=this._isNonMaskedUrl?window.document.location.href:this._utils.getDocUrl(),this._domUtils.onDocumentBody(window,(function(){t._mutationObserver&&t._siteMap.triggers.forEach((function(r){(!r.url||t._url.indexOf(r.url)>-1)&&t._observeChange(r.selector,e)})),e()})))}},{key:"onConfigUpdate",value:function(t){try{if(!this._siteMap&&t.get(this._siteMapKey)){this.stopTracking();var e=t.get(this._siteMapKey)&&JSON.parse(t.get(this._siteMapKey));this._isNonMaskedUrl=t.get("useNonMaskedUrlInMappings"),e&&e.triggers.length<=this._maxTriggers&&e.mappings.length<=this._maxMappings?(this._siteMap=e,this._utils.StorageUtils.saveToSessionStorage(this._siteMapKey,this._siteMap),this._utils.StorageUtils.saveToSessionStorage(this._keyUrl,this._isNonMaskedUrl),this.initTracking()):oe.warn("Configuration ".concat(this._siteMapKey," contains an illegal amount of triggers or mappings. Max Allowed Triggers: ").concat(this._maxTriggers,", ")+"Max Allowed Mappings: ".concat(this._maxMappings))}}catch(t){oe.error("An error occurred while loading ".concat(this._siteMapKey," configuration. Make sure the configuration value is valid. ").concat(t.message),t)}}},{key:"stopTracking",value:function(){for(var t=0;t<this._observers.length;t++)this._observers[t].disconnect();this._observers=[],this._siteMap=null}}])&&Wr(t.prototype,e),r&&Wr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qr(n.key),n)}}function qr(t){var e=function(t,e){if("object"!=Qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qr(e)?e:e+""}var Yr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners=[]},(e=[{key:"subscribe",value:function(t){this._listeners.push(t)}},{key:"publish",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)this._listeners[e](t)}},{key:"unsubscribe",value:function(t){for(var e=0,r=this._listeners.length;e<r;e++)if(t===this._listeners[e]){this._listeners.splice(e,1);break}}}])&&zr(t.prototype,e),r&&zr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Jr(t){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(t)}function Xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zr(n.key),n)}}function Zr(t){var e=function(t,e){if("object"!=Jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jr(e)?e:e+""}var $r=function(){return t=function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e,this._storageUtilsWrapper=o,this._contextSiteMapper=r,this.contextName="",this.referrer="",this.historyLen=-1,this.onContextChange=new Yr,this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this)),this._workerComm=n,this._contextIdKey="cdContextId",this.randomValue=Math.floor(1e6*Math.random())},(e=[{key:"contextData",value:function(){return{contextId:this.contextId,contextHash:this.contextHash,url:this.url,name:this.contextName,referrer:this.referrer,hLength:this.historyLen,timestamp:this.timestamp}}},{key:"getContextName",value:function(){return this.contextName}},{key:"setContext",value:function(t){this.contextName=t.name,this._genContext(),this.url=t.url,this.referrer=t.referrer,this.historyLen=t.hLength,this.timestamp=t.timestamp,this._publishContext()}},{key:"changeContext",value:function(t){t?t!==this.contextName?(this.contextName=t,this._updateContext(),this._publishContext(),oe.info("Context changed to ".concat(t," and Context hash its ").concat(this.contextHash))):oe.warn("Received context ".concat(t," but this is already the current context. Aborting operation.")):oe.error("Received an invalid context name ".concat(t,". Aborting context change operation"))}},{key:"onSiteMapperMatch",value:function(t){t.contextName!==this.contextName&&this.changeContext(t.contextName)}},{key:"_updateContext",value:function(){this._genContext(),this.url=this._utils.getDocUrl(),this.referrer=this._utils.clearTextFromNumbers(document.referrer),this.historyLen=window.history.length,this.timestamp=this._utils.dateNow()}},{key:"_genContext",value:function(){this.contextId=this._storageUtilsWrapper.getCookie(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=this._storageUtilsWrapper.getFromLocalStorage(this._contextIdKey),this.contextId&&!isNaN(this.contextId)||(this.contextId=0)),this.contextId=parseInt(this.contextId);var t=this.contextId+1;this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey,t)||oe.error("Failed saving contextId ".concat(this.contextId," to local storage.")),this._storageUtilsWrapper.setCookie(this._contextIdKey,t.toString())||oe.error("Failed saving contextId ".concat(this.contextId," to cookie.")),this.contextHash=this._toInt32Hash(this.contextId)}},{key:"_toInt32Hash",value:function(t){var e=t^=this.randomValue;return e=73244475*((e=73244475*(e>>>16^e))>>>16^e),4294967295&(e^=e>>>16)}},{key:"_publishContext",value:function(){var t={contextName:this.contextName};this._workerComm.sendAsync(Qe,t),this.onContextChange.publish(this.contextData())}},{key:"initContextHandling",value:function(){this._contextSiteMapper.initTracking()}},{key:"clearContextHandling",value:function(){this._contextSiteMapper.stopTracking()}},{key:"onConfigUpdate",value:function(t){this._contextSiteMapper.onConfigUpdate(t)}},{key:"onSessionReset",value:function(){this._publishContext()}}])&&Xr(t.prototype,e),r&&Xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rn(n.key),n)}}function rn(t){var e=function(t,e){if("object"!=tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tn(e)?e:e+""}var nn=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cdUtils=e,this._scriptName=r,this._cdUtils.addEventListener(window,"error",this._handleException.bind(this))},(e=[{key:"_handleException",value:function(t){if(this._scriptName&&this._scriptName===t.filename){var e=this._buildErrorMessage(t);oe.error("caught unhandled exception. ".concat(e))}}},{key:"_buildErrorMessage",value:function(t){if(!t.error)return t.message;var e=t.error.toString(),r=t.error.stack?t.error.stack:"";return"".concat(e,", Line: ").concat(t.lineno,", Column: ").concat(t.colno,". Stacktrace: ").concat(r)}}])&&en(t.prototype,e),r&&en(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sn(n.key),n)}}function sn(t){var e=function(t,e){if("object"!=on(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=on(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==on(e)?e:e+""}var un=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscribers=kr()},e=[{key:"subscribe",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;this.subscribers.has(t)?(r=this.subscribers.get(t))&&r.forEach((function(t){e===t.handler&&(o=!0)})):(r=Mr(),this.subscribers.set(t,r)),o||r.add({handler:e,isOneTime:n})}},{key:"unsubscribe",value:function(t,e){if(t&&this.subscribers.has(t)){var r=this.subscribers.get(t);r&&r.forEach((function(t){e===t.handler&&r.delete(t)})),0===r.size&&this.subscribers.delete(t)}}},{key:"publish",value:function(t,e){if(!t)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(t,e)}},{key:"_notifySubscribers",value:function(t,e){var r=this.subscribers.get(t);r&&r.forEach((function(t){t.handler(e),t.isOneTime&&r.delete(t)}))}}],e&&an(t.prototype,e),r&&an(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),cn=un;function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hn(n.key),n)}}function hn(t){var e=function(t,e){if("object"!=ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ln(e)?e:e+""}var dn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=new URL(e);if(this._cid=r.searchParams.get("cid"),!this._cid)throw new Error("cid was not found on provided url.")},(e=[{key:"get",value:function(){return this._cid}}])&&fn(t.prototype,e),r&&fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),pn="NewSessionStartedEvent",yn="ConfigurationLoadedEvent",vn="ServerStateUpdatedEvent",mn="HeartBeatStatusEvent",bn="ServerRestoredMuidEvent",gn="ServerNewAgentIdEvent";function _n(t){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(t)}function wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sn(n.key),n)}}function Sn(t){var e=function(t,e){if("object"!=_n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_n(e)?e:e+""}var En=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._workerComm=e,this._utils=r,this._currState=null,this._agentIdService=n,e.addMessageListener(vn,this._onStateUpdateFromWorker.bind(this)),e.addMessageListener(gn,this._onNewAgentIdFromWorker.bind(this)),r.addEventListener(window,"storage",this._onStateUpdateFromStorage.bind(this),!0)},e=[{key:"getServerState",value:function(t){if(this._utils.isUndefinedNull(t))throw new Error("Invalid sid param of ".concat(t));return this._currState=this._currState||this._utils.StorageUtils.getFromLocalStorage("cdSrvrState"),this._currState&&this._currState.sid!==t?null:this._currState}},{key:"onSessionIdChange",value:function(){this._utils.StorageUtils.removeFromLocalStorage("cdSrvrState"),this._currState=null}},{key:"_onStateUpdateFromWorker",value:function(t){this._updateServerState(t)}},{key:"_updateServerState",value:function(t){this._currState=t,this._utils.StorageUtils.saveToLocalStorage("cdSrvrState",t)}},{key:"_onStateUpdateFromStorage",value:function(t){if(t&&t.storageArea&&t.storageArea.cdSrvrState){var e=JSON.parse(t.storageArea.cdSrvrState);this._workerComm.sendAsync($e,{requestId:e.val.requestId,sts:e.val.sts,std:e.val.std,ott:e.val.ott})}}},{key:"_onNewAgentIdFromWorker",value:function(t){this._agentIdService.set(t)}}],e&&wn(t.prototype,e),r&&wn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function Pn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tn(n.key),n)}}function Tn(t){var e=function(t,e){if("object"!=kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kn(e)?e:e+""}var Cn={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},On=[J,vt,rt,Z,$,et],Mn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._requireParseFields=kr(),this._requireParseFields.set(S,S),this._requireParseFields.set(E,E),this._requireParseFields.set(C,C),this._requireParseFields.set(Z,Z),this._requireParseFields.set(P,P),this._configurationList={},this.configDefault={logLevel:Jt,isCrossdomain:!1,isGfxRendering:!1,isAudioDetectFeature:!1,enableDebugInfoFeature:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:Cn.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3,offloadFontsCollectionEnabled:!1,passwordIdMaskingList:[]},this.loadConfigurations(this.configDefault)},(e=[{key:"isConfigurationUpdatedFromServer",value:function(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function(t,e){var r=this;t&&(this._isDefaultConfiguration=t===this.configDefault,Object.keys(t).forEach((function(n){if(e||r._isDefaultConfiguration||!On.includes(n)){var o=t[n];if(r._requireParseFields.has(n)){var i=r._tryParseConfigurationValue(o);i&&(o=i)}r._configurationList[n]=o}})))}},{key:"get",value:function(t){return this._configurationList[t]}},{key:"set",value:function(t,e){this._configurationList[t]=e}},{key:"getAll",value:function(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){}return null}}])&&Pn(t.prototype,e),r&&Pn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Bn="touchEvent",jn="keyEvent",xn="ConfigurationLoadedEvent",Ln="NewSessionStartedEvent",Rn="ApiContextChangeEvent",An="ApiResetSessionEvent",In="ApiCustomerMetadataEvent",Nn="ApiChangeStateEvent",Dn="ApiSetCsidEvent",Fn="ApiSetPsidEvent",Un="ApiSetCustomerBrand",Hn="ServerRestoredMuidEvent",Gn="StateChangedEvent",Wn="MutationSingleEvent",Vn="MutationAddedNodes",Kn="MutationRemovedNodes",Qn="StandardInputEvent",zn="StandardInputFocusEvent",qn="StandardInputBlurEvent",Yn="StandardOnClickEvent",Jn="StandardOnSelectEvent",Xn="ElementFocusEvent",Zn="ElementBlurEvent",$n="StandardOnFormSubmitEvent",to="SyntheticInputMaskEvent",eo="CutEvent",ro="CopyEvent",no="PasteEvent",oo="DeviceOrientationEvent",io="BeforeInstallPromptEvent",ao="FocusEvent",so="BlurEvent",uo="ResizeEvent",co="DOMContentLoadedEvent",lo="VisibilityChangeEvent",fo="ScrollEvent",ho="WindowMessageEvent",po="CustomElementDetectedEvent",yo="CustomElementInaccessible",vo="CustomElementSubmitted",mo="BrowserContextAdded",bo="CustomInputElement",go={ElementsEvent:"BCTrackerElementsEvent",ElementEventsEvent:"BCTrackerElementEventsEvent",KeyEvent:"BCTrackerKeyEvent",TouchEvent:"BCTrackerTouchEvent",MouseEvent:"BCTrackerMouseEvent"};function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,So(n.key),n)}}function So(t){var e=function(t,e){if("object"!=_o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_o(e)?e:e+""}var Eo=function(){return t=function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("messageBus param must be defined");this._configurationLoadedCallback=null,this._utils=e,this._configurationRepository=r,this._messageBus=n,this._cidCache=o,i&&i.addMessageListener(yn,this._onConfigurationLoadedEvent.bind(this))},(e=[{key:"updateLogUrlToWorker",value:function(t,e,r){var n=this._configurationRepository.get(A);if(this._isValidLogUrl(n)){if(this._configurationRepository.get(k)){var o=new URL(n);n=o.protocol+"//"+o.host}var i={cid:this._cidCache.get(),sid:t,csid:e,ds:"js",sdkVer:this._utils.scriptVersion};oe.attachSessionIdentifiers(i);var a={logAddress:n,sessionIdentifiers:i};r.sendAsync(Ye,a)}}},{key:"_isValidLogUrl",value:function(t){try{return new URL(t),!0}catch(t){return!1}}},{key:"setConfigurationLoadedCallback",value:function(t){this._configurationLoadedCallback=t}},{key:"_onConfigurationLoadedEvent",value:function(t){this._configurationRepository.loadConfigurations(t),this._configurationLoadedCallback&&this._configurationLoadedCallback(this._configurationRepository.get(B)),this._messageBus.publish(xn,this._configurationRepository)}}])&&wo(t.prototype,e),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ko(t){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(t)}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,To(n.key),n)}}function To(t){var e=function(t,e){if("object"!=ko(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ko(e)?e:e+""}var Co=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"startFeature",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}},{key:"sendToQueue",value:function(){}},{key:"getEventTimestamp",value:function(){return We.dateNow()}},{key:"getTimestampFromEvent",value:function(t){return t.timeStamp?We.cutDecimalPointDigits(t.timeStamp,3):0}}],e&&Po(t.prototype,e),r&&Po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Oo={false:0,true:1,undefined:2,null:2};function Mo(t){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(t)}function Bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jo(n.key),n)}}function jo(t){var e=function(t,e){if("object"!=Mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mo(e)?e:e+""}function xo(t,e,r){return e=Ro(e),function(t,e){if(e&&("object"==Mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lo()?Reflect.construct(e,r||[],Ro(t).constructor):e.apply(t,r))}function Lo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lo=function(){return!!t})()}function Ro(t){return Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ro(t)}function Ao(t,e){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ao(t,e)}var Io={configKey:"isTouchEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},No={pointerdown:"touchstart",pointerup:"touchend",pointermove:"touchmove",MSPointerDown:"touchstart",MSPointerUp:"touchend",MSPointerMove:"touchmove"},Do={touchstart:0,touchmove:1,touchend:2,touchcancel:3},Fo=["eventSequence","timestamp","eventType","isTrusted","elementHash","clientX","clientY","touchIndex","touchSizeMajor","touchSizeMinor","pageX","pageY","screenX","screenY","relativeTime","touchPressure"],Uo=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=xo(this,e))._utils=t,i._dataQ=n,i._elements=r,i._msgBus=o,i._onAllBrowsersTouchEventBinded=i._onAllBrowsersTouchEvent.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ao(t,e)}(e,t),r=e,n=[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,r,n){t!==Do.touchstart&&t!==Do.touchend||this._msgBus.publish(Bn,{action:t});var o=this.getEventTimestamp(n),i=Oo[n.isTrusted],a=this._elements.getElementHashFromEvent(n),s=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(t)&&(t=-1),this._utils.isUndefinedNull(e)&&(e=-1);var u=this.getTimestampFromEvent(n);this._dataQ.addToQueue("touch_events",this._utils.convertToArrayByMap(Fo,{eventSequence:s,timestamp:o,eventType:t,isTrusted:i,elementHash:a,clientX:r.clientX?Math.round(r.clientX):0,clientY:r.clientY?Math.round(r.clientY):0,touchIndex:e,touchSizeMajor:r.radiusX?2*r.radiusX:0,touchSizeMinor:r.radiusY?2*r.radiusY:0,pageX:r.pageX||0,pageY:r.pageY||0,screenX:r.screenX||0,screenY:r.screenY||0,relativeTime:u,touchPressure:r.force||-1}))}},{key:"_bind",value:function(t){var e,r=t.getDocument();if(window.TouchEvent?e=["touchstart","touchmove","touchend","touchcancel"]:window.PointerEvent&&(e=["pointerdown","pointermove","pointerup"]),this._listeningToEvents=e,this._listeningToEvents)for(var n=0;n<this._listeningToEvents.length;n++)this._utils.addEventListener(r,this._listeningToEvents[n],this._onAllBrowsersTouchEventBinded)}},{key:"_unbind",value:function(t){var e=t.getDocument();if(this._listeningToEvents)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.removeEventListener(e,this._listeningToEvents[r],this._onAllBrowsersTouchEventBinded)}},{key:"_onAllBrowsersTouchEvent",value:function(t){return this._onIeTouchEvent(t),this._onTouchEvent(t),!0}},{key:"_onTouchEvent",value:function(t){if((null===t.pointerType||void 0===t.pointerType)&&void 0!==t.changedTouches)for(var e=Do[t.type],r=0;r<t.changedTouches.length;r++){var n=t.changedTouches[r],o=n.identifier%1e4;this._addToCommunicationQueue(e,o,n,t)}}},{key:"_onIeTouchEvent",value:function(t){if(null!=t.pointerType&&("touch"===t.pointerType||"pen"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType===t.MSPOINTER_TYPE_PEN)){var e=No[t.type]||"touchcancel",r=t.pointerId?t.pointerId%1e4:0,n=Do[e];this._addToCommunicationQueue(n,r,t,t)}}}],o=[{key:"getDefaultSettings",value:function(){return Io}}],n&&Bo(r.prototype,n),o&&Bo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Co);function Ho(t){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(t)}function Go(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wo(n.key),n)}}function Wo(t){var e=function(t,e){if("object"!=Ho(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ho(e)?e:e+""}var Vo={true:1,false:0,undefined:-1},Ko=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementList=new WeakMap},(e=[{key:"update",value:function(t,e){this._elementList.set(t,e)}},{key:"compare",value:function(t,e){return Vo[e===this._elementList.get(t)]}}])&&Go(t.prototype,e),r&&Go(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Qo={IntlBackslash:"0",Digit1:"0",Digit2:"0",Digit3:"0",Digit4:"1",Digit5:"1",Digit6:"1",Digit7:"1",Digit8:"2",Digit9:"2",Digit0:"2",KeyQ:"3",KeyW:"3",KeyE:"3",KeyA:"3",KeyS:"3",KeyD:"3",KeyZ:"3",KeyX:"3",KeyC:"3",KeyR:"4",KeyT:"4",KeyF:"4",KeyG:"4",KeyV:"4",KeyB:"4",KeyY:"5",KeyU:"5",KeyH:"5",KeyJ:"5",KeyN:"5",KeyM:"5",KeyI:"6",KeyO:"6",KeyP:"6",KeyK:"6",KeyL:"6",Comma:"6",Period:"6",Semicolon:"7",Minus:"7",Equal:"7",Slash:"7",BracketLeft:"7",Backslash:"7",BracketRight:"7",Quote:"7",NumLock:"8",NumpadDivide:"8",NumpadMultiply:"8",NumpadSubtract:"8",NumpadAdd:"8",NumpadEnter:"8",NumpadDecimal:"8",Numpad0:"8",Numpad1:"8",Numpad2:"8",Numpad3:"8",Numpad4:"8",Numpad5:"8",Numpad6:"8",Numpad7:"8",Numpad8:"8",Numpad9:"8"};function zo(t){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zo(t)}function qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yo(n.key),n)}}function Yo(t){var e=function(t,e){if("object"!=zo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zo(e)?e:e+""}function Jo(t,e,r){return e=Zo(e),function(t,e){if(e&&("object"==zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xo()?Reflect.construct(e,r||[],Zo(t).constructor):e.apply(t,r))}function Xo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xo=function(){return!!t})()}function Zo(t){return Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zo(t)}function $o(t,e){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$o(t,e)}var ti={configKey:"isKeyEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},ei={keyup:0,keydown:1,keypress:2},ri=["eventSequence","timestamp","eventType","isTrusted","elementHash","charCode","character","keyComboType","isCtrl","isShift","isAlt","isMetaKey","keyLocation","code","key","isRepeat","keyRegion","relativeTime","isSameKey"],ni=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Jo(this,e))._configurationRepository=t,u._utils=r,u._elements=n,u._dataQueue=o,u._msgBus=i,u._sameCharService=a,u._maskingService=s,u.comboCodes=["c","v","a","x","z","p","s"],u._onKeyEvent=u._onKeyEvent.bind(u),u._useCaptureEvents=u._configurationRepository.get(I),u._listeners=[],u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$o(t,e)}(e,t),r=e,n=[{key:"startFeature",value:function(t){try{var e=t.getDocument();this._bind(e,this._onKeyEvent,this._useCaptureEvents)}catch(t){oe.error("KeyEvents:startFeature failed, msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._unbind(e)}catch(t){oe.error("KeyEvents:stopFeature failed, msg: ".concat(t.message),t)}}},{key:"updateFeatureConfig",value:function(t){try{if(this._configurationRepository.get(I)!==this._useCaptureEvents){var e=t.getDocument(),r=this._configurationRepository.get(I);this._unbind(e),this._bind(e,this._onKeyEvent,r),this._useCaptureEvents=r}}catch(t){oe.error("KeyEvents:startFeature failed, msg: ".concat(t.message),t)}}},{key:"_bind",value:function(t,e,r){this._addListener(t,"keyup",e,r),this._addListener(t,"keydown",e,r),this._addListener(t,"keypress",e,r)}},{key:"_unbind",value:function(t){this._removeAllListeners(t,"keyup"),this._removeAllListeners(t,"keydown"),this._removeAllListeners(t,"keypress")}},{key:"_addListener",value:function(t,e,r,n){t.addEventListener(e,r,n),this._listeners.push({target:t,type:e,handler:r,options:n})}},{key:"_removeAllListeners",value:function(t,e){this._listeners.filter((function(r){return r.target===t&&r.type===e})).forEach((function(t){t.target.removeEventListener(t.type,t.handler,t.options)})),this._listeners=this._listeners.filter((function(r){return!(r.target===t&&r.type===e)}))}},{key:"_onKeyEvent",value:function(t){var e=ei[t.type];e!==ei.keydown&&e!==ei.keyup||this._msgBus.publish(jn,{action:e}),this._handleKeyEvent(t,"key_events")}},{key:"_handleKeyEvent",value:function(t,e){var r=this._elements.getRealEventTarget(t).id,n=ei[t.type];this._utils.isUndefinedNull(n)&&(n=-1);var o=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=this.getEventTimestamp(t),a=t.key||this._maskingService.getKeyFromLegacyProperties(t),s=t.code||"",u=this._maskingService.maskKey(a,s,r),c=u.key.length>1?"":u.key,l=this._elements.getElementHashFromEvent(t),f=this._getComboType(t,a),h=Oo[t.isTrusted],d="Meta"===t.key||"OS"===t.key||"Win"===t.key||t.metaKey||91===t.keyCode||92===t.keyCode,p=this._configurationRepository.get(T)?this._getKeyRegion(s):"-1",y=this.getTimestampFromEvent(t),v=Vo.undefined;"keypress"===t.type&&(v=this._sameCharService.compare(t.target,t.key),this._sameCharService.update(t.target,t.key)),oe.isDebug()&&oe.trace("onKeyEvent: got event: ".concat(n,", at time:").concat(i,", key: ").concat(u.key,", code:").concat(u.code,", old charCode:").concat(u.charCode)),this._dataQueue.addToQueue(e,this._utils.convertToArrayByMap(ri,{eventType:n,eventSequence:o,timestamp:i,charCode:u.charCode,character:c,elementHash:l,keyComboType:f,isTrusted:h,isCtrl:t.ctrlKey||!1,isShift:t.shiftKey||!1,isAlt:t.altKey||!1,isMetaKey:d||!1,keyLocation:t.location||0,code:u.code||"",key:u.key||"",location:t.location||"",isRepeat:t.repeat||!1,keyRegion:p,relativeTime:y,isSameKey:v}))}},{key:"_getKeyRegion",value:function(t){return Qo[t]?Qo[t]:"-1"}},{key:"_getComboType",value:function(t,e){return(t.ctrlKey||t.metaKey)&&void 0!==e?this.comboCodes.indexOf(e):-1}}],o=[{key:"getDefaultSettings",value:function(){return ti}}],n&&qo(r.prototype,n),o&&qo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Co);function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ai(n.key),n)}}function ai(t){var e=function(t,e){if("object"!=oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oi(e)?e:e+""}var si=function(){return t=function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._historyBuffer=[],this._isTouchInProgress=!1,this._touchStartCount=0,this._isPostTouch=!1,this._touchEndTime=0,this._sensorGateKeeper=i,this._dataQueue=r,this._configurationRepository=e,this._msgBus=n,this._utils=o,this._msgBus.subscribe(Bn,this._onTouch.bind(this)),this._msgBus.subscribe(jn,this._onTouch.bind(this)),this._isMotionAroundTouchEnabled=this._configurationRepository.get(F),this._aroundTouchInterval=this._configurationRepository.get(U)},(e=[{key:"addToQueue",value:function(t,e,r,n){var o=this._utils.dateNow();if(this._isPostTouch&&o-this._touchEndTime>this._aroundTouchInterval&&(oe.debug("SensorsDataQueue: stopped post touch events, time has passed (".concat(this._aroundTouchInterval," millisec)")),this._isPostTouch=!1),!this._isMotionAroundTouchEnabled||this._isTouchInProgress||this._isPostTouch||this._sensorGateKeeper.isOpen())this._dataQueue.addToQueue(t,e,r,n);else{this._historyBuffer.push({name:t,data:e,addCtxId:r,isImmediateWup:n,timestamp:o});for(var i=0,a=this._historyBuffer.length;i<a&&o-this._historyBuffer[0].timestamp>this._aroundTouchInterval;i++)this._historyBuffer.shift()}}},{key:"onConfigUpdate",value:function(){this._aroundTouchInterval=void 0!==this._configurationRepository.get(U)?this._configurationRepository.get(U):this._aroundTouchInterval,this._isMotionAroundTouchEnabled=void 0!==this._configurationRepository.get(F)?this._configurationRepository.get(F):this._isMotionAroundTouchEnabled}},{key:"_sendBuffer",value:function(){var t=this._utils.dateNow();oe.debug("sending history sensors buffer ts=".concat(t));for(var e=0,r=this._historyBuffer.length;e<r;e++)t-this._historyBuffer[e].timestamp<=this._aroundTouchInterval&&this._dataQueue.addToQueue(this._historyBuffer[e].name,this._historyBuffer[e].data,this._historyBuffer[e].addCtxId,this._historyBuffer[e].isImmediateWup);this._historyBuffer=[]}},{key:"_onTouch",value:function(t){return this._isMotionAroundTouchEnabled&&(this._isTouchInProgress||t.action!==Do.touchstart&&t.action!==ei.keydown?t.action===Do.touchend||t.action===ei.keyup?(this._touchStartCount--,this._touchStartCount<=0&&(this._isTouchInProgress=!1,this._isPostTouch=!0,this._touchEndTime=this._utils.dateNow(),oe.debug("stopped touch event in sensors data q ts=".concat(this._utils.dateNow())))):t.action!==Do.touchstart&&t.action!==ei.keydown||this._touchStartCount++:(oe.debug("Started touch event in sensors data q ts=".concat(this._utils.dateNow())),this._isTouchInProgress=!0,this._touchStartCount=1,this._sendBuffer())),!1}}])&&ii(t.prototype,e),r&&ii(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ui(t){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ui(t)}function ci(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return li(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?li(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function li(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function fi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hi(n.key),n)}}function hi(t){var e=function(t,e){if("object"!=ui(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ui(e)?e:e+""}var di=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._weights={input:5,fieldset:4,form:3,textarea:3,label:2},this._interactiveElementsTag=["input","fieldset","textarea","label"],this._classlist=["container","wrapper","section","content","main-content","main_content"],this._containerTagName=["main","article","aside","div"]},e=[{key:"isElementVisible",value:function(t){return t.offsetWidth>0||t.offsetHeight>0}},{key:"isParentElementForm",value:function(t){if(t){var e,r=t.parentElement;if(r)return"form"===(null==r||null===(e=r.tagName)||void 0===e?void 0:e.toLowerCase())?r:this.isParentElementForm(r)}}},{key:"isInExcludedArea",value:function(t){for(var e=t;e;){if(e.tagName){var r=e.tagName.toLowerCase();if("footer"===r||"header"===r||"nav"===r)return!0}e=e.parentElement}return!1}},{key:"isContainer",value:function(t){var e=this,r=t.tagName.toLowerCase(),n=t.className.split(" "),o=t.getAttribute("aria-label")?"_".concat(t.getAttribute("aria-label")):"",i=Array.from(t.attributes).filter((function(t){return t.name.startsWith("data-")})).map((function(t){return"_".concat(t.name)}));return!!this._containerTagName.includes(r)||n.some((function(t){return e._classlist.includes(t)}))||t.hasAttribute("role")&&"region"===t.getAttribute("role")||o.length>0||i.length>0}},{key:"isCustomElement",value:function(t){return"string"==typeof t.localName&&t.localName.indexOf("-")>0}},{key:"calculateScore",value:function(t){var e=this._weights,r=0;return t.id&&t.id.includes("username")?r=20:t.name&&t.name.includes("username")&&(r=10),e[t.tagName.toLowerCase()]+r+("text"===t.type?10:0)}},{key:"findInteractiveArea",value:function(t){var e=this,r=t.querySelectorAll(this._interactiveElementsTag),n={};return r.forEach((function(t){var r,o;if(e.isElementVisible(t)&&!e.isInExcludedArea(t)){var i=t.parentElement,a="".concat(i.tagName,".").concat((null===(r=i.className)||void 0===r?void 0:r.split(" ")[0])||"");n[a]||(n[a]={score:0,parent:i,types:new Set}),n[a].types.add(t.tagName.toLowerCase()),n[a].score+=e.calculateScore(t),n[a].score+=null!==(o=t.id)&&void 0!==o&&o.includes("maincontent")?20:0,n[a].score-=t.disabled?20:0}})),Object.values(n).reduce((function(t,e){return e.score+2*e.types.size>t.score?e:t}),{score:0}).parent}},{key:"isChildrenHasFormTag",value:function(t){if(t&&t.children){var e,r=ci(t.children);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.tagName&&"form"===n.tagName.toLowerCase()||n.tagName.toLowerCase().includes("form"))return this.findInteractiveAreaInParent(this.findInteractiveArea(document),n)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"findPotentialContainer",value:function(t){for(var e=t,r=null;e&&"body"!==e.tagName.toLowerCase();){if(this.isContainer(e)){var n;r=e;var o=null===(n=e)||void 0===n||null===(n=n.tagName)||void 0===n?void 0:n.toLowerCase(),i=e.className.split(" ");if("div"===o&&(i.includes("containerWrapper")||i.includes("container")))return e;if(this._containerTagName.includes(o)&&"div"!==o)return e}e=e.parentElement}return this.isChildrenHasFormTag(r)||r}},{key:"findInteractiveAreaInParent",value:function(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=e.parentElement,i=t.parentElement,a=0;a<n;a++)if(i&&i.parentElement){var s,u;if(r=i,"html"===(null===(s=i=i.parentElement)||void 0===s||null===(s=s.tagName)||void 0===s?void 0:s.toLowerCase())||"body"===(null===(u=i)||void 0===u||null===(u=u.tagName)||void 0===u?void 0:u.toLowerCase()))return t;if(i===o)return r}}},{key:"interactiveContainer",value:function(){var t=this.findInteractiveArea(document);if(!t)return oe.info("No significant interactive area.");var e=this.findPotentialContainer(t);return e||void 0}},{key:"getUniqueElementId",value:function(t,e){if(t){for(var r=this.interactiveContainer(),n=e&&"number"==typeof e?e:30,o=[],i=0;t.parentNode&&i<=n;){var a=t.parentNode,s=Array.from(a.children).indexOf(t),u=t.nodeName.includes("-")?t.nodeName.replace(/[\d-]/g,""):t.nodeName;o.unshift(u+""+s),t=a,r&&a===r&&(i=n-1),i++}return o.join("_")}}},{key:"getUniqueElementXpath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(!t)return"";for(var r=[],n=0;t&&n<e;){var o=t.tagName?t.tagName.toLowerCase():t.nodeName.toLowerCase();if(t.id)r.unshift("".concat(o,"#").concat(t.id));else{for(var i=1,a=t;a.previousElementSibling;)a=a.previousElementSibling,i++;r.unshift("".concat(o,":").concat(i))}t=t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentElement,n++}return r.join("/")}}],e&&fi(t.prototype,e),r&&fi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),pi=Object.freeze(new di);function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mi(n.key),n)}}function mi(t){var e=function(t,e){if("object"!=yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yi(e)?e:e+""}function bi(t,e,r){return e=_i(e),function(t,e){if(e&&("object"==yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gi()?Reflect.construct(e,r||[],_i(t).constructor):e.apply(t,r))}function gi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gi=function(){return!!t})()}function _i(t){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_i(t)}function wi(t,e){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wi(t,e)}var Si=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=bi(this,e))._configurationRepository=t,a._utils=r,a._dataQueue=n,a._contextMgr=o,a._maskingService=i,a._elementHashWMap=new WeakMap,a._collectPosition=!0,a._collectClassName=!0,a._collectTitle=!0,a._collectHref=!0,a._collectCustomElementAttribute=!0,a._customElementAttribute=a._configurationRepository.get(x),a._maxElemValLength=30,a._allowedUnmaskedValuesList=a._configurationRepository.get(Z),a._enableUnmaskedValues=a._configurationRepository.get($),a._enableAutoElementId=a._configurationRepository.get(st),a._autoElementIdLimit=a._configurationRepository.get(ut),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wi(t,e)}(e,t),r=e,(n=[{key:"getElement",value:function(t){if(this._utils.isUndefinedNull(t)||t===document||t===document.body)return-1;var e=-1;if(this._elementHashWMap.has(t))e=this._elementHashWMap.get(t).hash;else{var r=pi.getUniqueElementXpath(t,this._autoElementIdLimit);e=r?this._utils.getHash(r):-1,this._elementHashWMap.set(t,{hash:e,contextList:[this._contextMgr.contextName]}),this._sendElementToServer(t,e)}return e}},{key:"getElementHashFromEvent",value:function(t){var e=this.getRealEventTarget(t);return this.getElement(e)}},{key:"getRealEventTarget",value:function(t){var e=t.composedPath?t.composedPath():null;return e&&e.length>0?e[0]:t.target}},{key:"resendElementPerContext",value:function(t){if(this._elementHashWMap.has(t)){var e=this._elementHashWMap.get(t),r=e.hash;e.contextList.indexOf(this._contextMgr.contextName)<0&&(e.contextList.push(this._contextMgr.contextName),this._elementHashWMap.set(t,{hash:e.hash,contextList:e.contextList}),this._sendElementToServer(t,r))}else oe.error("received for resendElementPerContext bad element, not in hash map. id=".concat(t.id))}},{key:"isListed",value:function(t){return this._elementHashWMap.has(t)}},{key:"getElementData",value:function(t){return this._elementHashWMap.get(t)}},{key:"getElementContextList",value:function(t){return this._elementHashWMap.get(t).contextList}},{key:"_sendElementToServer",value:function(t,e){var r=this._collectPosition?t.getBoundingClientRect&&t.getBoundingClientRect():null,n=-1,o=-1,i=-1,a=-1;r&&(n=Math.round(r.left),o=Math.round(r.top),i=Math.round(r.right-r.left),a=Math.round(r.bottom-r.top));var s=this._maskingService.maskAbsoluteIfRequired(t.id,t.id),u=this._maskingService.maskAbsoluteIfRequired(t.name,t.id),c=this._collectClassName&&t.getAttribute&&this._verifyNoPrivateData(t.getAttribute("class"))||"",l=this._collectTitle&&this._verifyNoPrivateData(t.title)||"",f=this._verifyNoPrivateData(t.nodeName)||"",h=this._collectHref&&this._verifyNoPrivateData(t.href)||"";h.length>0&&(h=this._utils.clearTextFromNumbers(h));var d=this._collectCustomElementAttribute&&t.getAttribute&&this._verifyNoPrivateData(t.getAttribute(this._customElementAttribute))||"",p=this._maskingService.maskAbsoluteIfRequired(d,t.id),y="";"SELECT"===t.nodeName&&(y=this._utils.getDropDownListValues(t,this._maskingService).join(";"));var v=t.value||t.textContent||t.innerHTML||"",m="";this._enableUnmaskedValues&&Array.isArray(this._allowedUnmaskedValuesList)&&this._allowedUnmaskedValuesList.length>0&&this._allowedUnmaskedValuesList.forEach((function(t){"string"!=typeof t?oe.error("Unsupported allowedUnmaksedValuesList value was provided: ".concat(t.toString())):t.toLowerCase()===v.trim().toLowerCase()&&(m=t)})),v=v.length>this._maxElemValLength?"":this._maskingService.maskText(v,t.id);var b=this._utils.isUndefinedNull(t.checked)?-1:t.checked?1:0,g=this.getEventTimestamp(),_=this._enableAutoElementId?pi.getUniqueElementId(t,this._autoElementIdLimit):"";this._dataQueue.addToQueue("elements",[this._contextMgr.contextHash,e,f||"",s||"",u||"",t.type||"",n||0,o||0,i||0,a||0,c||"",h||"",l||"",t.alt||"",y||"",v||"",b,g,p||d,m,_],!1),oe.isDebug()&&oe.debug("adding element id:"+s+", name:"+u+", type:"+t.type+", width:"+i+", height:"+a+", left:"+n+", top:"+o+", hash: "+e)}},{key:"_verifyNoPrivateData",value:function(t){return/\d\d\d/.test(t)?this._utils.clearTextFromNumbers(t):t}},{key:"updateFeatureConfig",value:function(){this._collectPosition="boolean"==typeof this._configurationRepository.get("isElementsPosition")?this._configurationRepository.get("isElementsPosition"):this._collectPosition,this._collectClassName="boolean"==typeof this._configurationRepository.get("isElementsClassName")?this._configurationRepository.get("isElementsClassName"):this._collectClassName,this._collectTitle="boolean"==typeof this._configurationRepository.get("isElementsTitle")?this._configurationRepository.get("isElementsTitle"):this._collectTitle,this._collectHref="boolean"==typeof this._configurationRepository.get("isElementsHref")?this._configurationRepository.get("isElementsHref"):this._collectHref,this._collectCustomElementAttribute="boolean"==typeof this._configurationRepository.get(j)?this._configurationRepository.get(j):this._collectCustomElementAttribute,this._customElementAttribute="string"==typeof this._configurationRepository.get(x)?this._configurationRepository.get(x):this._customElementAttribute,this._maxElemValLength=this._configurationRepository.get("maxElValLen")?this._configurationRepository.get("maxElValLen"):this._maxElemValLength,this._allowedUnmaskedValuesList=this._configurationRepository.get("allowedUnmaskedValuesList")?this._configurationRepository.get("allowedUnmaskedValuesList"):this._allowedUnmaskedValuesList,this._enableUnmaskedValues=this._configurationRepository.get("enableUnmaskedValues")?this._configurationRepository.get("enableUnmaskedValues"):this._enableUnmaskedValues,this._enableAutoElementId="boolean"==typeof this._configurationRepository.get(st)?this._configurationRepository.get(st):this._enableAutoElementId,this._autoElementIdLimit="number"==typeof this._configurationRepository.get(ut)?this._configurationRepository.get(ut):this._autoElementIdLimit}}])&&vi(r.prototype,n),o&&vi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Co),Ei="cd__rtcframe",ki="cd__fontDetectionFrame",Pi="cd__frame__";function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oi(n.key),n)}}function Oi(t){var e=function(t,e){if("object"!=Ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ti(e)?e:e+""}var Mi=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elementsMutationObserverFactory=e,this._configurationRepository=n,this._domUtils=r,this._windowMutationObservers=kr(),this._loadedFrames=kr(),this._framesToIgnore=Mr(),this._frameSelector="frame, iframe",this._frameLoadedCallback=this._onFrameLoad.bind(this),this.frameAdded=new Yr,this.frameRemoved=new Yr,this.frameInaccessible=new Yr},(e=[{key:"frames",get:function(){var t=[];return this._loadedFrames.forEach((function(e,r){t.push(r)})),t}},{key:"start",value:function(t){var e=this;this._monitorWindow(t),this._findFrames(t.document).forEach((function(t){e._processNewFrame(t)}))}},{key:"stop",value:function(){this._windowMutationObservers.forEach((function(t){t.disconnect()})),this._windowMutationObservers.clear(),this._loadedFrames.clear(),this._framesToIgnore.clear()}},{key:"addToIgnoreList",value:function(t){this._framesToIgnore.add(t)}},{key:"_monitorWindow",value:function(t){if(!this._windowMutationObservers.has(t)){var e=new this._elementsMutationObserverFactory.create(t,self.MutationObserver,this._configurationRepository);e.observe(t.document),e.nodeAdded.subscribe(this._processAddedNode.bind(this)),e.nodeRemoved.subscribe(this._processRemovedNode.bind(this)),this._windowMutationObservers.set(t,e)}}},{key:"_unMonitorWindow",value:function(t){var e=this._windowMutationObservers.get(t);e&&e.disconnect(),this._windowMutationObservers.delete(t)}},{key:"_processAddedNode",value:function(t){var e=this;if(this._domUtils.matches(t,this._frameSelector))this._processNewFrame(t);else{if(!t.hasChildNodes())return;this._findFrames(t).forEach((function(t){e._processNewFrame(t)}))}}},{key:"_processNewFrame",value:function(t){this._framesToIgnore.has(t.id)||t.id.startsWith(Pi)||this._loadedFrames.has(t)||(this._domUtils.addEventListener(t,"load",this._frameLoadedCallback),this._domUtils.canAccessIFrame(t)?this._domUtils.isWindowDocumentReady(t.contentWindow)&&this._addFrame(t):this.frameInaccessible.publish(t))}},{key:"_addFrame",value:function(t){var e=this;this._monitorWindow(t.contentWindow),this._findFrames(t.contentWindow.document).forEach((function(t){e._processNewFrame(t)})),this._loadedFrames.set(t,t.contentDocument),this.frameAdded.publish(t)}},{key:"_processRemovedNode",value:function(t){var e=this;if(this._domUtils.matches(t,this._frameSelector))this._removeFrame(t);else{if(!t.hasChildNodes())return;this._findFrames(t).forEach((function(t){e._removeFrame(t)}))}}},{key:"_removeFrame",value:function(t){this._unMonitorWindow(t.contentWindow),this._domUtils.removeEventListener(t,"load",this._frameLoadedCallback),this._loadedFrames.delete(t)&&this.frameRemoved.publish(t)}},{key:"_onFrameLoad",value:function(t){var e=t.target;this._loadedFrames.has(e)&&this._removeFrame(e),this._processNewFrame(e)}},{key:"_findFrames",value:function(t){for(var e=[],r=[],n=t.querySelectorAll(this._frameSelector),o=0;o<n.length;o++)r.push(n[o]);for(var i=0;i<r.length;i++){var a,s=r[i];e.push(s),this._domUtils.canAccessIFrame(s)?(a=this._findFrames(s.contentWindow.document)).length>0&&(e=e.concat(a)):this.frameInaccessible.publish(s)}return e}}])&&Ci(t.prototype,e),r&&Ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Bi(t){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function ji(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xi(n.key),n)}}function xi(t){var e=function(t,e){if("object"!=Bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bi(e)?e:e+""}var Li=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"startFeatures",value:function(){}},{key:"startFeature",value:function(){}},{key:"stopFeatures",value:function(){}},{key:"stopFeature",value:function(){}},{key:"updateFeatureConfig",value:function(){}}])&&ji(t.prototype,e),r&&ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Ai(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ii(n.key),n)}}function Ii(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ri(e)?e:e+""}var Ni=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e||window.self},(e=[{key:"Context",get:function(){return this.context}},{key:"getDocument",value:function(){return this.context.document}}])&&Ai(t.prototype,e),r&&Ai(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Di(t){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(t)}function Fi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ui(n.key),n)}}function Ui(t){var e=function(t,e){if("object"!=Di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Di(e)?e:e+""}function Hi(t,e,r){return e=Wi(e),function(t,e){if(e&&("object"==Di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gi()?Reflect.construct(e,r||[],Wi(t).constructor):e.apply(t,r))}function Gi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gi=function(){return!!t})()}function Wi(t){return Wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wi(t)}function Vi(t,e){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vi(t,e)}var Ki=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hi(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vi(t,e)}(e,t),r=e,(n=[{key:"getDocument",value:function(){return this.context.document||this.context.contentDocument}}])&&Fi(r.prototype,n),o&&Fi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ni);function Qi(t){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(t)}function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qi(n.key),n)}}function qi(t){var e=function(t,e){if("object"!=Qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qi(e)?e:e+""}function Yi(t,e,r){return e=Xi(e),function(t,e){if(e&&("object"==Qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ji()?Reflect.construct(e,r||[],Xi(t).constructor):e.apply(t,r))}function Ji(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ji=function(){return!!t})()}function Xi(t){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xi(t)}function Zi(t,e){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zi(t,e)}var $i=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Yi(this,e))._framesCache=t,i._framesDetector=r,i._framesDetector.frameAdded.subscribe(i._onFrameAdded.bind(i)),i._framesDetector.frameRemoved.subscribe(i._onFrameRemoved.bind(i)),i._framesDetector.frameInaccessible.subscribe(i._onFrameInaccessible.bind(i)),i._featuresList=[],i._domUtils=n,i._utils=o,i._framesDetector.addToIgnoreList(Ei),i._framesDetector.addToIgnoreList(ki),i._framesDetector.start(window.self),i._buildFramesCache(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}(e,t),r=e,n=[{key:"startFeatures",value:function(t){try{if(this._buildFeaturesMap(t),0===this._featuresList.length)return;oe.debug("startFeatures:Running features on ".concat(this._framesCache.count," frames")),this._startFeaturesOnFrames(this._framesCache.contexts,t)}catch(t){oe.debug("Failed to start features in FrameHandler.startFeatures: ".concat(t.message),t)}}},{key:"startFeature",value:function(t){try{this._featuresList.push(t),t.isRunning=!0,this._startFeaturesOnFrames(this._framesCache.contexts,[t])}catch(t){oe.debug("Failed to start feature in FrameHandler.startFeature: ".concat(t.message),t)}}},{key:"stopFeatures",value:function(t){try{this._stopFeaturesOnFrames(t,this._framesCache.contexts)}catch(t){oe.debug("Failed to stop features in FrameHandler.stopFeatures: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{t.isRunning=!1,this._stopFeaturesOnFrames([t],this._framesCache.contexts)}catch(t){oe.debug("Failed to stop feature in FrameHandler.stopFeature: ".concat(t.message),t)}}},{key:"updateFeatureConfig",value:function(t){t.instance.updateFeatureConfig&&this._updateFeaturesConfigOnFrames([t],this._framesCache.contexts)}},{key:"_onFrameAdded",value:function(t){try{oe.debug("Frame:".concat(t.name,", id:").concat(t.id,". was loaded.")),this._framesCache.exists(t)?this._framesCache.unRegisterContextFeatures(t,this._featuresList):this._framesCache.add(t),this._startFeaturesOnFrames([t],this._featuresList)}catch(e){oe.warn("Failed to start features on frame ".concat(t.id,": ").concat(e.message),e)}}},{key:"_onFrameRemoved",value:function(t){try{oe.debug("Frame:".concat(t.name,", id:").concat(t.id,". was removed.")),this._stopFeaturesOnFrames(this._featuresList,[t])}catch(e){oe.warn("Failed to stop features on frame ".concat(t.id,": ").concat(e.message),e)}}},{key:"_onFrameInaccessible",value:function(t){oe.debug("Frame:".concat(t.name,", id:").concat(t.id,". was detected as inaccessible."))}},{key:"_buildFeaturesMap",value:function(t){var e=this;this._featuresList=[],t.forEach((function(t){e._featuresList.push(t)}))}},{key:"_buildFramesCache",value:function(){var t=this;this._framesDetector.frames.forEach((function(e){t._framesCache.exists(e)||t._framesCache.add(e)}))}},{key:"_startFeaturesOnFrames",value:function(t,e){var r=this;t.forEach((function(t){try{if(!r._domUtils.canAccessIFrame(t))return;for(var n=0;n<e.length;n++){var o=e[n];o.shouldRun&&!r._framesCache.hasFeature(t,o)&&(r._framesCache.registerContextFeature(t,o),r._domUtils.isWindowDocumentReady(t.contentWindow)&&(oe.debug("_startFeaturesOnFrames: run feature on frame:".concat(t.name,", id:").concat(t.id,". feature:").concat(o.configKey)),r._utils.asyncCall.call(r._runFeatureOnFrame,r,t,o),o.isRunning=!0))}}catch(e){oe.error("An error has occurred while starting features on frame ".concat(t.name," with id: ").concat(t.id,". Error: ").concat(e.message),e)}}))}},{key:"_runFeatureOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.startFeature(new Ki(t.contentWindow)):oe.debug("Not starting features on frame ".concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(r){oe.error("An error has occurred while starting feature ".concat(e.configKey," on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(r.message),r)}}},{key:"_stopFeaturesOnFrames",value:function(t,e){var r=this;try{e.forEach((function(e){try{if(!r._domUtils.canAccessIFrame(e))return;if(e.contentWindow&&e.contentWindow.document)for(var n=0,o=t.length;n<o;n++)r._framesCache.hasFeature(e,t[n])&&r._utils.asyncCall.call(r._stopFeatureOnFrame,r,e,t[n]),t[n].isRunning=!1}catch(t){oe.error("An error has occurred while stopping features on frame ".concat(e.name," with id: ").concat(e.id,". Error: ").concat(t.message),t)}r._framesCache.exists(e)&&r._framesCache.unRegisterContextFeatures(e,t),r._framesCache.remove(e)}))}catch(t){oe.warn("Failed stopping features on frames ".concat(t.message),t)}}},{key:"_stopFeatureOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.stopFeature(new Ki(t.contentWindow)):oe.debug("Not stopping feature ".concat(e.configKey," on frame ").concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(r){oe.error("An error has occurred while stopping feature ".concat(e.configKey," ").concat(func," on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(r.message),r)}}},{key:"_updateFeaturesConfigOnFrames",value:function(t,e){var r=this;e.forEach((function(e){try{if(!r._domUtils.canAccessIFrame(e))return;for(var n=0,o=t.length;n<o;n++)r._framesCache.hasFeature(e,t[n])&&r._utils.asyncCall.call(r._updateFeatureConfigOnFrame,r,e,t[n])}catch(t){oe.error("An error has occurred while updating features configuration on frame ".concat(e.name," with id: ").concat(e.id,". Error: ").concat(t.message),t)}}))}},{key:"_updateFeatureConfigOnFrame",value:function(t,e){try{this._domUtils.canAccessIFrame(t)?e.instance.updateFeatureConfig(new Ki(t.contentWindow)):oe.debug("Not updating feature ".concat(e.configKey," config on frame ").concat(t.name," with id: ").concat(t.id," as it is not accessible"))}catch(r){oe.error("An error has occurred while updating feature ".concat(e.configKey," config on frame ").concat(t.name," with id: ").concat(t.id,". Error: ").concat(r.message),r)}}}],n&&zi(r.prototype,n),o&&zi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Li);function ta(t){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(t)}function ea(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ra(n.key),n)}}function ra(t){var e=function(t,e){if("object"!=ta(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ta(e)?e:e+""}function na(t,e,r){return e=ia(e),function(t,e){if(e&&("object"==ta(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oa()?Reflect.construct(e,r||[],ia(t).constructor):e.apply(t,r))}function oa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oa=function(){return!!t})()}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ia(t)}function aa(t,e){return aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aa(t,e)}var sa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),na(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aa(t,e)}(e,t),r=e,n&&ea(r.prototype,n),o&&ea(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Li);function ua(t){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua(t)}function ca(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,la(n.key),n)}}function la(t){var e=function(t,e){if("object"!=ua(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ua(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ua(e)?e:e+""}var fa=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contexts=kr()},(e=[{key:"contexts",get:function(){var t=[];return this._contexts.forEach((function(e,r){t.push(r)})),t}},{key:"browserContexts",get:function(){var t=[];return this._contexts.forEach((function(e){t.push(e.browserContext)})),t}},{key:"count",get:function(){return this._contexts.size}},{key:"add",value:function(t){this._contexts.set(t,{registered:!0,features:kr()})}},{key:"addBrowserContext",value:function(t){this._contexts.set(t.Context,{registered:!0,features:kr(),browserContext:t})}},{key:"remove",value:function(t){this.exists(t)&&0===this._contexts.get(t).features.size&&this._contexts.delete(t)}},{key:"get",value:function(t){return this._contexts.get(t)}},{key:"exists",value:function(t){return this._contexts.has(t)&&this._contexts.get(t).registered}},{key:"registerContextFeature",value:function(t,e){this.exists(t)&&this._contexts.get(t).features.set(e.configKey,!0)}},{key:"unRegisterContextFeature",value:function(t,e){this.exists(t,e)&&this._contexts.get(t).features.delete(e.configKey)}},{key:"unRegisterContextFeatures",value:function(t,e){for(var r=0;r<e.length;r++){var n=e[r];this.unRegisterContextFeature(t,n)}}},{key:"hasFeature",value:function(t,e){return this.exists(t)&&this._contexts.get(t).features.has(e.configKey)}}])&&ca(t.prototype,e),r&&ca(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ha(t){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(t)}function da(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ya(n.key),n)}}function pa(t,e,r){return e&&da(t.prototype,e),r&&da(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ya(t){var e=function(t,e){if("object"!=ha(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ha(e)?e:e+""}var va=pa((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.removedNodes=r}));function ma(t){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(t)}function ba(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_a(n.key),n)}}function ga(t,e,r){return e&&ba(t.prototype,e),r&&ba(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _a(t){var e=function(t,e){if("object"!=ma(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ma(e)?e:e+""}var wa=ga((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.addedNodes=r}));function Sa(t){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sa(t)}function Ea(t){return function(t){if(Array.isArray(t))return ka(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ka(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ka(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Pa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ta(n.key),n)}}function Ta(t){var e=function(t,e){if("object"!=Sa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sa(e)?e:e+""}var Ca=function(){return t=function t(e,r,n){var o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i="ignoreNodeTypes",a=Mr([Node.COMMENT_NODE,Node.TEXT_NODE,Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE]),(i=Ta(i))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,this._mutationObserver=new r(this._mutationObserved.bind(this,e)),this.nodesAdded=new Yr,this.nodesRemoved=new Yr,this.nodeAdded=new Yr,this.nodeRemoved=new Yr,this._configurationRepository=n,this.mutationQueue=[],this.processingQueue=!1},(e=[{key:"observe",value:function(t){this._mutationObserver.observe(t,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_mutationObserved",value:function(t,e){var r,n,o,i=this,a=(null===(r=this._configurationRepository)||void 0===r?void 0:r.get(pt))||0,s=(null===(n=this._configurationRepository)||void 0===n?void 0:n.get(yt))||100,u=e.filter((function(t){return"childList"===t.type&&[].concat(Ea(t.addedNodes),Ea(t.removedNodes)).some((function(t){return i._isValidNodeType(t)}))}));if(a&&u.length>a)for(var c=function(){var e=u.slice(l,l+Math.min(a,u.length-l));setTimeout((function(){e.forEach((function(e){i._processMutation(t,e)}))}),s)},l=0;l<u.length;l+=a)c();else(o=this.mutationQueue).push.apply(o,Ea(u)),this.processingQueue||(this.processingQueue=!0,requestIdleCallback((function(){return i._processMutationQueue(t)})))}},{key:"_processMutationQueue",value:function(t){for(var e,r=this,n=(null===(e=this._configurationRepository)||void 0===e?void 0:e.get(pt))||50;this.mutationQueue.length>0;)this.mutationQueue.splice(0,n).forEach((function(e){return r._processMutation(t,e)}));this.processingQueue=!1}},{key:"_processMutation",value:function(t,e){var r=this._processNodes(e.addedNodes,this.nodeAdded),n=this._processNodes(e.removedNodes,this.nodeRemoved);this._publishNodesMutationEvents(t,r,n)}},{key:"_publishNodesMutationEvents",value:function(t,e,r){var n=this;e.length>0&&requestIdleCallback((function(){return n.nodesAdded.publish(new wa(t,e))})),r.length>0&&requestIdleCallback((function(){return n.nodesRemoved.publish(new va(t,r))}))}},{key:"_processNodes",value:function(t,e){for(var r=[],n=0;n<t.length;n++){var o=t[n];this._isValidNodeType(o)&&(r.push(o),e.publish(o))}return r}},{key:"_isValidNodeType",value:function(t){return!this.ignoreNodeTypes.has(t.nodeType)}}])&&Pa(t.prototype,e),r&&Pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Ma(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ba(n.key),n)}}function Ba(t){var e=function(t,e){if("object"!=Oa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oa(e)?e:e+""}var ja=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"create",value:function(t,e,r){return new Ca(t,e,r)}}])&&Ma(t.prototype,e),r&&Ma(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xa(t){return xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xa(t)}function La(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ra(n.key),n)}}function Ra(t){var e=function(t,e){if("object"!=xa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xa(e)?e:e+""}var Aa=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._domUtils=r,this._utils=n},(e=[{key:"create",value:function(){if(this._configurationRepository.get(L)){var t=new fa,e=new Mi(new ja,this._domUtils,this._configurationRepository);return new $i(t,e,this._domUtils,this._utils)}return new sa}}])&&La(t.prototype,e),r&&La(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ia(t){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(t)}function Na(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Da(n.key),n)}}function Da(t){var e=function(t,e){if("object"!=Ia(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ia(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ia(e)?e:e+""}var Fa=function(){return t=function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._features=e,this._frameHandler=r,this._configurationRepository=n,this._domUtils=o,this._cdUtils=i,this._browserContextsCache=a,this.buildFrameRelatedLists()},(e=[{key:"buildFrameRelatedLists",value:function(){this._frameRelatedDefaultFeatures=this._collectFrameRelated(this._features.getDefaultFeatures()),this._frameRelatedNonDefaultFeatures=this._collectFrameRelated(this._features.getNonDefaultFeatures())}},{key:"runDefault",value:function(){oe.info("Running default features"),this._runFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures)}},{key:"stopDefault",value:function(){oe.info("Stopping default features"),this._stopFeatures(this._features.getDefaultFeatures(),this._frameRelatedDefaultFeatures)}},{key:"runPerSessionFeatures",value:function(){oe.info("Running per session features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._startFeatures(this._features.getPerSessionFeatures()):oe.info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.")}},{key:"stopPerSessionFeatures",value:function(){oe.info("Stopping per session features"),this._stopFeatures(this._features.getPerSessionFeatures())}},{key:"runNonDefault",value:function(){oe.info("Running non default features"),this._configurationRepository.isConfigurationUpdatedFromServer()?this._runFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures):oe.info("We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives.")}},{key:"stopNonDefault",value:function(){oe.info("Stopping non default features"),this._stopFeatures(this._features.getNonDefaultFeatures(),this._frameRelatedNonDefaultFeatures)}},{key:"runPerContextFeatures",value:function(t){oe.info("Running per context features"),this._configurationRepository.isConfigurationUpdatedFromServer()?(this._runFeatures(this._features.getPerContextFeatures()),"cd_auto"!==t.name&&this._frameRelatedDefaultFeatures&&this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures)):oe.info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.")}},{key:"stopPerContextFeatures",value:function(){oe.info("Stopping per context features"),this._stopFeatures(this._features.getPerContextFeatures())}},{key:"stopAllFeatures",value:function(){oe.info("Stopping all features"),this.stopDefault(),this.stopNonDefault(),this.stopPerSessionFeatures(),this.stopPerContextFeatures()}},{key:"updateRunByConfig",value:function(t){oe.info("Updating features configuration"),this._updateFeatures(this._features.getDefaultFeatures(),t),this._updateFeatures(this._features.getNonDefaultFeatures(),t),this._updateFeatures(this._features.getPerContextFeatures(),t)}},{key:"runFeaturesOnBrowserContext",value:function(t){var e=this,r=this._features.getDefaultFeatures();r&&(this._browserContextsCache.unRegisterContextFeatures(t.Context,r),Object.keys(r).forEach((function(n){var o=r[n];o.shouldRun&&o.isFrameRelated&&(o.isRunning=!0,o.instance&&e._cdUtils.asyncCall.call(o.instance.startFeature,o.instance,t))})))}},{key:"stopFeaturesOnBrowserContextRemove",value:function(t){var e=this,r=this._features.getDefaultFeatures();r&&(this._browserContextsCache.unRegisterContextFeatures(t.Context,r),Object.keys(r).forEach((function(n){var o=r[n];o.shouldRun&&o.isFrameRelated&&o.isRunning&&o.instance&&e._cdUtils.asyncCall.call(o.instance.stopFeature,o.instance,t)})))}},{key:"_runFeatures",value:function(t,e){var r=this;t&&Object.keys(t).forEach((function(e){var n=t[e];n.shouldRun&&(r._cdUtils.asyncCall.call(n.instance.startFeature,n.instance,new Ni(window.self)),n.isRunning=!0)})),e&&(this._frameHandler.startFeatures(e),this._domUtils.onPageLoad(window,(function(){r._frameHandler.startFeatures(e)})))}},{key:"_stopFeatures",value:function(t,e){var r=this;t&&Object.keys(t).forEach((function(e){var n=t[e];n.instance.stopFeature&&r._cdUtils.asyncCall.call(n.instance.stopFeature,n.instance,new Ni(window.self)),n.isRunning=!1})),e&&this._frameHandler.stopFeatures(e)}},{key:"_actOnFeature",value:function(t,e){t.isFrameRelated&&this._frameHandler[e](t),t.instance[e]&&this._cdUtils.asyncCall.call(t.instance[e],t.instance,new Ni(window.self))}},{key:"_startFeatures",value:function(t){var e=this;t&&Object.keys(t).forEach((function(r){var n=t[r],o=e._configurationRepository.get(n.configKey);"boolean"==typeof o&&(n.shouldRun=o),n.shouldRun&&(e._actOnFeature(n,"startFeature"),n.isRunning=!0)}))}},{key:"_startFeatureOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(r){t.shouldRun&&!e._browserContextsCache.hasFeature(r.Context,t)&&(e._browserContextsCache.registerContextFeature(r.Context,t),e._cdUtils.asyncCall.call(t.instance.startFeature,t.instance,r),t.isRunning=!0)}))}},{key:"_stopFeatureOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(r){e._browserContextsCache.hasFeature(r.Context,t)&&e._cdUtils.asyncCall.call(t.instance.stopFeature,t.instance,r),t.isRunning=!1,e._browserContextsCache.exists(r.Context)&&e._browserContextsCache.unRegisterContextFeature(r.Context,t),e._browserContextsCache.remove(r.Context)}))}},{key:"_updateFeatureConfigOnBrowserContexts",value:function(t){var e=this;t.isFrameRelated&&this._browserContextsCache.browserContexts.forEach((function(r){e._browserContextsCache.hasFeature(r.Context,t)&&e._cdUtils.asyncCall.call(t.instance.updateFeatureConfig,t.instance,r)}))}},{key:"_updateFeatures",value:function(t,e){var r=this;t&&Object.keys(t).forEach((function(n){var o=t[n],i=e.get(o.configKey);"boolean"==typeof i&&(o.shouldRun=i),o.isRunning&&!o.shouldRun?(r._actOnFeature(o,"stopFeature"),r._stopFeatureOnBrowserContexts(o),o.isRunning=!1):!o.isRunning&&o.shouldRun&&(r._actOnFeature(o,"startFeature"),r._startFeatureOnBrowserContexts(o),o.isRunning=!0),o.isRunning&&(r._actOnFeature(o,"updateFeatureConfig"),r._updateFeatureConfigOnBrowserContexts(o))}))}},{key:"_collectFrameRelated",value:function(t){var e=[];return t&&Object.keys(t).forEach((function(r){var n=t[r];n.isFrameRelated&&e.push(n)})),e}}])&&Na(t.prototype,e),r&&Na(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ua(t){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ua(t)}function Ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ga(n.key),n)}}function Ga(t){var e=function(t,e){if("object"!=Ua(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ua(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ua(e)?e:e+""}var Wa=0,Va=1,Ka=function(){return t=function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._featureMgr=e,this._dataQ=n,this._configurationRepository=r,this._pauseResumeEnabled=r.get(z)||!1,this._sdkState=Wa,this._stateService=o,this._workerComm=i},(e=[{key:"onResume",value:function(){this._sdkState===Va?(oe.info("Resuming JS SDK"),this._featureMgr.updateRunByConfig(this._configurationRepository),this._sdkState=Wa,this._stateService.updateState(or.started)):oe.warn("PauseResumeManager:onResume - resume api called when SDK already running")}},{key:"onPause",value:function(){this._sdkState===Wa?(oe.info("Pausing JS SDK"),this._featureMgr.stopAllFeatures(),this._sdkState=Va,this._stateService.updateState(or.paused)):oe.warn("Pause api called when SDK already paused")}},{key:"onStateChange",value:function(t){t.toState&&this._verifyApiAllowed(t.toState)&&("pause"===t.toState?(this.onPause(),this.updateSDKStateToWorker(Va)):"run"===t.toState?(this.onResume(),this.updateSDKStateToWorker(Wa)):oe.warn("stateChange api called with non valid toState: "+t.toState))}},{key:"updateSDKStateToWorker",value:function(t){var e={SDK_state:t};this._workerComm.sendAsync(nr,e)}},{key:"isCustomerApiEnabled",value:function(){return this._sdkState===Wa}},{key:"_verifyApiAllowed",value:function(t){return!!this._pauseResumeEnabled||(this._dataQ.addToQueue("forbidden_api_call",[null,t]),!1)}},{key:"onConfigUpdate",value:function(){this._pauseResumeEnabled=this._configurationRepository.get(z)||!1,!1===this._configurationRepository.get("isEnabled")&&this.onPause()}}])&&Ha(t.prototype,e),r&&Ha(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Qa="ContextChange",za="ResetSession",qa="cdCustomerMetadata",Ya="cdChangeState",Ja="cdSetCsid",Xa="cdSetPsid",Za="cdSetCustomerBrand";function $a(t){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$a(t)}function ts(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,es(n.key),n)}}function es(t){var e=function(t,e){if("object"!=$a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$a(e)?e:e+""}var rs=function(){return t=function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pauseResumeMgr=e,this._messageBus=r,this._cdApiFacade=n,this._utils=o,this._createCommandToBusMessageMapping()},e=[{key:"enableApi",value:function(){oe.info("Enabling api calls"),this._onApiMessageBinded=this._onApiMessage.bind(this),this._utils.addEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"disableApi",value:function(){oe.info("Disabling api calls"),this._utils.removeEventListener(window,"message",this._onApiMessageBinded,!0)}},{key:"getCustomerSessionID",value:function(t){this._cdApiFacade.getCustomerSessionID((function(e){t(e)}))}},{key:"getLogServerAddress",value:function(t){this._cdApiFacade.getLogServerAddress((function(e){t(e)}))}},{key:"getServerAddress",value:function(t){this._cdApiFacade.getServerAddress((function(e){t(e)}))}},{key:"getConfigurations",value:function(t){this._cdApiFacade.getConfigurations((function(e){t(e)}))}},{key:"notifySessionReset",value:function(t){this._pauseResumeMgr.isCustomerApiEnabled()&&window.postMessage({type:"SNumNotification",cdSNum:t},window.location.href)}},{key:"isApiAvailable",value:function(t){return this._cdApiFacade.isApiAvailable(t)}},{key:"_onApiMessage",value:function(t){var e=t.data,r=e.type;if(void 0===r)try{r=(e=JSON.parse(e)).type}catch(t){}(r===Ya||this._pauseResumeMgr.isCustomerApiEnabled()&&this._apiCommandToBusMessageMapping[r])&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this._messageBus.publish(this._apiCommandToBusMessageMapping[r],e))}},{key:"_createCommandToBusMessageMapping",value:function(){this._apiCommandToBusMessageMapping={},this._apiCommandToBusMessageMapping[Qa]=Rn,this._apiCommandToBusMessageMapping[za]=An,this._apiCommandToBusMessageMapping[qa]=In,this._apiCommandToBusMessageMapping[Ya]=Nn,this._apiCommandToBusMessageMapping[Ja]=Dn,this._apiCommandToBusMessageMapping[Xa]=Fn,this._apiCommandToBusMessageMapping[Za]=Un}}],e&&ts(t.prototype,e),r&&ts(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ns(t){return ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ns(t)}function os(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,is(n.key),n)}}function is(t){var e=function(t,e){if("object"!=ns(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ns(e)?e:e+""}var as=function(){return t=function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.muid=null,this._utils=e,this._storageUtilsWrapper=n,this._dataQ=r,this._configurationRepository=o,this.EXPIRATION=e.minutesToMilliseconds(525600)},(e=[{key:"initMuid",value:function(){var t=this._storageUtilsWrapper.getCookie("bmuid"),e=this._storageUtilsWrapper.getFromLocalStorage("bmuid");this.muid=t||e,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid||(this.muid=this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase(),oe.info("Generated a new muid: ".concat(this.muid))),this._saveAndSendMuid(),oe.info("Muid is: ".concat(this.muid))}},{key:"updateMuid",value:function(t){t?(this.muid=t,this.muid=this._utils.StorageUtils.validateBcId(this.muid),this.muid?(this._saveAndSendMuid(),oe.info("Restored MUID is: ".concat(this.muid))):oe.warn("Invalid format of restored MUID")):oe.warn("MUID is not defined")}},{key:"_saveAndSendMuid",value:function(){this._setStorageAndCookieKey(),this._addMuidToQueue()}},{key:"_setStorageAndCookieKey",value:function(){this._storageUtilsWrapper.setCookie("bmuid",this.muid,this.EXPIRATION),this._storageUtilsWrapper.saveToLocalStorage("bmuid",this.muid)}},{key:"_addMuidToQueue",value:function(){this._dataQ.addToQueue("static_fields",["muid",this.muid],!1)}}])&&os(t.prototype,e),r&&os(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ss(t){return ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(t)}function us(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cs(n.key),n)}}function cs(t){var e=function(t,e){if("object"!=ss(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ss(e)?e:e+""}var ls=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._psid=null},(e=[{key:"get",value:function(){return this._psid}},{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid psid value of undefined");this._psid=t}}])&&us(t.prototype,e),r&&us(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function fs(t){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(t)}function hs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ds(n.key),n)}}function ds(t){var e=function(t,e){if("object"!=fs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fs(e)?e:e+""}var ps=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._psidCache=e,this._workerCommunicator=r},(e=[{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid psid value of undefined");this._psidCache.set(t),this._workerCommunicator.sendAsync(qe,{psid:t})}}])&&hs(t.prototype,e),r&&hs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ys(t){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(t)}function vs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ms(n.key),n)}}function ms(t){var e=function(t,e){if("object"!=ys(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ys(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ys(e)?e:e+""}var bs=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sidKey="cdSNum",this._utils=e,this._storageUtilsWrapper=r,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this.getExpirationTime(n)},(e=[{key:"onConfigUpdate",value:function(t){var e=this.getExpirationTime(t);this._setExpirationTime(e)&&(this.COOKIE_EXPIRATION_IN_MILLISECONDS=e)}},{key:"getExpirationTime",value:function(t){var e=t.get(tt);return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(e))}},{key:"_validateCDSNumExpirationTime",value:function(t){return t<Be||t>je?Me:t}},{key:"_setExpirationTime",value:function(t){return this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,t)===Re?(oe.warn("Failed set expiration time ".concat(t," in cookie.")),!1):this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey,t)!==Re||(oe.warn("Failed set expiration time ".concat(t," in local storage.")),this._storageUtilsWrapper.setExpirationInCookie(this.sidKey,this._utils.minutesToMilliseconds(Me)),!1)}},{key:"get",value:function(){var t=this._storageUtilsWrapper.getCookie(this.sidKey),e=this._validateSid(t);if(!e){oe.info("Sid was not found in cookie. Trying to get it from the local storage.");var r=this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);if(!(e=this._validateSid(r)))return oe.info("Sid was not found in local storage."),null}return e}},{key:"set",value:function(t){var e=t;(e=this._validateSid(e))?(this._storageUtilsWrapper.saveToLocalStorage(this.sidKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||oe.error("Failed saving sid ".concat(t," to local storage.")),this._storageUtilsWrapper.setCookie(this.sidKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||oe.error("Failed saving sid ".concat(t," to cookie."))):oe.error("Sid ".concat(t," is invalid. Will not save it."))}},{key:"_validateSid",value:function(t){return t||null}}])&&vs(t.prototype,e),r&&vs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function gs(t){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(t)}function _s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ws(n.key),n)}}function ws(t){var e=function(t,e){if("object"!=gs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gs(e)?e:e+""}var Ss=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._csid=null},(e=[{key:"get",value:function(){return this._csid}},{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid csid value of undefined");this._csid=t}}])&&_s(t.prototype,e),r&&_s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Es(t){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}function ks(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ps(n.key),n)}}function Ps(t){var e=function(t,e){if("object"!=Es(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Es(e)?e:e+""}var Ts=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._customerApi=e,this._csidCache=r,this._workerCommunicator=n},(e=[{key:"set",value:function(t){if(void 0===t)throw new Error("Invalid csid value of undefined");this._csidCache.set(t),this._workerCommunicator.sendAsync(ze,{csid:t})}},{key:"get",value:function(t){this._customerApi.isApiAvailable("getCustomerSessionID")?this._getCsidWithRetries(0,t):oe.debug("getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used")}},{key:"_getCsidWithRetries",value:function(t,e){var r=this;if(t>20)oe.error("Failed to get csid after all retries.");else try{this._customerApi.getCustomerSessionID((function(n){n?(oe.debug("Got csid after ".concat(t," retries. csid: ").concat(n)),r._csidCache.set(n),e()):setTimeout(r._getCsidWithRetries.bind(r,t+1,e),200)}))}catch(r){setTimeout(this._getCsidWithRetries.bind(this,t+1,e),200)}}}])&&ks(t.prototype,e),r&&ks(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Cs={none:"none",init:"init",configuration:"config",configurationFromSlave:"configFromSlave",customerApi:"customerApi",pageTimeout:"timeout",unknown:"unknown"};function Os(t){return Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(t)}function Ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bs(n.key),n)}}function Bs(t){var e=function(t,e){if("object"!=Os(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Os(e)?e:e+""}var js=function(){return t=function t(e,r,n,o,i,a,s,u,c,l,f,h,d,p,y,v,m,b,g,_){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._configurationService=r,this._configurationRepository=n,this._utils=o,this._domUtils=i,this._workerComm=a,this._contextMgr=s,this._muidService=u,this._serverStateMgr=c,this._resetSessionSiteMapper=l,this._sidRepository=f,this._csidService=v,this._csidCache=m,this._serverAddress=h.get(),this._cidCache=d,this._protocolType=p.get(),this._minifiedWupUriEnabled=y,this._psidCache=b,this._brandService=g,this._agentIdService=_,this._agentType=n.get(ct),this._enableStartupCustomerSessionId=this._configurationRepository.get(ht),this.lastExternalResetCallTime=null,this.sessionId=null,this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this)),a.addMessageListener(pn,this._onNewSessionStartedEvent.bind(this)),this._setSessionStartupData()},e=[{key:"resumeOrStartSession",value:function(){var t=this._getSessionId();t?this._resumeSession(t):this._startNewSession()}},{key:"onConfigUpdate",value:function(t){this._resetSessionSiteMapper.onConfigUpdate(t),this._configurationRepository.get("logAddress")&&this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}},{key:"resetSession",value:function(t){this.onResetSession(t)}},{key:"onResetSession",value:function(t){var e=t.resetReason?t.resetReason:Cs.unknown;Cs.hasOwnProperty(e)||(e=Cs.customerApi),oe.info("Received a Reset Session event, reason: ".concat(e)),this._utils.dateNow()-this.lastExternalResetCallTime>this._configurationRepository.get(w)?(this._startNewSession(null==t?void 0:t.csid),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this.lastExternalResetCallTime=this._utils.dateNow()):oe.info("Ignoring external reset session call since resetSessionApiThreshold hasn't passed")}},{key:"startNewSession",value:function(){this._startNewSession()}},{key:"_startNewSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;oe.info("Starting a new session. Previous session was ".concat(this.sessionId)),this.sessionId=null,this._enableStartupCustomerSessionId?this._setOrFetchCsid(t):this._csidCache.set(t||null),this._psidCache.set(null),this._serverStateMgr.onSessionIdChange(),this._onStartedNewSession()}},{key:"_setOrFetchCsid",value:function(t){t?this._csidCache.set(t):this._csidService.get()}},{key:"_resumeSession",value:function(t){oe.info("Resuming an existing session with sid ".concat(t)),this.sessionId=t,this._saveSidToStorage(this.sessionId),this._handleBrandResume(),this._onResumedSession(),this._handleCsid()}},{key:"_getSessionId",value:function(){oe.info("Attempting to get sid from storage");var t=this._sidRepository.get();return t&&oe.info("Read sid ".concat(t," from storage")),t}},{key:"_saveSidToStorage",value:function(t){oe.info("Saving sid ".concat(t," to storage")),this._sidRepository.set(t)}},{key:"_onStartedNewSession",value:function(){var t;if(this._serverAddress){var e={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),muid:null===(t=this._muidService)||void 0===t?void 0:t.muid,contextName:this._contextMgr.getContextName()};this._workerComm.sendAsync(Ve,e),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_onResumedSession",value:function(){var t;if(this._serverAddress){var e=this._serverStateMgr.getServerState(this.sessionId),r={serverAddress:this._serverAddress,csid:this._csidCache.get(),cid:this._cidCache.get(),protocolType:this._protocolType,minifiedUri:this._minifiedWupUriEnabled,psid:this._psidCache.get(),cdsnum:this.sessionId,muid:null===(t=this._muidService)||void 0===t?void 0:t.muid,contextName:this._contextMgr.getContextName(),serverState:e};this._workerComm.sendAsync(Ke,r),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm)}}},{key:"_handleCsid",value:function(){var t=this;this._domUtils.onDocumentBody(self,(function(){oe.debug("SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: ".concat(t.sessionId)),t._csidService.get((function(){oe.info("Received csid from client. csid: ".concat(t._csidCache.get(),", sid:").concat(null==t?void 0:t.sessionId)),t._sendCsidToServer()}))}))}},{key:"_sendCsidToServer",value:function(){this._serverAddress&&(oe.info("Sending csid to worker. csid: ".concat(this._csidCache.get(),", sid:").concat(this.sessionId)),this._workerComm.sendAsync(ze,{csid:this._csidCache.get()}),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm))}},{key:"_handleBrandResume",value:function(){this._brandService.update()}},{key:"_onSiteMapperMatch",value:function(){this.onResetSession({resetReason:Cs.configuration})}},{key:"_onNewSessionStartedEvent",value:function(t){this.sessionId=t,this._saveSidToStorage(this.sessionId),this._configurationService.updateLogUrlToWorker(this.sessionId,this._csidCache.get(),this._workerComm),this._notifyNewSessionStarted(),this._agentType!==zt.SECONDARY&&this._handleCsid(),oe.info("A new session ".concat(t," has started"))}},{key:"_notifyNewSessionStarted",value:function(){this._messageBus.publish(Ln,this.sessionId)}},{key:"_setSessionStartupData",value:function(){this._workerComm.sendAsync(tr,{agentType:this._configurationRepository.get(ct)}),this._agentIdService.updateAgentIdWithServer()}}],e&&Ms(t.prototype,e),r&&Ms(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xs(t){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(t)}function Ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rs(n.key),n)}}function Rs(t){var e=function(t,e){if("object"!=xs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xs(e)?e:e+""}var As=function(){return t=function t(e,r){var n,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i=void 0,(o=Rs(o="_dataQ"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this._configurationRepository=e,this._dataQ=r,this._isEnabled=this._configurationRepository.get("isCustMetadata")},(e=[{key:"onCustomerMetadata",value:function(t){void 0!==this._isEnabled&&null!=this._isEnabled&&!0!==this._isEnabled||(oe.debug("HandleMetadata:onCustomerMetadata. data="+JSON.stringify(t.data)),t.data&&this._dataQ.addToQueue("customer_metadata",[null,t.data]))}},{key:"onConfigUpdate",value:function(){this._isEnabled=this._configurationRepository.get("isCustMetadata")}}])&&Ls(t.prototype,e),r&&Ls(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Is="updateSlaveConf",Ns="updateSlaveState";function Ds(t){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(t)}function Fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Us(n.key),n)}}function Us(t){var e=function(t,e){if("object"!=Ds(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ds(e)?e:e+""}var Hs=function(){return t=function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._slaves=[],this._dataQ=e,this._configurationRepository=r,this._utils=n,this._logPerfDataQ=o,this._contextMgr=i,this._sessionService=a,this.onResetSessionTrigger=new Yr,this.onMouseChallengeTrigger=new Yr,this._msgRouter={dataFromSlave:this._onDataFromSlave,registerSlave:this._onRegisterSlave,logPerfSlave:this._onLogPerfSlave,updateMasterContext:this._onUpdateMasterContext,resetSessionTriggerFromSlave:this._onResetSessionTriggerFromSlave,mouseChallengeTriggerFromSlave:this._onMouseChallengeTriggerFromSlave}},e=[{key:"listen",value:function(){var t=this;oe.debug("SlaveListener:listen"),this._utils.addEventListener(window,"message",(function(e){var r=e.data.msgType;r&&t._msgRouter[r]&&t._msgRouter[r].call(t,e)}))}},{key:"sendToSlaves",value:function(t,e){oe.debug("SlaveListener:sendToSlaves"),this._slaves.forEach((function(r){r.source.postMessage({msgType:t,data:e},r.origin)}))}},{key:"onConfigUpdate",value:function(){oe.debug("SlaveListener:onConfigUpdate, updating ".concat(this._slaves.length," slaves")),this.sendToSlaves(Is,this._configurationRepository.getAll())}},{key:"notifyStateChange",value:function(t){oe.info("SlaveListener:notifyStateChange, updating ".concat(this._slaves.length," slaves that the new state is ").concat(t.toState)),this.sendToSlaves(Ns,t)}},{key:"_onDataFromSlave",value:function(t){var e=t.data;"flushData"!==e.data.eventName&&(this._isScriptVersionMessage(e)?e.data.eventName&&this._dataQ.addToQueue(e.data.eventName,e.data.data,!1):e.data.eventName&&this._dataQ.addToQueue(e.data.eventName,e.data.data))}},{key:"_isScriptVersionMessage",value:function(t){return"static_fields"===t.data.eventName&&"dataFromSlave"===t.msgType&&t.data&&t.data.data&&("slave_version_client"===t.data.data[0]||"device_source"===t.data.data[0])}},{key:"_onRegisterSlave",value:function(t){oe.info("SlaveListener:_onRegisterSlave - slave registered, origin ".concat(t.origin)),this._slaves.push({source:t.source,origin:t.origin}),t.source.postMessage({msgType:"updateSlaveConf",data:this._configurationRepository.getAll()},t.origin)}},{key:"_onLogPerfSlave",value:function(t){var e=t.data;"flushData"!==e.data.eventName&&e.data.eventName&&this._logPerfDataQ.addToQueue(e.data.eventName,e.data.data)}},{key:"_onUpdateMasterContext",value:function(t){oe.debug("SlaveListener:_onUpdateMasterContext");var e=t.data;this._contextMgr.setContext(e.data)}},{key:"_onResetSessionTriggerFromSlave",value:function(t){oe.debug("SlaveListener:_onResetSessionTriggerFromSlave");var e=t.data;this.onResetSessionTrigger.publish(e.data)}},{key:"_onMouseChallengeTriggerFromSlave",value:function(t){oe.debug("SlaveListener:_onMouseChallengeTriggerFromSlave");var e=t.data;this.onMouseChallengeTrigger.publish(e.data)}}],e&&Fs(t.prototype,e),r&&Fs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Gs(t){return Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(t)}function Ws(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vs(n.key),n)}}function Vs(t){var e=function(t,e){if("object"!=Gs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gs(e)?e:e+""}var Ks=function(){return t=function t(e,r,n,o,i,a,s,u,c,l,f,h,d,p,y,v,m){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._features=e,this._configurationRepository=r,this._utils=n,this._elements=o,this._mutationObserver=i,this._dataQ=a,this._sessionService=u,this._muidService=c,this._muidEncryptedService=l,this._perfMonitor=f,this._sensorDataQ=h,this._msgBus=d,this._cidCache=p,this._sameCharService=y,this._maskingService=v,this._configurations=s,this._contextMgr=m},e=[{key:"buildFeatures",value:function(){var t,e=this;(t=this._features.list)&&Object.keys(t).forEach((function(r){var n=t[r];try{n.init.apply(e)}catch(e){var o=n.name||r;oe.error('Failed to initialize feature "'.concat(o,'": ').concat(e.message,"\nStack: ").concat(e.stack)),delete t[r]}}))}}],e&&Ws(t.prototype,e),r&&Ws(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Qs(t){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(t)}function zs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qs(n.key),n)}}function qs(t){var e=function(t,e){if("object"!=Qs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qs(e)?e:e+""}var Ys=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contextMgr=e,this._dataQ=r,this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this)),this.handleContextChange({context:"cd_auto"})},(e=[{key:"handleContextChange",value:function(t){this._contextMgr.changeContext(t.context||t.activityType)}},{key:"sendContextToServer",value:function(t){t&&this._dataQ.addToQueue("contextChange",[null,t.url,t.name,t.timestamp,t.referrer,t.hLength])}}])&&zs(t.prototype,e),r&&zs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Js(t){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(t)}function Xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zs(n.key),n)}}function Zs(t){var e=function(t,e){if("object"!=Js(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Js(e)?e:e+""}Ys.apiName="ContextChange";var $s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._state=or.stopped},(e=[{key:"getState",value:function(){return this._state}},{key:"updateState",value:function(t){var e=or[t];if(!e)throw new Error("Unknown state ".concat(t));this._state=e,this._messageBus.publish(Gn,{state:e})}}])&&Xs(t.prototype,e),r&&Xs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),tu="cdNewSessionStartedEvent",eu="cdStateChangedEvent",ru="cdHeartbeat",nu="RestoredMuidEvent";function ou(t){return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(t)}function iu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,au(n.key),n)}}function au(t){var e=function(t,e){if("object"!=ou(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ou(e)?e:e+""}var su=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"publishNewSessionStartedEvent",value:function(t){window.postMessage({type:tu,event:{sessionID:t}},window.location.href)}},{key:"publishStateChangedEvent",value:function(t){window.postMessage({type:eu,event:{state:t}},window.location.href)}},{key:"publishRestoredMuidEvent",value:function(t){window.postMessage({type:nu,event:{muid:t}},window.location.href)}}])&&iu(t.prototype,e),r&&iu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}function cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lu(n.key),n)}}function lu(t){var e=function(t,e){if("object"!=uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uu(e)?e:e+""}var fu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._contextMgr=r,this._messageBus.subscribe(Rn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._contextMgr.changeContext(t.context||t.activityType)}}])&&cu(t.prototype,e),r&&cu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hu(t){return hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(t)}function du(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pu(n.key),n)}}function pu(t){var e=function(t,e){if("object"!=hu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hu(e)?e:e+""}var yu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._sessionService=r,this._messageBus.subscribe(An,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._sessionService.onResetSession(t)}}])&&du(t.prototype,e),r&&du(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vu(t){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(t)}function mu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bu(n.key),n)}}function bu(t){var e=function(t,e){if("object"!=vu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vu(e)?e:e+""}var gu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._handleMetadata=r,this._messageBus.subscribe(In,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._handleMetadata.onCustomerMetadata(t)}}])&&mu(t.prototype,e),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _u(t){return _u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(t)}function wu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Su(n.key),n)}}function Su(t){var e=function(t,e){if("object"!=_u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_u(e)?e:e+""}var Eu=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._pauseResumeManager=r,this._slaveListener=n,this._messageBus.subscribe(Nn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._pauseResumeManager.onStateChange(t),this._slaveListener.notifyStateChange(t)}}])&&wu(t.prototype,e),r&&wu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ku(t){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(t)}function Pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tu(n.key),n)}}function Tu(t){var e=function(t,e){if("object"!=ku(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ku(e)?e:e+""}var Cu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._csidService=r,this._messageBus.subscribe(Dn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.csid?this._csidService.set(t.csid):oe.warn("Received an invalid csid of ".concat(t.csid,". Ignoring api call"))}}])&&Pu(t.prototype,e),r&&Pu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ou(t){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(t)}function Mu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bu(n.key),n)}}function Bu(t){var e=function(t,e){if("object"!=Ou(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ou(e)?e:e+""}var ju=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._psidService=r,this._messageBus.subscribe(Fn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.psid?this._psidService.set(t.psid):oe.warn("Received an invalid psid of ".concat(t.psid,". Ignoring api call"))}}])&&Mu(t.prototype,e),r&&Mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xu(t){return xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(t)}function Lu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ru(n.key),n)}}function Ru(t){var e=function(t,e){if("object"!=xu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xu(e)?e:e+""}var Au=function(){return t=function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._featureService=r,this._customerApiBridge=n,this._contextMgr=o,this._clientEventService=i,this._sessionInfoService=a,this._messageBus.subscribe(Ln,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){this._sessionInfoService.markStartTime(),this._featureService.runPerSessionFeatures(),this._customerApiBridge.notifySessionReset(t),this._contextMgr.onSessionReset(),this._clientEventService.publishNewSessionStartedEvent(t)}}])&&Lu(t.prototype,e),r&&Lu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Iu(t){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(t)}function Nu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Du(n.key),n)}}function Du(t){var e=function(t,e){if("object"!=Iu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Iu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Iu(e)?e:e+""}var Fu=function(){return t=function t(e,r,n,o,i,a,s,u,c,l,f,h,d,p,y,v){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._featureService=r,this._dataQ=n,this._pauseResumeMgr=o,this._handleMetadata=i,this._logger=a,this._contextMgr=s,this._sessionService=u,this._sensorDataQ=c,this._slaveListener=l,this._stateService=f,this._performanceMonitor=h,this._heartBeatMessageService=d,this._sensorGateKeeper=p,this._sidRepository=y,this._coordinatesMaskingConfigurationUpdater=v,this._messageBus.subscribe(xn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){oe.info("Configurations were loaded from the server."),this._performanceMonitor.stopMonitor("t.timeTillServerConfig"),this._featureService.updateRunByConfig(t),this._dataQ.updateWithConfig(t),this._pauseResumeMgr.onConfigUpdate(t),this._handleMetadata.onConfigUpdate(t),this._logger.updateLogConfig(t),this._contextMgr.onConfigUpdate(t),this._sessionService.onConfigUpdate(t),this._sensorDataQ.onConfigUpdate(t),this._slaveListener.onConfigUpdate(t),this._heartBeatMessageService.updateConfig(t),this._sensorGateKeeper.configure(),this._sidRepository.onConfigUpdate(t),this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(t),this._stateService.updateState(or.started),oe.info("Successfully configured system")}}])&&Nu(t.prototype,e),r&&Nu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Uu(t){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(t)}function Hu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gu(n.key),n)}}function Gu(t){var e=function(t,e){if("object"!=Uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uu(e)?e:e+""}var Wu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._clientEventService=r,this._messageBus.subscribe(Gn,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){oe.info("SDK state changed to ".concat(t.state)),this._clientEventService.publishStateChangedEvent(t.state)}}])&&Hu(t.prototype,e),r&&Hu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Vu(t){return Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(t)}function Ku(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qu(n.key),n)}}function Qu(t){var e=function(t,e){if("object"!=Vu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vu(e)?e:e+""}var zu=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._brandService=r,this._messageBus.subscribe(Un,this._handle.bind(this))},(e=[{key:"_handle",value:function(t){t.brand?this._brandService.set(t.brand):oe.warn("Received an empty brand name. Ignoring the API call")}}])&&Ku(t.prototype,e),r&&Ku(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qu(t){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(t)}function Yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ju(n.key),n)}}function Ju(t){var e=function(t,e){if("object"!=qu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qu(e)?e:e+""}var Xu,Zu,$u,tc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?t.addEventListener(e,r,{capture:n,passive:o,once:i}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}},{key:"outerHTML",value:function(t){return t.outerHTML||(new XMLSerializer).serializeToString(t)}},{key:"onDocumentBody",value:function(t,e){t.document.body?e():window.addEventListener?window.addEventListener("DOMContentLoaded",e,!0):window.attachEvent("onload",e)}},{key:"onPageLoad",value:function(e,r){t.addEventListener(e,"load",r,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&r()}},{key:"awaitWindowDocumentReady",value:function(t){var e=this;return new Promise((function(r,n){try{e.onWindowDocumentReady(t,(function(){r()}))}catch(t){n(t)}}))}},{key:"onWindowDocumentReady",value:function(e,r){var n=window.addEventListener?"DOMContentLoaded":"load";if("complete"===e.document.readyState||"interactive"===e.document.readyState)r();else{var o=function(){t.removeEventListener(e,n,o,!0),r()};t.addEventListener(e,n,o,!0)}}},{key:"isWindowDocumentReady",value:function(t){return t&&"complete"===t.document.readyState}},{key:"canAccessIFrame",value:function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e}},{key:"matches",value:function(t,e){var r=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){var e=this.document||this.ownerDocument;if(!e)return!1;for(var r=e.querySelectorAll(t),n=r.length;--n>=0&&(r.item?r.item(n):r[n])!==this;);return n>-1};return r.call(t,e)}},{key:"isWebWorkerFetchSupported",value:function(){var t="Request"in self,e="fetch"in self;if(!t)return!1;var r="keepalive"in Request.prototype;return e&&r}},{key:"isSubtleCryptoSupported",value:function(){return"SubtleCrypto"in self}}],(r=null)&&Yu(e.prototype,r),n&&Yu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ec(t){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(t)}function rc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nc(n.key),n)}}function nc(t){var e=function(t,e){if("object"!=ec(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ec(e)?e:e+""}Xu=tc,Zu="isPassiveSupported",$u=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),(Zu=Ju(Zu))in Xu?Object.defineProperty(Xu,Zu,{value:$u,enumerable:!0,configurable:!0,writable:!0}):Xu[Zu]=$u;var oc=function(){return function(t,e,r){return e&&rc(t.prototype,e),r&&rc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=nc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"_dataOrigin","BC"),this._heartBeatErrorsState=r,this._heartBeatPostMessageInterval=n,e.addMessageListener(mn,this._handle.bind(this))}),[{key:"start",value:function(){this._clear(),this._periodicPostMessageIntervalId=setInterval(this._postHeartBeatMessage.bind(this),this._heartBeatPostMessageInterval)}},{key:"stop",value:function(){this._clear()}},{key:"updateConfig",value:function(t){this._heartBeatPostMessageInterval=t.get(D),this.start()}},{key:"_clear",value:function(){this._periodicPostMessageIntervalId&&clearInterval(this._periodicPostMessageIntervalId)}},{key:"_handle",value:function(t){this._heartBeatErrorsState.updateState(t)}},{key:"_postHeartBeatMessage",value:function(){this._heartBeatErrorsState.hasErrors()?window.postMessage({type:ru,data:this._heartBeatErrorsState.getErrors(),origin:this._dataOrigin},window.location.href):window.postMessage({type:ru,data:"Ok",origin:this._dataOrigin},window.location.href)}}])}();var ic="oK",ac="Error";function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function uc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cc(n.key),n)}}function cc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sc(e)?e:e+""}var lc=function(){return function(t,e,r){return e&&uc(t.prototype,e),r&&uc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}),[{key:"updateState",value:function(t){var e=t.category,r=t.status;this._isErrorRecovery(e,r)?(oe.info("Received heart beat recovery event",t),delete this.errors[e]):this._isNewError(e,r)&&(oe.info("Received heart beat error event",t),this.errors[e]=e)}},{key:"_isErrorRecovery",value:function(t,e){return void 0!==this.errors[t]&&e===ic}},{key:"_isNewError",value:function(t,e){return void 0===this.errors[t]&&e===ac}},{key:"getErrors",value:function(){var t=this;return Object.keys(this.errors).map((function(e){return"ERROR(".concat(t.errors[e],")")}))}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}}])}();function fc(t){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(t)}function hc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dc(n.key),n)}}function dc(t){var e=function(t,e){if("object"!=fc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fc(e)?e:e+""}var pc=function(){return function(t,e,r){return e&&hc(t.prototype,e),r&&hc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.markStartTime()}),[{key:"markStartTime",value:function(){this.startTime=We.dateNow()}},{key:"getStartTime",value:function(){return this.startTime}}])}();function yc(t){return yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(t)}function vc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mc(n.key),n)}}function mc(t){var e=function(t,e){if("object"!=yc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yc(e)?e:e+""}var bc=function(){return function(t,e,r){return e&&vc(t.prototype,e),r&&vc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.configurationRepository=r,this.sessionInfoService=e,this.isMotionOnSessionStart=this.configurationRepository.get(H),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(G)}),[{key:"configure",value:function(){this.isMotionOnSessionStart=this.configurationRepository.get(H),this.motionPaddingOnSessionStartMSec=this.configurationRepository.get(G),this.isMotionOnSessionStart&&oe.info("Motion on session start is enabled, collecting motion events for ".concat(this.motionPaddingOnSessionStartMSec/1e3," seconds."))}},{key:"isOpen",value:function(){return this.isMotionOnSessionStart&&We.dateNow()-this.motionPaddingOnSessionStartMSec<this.sessionInfoService.getStartTime()}}])}();function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function _c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wc(n.key),n)}}function wc(t){var e=function(t,e){if("object"!=gc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gc(e)?e:e+""}function Sc(t,e,r){return e=kc(e),function(t,e){if(e&&("object"==gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ec()?Reflect.construct(e,r||[],kc(t).constructor):e.apply(t,r))}function Ec(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ec=function(){return!!t})()}function kc(t){return kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kc(t)}function Pc(t,e){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pc(t,e)}var Tc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pc(t,e)}(e,t),function(t,e,r){return e&&_c(t.prototype,e),r&&_c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getDocument",value:function(){return this.context.shadowRoot}}])}(Ni);function Cc(t){return Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(t)}function Oc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mc(n.key),n)}}function Mc(t){var e=function(t,e){if("object"!=Cc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cc(e)?e:e+""}function Bc(t,e,r){return e=xc(e),function(t,e){if(e&&("object"==Cc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jc()?Reflect.construct(e,r||[],xc(t).constructor):e.apply(t,r))}function jc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jc=function(){return!!t})()}function xc(t){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xc(t)}function Lc(t,e){return Lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lc(t,e)}var Rc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bc(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lc(t,e)}(e,t),function(t,e,r){return e&&Oc(t.prototype,e),r&&Oc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getDocument",value:function(){return this.context}}])}(Ni);function Ac(t){return Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(t)}function Ic(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nc(n.key),n)}}function Nc(t){var e=function(t,e){if("object"!=Ac(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ac(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ac(e)?e:e+""}var Dc=function(){return function(t,e,r){return e&&Ic(t.prototype,e),r&&Ic(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._windowMutationObservers=e,this._messageBus=r,this._configurationRepository=n,this._messageBus.subscribe(mo,this._processNewContext.bind(this)),this._elementsMutationObserverFactory=new ja}),[{key:"_processNewContext",value:function(t){this.monitorWindow(t)}},{key:"monitorWindow",value:function(t){if(!this._windowMutationObservers.has(t)){var e=this._elementsMutationObserverFactory.create(t,self.MutationObserver,this._configurationRepository);e.observe(t.getDocument()),e.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this)),e.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this)),this._windowMutationObservers.set(t,e)}}},{key:"unMonitorWindow",value:function(t){var e=this._windowMutationObservers.get(t);e&&(e.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this)),e.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this)),e.disconnect()),this._windowMutationObservers.delete(t)}},{key:"_nodesAddedMutationObserved",value:function(t){this._messageBus.publish(Vn,t)}},{key:"_nodesRemovedMutationObserved",value:function(t){this._messageBus.publish(Kn,t)}}])}();function Fc(t){return Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(t)}function Uc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gc(n.key),n)}}function Hc(t,e,r){return e&&Uc(t.prototype,e),r&&Uc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gc(t){var e=function(t,e){if("object"!=Fc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fc(e)?e:e+""}var Wc="added",Vc="removed",Kc=Hc((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserContext=e,this.message=r}));function Qc(t){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(t)}function zc(){zc=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Qc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Qc(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function qc(t){return function(t){if(Array.isArray(t))return Yc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Yc(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yc(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Jc(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zc(n.key),n)}}function Zc(t){var e=function(t,e){if("object"!=Qc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qc(e)?e:e+""}var $c=function(){return function(t,e,r){return e&&Xc(t.prototype,e),r&&Xc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domUtils=e,this._messageBus=r,this._loadedCustomElements=kr(),this._windowMutationObservers=kr(),this._messageBus.subscribe(Vn,this._processAddedNodes.bind(this)),this._messageBus.subscribe(Kn,this._processRemovedNodes.bind(this)),this._messageBus.subscribe(vo,this._processSubmittedCustomElement.bind(this)),this._browserContextMutationObserver=new Dc(this._windowMutationObservers,this._messageBus,n),this.customElementCache=new WeakMap}),[{key:"customElements",get:function(){var t=[];return this._loadedCustomElements.forEach((function(e,r){t.push(r)})),t}},{key:"hasCustomElement",value:function(t){return!!this._loadedCustomElements.has(t)}},{key:"addCustomElementToLoadedList",value:function(t,e){this._loadedCustomElements.set(t,e)}},{key:"start",value:function(t){var e=this;this._browserContextMutationObserver.monitorWindow(t),this._findCustomElementsInBrowserContext(t.getDocument()).then((function(t){t.forEach((function(t){e._processNewElement(t)}))}))}},{key:"stop",value:function(){this.customElementCache=new WeakMap,this._windowMutationObservers.forEach((function(t){t.disconnect()}))}},{key:"_processSubmittedCustomElement",value:function(t){this._loadedCustomElements.has(t)||this._addCustomElement(t,new Rc(t),"closed")}},{key:"_processNewElement",value:function(t){this._loadedCustomElements.has(t)||(null!=t.shadowRoot?this._addCustomElement(t,new Tc(t)):this._messageBus.publish(yo,t))}},{key:"_addCustomElement",value:function(t,e){"open"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"open")&&this._browserContextMutationObserver.monitorWindow(e),this._loadedCustomElements.set(t,e),this._messageBus.publish(po,new Kc(e,Wc))}},{key:"_removeCustomElement",value:function(t){var e=this._loadedCustomElements.get(t);this._browserContextMutationObserver.unMonitorWindow(t.shadowRoot),this._loadedCustomElements.delete(t)&&this._messageBus.publish(po,new Kc(e,Vc))}},{key:"_processAddedNodes",value:function(t){var e=this;t.addedNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var r=t.shadowRoot?t.shadowRoot:t.ownerDocument;e._processNewElement(t),e._findCustomElementsInBrowserContext(r).then((function(t){t.forEach((function(t){e._processNewElement(t)}))}))}}))}},{key:"_processRemovedNodes",value:function(t){for(var e=this,r=t.removedNodes,n=[],o=0;o<r.length;o++){var i=r[o];i.hasChildNodes()?this._findCustomElementsInBrowserContext(i).then((function(t){t.length>0&&(n=n.concat(t))})):this._isCustomElement(i)&&i.shadowRoot&&n.push(i)}0!==n.length&&n.forEach((function(t){e._removeCustomElement(t)}))}},{key:"_isCustomElement",value:function(t){if(!t||"string"!=typeof t.localName)return!1;if(this.customElementCache.has(t))return this.customElementCache.get(t);var e=t.localName.includes("-");return this.customElementCache.set(t,e),e}},{key:"_findCustomElementsInBrowserContext",value:(t=zc().mark((function t(e){var r,n,o,i=this;return zc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Set,0!==(n=e.querySelectorAll("*")).length){t.next=4;break}return t.abrupt("return",qc(r));case 4:return o=[],n.forEach((function(t){if(i._isCustomElement(t))if(r.add(t),t.shadowRoot){var e=i._findCustomElementsInBrowserContext(t.shadowRoot).then((function(t){t.forEach((function(t){return r.add(t)}))}));o.push(e)}else i._messageBus.publish(yo,t)})),t.next=8,Promise.all(o);case 8:return t.abrupt("return",qc(r));case 9:case"end":return t.stop()}}),t)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Jc(i,n,o,a,s,"next",t)}function s(t){Jc(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t){return e.apply(this,arguments)})}]);var t,e}();function tl(t){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(t)}function el(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rl(n.key),n)}}function rl(t){var e=function(t,e){if("object"!=tl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tl(e)?e:e+""}var nl=function(){return function(t,e,r){return e&&el(t.prototype,e),r&&el(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._browserContextsCache=e,this._messageBus=n,this._featureService=r,this._messageBus.subscribe(po,this._handle.bind(this))}),[{key:"_handle",value:function(t){var e=t.browserContext,r=t.message;r===Wc?this._handleCustomElementAdded(e):r===Vc&&this._handleCustomElementRemoved(e)}},{key:"_handleCustomElementAdded",value:function(t){this._browserContextsCache.exists(t.Context)||this._browserContextsCache.addBrowserContext(t),this._featureService.runFeaturesOnBrowserContext(t)}},{key:"_handleCustomElementRemoved",value:function(t){this._featureService.stopFeaturesOnBrowserContextRemove(t),this._browserContextsCache.remove(t.Context)}}])}();function ol(t){return ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(t)}function il(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,al(n.key),n)}}function al(t){var e=function(t,e){if("object"!=ol(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ol(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ol(e)?e:e+""}var sl=function(){return function(t,e,r){return e&&il(t.prototype,e),r&&il(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._startUpConfigurations=r}),[{key:"loadStartUpConfigurations",value:function(){var t,e;this._setConfigurationOrDefault(A,this._startUpConfigurations.getLogServerURL(),null),this._setConfigurationOrDefault(k,this._startUpConfigurations.isMinifiedLogUriEnabled(),!1),this._setConfigurationOrDefault(L,this._startUpConfigurations.getEnableFramesProcessing(),!0),this._setConfigurationOrDefault(Y,this._startUpConfigurations.getEnableCustomElementsProcessing(),!1),this._setConfigurationOrDefault(x,this._startUpConfigurations.getCollectionSettings().getElementSettings().getCustomElementAttribute(),"data-automation-id"),this._setConfigurationOrDefault(R,this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(),!0),this._setConfigurationOrDefault(rt,this._startUpConfigurations.getCollectionSettings().getElementSettings().getAttributesToMask(),[]),this._setConfigurationOrDefault(nt,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getParentElementSelector(),""),this._setConfigurationOrDefault(ot,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getChildElementWithCustomAttribute(),""),this._setConfigurationOrDefault(it,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getElementDataAttribute(),""),this._setConfigurationOrDefault(at,this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getCustomButtons(),[]),this._setConfigurationOrDefault(ct,this._startUpConfigurations.getCollectionSettings().getAgentType(),zt.PRIMARY),this._setConfigurationOrDefault(lt,this._startUpConfigurations.getCollectionSettings().getAgentMode(),qt.FULL),this._setConfigurationOrDefault(J,this._startUpConfigurations.getCollectionSettings().getElementSettings().getKeyEventsMaskSpecialChars(),!1),this._setConfigurationOrDefault(ft,null===(t=this._startUpConfigurations.getClientSettings())||void 0===t?void 0:t.enableWupMessagesHashing,!1),this._setConfigurationOrDefault(et,null===(e=this._startUpConfigurations.getClientSettings())||void 0===e?void 0:e.enableCoordinatesMasking,!1),this._setConfigurationOrDefault(ht,this._startUpConfigurations.getEnableStartupCustomerSessionId(),!1),this._setNumberConfigurationOrDefault(pt,this._startUpConfigurations.getMutationMaxChunkSize(),0),this._setNumberConfigurationOrDefault(yt,this._startUpConfigurations.getMutationChunkDelayMs(),100),this._setConfigurationOrDefault(vt,this._startUpConfigurations.getPasswordIdMaskingList(),[]),this._setConfigurationOrDefault($,this._startUpConfigurations.isUnmaskedValuesEnabled(),!1),this._setConfigurationOrDefault(Z,this._startUpConfigurations.getAllowedUnmaskedValuesList(),[])}},{key:"_setConfigurationOrDefault",value:function(t,e,r){We.isUndefinedNull(e)?this._configurationRepository.set(t,r):this._configurationRepository.set(t,e)}},{key:"_setNumberConfigurationOrDefault",value:function(t,e,r){We.isNumber(e)?this._configurationRepository.set(t,e):this._configurationRepository.set(t,r)}}])}(),ul={Enter:13,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27," ":32,Control:17,Alt:18,Tab:9,Shift:16,CapsLock:20,Meta:91,Backspace:8,Home:36,End:35,Insert:45,Delete:46,PageUp:33,PageDown:34,PrintScreen:44,NumLock:144,Clear:144,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,10:121,F11:122,F12:123};function cl(t){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(t)}function ll(t){return function(t){if(Array.isArray(t))return fl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fl(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function hl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dl(n.key),n)}}function dl(t){var e=function(t,e){if("object"!=cl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cl(e)?e:e+""}var pl=function(){return function(t,e,r){return e&&hl(t.prototype,e),r&&hl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e,this._attributesToMask=this._configurationRepository.get(rt),this.maskedCodeMapping={original:function(t,e,r){return{code:t,charCode:e,key:r}},numpadKey:function(t){return{code:"Numpad",charCode:96,key:t}},letter:function(){return{code:"Key",charCode:65,key:"A"}},digit:function(){return{code:"Digit",charCode:49,key:"1"}},specialChar:function(){return{code:"SpecialChar",charCode:42,key:"*"}},other:function(){return{code:"Other",charCode:66,key:"B"}},masked:function(){return{code:"Masked",charCode:"a".charCodeAt(0),key:"a"}}},this.digitMaskValue="1",this.letterMaskValueLowerCase="a",this.unicodeMaskValue="B",this.specialCharMaskValue="*",this.customPasswordMaskValue="a",this.specialConfigurationChars=new Set([",","."," ","@",";",":","-","+","$"]),this.specialChars=new Set(["_","!","%","^","&","*","#","(",")","=","{","}","[","]","â€™","\\","|","/","?",">","<","~",'"',"Â±","Â§","'"]),this.lettersSet=new Set(ll(Array(26)).map((function(t,e){return String.fromCharCode(65+e)})).concat(ll(Array(26)).map((function(t,e){return String.fromCharCode(97+e)}))).concat(ll(Array(27)).map((function(t,e){return String.fromCharCode(1488+e)})))),this.digitsSet=new Set(ll(Array(10)).map((function(t,e){return String(e)}))),this.cjkNumbersSet=new Set(["ã€‡","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å","ç™¾","åƒ","ä¸‡","é›¶","å£¹","è²³","è´°","åƒ","å","è‚†","ä¼","é™¸","é™†","æŸ’","æŒ","çŽ–","æ‹¾","ä½°","ä»Ÿ","è¬","ã€¡","ã€¢","ã€£","ã€¤","ã€¥","ã€¦","ã€§","ã€¨","ã€©","ã€¸","ã€¹","ã€º"]),this.allowedUnmaskedChars=new Set([",",".","@",";",":","-","+","$"," "]),this.allowedMaskedChars=new Set(["a","1","*"])}),[{key:"maskKey",value:function(t,e,r){if(this._isPasswordMaskedElementId(r))return this.maskedCodeMapping.masked();if(ul[t]){var n=ul[t];return this.maskedCodeMapping.original(e,n,t)}return this._isANumberOrDigit(t)?e.includes("Numpad")?this.maskedCodeMapping.numpadKey("1"):this.maskedCodeMapping.digit():this._isALetter(t)?this.maskedCodeMapping.letter():!this._configurationRepository.get(J)&&this.specialConfigurationChars.has(t)?this.maskedCodeMapping.original(e,t.charCodeAt(0),t):this.specialChars.has(t)||this.specialConfigurationChars.has(t)?e.includes("Numpad")?this.maskedCodeMapping.numpadKey("*"):this.maskedCodeMapping.specialChar():this.maskedCodeMapping.other()}},{key:"getKeyFromLegacyProperties",value:function(t){var e=t.keyCode||t.which;return 0===e||void 0===e?"":String.fromCharCode(e)}},{key:"_isALetter",value:function(t){return/^[a-zA-Z]$/.test(t)||this._isJapaneseOrChineseLetter(t)||this._isHebrewLetter(t)}},{key:"_isANumberOrDigit",value:function(t){return/[0-9]/.test(t)||this.cjkNumbersSet.has(t)}},{key:"_isJapaneseOrChineseLetter",value:function(t){return this._isCJKUnifiedIdeographs(t)||this._isCJKUnifiedIdeographsExtenA(t)||this._isCJKUnifiedIdeographsExtenB(t)||this._isSmallKatakanaLetter(t)}},{key:"_isCJKUnifiedIdeographsExtenB",value:function(t){return/[\u3041-\u309F]/.test(t)}},{key:"_isSmallKatakanaLetter",value:function(t){return/[\u30A1-\u30FF]/.test(t)}},{key:"_isCJKUnifiedIdeographsExtenA",value:function(t){return/[\u3400-\u4DB5]/.test(t)}},{key:"_isCJKUnifiedIdeographs",value:function(t){return/[\u4E00-\u9FCC]/.test(t)}},{key:"_isHebrewLetter",value:function(t){return/[\u05D0-\u05EA]/.test(t)}},{key:"_isPasswordMaskedElementId",value:function(t){var e=this._configurationRepository.get(vt);return void 0!==t&&Array.isArray(e)&&e.includes(t)}},{key:"getDropDownListValues",value:function(t){for(var e=[],r=0;r<t.length;r++){var n=t.options[r].text||t.options[r].value||"";e.push(this.maskText(n,t.id))}return e}},{key:"maskText",value:function(t,e){var r=this;if(!t)return"";if(this._isPasswordMaskedElementId(e))return t.replace(/./g,this.customPasswordMaskValue);var n=ll(t).map((function(t){return r.digitsSet.has(t)?r.digitMaskValue:r.lettersSet.has(t)?r.letterMaskValueLowerCase:r.cjkNumbersSet.has(t)?r.digitMaskValue:r.specialChars.has(t)?r.specialCharMaskValue:r.allowedUnmaskedChars.has(t)?t:r.unicodeMaskValue})).join("");return this._configurationRepository.get(J)?n=ll(n).map((function(t){return r.allowedUnmaskedChars.has(t)?r.specialCharMaskValue:t})).map((function(t){return r.allowedMaskedChars.has(t)?t:r.unicodeMaskValue})).join(""):n}},{key:"maskAbsoluteIfRequired",value:function(t,e){return""!==t&&this._shouldMask(t)?this.maskText(t,e):t}},{key:"_shouldMask",value:function(t){var e=this;return void 0!==this._attributesToMask&&this._attributesToMask.some((function(r){return e._isConformsRegex(r.regexPattern,t)||r.name.toLowerCase()===(null==t?void 0:t.toLowerCase())}))}},{key:"_isConformsRegex",value:function(t,e){try{if(new RegExp(t).test(e))return oe.debug("The string ".concat(e," matches the pattern ").concat(t,".")),!0}catch(t){oe.error("Invalid regex pattern: ".concat(t))}return oe.debug("The string ".concat(e," does not match the pattern. ").concat(t,".")),!1}}])}();function yl(t){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(t)}function vl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ml(n.key),n)}}function ml(t){var e=function(t,e){if("object"!=yl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yl(e)?e:e+""}var bl=function(){return function(t,e,r){return e&&vl(t.prototype,e),r&&vl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}),[{key:"setLogLevel",value:function(t){this._logLevel=t}},{key:"add",value:function(t){var e=t.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function(){var t=this._Q;return this.reset(),t}},{key:"reset",value:function(){this._Q=[],this.setLogLevel(void 0===this._logLevel?Jt:this._logLevel)}},{key:"isEmpty",value:function(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function(t){this._Q=this._Q.filter((function(e,r,n){return e.level>=t}))}}])}();function gl(t){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(t)}function _l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_l(Object(r),!0).forEach((function(e){Sl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sl(t,e,r){return(e=kl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function El(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kl(n.key),n)}}function kl(t){var e=function(t,e){if("object"!=gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gl(e)?e:e+""}var Pl=function(){return function(t,e,r){return e&&El(t.prototype,e),r&&El(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sn=0,this.url=r,this.logAggregator=e,this.msgPrefix=n}),[{key:"log",value:function(t,e,r){this.logAggregator.add({eventName:"log",data:wl(wl({msg:this.msgPrefix+t},r),{},{url:this.url,level:e,sn:this.sn++})})}},{key:"setLogLevel",value:function(t){this.logAggregator instanceof bl&&this.logAggregator.setLogLevel(t)}},{key:"clearLogEntriesByLogLevel",value:function(t){this.logAggregator.filterOutByLogLevel(t)}}])}();function Tl(t){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(t)}function Cl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ol(n.key),n)}}function Ol(t){var e=function(t,e){if("object"!=Tl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tl(e)?e:e+""}function Ml(t,e,r){return e=jl(e),function(t,e){if(e&&("object"==Tl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bl()?Reflect.construct(e,r||[],jl(t).constructor):e.apply(t,r))}function Bl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bl=function(){return!!t})()}function jl(t){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jl(t)}function xl(t,e){return xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xl(t,e)}var Ll=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ml(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xl(t,e)}(e,t),function(t,e,r){return e&&Cl(t.prototype,e),r&&Cl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"add",value:function(t){this.addToQueue(t.eventName,t.data)}},{key:"filterOutByLogLevel",value:function(t){this.filterOut((function(e){return e.data.level>=t}))}}])}(Nr);function Rl(t){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(t)}function Al(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Il(n.key),n)}}function Il(t){var e=function(t,e){if("object"!=Rl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rl(e)?e:e+""}var Nl=function(){return function(t,e,r){return e&&Al(t.prototype,e),r&&Al(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSecureSameSite=r.get(R),this._utils=e}),[{key:"getCookie",value:function(t){return this._utils.StorageUtils.getCookie(t)}},{key:"setCookie",value:function(t,e,r){return this._utils.StorageUtils.setCookie(t,e,r,this.isSecureSameSite)}},{key:"setExpirationInCookie",value:function(t,e){return this._utils.StorageUtils.setExpirationInCookie(t,e)}},{key:"getFromLocalStorage",value:function(t){return this._utils.StorageUtils.getFromLocalStorage(t)}},{key:"saveToLocalStorage",value:function(t,e,r){return this._utils.StorageUtils.saveToLocalStorage(t,e,r)}},{key:"setExpirationInLocalStorage",value:function(t,e){return this._utils.StorageUtils.setExpirationInLocalStorage(t,e)}},{key:"removeFromLocalStorage",value:function(t){return this._utils.StorageUtils.removeFromLocalStorage(t)}},{key:"removeCookie",value:function(t){return this._utils.StorageUtils.removeCookie(t)}}])}();function Dl(t){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(t)}function Fl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ul(n.key),n)}}function Ul(t){var e=function(t,e){if("object"!=Dl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dl(e)?e:e+""}var Hl=function(){return function(t,e,r){return e&&Fl(t.prototype,e),r&&Fl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._workerCommunicator=e,this._brandRepository=r}),[{key:"set",value:function(t){this._validateBrand(t)&&(this._brandRepository.set(t),this._workerCommunicator.sendAsync(Ze,{brand:t}))}},{key:"update",value:function(){var t=this._brandRepository.get();t&&this.set(t)}},{key:"_validateBrand",value:function(t){return t.length>200?(oe.warn("The received brand name length is greater than 200. It is illegal. Ignoring the API call"),!1):!!/^[a-zA-Z0-9.\-,_ ]+$/.test(t)||(oe.warn("The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call"),!1)}}])}();function Gl(t){return Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(t)}function Wl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vl(n.key),n)}}function Vl(t){var e=function(t,e){if("object"!=Gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gl(e)?e:e+""}var Kl=function(){return function(t,e,r){return e&&Wl(t.prototype,e),r&&Wl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.brandKey="brand",this._utils=e,this._storageUtilsWrapper=r,this.COOKIE_EXPIRATION_IN_MILLISECONDS=this._utils.minutesToMilliseconds(525600)}),[{key:"get",value:function(){var t=this._storageUtilsWrapper.getCookie(this.brandKey),e=this._validateBrand(t);if(!e){oe.debug("Brand was not found in cookie. Trying to get it from the local storage.");var r=this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);if(!(e=this._validateBrand(r)))return oe.debug("Brand was not found in local storage."),null}return e}},{key:"set",value:function(t){var e=this._validateBrand(t);e?(this._storageUtilsWrapper.saveToLocalStorage(this.brandKey,e)||oe.error("Failed saving brand ".concat(t," to local storage.")),this._storageUtilsWrapper.setCookie(this.brandKey,e,this.COOKIE_EXPIRATION_IN_MILLISECONDS)||oe.error("Failed saving brand ".concat(t," to cookie."))):oe.error("Brand ".concat(t," is invalid. Will not save it."))}},{key:"_validateBrand",value:function(t){return t||null}}])}();function Ql(t){return Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(t)}function zl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ql(n.key),n)}}function ql(t){var e=function(t,e){if("object"!=Ql(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ql(e)?e:e+""}var Yl=function(){return function(t,e,r){return e&&zl(t.prototype,e),r&&zl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._messageBus=e,this._muidService=r,this._clientEventService=n,this._workerCommunicator=o,this._messageBus.subscribe(Hn,this._handler.bind(this),!0),this._workerCommunicator.addMessageListener(bn,this._publish.bind(this),!0)}),[{key:"_handler",value:function(t){var e;null===(e=this._muidService)||void 0===e||e.updateMuid(t),this._clientEventService.publishRestoredMuidEvent(t)}},{key:"_publish",value:function(t){this._messageBus.publish(Hn,t)}}])}();function Jl(t){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(t)}function Xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zl(n.key),n)}}function Zl(t){var e=function(t,e){if("object"!=Jl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jl(e)?e:e+""}var $l=function(){return function(t,e,r){return e&&Xl(t.prototype,e),r&&Xl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configurationRepository=e}),[{key:"onConfigUpdate",value:function(t){var e=t.get(et);this._setConfigurationKey(e)}},{key:"updateConfig",value:function(t){this._handleConfigurationUpdate(t)}},{key:"_handleConfigurationUpdate",value:function(t){We.isBoolean(t)?(oe.info("Set coordinates masking API was called, is enabled: ".concat(t)),this._setConfigurationKey(t)):oe.warn("Invalid argument type: ".concat(t))}},{key:"_setConfigurationKey",value:function(t){this._configurationRepository.set(et,t)}}])}();function tf(t){return tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(t)}function ef(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rf(n.key),n)}}function rf(t){var e=function(t,e){if("object"!=tf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tf(e)?e:e+""}var nf="cdAgentId",of=function(){return function(t,e,r){return e&&ef(t.prototype,e),r&&ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._storageUtilsWrapper=e,this._agentId=null,this._loadAgentIdFromStorage()}),[{key:"get",value:function(){return this._agentId}},{key:"set",value:function(t){if(!t||"string"!=typeof t)throw new Error("Invalid agentId value");this._agentId=t,this._saveAgentIdToStorage()}},{key:"_saveAgentIdToStorage",value:function(){this._storageUtilsWrapper.saveToLocalStorage(nf,this._agentId)}},{key:"_loadAgentIdFromStorage",value:function(){this._agentId=this._storageUtilsWrapper.getFromLocalStorage(nf)||null}}])}();function af(t){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(t)}function sf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uf(n.key),n)}}function uf(t){var e=function(t,e){if("object"!=af(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=af(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==af(e)?e:e+""}var cf=function(){return function(t,e,r){return e&&sf(t.prototype,e),r&&sf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._agentIdCache=e,this._serverWorkerCommunicator=r}),[{key:"updateAgentIdWithServer",value:function(){var t=this._agentIdCache.get();this._serverWorkerCommunicator.sendAsync(er,{agentId:t})}},{key:"set",value:function(t){if(!t)throw new Error("Invalid agentId value of undefined");this._agentIdCache.set(t)}}])}();function lf(t){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(t)}function ff(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ff(Object(r),!0).forEach((function(e){_f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ff(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function df(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wf(n.key),n)}}function yf(t,e,r){return e&&pf(t.prototype,e),r&&pf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vf(t,e,r){return e=bf(e),function(t,e){if(e&&("object"==lf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mf()?Reflect.construct(e,r||[],bf(t).constructor):e.apply(t,r))}function mf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mf=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bf(t)}function gf(t,e){return gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gf(t,e)}function _f(t,e,r){return(e=wf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wf(t){var e=function(t,e){if("object"!=lf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lf(e)?e:e+""}var Sf={configKey:"isElementsEvent",isDefault:!0,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Ef={input:0,initial:1,focus:2,blur:3,change:4,click:5,submit:6},kf=["eventSequence","timestamp","eventType","isTrusted","elementHash","length","elementValues","selected","hashedValue","relativeTime"],Pf=function(t){function e(t){var r;return df(this,e),_f(r=vf(this,e),"mutationMessageHandler",(function(t){var e,n;t.browserContext&&(r._inputEvents.addOnLoadInputData(t.browserContext,!0),r._inputEvents.bind(t.browserContext),r._clickEvents.addOnLoadInputData(t.browserContext,!0),r._clickEvents.bind(t.browserContext),r._selectElementEvents.bind(t.browserContext),r._formEvents.bind(t.browserContext),null===(e=r._customInputEvents)||void 0===e||e.addOnLoadInputData(t.browserContext,!0),null===(n=r._customInputEvents)||void 0===n||n.bind(t.browserContext))})),_f(r,"startFeature",(function(t){var e,n;r._inputEvents.addOnLoadInputData(t,!1),r._inputEvents.bind(t),r._clickEvents.addOnLoadInputData(t,!1),r._clickEvents.bind(t),r._selectElementEvents.bind(t),null===(e=r._customInputEvents)||void 0===e||e.addOnLoadInputData(t,!1),null===(n=r._customInputEvents)||void 0===n||n.bind(t),r._formEvents.bind(t),r._configurationRepository.get(M)&&r._mutationEmitter&&(r._mutationEmitter.startObserver(t),r._jQueryElementListenerSiteMapper.initTracking())})),_f(r,"_onSiteMapperMatch",(function(t){var e=t.selector;if(e)try{var n=window.document.querySelector(e);if(!n)return void oe.error("ElementEvents._onSiteMapperMatch - selector:".concat(JSON.stringify(e)," not found on page"));r._domUtils.matches(n,r._inputSelectors)?r._jqueryEventHandler.bindInputEvents(n):r._domUtils.matches(n,r._onClickSelectors)?r._jqueryEventHandler.bindOnClickEvents(n):r._domUtils.matches(n,r._onSelectSelectors)?r._jqueryEventHandler.bindOnChangeEvents(n):r._domUtils.matches(n,r._onFormSelectors)?r._jqueryEventHandler.bindOnFormsEvents(n):oe.error("ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                ".concat(JSON.stringify(e)," to any selectors group. Aborting jQuery element listening process."))}catch(t){oe.error("ElementEvents._onSiteMapperMatch - ".concat(t.message),t)}else oe.warn("ElementEvents._onSiteMapperMatch - No selector defined for match. Aborting jQuery element listening process.")})),r._configurationRepository=t.configurationRepository,r._utils=t.utils,r._domUtils=t.domUtils,r._dataQ=t.dataQ,r._elements=t.elements,r._jQueryElementListenerSiteMapper=t.jQueryElementListenerSiteMapper,r._jQueryElementListenerSiteMapper.updateObserver(r._onSiteMapperMatch),r._messageBus=t.messageBus,r._mutationEmitter=t.mutationEmitter,r._messageBus.subscribe(Wn,r.mutationMessageHandler),r._StandardInputEventsEmitter=t.StandardInputEventsEmitter,r._SyntheticMaskInputEventsHandler=t.SyntheticMaskInputEventsHandler,r._SyntheticAutotabInputEventsHandler=t.SyntheticAutotabInputEventsHandler,r._maskingService=t.maskingService,r._inputEvents=new t.InputEvents(r._elements,r.sendToQueue.bind(r),r._utils,r._messageBus,r._StandardInputEventsEmitter,r._SyntheticMaskInputEventsHandler,r._SyntheticAutotabInputEventsHandler,r._maskingService,t.maxShadowDepth),r._inputSelectors=t.inputSelectors,r._StandardOnClickEventsEmitter=t.StandardOnClickEventsEmitter,r._configurationRepository.get(nt)&&r._configurationRepository.get(ot)&&r._configurationRepository.get(it)&&(r._StandardCustomInputEmitter=t.StandardCustomInputEmitter,r._inputElementSettings={parentElementSelector:r._configurationRepository.get(nt),childElementWithCustomAttribute:r._configurationRepository.get(ot),elementDataAttribute:r._configurationRepository.get(it),customButtons:r._configurationRepository.get(at)},r._customInputEvents=new t.CustomInputEvents(r._elements,r.sendToQueue.bind(r),r._utils,r._messageBus,r._StandardCustomInputEmitter,r._maskingService,r.inputElementSettings=r._inputElementSettings)),r._clickEvents=new t.ClickEvents(r.sendToQueue.bind(r),r._utils,r._messageBus,r._configurationRepository,r._StandardOnClickEventsEmitter,r._maskingService,r._elements),r._onClickSelectors=t.onClickSelectors,r._StandardOnChangeEventsEmitter=t.StandardOnChangeEventsEmitter,r._elementFocusEventEmitter=t.ElementFocusEventsEmitter,r._elementBlurEventEmitter=t.ElementBlurEventsEmitter,r._selectElementEvents=new t.SelectElementEvents(r.sendToQueue.bind(r),r._utils,r._messageBus,r._StandardOnChangeEventsEmitter,r._elementFocusEventEmitter,r._elementBlurEventEmitter,r._configurationRepository,r._maskingService),r._onSelectSelectors=t.onSelectSelectors,r._StandardOnFormEventsEmitter=t.StandardOnFormEventsEmitter,r._formEvents=new t.FormEvents(r.sendToQueue.bind(r),r._messageBus,r._StandardOnFormEventsEmitter),r._onFormSelectors=t.onFormSelectors,r._jqueryEventHandler=t.JqueryElementsHandler,r._maxElemValLength=200,r._hashTruncationLength=r._configurationRepository.get("elementHashTruncationLength")||2,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gf(t,e)}(e,t),yf(e,[{key:"stopFeature",value:function(t){var e;this._inputEvents.unbind(t),this._clickEvents.unbind(t),this._selectElementEvents.unbind(t),null===(e=this._customInputEvents)||void 0===e||e.unbind(t),this._formEvents.unbind(t),this._jQueryElementListenerSiteMapper.stopTracking(),this._mutationEmitter.stopObserver(t)}},{key:"updateFeatureConfig",value:function(t){this._configurationRepository.get("isMutationObserver")&&this._mutationEmitter&&(this._mutationEmitter.startObserver(t),this._jQueryElementListenerSiteMapper.onConfigUpdate(this._configurationRepository)),this._hashTruncationLength=void 0!==this._configurationRepository.get("elementHashTruncationLength")?this._configurationRepository.get("elementHashTruncationLength"):this._hashTruncationLength,this._elements.updateFeatureConfig(),this._selectElementEvents.updateSettings(t)}},{key:"sendToQueue",value:function(t,e){var r=Oo[t.isTrusted],n=this.getEventTimestamp(t),o=this.getTimestampFromEvent(t),i=Ef[t.type];this._utils.isUndefinedNull(i)&&(i=-1);var a=this._elements.getElementHashFromEvent(t),s=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();(e=e||{}).elementValues&&e.elementValues.length>this._maxElemValLength&&(e.elementValues="");var u=hf(hf({},e),{eventType:i,eventSequence:s,timestamp:n,elementHash:a,isTrusted:r,hashedValue:"",relativeTime:o});this._dataQ.addToQueue("element_events",this._utils.convertToArrayByMap(kf,u),!0)}}],[{key:"getDefaultSettings",value:function(){return Sf}},{key:"Builder",get:function(){var t=function(){return yf((function t(e,r,n,o,i,a){df(this,t),this.configurationRepository=e,this.utils=r,this.domUtils=n,this.elements=o,this.dataQ=i,this.maxShadowDepth=a}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withMutationEmitter",value:function(t){return this.mutationEmitter=t,this}},{key:"withjQueryElementListenerSiteMapper",value:function(t){return this.jQueryElementListenerSiteMapper=t,this}},{key:"withjQueryElementsHandler",value:function(t){return this.JqueryElementsHandler=t,this}},{key:"withInputEvents",value:function(t,e,r){return this.InputEvents=t,this.inputSelectors=e,this.maskingService=r,this}},{key:"withStandardInputEventsEmitter",value:function(t){return this.StandardInputEventsEmitter=t,this}},{key:"withSyntheticMaskInputEventsHandler",value:function(t){return this.SyntheticMaskInputEventsHandler=t,this}},{key:"withSyntheticAutotabInputEventsHandler",value:function(t){return this.SyntheticAutotabInputEventsHandler=t,this}},{key:"withClickEvents",value:function(t,e){return this.ClickEvents=t,this.onClickSelectors=e,this}},{key:"withStandardOnClickEventsEmitter",value:function(t){return this.StandardOnClickEventsEmitter=t,this}},{key:"withSelectElementEvents",value:function(t,e){return this.SelectElementEvents=t,this.onSelectSelectors=e,this}},{key:"withStandardOnChangeEventsEmitter",value:function(t){return this.StandardOnChangeEventsEmitter=t,this}},{key:"withElementFocusEventsEmitter",value:function(t){return this.ElementFocusEventsEmitter=t,this}},{key:"withElementBlurEventsEmitter",value:function(t){return this.ElementBlurEventsEmitter=t,this}},{key:"withFormEvents",value:function(t,e){return this.FormEvents=t,this.onFormSelectors=e,this}},{key:"withStandardOnFormEventsEmitter",value:function(t){return this.StandardOnFormEventsEmitter=t,this}},{key:"withCustomInputEventEmitter",value:function(t,e){return this.CustomInputEvents=t,this.StandardCustomInputEmitter=e,this}},{key:"build",value:function(){return new e(this)}}])}();return t}}])}(Co),Tf=Pf;function Cf(t){return Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(t)}function Of(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,If(n.key),n)}}function Bf(t,e,r){return e&&Mf(t.prototype,e),r&&Mf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function jf(t,e,r){return e=Lf(e),function(t,e){if(e&&("object"==Cf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xf()?Reflect.construct(e,r||[],Lf(t).constructor):e.apply(t,r))}function xf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xf=function(){return!!t})()}function Lf(t){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lf(t)}function Rf(t,e){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rf(t,e)}function Af(t,e,r){return(e=If(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function If(t){var e=function(t,e){if("object"!=Cf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cf(e)?e:e+""}var Nf={configKey:"isClipboardEvent",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},Df={copy:0,paste:1,cut:2},Ff=["eventSequence","timestamp","clipboardEventType","elementHash","copiedText"],Uf=function(t){function e(t){var r;return Of(this,e),Af(r=jf(this,e),"startFeature",(function(t){try{var e=t.getDocument();r._cutEventEmitter.start(e),r._messageBus.subscribe(eo,r._handleClipboardEvent),r._copyEventEmitter.start(e),r._messageBus.subscribe(ro,r._handleClipboardEvent),r._pasteEventEmitter.start(e),r._messageBus.subscribe(no,r._handleClipboardEvent)}catch(t){oe.error("Failed starting the ClipboardEvents feature. msg: ".concat(t.message),t)}})),Af(r,"_handleClipboardEvent",(function(t){r._sendToQueue(t)})),Af(r,"_sendToQueue",(function(t){try{var e=r.getEventTimestamp(t),n=r._elements.getElementHashFromEvent(t),o=r._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=t.clipboardData?t.clipboardData.getData("text"):window.clipboardData?window.clipboardData.getData("text"):"";""!==(i=i||"")&&(i=i.replace(/[\d]/g,"1").replace(/[a-zA-Z]/g,"a").replace(/[^a-zA-Z\d]/g,"*"));var a=Df[t.type];r._utils.isUndefinedNull(a)&&(a=-1),r._dataQueue.addToQueue("clipboard_events",r._utils.convertToArrayByMap(Ff,{eventSequence:o,timestamp:e,elementHash:n,copiedText:i,clipboardEventType:a}))}catch(t){oe.error("Failed handling ClipboardEvent. msg: ".concat(t.message),t)}})),r._utils=t.utils,r._dataQueue=t.dataQueue,r._elements=t.elements,r._messageBus=t.messageBus,r._cutEventEmitter=t.cutEventEmitter,r._copyEventEmitter=t.copyEventEmitter,r._pasteEventEmitter=t.pasteEventEmitter,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rf(t,e)}(e,t),Bf(e,[{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._cutEventEmitter.stop(e),this._messageBus.unsubscribe(eo,this._handleClipboardEvent),this._copyEventEmitter.stop(e),this._messageBus.unsubscribe(ro,this._handleClipboardEvent),this._pasteEventEmitter.stop(e),this._messageBus.unsubscribe(no,this._handleClipboardEvent)}catch(t){oe.error("Failed stopping the ClipboardEvents feature. msg: ".concat(t.message),t)}}}],[{key:"getDefaultSettings",value:function(){return Nf}},{key:"Builder",get:function(){return function(){return Bf((function t(e,r,n){Of(this,t),this.utils=e,this.dataQueue=n,this.elements=r}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withCutEventEmitter",value:function(t){return this.cutEventEmitter=t,this}},{key:"withCopyEventEmitter",value:function(t){return this.copyEventEmitter=t,this}},{key:"withPasteEventEmitter",value:function(t){return this.pasteEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}}])}(Co),Hf=Uf;function Gf(t){return Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(t)}function Wf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qf(n.key),n)}}function Vf(t,e,r){return e=Qf(e),function(t,e){if(e&&("object"==Gf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Kf()?Reflect.construct(e,r||[],Qf(t).constructor):e.apply(t,r))}function Kf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Kf=function(){return!!t})()}function Qf(t){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qf(t)}function zf(t,e){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zf(t,e)}function qf(t){var e=function(t,e){if("object"!=Gf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gf(e)?e:e+""}var Yf={configKey:"isOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Jf=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=qf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(a=Vf(this,e),"_handleDeviceOrientationEvent",(function(t){var e=a._utils.dateNow();if(t&&e-a._lastTime>a._samplePeriod){var r=t.absolute||!1,n=a._utils.isUndefinedNull(t.alpha)?0:a._utils.cutDecimalPointDigits(t.alpha,4),o=a._utils.isUndefinedNull(t.beta)?0:a._utils.cutDecimalPointDigits(t.beta,4),i=a._utils.isUndefinedNull(t.gamma)?0:a._utils.cutDecimalPointDigits(t.gamma,4);if(n!==a._lastAlpha||o!==a._lastBeta||i!==a._lastGamma){oe.isDebug()&&oe.debug("OrientationEvents:_onOrientationEvent, sending data: timestamp: ".concat(e,"\n                alpha,betta,gamma: ").concat(n,",").concat(o,",").concat(i,",prevTime:").concat(a._lastTime)),a._lastTime=e,a._lastAlpha=n,a._lastBeta=o,a._lastGamma=i;var s=a._utils.StorageUtils.getAndUpdateEventSequenceNumber();a._dataQ.addToQueue("orientation_events",[null,s,e,r,n,o,i])}}})),a._dataQ=n,a._configurationRepository=t,a._utils=r,a._samplePeriod=a._configurationRepository.get(Q)||0,a._lastAlpha=0,a._lastBeta=0,a._lastGamma=0,a._lastTime=0,a._messageBus=o,a._deviceOrientationEventEmitter=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zf(t,e)}(e,t),function(t,e,r){return e&&Wf(t.prototype,e),r&&Wf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.start(),this._messageBus.subscribe(oo,this._handleDeviceOrientationEvent))}},{key:"stopFeature",value:function(){window.DeviceOrientationEvent&&(this._deviceOrientationEventEmitter.stop(),this._messageBus.unsubscribe(oo,this._handleDeviceOrientationEvent))}},{key:"updateFeatureConfig",value:function(){var t=this._configurationRepository.get(Q);this._samplePeriod=void 0!==t?t:this._samplePeriod}}],[{key:"getDefaultSettings",value:function(){return Yf}}])}(Co),Xf=Jf;function Zf(t){return Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(t)}function $f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oh(n.key),n)}}function th(t,e,r){return e=rh(e),function(t,e){if(e&&("object"==Zf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eh()?Reflect.construct(e,r||[],rh(t).constructor):e.apply(t,r))}function eh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eh=function(){return!!t})()}function rh(t){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rh(t)}function nh(t,e){return nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nh(t,e)}function oh(t){var e=function(t,e){if("object"!=Zf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zf(e)?e:e+""}var ih={configKey:"isBeforeInstallPrompt",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},ah=["eventSequence","timestamp","platforms","relativeTime"],sh=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=oh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(i=th(this,e),"_onBeforeInstallPrompt",(function(t){var e=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=i.getEventTimestamp(),n=i.getTimestampFromEvent(t),o=t.platforms?t.platforms.join(","):"";i._dataQueue.addToQueue("before_install_prompt",i._utils.convertToArrayByMap(ah,{eventSequence:e,timestamp:r,platforms:o,relativeTime:n}))})),i._messageBus=n,i._eventEmitter=o,i._dataQueue=t,i._utils=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nh(t,e)}(e,t),function(t,e,r){return e&&$f(t.prototype,e),r&&$f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._eventEmitter.start(window),this._messageBus.subscribe(io,this._onBeforeInstallPrompt)}},{key:"stopFeature",value:function(){this._eventEmitter.stop(window),this._messageBus.unsubscribe(io,this._onBeforeInstallPrompt)}}],[{key:"getDefaultSettings",value:function(){return ih}}])}(Co),uh=sh;function ch(t){return ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(t)}function lh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bh(n.key),n)}}function hh(t,e,r){return e&&fh(t.prototype,e),r&&fh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dh(t,e,r){return e=yh(e),function(t,e){if(e&&("object"==ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ph()?Reflect.construct(e,r||[],yh(t).constructor):e.apply(t,r))}function ph(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ph=function(){return!!t})()}function yh(t){return yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yh(t)}function vh(t,e){return vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vh(t,e)}function mh(t,e,r){return(e=bh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bh(t){var e=function(t,e){if("object"!=ch(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ch(e)?e:e+""}var gh={configKey:"isWindowEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},_h={DOMContentLoaded:0,scroll:1,resize:2,focus:3,blur:4,tabFocus:5,tabBlur:6},wh=["eventSequence","timestamp","eventType","isTrusted","screenWidth","screenHeight","clientWidth","clientHeight","documentWidth","documentHeight","scrollTop","scrollLeft","windowInnerWidth","windowInnerHeight","windowOuterWidth","windowOuterHeight"],Sh=function(t){function e(t){var r;return lh(this,e),mh(r=dh(this,e),"startFeature",(function(t){try{r._resizeEventEmitter.start(t.Context),r._messageBus.subscribe(uo,r._onWindowEvent),r._focusEventEmitter.start(t.Context),r._messageBus.subscribe(ao,r._onWindowEvent),r._blurEventEmitter.start(t.Context),r._messageBus.subscribe(so,r._onWindowEvent),r._domContentLoadedEventEmitter.start(t.getDocument()),r._messageBus.subscribe(co,r._onWindowEvent),r._visibilityChangeEventEmitter.start(t.getDocument()),r._messageBus.subscribe(lo,r._onWindowEvent),r._configurationRepository.get(W)&&(r._scrollEventEmitter.start(t.Context),r._messageBus.subscribe(fo,r._onWindowEvent))}catch(t){oe.error("Failed starting the WindowEventCollector. msg: ".concat(t.message),t)}})),mh(r,"stopFeature",(function(t){try{r._resizeEventEmitter.stop(t.Context),r._messageBus.unsubscribe(uo,r._onWindowEvent),r._focusEventEmitter.stop(t.Context),r._messageBus.unsubscribe(ao,r._onWindowEvent),r._blurEventEmitter.stop(t.Context),r._messageBus.unsubscribe(so,r._onWindowEvent),r._domContentLoadedEventEmitter.stop(t.getDocument()),r._messageBus.unsubscribe(co,r._onWindowEvent),r._visibilityChangeEventEmitter.stop(t.getDocument()),r._messageBus.unsubscribe(lo,r._onWindowEvent),r._configurationRepository.get(W)&&(r._scrollEventEmitter.stop(t.Context),r._messageBus.unsubscribe(fo,r._onWindowEvent))}catch(t){oe.error("Failed stopping the ClipboardEvents feature. msg: ".concat(t.message),t)}})),mh(r,"updateFeatureConfig",(function(t){r._configurationRepository.get(W)?r._configurationRepository.get(W)&&(r._scrollEventEmitter.start(t.Context),r._messageBus.subscribe(fo,r._onWindowEvent)):(r._scrollEventEmitter.stop(t.Context),r._messageBus.unsubscribe(fo,r._onWindowEvent))})),mh(r,"_onWindowEvent",(function(t){try{r._sendToQueue(t)}catch(t){oe.error("An error has occurred while sending window event. ".concat(t.message),t)}})),mh(r,"_sendToQueue",(function(t){if(!t)throw new Error("Invalid window event received.");var e,n=Oo[void 0];"DOMContentLoaded"===t.type?e=(new Date).getTime():(e=r.getEventTimestamp(t),n=Oo[t.isTrusted]),oe.isDebug()&&(oe.trace("got event "+t.type+" at time "+e),oe.trace("adding to queue - screen(width,height): "+screen.width+","+screen.height+" window(width,height): "+window.innerWidth+","+window.innerHeight));var o=r._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i="visibilitychange"!==t.type?t.type:"hidden"===document.visibilityState?"tabBlur":"tabFocus",a=_h[i];null!=a&&void 0!==a||(a=-1),r._dataQueue.addToQueue("window_events",r._utils.convertToArrayByMap(wh,{eventType:a,eventSequence:o,timestamp:e,screenWidth:screen.width?Math.round(screen.width):-1,screenHeight:screen.height?Math.round(screen.height):-1,clientWidth:window.innerWidth?Math.round(window.innerWidth):-1,clientHeight:window.innerHeight?Math.round(window.innerHeight):-1,documentWidth:document.body&&document.body.clientWidth?Math.round(document.body.clientWidth):-1,documentHeight:document.body&&document.body.clientHeight?Math.round(document.body.clientHeight):-1,scrollTop:document.body&&document.body.scrollTop?Math.round(document.body.scrollTop):0,scrollLeft:document.body&&document.body.scrollLeft?Math.round(document.body.scrollLeft):0,windowInnerWidth:window.innerWidth?Math.round(window.innerWidth):-1,windowInnerHeight:window.innerHeight?Math.round(window.innerHeight):-1,windowOuterWidth:window.outerWidth?Math.round(window.outerWidth):-1,windowOuterHeight:window.outerHeight?Math.round(window.outerHeight):-1,isTrusted:n}))})),r._configurationRepository=t.configurationRepository,r._utils=t.utils,r._dataQueue=t.dataQueue,r._messageBus=t.messageBus,r._focusEventEmitter=t.focusEventEmitter,r._blurEventEmitter=t.blurEventEmitter,r._resizeEventEmitter=t.resizeEventEmitter,r._domContentLoadedEventEmitter=t.domContentLoadedEventEmitter,r._visibilityChangeEventEmitter=t.visibilityChangeEventEmitter,r._scrollEventEmitter=t.scrollEventEmitter,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vh(t,e)}(e,t),hh(e,null,[{key:"getDefaultSettings",value:function(){return gh}},{key:"Builder",get:function(){return function(){return hh((function t(e,r,n){lh(this,t),this.configurationRepository=e,this.utils=r,this.dataQueue=n}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withFocusEventEmitter",value:function(t){return this.focusEventEmitter=t,this}},{key:"withBlurEventEmitter",value:function(t){return this.blurEventEmitter=t,this}},{key:"withResizeEventEmitter",value:function(t){return this.resizeEventEmitter=t,this}},{key:"withDOMContentLoadedEventEmitter",value:function(t){return this.domContentLoadedEventEmitter=t,this}},{key:"withVisibilityChangeEventEmitter",value:function(t){return this.visibilityChangeEventEmitter=t,this}},{key:"withScrollEventEmitter",value:function(t){return this.scrollEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}}])}(Co);function Eh(t){return Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh(t)}function kh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ph(n.key),n)}}function Ph(t){var e=function(t,e){if("object"!=Eh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eh(e)?e:e+""}function Th(t,e,r){return e=Oh(e),function(t,e){if(e&&("object"==Eh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ch()?Reflect.construct(e,r||[],Oh(t).constructor):e.apply(t,r))}function Ch(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ch=function(){return!!t})()}function Oh(t){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(t)}function Mh(t,e){return Mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mh(t,e)}var Bh={configKey:"isAccelerometerEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},jh=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Th(this,e))._configurationRepository=t,o._utils=r,o._dataQueue=n,o._storageUtils=o._utils.StorageUtils,o._samplePeriod=o._configurationRepository.get(K)||0,o._samplePeriodGyro=o._configurationRepository.get(V)||0,o._lastX=0,o._lastY=0,o._lastZ=0,o._lastTime=0,o._lastAlpha=0,o._lastBeta=0,o._lastGamma=0,o._lastTimeGyro=0,o._onAccelerometerventFunc=o._onAccelerometerEvent.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mh(t,e)}(e,t),function(t,e,r){return e&&kh(t.prototype,e),r&&kh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onAccelerometerEvent",value:function(t){var e=this._utils.dateNow();if(t&&t.accelerationIncludingGravity&&e-this._lastTime>this._samplePeriod){var r=t.accelerationIncludingGravity.x,n=t.accelerationIncludingGravity.y,o=t.accelerationIncludingGravity.z;if(!(this._utils.isUndefinedNull(r)&&this._utils.isUndefinedNull(n)&&this._utils.isUndefinedNull(o)||(r=this._utils.isUndefinedNull(r)?-1:this._utils.cutDecimalPointDigits(r,4),n=this._utils.isUndefinedNull(n)?-1:this._utils.cutDecimalPointDigits(n,4),o=this._utils.isUndefinedNull(o)?-1:this._utils.cutDecimalPointDigits(o,4),r===this._lastX&&n===this._lastY&&o===this._lastZ))){var i=this._storageUtils.getAndUpdateEventSequenceNumber();this._lastTime=e,this._lastX=r,this._lastY=n,this._lastZ=o,this._dataQueue.addToQueue("accelerometer_events",[null,i,e,r,n,o]),oe.isDebug()&&oe.debug("AccelerometerEvents:_onAccelerometerEvent, sending data: timestamp:".concat(e," x,y,z:").concat(r,",").concat(n,",").concat(o,", prevTime:").concat(this._lastTime))}}if(t&&t.rotationRate&&e-this._lastTimeGyro>this._samplePeriodGyro){var a=t.rotationRate.alpha,s=t.rotationRate.beta,u=t.rotationRate.gamma;if(!this._utils.isUndefinedNull(a)||!this._utils.isUndefinedNull(s)||!this._utils.isUndefinedNull(u)){var c=t.absolute||!1;if(a=this._utils.isUndefinedNull(a)?0:this._utils.cutDecimalPointDigits(a,4),s=this._utils.isUndefinedNull(s)?0:this._utils.cutDecimalPointDigits(s,4),u=this._utils.isUndefinedNull(u)?0:this._utils.cutDecimalPointDigits(u,4),a!==this._lastAlpha||s!==this._lastBeta||u!==this._lastGamma){this._lastTimeGyro=e,this._lastAlpha=a,this._lastBeta=s,this._lastGamma=u;var l=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("gyro_events",[null,l,e,c,a,s,u]),oe.isDebug()&&oe.debug("GyroEvents:_onGyroEvent, sending data: timestamp:".concat(e," alpha,betta,gamma:").concat(a,",").concat(s,",").concat(u,", prevTime: ").concat(this._lastTimeGyro))}}}return!0}},{key:"startFeature",value:function(){window.DeviceMotionEvent&&this._utils.addEventListener(window,"devicemotion",this._onAccelerometerventFunc)}},{key:"stopFeature",value:function(){window.DeviceMotionEvent&&this._utils.removeEventListener(window,"devicemotion",this._onAccelerometerventFunc)}},{key:"updateFeatureConfig",value:function(){this._samplePeriod=void 0!==this._configurationRepository.get(K)?this._configurationRepository.get(K):this._samplePeriod,this._samplePeriodGyro=void 0!==this._configurationRepository.get(V)?this._configurationRepository.get(V):this._samplePeriodGyro}}],[{key:"getDefaultSettings",value:function(){return Bh}}])}(Co);function xh(t){return xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(t)}function Lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rh(n.key),n)}}function Rh(t){var e=function(t,e){if("object"!=xh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xh(e)?e:e+""}function Ah(t,e,r){return e=Nh(e),function(t,e){if(e&&("object"==xh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ih()?Reflect.construct(e,r||[],Nh(t).constructor):e.apply(t,r))}function Ih(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ih=function(){return!!t})()}function Nh(t){return Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nh(t)}function Dh(t,e){return Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dh(t,e)}var Fh=["clientX","clientY"],Uh=["screenX","screenY"],Hh=function(t,e,r){function n(t,e){var n=e[r[0]]-t[r[0]],o=e[r[1]]-t[r[1]];return Math.sqrt(n*n+o*o)}return{getScale:function(){return n(t[0],t[1])/n(e[0],e[1])},getFocusPoint:function(){return e=t[1],n=t[0],{x:(e[r[0]]+n[r[0]])/2,y:(e[r[1]]+n[r[1]])/2};var e,n}}},Gh={pointerdown:0,pointermove:1,pointerup:2},Wh={configKey:"isPinchZoomEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Vh=["eventSequence","timestamp","focusX","focusY","scaleFactor"],Kh=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ah(this,e))._utils=t,i._dataQ=n,i._elements=r,i._msgBus=o,i._evGesturesCache=[],i._prevEventDiff=-1,i._prevEvGestureSet=[],i._prevTouchEvents=[],i._onAllBrowsersPinchZoomEventBinded=i._onAllBrowsersPinchZoomEvent.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dh(t,e)}(e,t),function(t,e,r){return e&&Lh(t.prototype,e),r&&Lh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,r,n){t!==Gh.pointerdown&&t!==Gh.pointerup||this._msgBus.publish("pinchEvent",{action:t});var o=this.getEventTimestamp(n),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("pinch_events",this._utils.convertToArrayByMap(Vh,{eventSequence:i,timestamp:o,focusX:r.x,focusY:r.y,scaleFactor:e}))}},{key:"_bind",value:function(t){var e,r=t.getDocument();if(window.PointerEvent?e=["pointerdown","pointermove","pointerup"]:window.TouchEvent&&(e=["touchstart","touchend","touchcancel","touchmove"]),this._listeningToEvents=e,this._listeningToEvents)for(var n=0;n<this._listeningToEvents.length;n++)this._utils.addEventListener(r,this._listeningToEvents[n],this._onAllBrowsersPinchZoomEventBinded,!1,!1)}},{key:"_unbind",value:function(t){var e=t.getDocument();if(this._listeningToEvents)for(var r=0;r<this._listeningToEvents.length;r++)this._utils.removeEventListener(e,this._listeningToEvents[r],this._onAllBrowsersPinchZoomEventBinded);this._evGesturesCache=[],this._prevEventDiff=-1}},{key:"_onAllBrowsersPinchZoomEvent",value:function(t){switch(t.type){case"pointerdown":this._onPointerDownEvent(t);break;case"pointermove":this._onPointerMoveEvent(t);break;case"pointerup":this._onPointerUpEvent(t);break;case"touchstart":this._onTouchStartEvent(t);break;case"touchend":this._onTouchEndEvent();break;case"touchmove":this._onTouchMoveEvent(t)}return!0}},{key:"_onPointerDownEvent",value:function(t){this._evGesturesCache.push(t)}},{key:"_onPointerMoveEvent",value:function(t){for(var e=0;e<this._evGesturesCache.length;e++)if(t.pointerId===this._evGesturesCache[e].pointerId){this._evGesturesCache[e]=t;break}if(2===this._evGesturesCache.length&&this._evGesturesCache[0].pointerId!==this._evGesturesCache[1].pointerId){var r=Math.abs(this._evGesturesCache[0].clientX-this._evGesturesCache[1].clientX);if(this._prevEventDiff>0&&(this._prevEventDiff,this._prevEventDiff,2===this._prevEvGestureSet.length)){var n=Hh(this._evGesturesCache,this._prevEvGestureSet,Fh),o=n.getScale();this._addToCommunicationQueue(Gh[t.type],o,n.getFocusPoint(),t)}this._prevEventDiff=r,this._prevEvGestureSet=this._evGesturesCache.slice(0)}else this._evGesturesCache.length>2&&(this._evGesturesCache=[],this._prevEvGestureSet=[])}},{key:"_onPointerUpEvent",value:function(t){for(var e=0;e<this._evGesturesCache.length;e++)if(this._evGesturesCache[e].pointerId===t.pointerId){this._evGesturesCache.splice(e,1);break}this._evGesturesCache.length<2&&(this._prevEventDiff=-1,this._prevEvGestureSet=[])}},{key:"_onTouchStartEvent",value:function(t){this._prevTouchEvents[0]=t.touches.item(0),this._prevTouchEvents[1]=t.touches.item(1)}},{key:"_onTouchEndEvent",value:function(){this._prevTouchEvents=[]}},{key:"_onTouchMoveEvent",value:function(t){if(2===t.touches.length){if(2===this._prevTouchEvents.length){var e=[t.touches.item(0),t.touches.item(1)],r=Hh(e,this._prevTouchEvents.splice(0),Uh),n=r.getScale();this._addToCommunicationQueue(Gh[t.type],n,r.getFocusPoint(),t)}this._prevTouchEvents[0]=t.touches.item(0),this._prevTouchEvents[1]=t.touches.item(1)}}}],[{key:"getDefaultSettings",value:function(){return Wh}}])}(Co);function Qh(t){return Qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(t)}function zh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qh(n.key),n)}}function qh(t){var e=function(t,e){if("object"!=Qh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qh(e)?e:e+""}function Yh(t,e,r){return e=Xh(e),function(t,e){if(e&&("object"==Qh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jh()?Reflect.construct(e,r||[],Xh(t).constructor):e.apply(t,r))}function Jh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jh=function(){return!!t})()}function Xh(t){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xh(t)}function Zh(t,e){return Zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zh(t,e)}var $h={load:0},td={configKey:"isScriptExecuteEve",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},ed=["eventSequence","timestamp","eventType","scriptId","namespaceURI","outerHTML","scriptSource","scriptType"],rd=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yh(this,e))._onScriptExecuteEventFunc=n._onScriptExecuteEvent.bind(n),n._dataQueue=r,n._utils=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zh(t,e)}(e,t),function(t,e,r){return e&&zh(t.prototype,e),r&&zh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onScriptExecuteEvent",value:function(t){if(t&&t.target&&("load"!==t.type||"script"===t.target.nodeName.toLowerCase()))try{var e=this.getEventTimestamp(t),r=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=$h[t.type];this._utils.isUndefinedNull(n)&&(n=-1),oe.isDebug()&&oe.trace("got event "+t.type+", "+n+", scriptSrc: "+t.target.src+" at time "+e),this._dataQueue.addToQueue("script_events",this._utils.convertToArrayByMap(ed,{eventSequence:r,timestamp:e,eventType:n,scriptId:t.target.id||"",namespaceURI:t.target.namespaceURI||"",outerHTML:t.target.outerHTML||"",scriptSource:t.target.src||"",scriptType:t.target.type||""}))}catch(t){oe.error("error on getScriptExecuteEvent ".concat(t.toString()))}}},{key:"startFeature",value:function(){this._utils.addEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(document,"load",this._onScriptExecuteEventFunc,!0)}}],[{key:"getDefaultSettings",value:function(){return td}}])}(Co);function nd(t){return nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(t)}function od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,id(n.key),n)}}function id(t){var e=function(t,e){if("object"!=nd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nd(e)?e:e+""}function ad(t,e,r){return e=ud(e),function(t,e){if(e&&("object"==nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sd()?Reflect.construct(e,r||[],ud(t).constructor):e.apply(t,r))}function sd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sd=function(){return!!t})()}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ud(t)}function cd(t,e){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cd(t,e)}var ld={configKey:"isNetInfoEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},fd=["eventSequence","timestamp","connectionType","effectiveType","downlinkMax","downlink","rtt","isSaveData"],hd=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:navigator.connection||navigator.mozConnection||navigator.webkitConnection;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ad(this,e))._dataQueue=r,n._utils=t,n._connection=o,n._boundOnChangeNetworkInfo=n.onChangeNetworkInfo.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cd(t,e)}(e,t),function(t,e,r){return e&&od(t.prototype,e),r&&od(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"onChangeNetworkInfo",value:function(){oe.debug("NetInfoEvents:onChangeNetworkInfo");var t=this._utils.isUndefinedNull(this._connection.saveData)?"":this._connection.saveData.toString(),e=this.getEventTimestamp(),r=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("net_info_events",this._utils.convertToArrayByMap(fd,{eventSequence:r,timestamp:e,connectionType:this._connection.type?this._connection.type:"",effectiveType:this._connection.effectiveType?this._connection.effectiveType:"",downlinkMax:this._connection.downlinkMax?this._connection.downlinkMax.toString():"",downlink:this._connection.downlink?this._connection.downlink.toString():"",rtt:this._connection.rtt?this._connection.rtt.toString():"",isSaveData:t}))}},{key:"startFeature",value:function(){this._connection&&(this._connection.addEventListener("change",this._boundOnChangeNetworkInfo,!0),this.onChangeNetworkInfo())}},{key:"stopFeature",value:function(){this._connection&&this._connection.removeEventListener("change",this._boundOnChangeNetworkInfo,!0)}}],[{key:"getDefaultSettings",value:function(){return ld}}])}(Co);function dd(t){return dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(t)}function pd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yd(n.key),n)}}function yd(t){var e=function(t,e){if("object"!=dd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dd(e)?e:e+""}function vd(t,e,r){return e=bd(e),function(t,e){if(e&&("object"==dd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,md()?Reflect.construct(e,r||[],bd(t).constructor):e.apply(t,r))}function md(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(md=function(){return!!t})()}function bd(t){return bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bd(t)}function gd(t,e){return gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gd(t,e)}var _d={configKey:"isDeviceOrientationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},wd={undefined:0,"portrait-primary":1,"landscape-primary":2,"portrait-secondary":3,"landscape-secondary":4},Sd=["eventSequence","timestamp","orientation"],Ed=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vd(this,e))._dataQ=r,n._utils=t,n._onDeviceOrientationEventFunc=n._onDeviceOrientationEvent.bind(n),screen.mozOrientation&&screen.addEventListener?(n._eventTarget=screen,n._eventName="mozorientationchange"):screen.msOrientation&&screen.addEventListener?(n._eventTarget=screen,n._eventName="msorientationchange"):(n._eventTarget=window,n._eventName="orientationchange"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gd(t,e)}(e,t),function(t,e,r){return e&&pd(t.prototype,e),r&&pd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._utils.addEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc),this._handleDeviceOrientationEvent(screen)}},{key:"stopFeature",value:function(){this._utils.removeEventListener(this._eventTarget,this._eventName,this._onDeviceOrientationEventFunc)}},{key:"_onDeviceOrientationEvent",value:function(t){var e;e=t&&t.target?t.target.screen||t.target:screen,this._handleDeviceOrientationEvent(e)}},{key:"_handleDeviceOrientationEvent",value:function(t){var e=t.mozOrientation||t.msOrientation||t.orientation;if(void 0!==e){var r=e.type||e,n=wd[r];if(void 0!==n){if(this._lastDeviceOrientationType!==n){var o=this.getEventTimestamp(),i=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastDeviceOrientationType=n,oe.trace("onDeviceOrientationEvent: Orientation changed to ".concat(n," at time ").concat(o)),this._dataQ.addToQueue("screen_orientation",this._utils.convertToArrayByMap(Sd,{eventSequence:i,timestamp:o,orientation:n}))}}else oe.error("onDeviceOrientationEvent: Unknown orientation ".concat(r," value."))}else oe.debug("onDeviceOrientationEvent: Unable to find orientation data.")}}],[{key:"getDefaultSettings",value:function(){return _d}}])}(Co);function kd(t){return kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(t)}function Pd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Td(n.key),n)}}function Td(t){var e=function(t,e){if("object"!=kd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kd(e)?e:e+""}function Cd(t,e,r){return e=Md(e),function(t,e){if(e&&("object"==kd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Od()?Reflect.construct(e,r||[],Md(t).constructor):e.apply(t,r))}function Od(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Od=function(){return!!t})()}function Md(t){return Md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Md(t)}function Bd(t,e){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bd(t,e)}var jd={configKey:"isTapEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},xd=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],Ld=["eventSequence","timestamp","screenX","screenY","pageX","pageY","clientX","clientY","isTrusted","elementHash","touchIndex","touchSizeMajor","touchSizeMinor"],Rd=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Cd(this,e))._configurationRepository=t,i._utils=r,i._dataQ=o,i._elements=n,i._activeTouchActions={},i._tapMaxSlop=i._configurationRepository.get("tapEventsTapMaxSlop")||20,i._longPressTimeout=i._configurationRepository.get("tapEventsLongPressTimeout")||500,i._handleStartEventBind=i._handleStartEvent.bind(i),i._handleMoveEventBind=i._handleMoveEvent.bind(i),i._handleEndEventBind=i._handleEndEvent.bind(i),i._handleCancelEventBind=i._handleCancelEvent.bind(i),i._eventDefinitions=e.getSupportedTouchEvents(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bd(t,e)}(e,t),function(t,e,r){return e&&Pd(t.prototype,e),r&&Pd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"updateFeatureConfig",value:function(){this._tapMaxSlop=void 0!==this._configurationRepository.get("tapEventsTapMaxSlop")?this._configurationRepository.get("tapEventsTapMaxSlop"):this._tapMaxSlop,this._longPressTimeout=void 0!==this._configurationRepository.get("tapEventsLongPressTimeout")?this._configurationRepository.get("tapEventsLongPressTimeout"):this._longPressTimeout}},{key:"_bind",value:function(t){if(this._eventDefinitions){var e=t.getDocument();this._utils.addEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.addEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.addEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.addEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}else oe.debug("TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.")}},{key:"_unbind",value:function(t){if(this._eventDefinitions){var e=t.getDocument();this._utils.removeEventListener(e,this._eventDefinitions.startEvent,this._handleStartEventBind),this._utils.removeEventListener(e,this._eventDefinitions.moveEvent,this._handleMoveEventBind),this._utils.removeEventListener(e,this._eventDefinitions.endEvent,this._handleEndEventBind),this._utils.removeEventListener(e,this._eventDefinitions.cancelEvent,this._handleCancelEventBind)}}},{key:"_handleStartEvent",value:function(t){for(var e=this._getEventData(t),r=0;r<e.length;r++)this._activeTouchActions[e[r].identifier]={startTime:this.getEventTimestamp(),startX:e[r].touchData.pageX,startY:e[r].touchData.pageY,offsetX:0,offsetY:0}}},{key:"_handleMoveEvent",value:function(t){for(var e=this._getEventData(t),r=0;r<e.length;r++){var n=this._activeTouchActions[e[r].identifier];n&&(n.offsetX=Math.abs(e[r].touchData.pageX-n.startX),n.offsetY=Math.abs(e[r].touchData.pageY-n.startY))}}},{key:"_handleEndEvent",value:function(t){for(var e=this._getEventData(t),r=0;r<e.length;r++){var n=this._activeTouchActions[e[r].identifier];n&&(n.offsetX<this._tapMaxSlop&&n.offsetY<this._tapMaxSlop&&(this.getEventTimestamp()-n.startTime<this._longPressTimeout?this._sendEvent("tap_events",xd,e[r].identifier,e[r].touchData,e[r].eventArgs):this._sendEvent("longpress_events",Ld,e[r].identifier,e[r].touchData,e[r].eventArgs)),delete this._activeTouchActions[e[r].identifier])}}},{key:"_handleCancelEvent",value:function(t){for(var e=this._getEventData(t),r=0;r<e.length;r++)delete this._activeTouchActions[e[r].identifier]}},{key:"_getEventData",value:function(t){if(void 0!==t.changedTouches){for(var e=[],r=0;r<t.changedTouches.length;r++){var n=t.changedTouches[r],o=n.identifier;e.push({identifier:o,touchData:n,eventArgs:t})}return e}if(null!=t.pointerType&&("touch"===t.pointerType||"pen"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType===t.MSPOINTER_TYPE_PEN))return[{identifier:t.pointerId?t.pointerId:0,touchData:t,eventArgs:t}];return[]}},{key:"_sendEvent",value:function(t,e,r,n,o){var i=this.getEventTimestamp(),a=Oo[o.isTrusted],s=this._elements.getElementHashFromEvent(o),u=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._utils.isUndefinedNull(r)&&(r=0),this._dataQ.addToQueue(t,this._utils.convertToArrayByMap(e,{eventSequence:u,timestamp:i,screenX:n.screenX?Math.round(n.screenX):0,screenY:n.screenY?Math.round(n.screenY):0,pageX:n.pageX||0,pageY:n.pageY||0,clientX:n.clientX||0,clientY:n.clientY||0,isTrusted:a,elementHash:s,touchIndex:r%1e4,touchSizeMajor:n.radiusX?2*n.radiusX:0,touchSizeMinor:n.radiusY?2*n.radiusY:0}))}}],[{key:"getDefaultSettings",value:function(){return jd}},{key:"getSupportedTouchEvents",value:function(){return window.TouchEvent?{startEvent:"touchstart",moveEvent:"touchmove",endEvent:"touchend",cancelEvent:"touchcancel"}:window.PointerEvent?{startEvent:"pointerdown",moveEvent:"pointermove",endEvent:"pointerup",cancelEvent:"pointercancel"}:void oe.debug("TapEvents:_createEventsToListenList - No touch support for browser.")}}])}(Co);function Ad(t){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(t)}function Id(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nd(n.key),n)}}function Nd(t){var e=function(t,e){if("object"!=Ad(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ad(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ad(e)?e:e+""}function Dd(t,e,r){return e=Ud(e),function(t,e){if(e&&("object"==Ad(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fd()?Reflect.construct(e,r||[],Ud(t).constructor):e.apply(t,r))}function Fd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fd=function(){return!!t})()}function Ud(t){return Ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ud(t)}function Hd(t,e){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hd(t,e)}var Gd={configKey:"isStorageEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Wd=0,Vd=["eventSequence","timestamp","keys","action","tabsOpened"],Kd=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Dd(this,e))._utils=t,i._dataQ=n,i._elements=r,i._msgBus=o,i._onAllStorageEventBinded=i._onAllStorageEvent.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hd(t,e)}(e,t),function(t,e,r){return e&&Id(t.prototype,e),r&&Id(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){this._bind(t)}},{key:"stopFeature",value:function(t){this._unbind(t)}},{key:"_addToCommunicationQueue",value:function(t,e,r,n,o){t===Wd&&this._msgBus.publish("storageEvent",{action:t});var i=this.getEventTimestamp(o),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQ.addToQueue("storage_events",this._utils.convertToArrayByMap(Vd,{eventSequence:a,timestamp:i,keys:e,action:r,tabsOpened:n}))}},{key:"_bind",value:function(t){var e,r=t.Context;if((r.localStorage||r.sessionStorage)&&(e=["storage"]),this._listeningToEvents=e,this._listeningToEvents.length>0)for(var n=0;n<this._listeningToEvents.length;n++)this._utils.addEventListener(r,this._listeningToEvents[n],this._onAllStorageEventBinded,!0)}},{key:"_unbind",value:function(t){if(this._listeningToEvents)for(var e=0;e<this._listeningToEvents.length;e++)this._utils.removeEventListener(t.Context,this._listeningToEvents[e],this._onAllStorageEventBinded,!0)}},{key:"_onAllStorageEvent",value:function(t){if("storage"===t.type)this._onStorageEvent(t);return!0}},{key:"_onStorageEvent",value:function(t){var e=!1,r=null,n=null;null===t.key&&(r=null),"string"==typeof t.key&&null===t.newValue?(r=t.key,n="delete"):(r=t.key,n="update");var o=this._utils.StorageUtils.getFromLocalStorage("cdTabList");o&&"object"===Ad(o[0])&&(e=!0),e=e?1:0,this._addToCommunicationQueue(t.type,r,n,e,t)}}],[{key:"getDefaultSettings",value:function(){return Gd}}])}(Co);function Qd(t){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(t)}function zd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qd(n.key),n)}}function qd(t){var e=function(t,e){if("object"!=Qd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qd(e)?e:e+""}function Yd(t,e,r){return e=Xd(e),function(t,e){if(e&&("object"==Qd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jd()?Reflect.construct(e,r||[],Xd(t).constructor):e.apply(t,r))}function Jd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jd=function(){return!!t})()}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xd(t)}function Zd(t,e){return Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zd(t,e)}var $d={configKey:"isPrintEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},tp=1,ep=0,rp=["eventSequence","timestamp","printDialogState"],np=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yd(this,e))._utils=t,n._dataQueue=r,n._addToEventQueueFunc=n._addToEventQueue.bind(n),n._myAfterPrintFunc=n._myAfterPrint.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zd(t,e)}(e,t),function(t,e,r){return e&&zd(t.prototype,e),r&&zd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_myAfterPrint",value:function(){this._addToEventQueueFunc(ep),window.removeEventListener("focus",this._myAfterPrintFunc)}},{key:"_onBeforePrintEvent",value:function(){this._addToEventQueueFunc(tp),this._utils.addEventListener(window,"focus",this._myAfterPrintFunc.bind(this))}},{key:"_addToEventQueue",value:function(t){var e=this.getEventTimestamp(),r=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._dataQueue.addToQueue("print_events",this._utils.convertToArrayByMap(rp,{eventSequence:r,timestamp:e,printDialogState:t}))}},{key:"startFeature",value:function(){this._utils.addEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this))}},{key:"stopFeature",value:function(){this._utils.removeEventListener(window,"beforeprint",this._onBeforePrintEvent.bind(this),!0)}}],[{key:"getDefaultSettings",value:function(){return $d}}])}(Co);function op(t){return op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(t)}function ip(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ap(n.key),n)}}function ap(t){var e=function(t,e){if("object"!=op(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=op(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==op(e)?e:e+""}function sp(t,e,r){return e=cp(e),function(t,e){if(e&&("object"==op(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,up()?Reflect.construct(e,r||[],cp(t).constructor):e.apply(t,r))}function up(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(up=function(){return!!t})()}function cp(t){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cp(t)}function lp(t,e){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lp(t,e)}var fp={configKey:"isLightSensor",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},hp=["eventSequence","timestamp","illuminance"],dp=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=sp(this,e))._dataQueue=t,o._utils=r,o._configurationRepository=n,o._eventThreshold=o._configurationRepository.get("lightSensorEventThreshold")||5e3,o._lastTime=0,o.onReadingSensorBoundble=o._onReadingSensor.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lp(t,e)}(e,t),function(t,e,r){return e&&ip(t.prototype,e),r&&ip(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_onReadingSensor",value:function(){var t=this.getEventTimestamp();if(t-this._lastTime>this._eventThreshold){var e=this._utils.StorageUtils.getAndUpdateEventSequenceNumber();this._lastTime=t,this._dataQueue.addToQueue("ambient_light_level",this._utils.convertToArrayByMap(hp,{eventSequence:e,timestamp:t,illuminance:this._sensor.illuminance}))}}},{key:"startFeature",value:function(){window.AmbientLightSensor?(oe.info("AmbientLightSensor exists and collected"),this._sensor=new AmbientLightSensor,this._sensor.addEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.addEventListener("error",e._onSensorError,!0),this._sensor.start()):oe.debug("LightSensor does not exist, not collecting")}},{key:"stopFeature",value:function(){this._sensor&&(this._sensor.removeEventListener("reading",this.onReadingSensorBoundble,!0),this._sensor.removeEventListener("error",e._onSensorError,!0),this._sensor.stop(),this._sensor=null)}},{key:"updateFeatureConfig",value:function(){this._eventThreshold=this._configurationRepository.get("lightSensorEventThreshold")?this._configurationRepository.get("lightSensorEventThreshold"):this._eventThreshold}}],[{key:"getDefaultSettings",value:function(){return fp}},{key:"_onSensorError",value:function(t){oe.debug("Error connecting LightSensor ".concat(t.error))}}])}(Co);function pp(t){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(t)}function yp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wp(n.key),n)}}function vp(t,e,r){return e=bp(e),function(t,e){if(e&&("object"==pp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mp()?Reflect.construct(e,r||[],bp(t).constructor):e.apply(t,r))}function mp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mp=function(){return!!t})()}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bp(t)}function gp(t,e){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gp(t,e)}function _p(t,e,r){return(e=wp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wp(t){var e=function(t,e){if("object"!=pp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pp(e)?e:e+""}var Sp={configKey:"isMouseEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!0,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},Ep={mousemove:0,mousedown:1,mouseup:2,click:3,dblclick:4,mouseleave:5,mouseenter:6,wheel:7,mouseout:8,mouseover:9},kp=["eventSequence","timestamp","eventType","isTrusted","elementHash","pageX","pageY","screenX","screenY","button","wheelDelta","clientX","clientY","eventDetail","buttonNew","relativeTime"],Pp=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_p(a=vp(this,e),"_lastButton",void 0),_p(a,"_getMouseEvent",(function(t){var e=t.which;"mouseup"===t.type?a._lastButton=e:"click"===t.type&&0===e&&(e=a._lastButton);var r=Ep[t.type];a._utils.isUndefinedNull(r)&&(r=-1);var n=t.deltaY||t.deltaX||t.deltaZ||t.wheelDelta||0,o=a.getTimestampFromEvent(t);a._dataQueue.addToQueue("mouse_events",[null,a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),a.getEventTimestamp(t),r,Oo[t.isTrusted],"mousemove"===t.type?0:a._elements.getElementHashFromEvent(t),a._getMouseCoordinates(t.pageX),a._getMouseCoordinates(t.pageY),a._getMouseCoordinates(t.screenX),a._getMouseCoordinates(t.screenY),null==e?-1:e,Math.round(n),t.clientX?Math.round(t.clientX):-1,t.clientY?Math.round(t.clientY):-1,t.detail||0,null===t.button||void 0===t.button?-1:t.button,o])})),a._utils=t,a._domUtils=r,a._elements=n,a._dataQueue=o,a._configurationRepository=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gp(t,e)}(e,t),function(t,e,r){return e&&yp(t.prototype,e),r&&yp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){var e=this;try{var r=t.getDocument();this._domUtils.addEventListener(r,"mousemove",this._getMouseEvent,!0),this._domUtils.addEventListener(r,"mousedown",this._getMouseEvent,!0),this._domUtils.addEventListener(r,"mouseup",this._getMouseEvent,!0),this._domUtils.addEventListener(r,"click",this._getMouseEvent,!0),this._domUtils.addEventListener(r,"dblclick",this._getMouseEvent,!0),this._isIE=!!r.documentMode||/edge/.test(window.navigator.userAgent.toLowerCase()),this._isIE?this._domUtils.onDocumentBody(t.Context,(function(){e._domUtils.addEventListener(r.body,"mouseleave",e._getMouseEvent),e._domUtils.addEventListener(r.body,"mouseenter",e._getMouseEvent)})):(this._domUtils.addEventListener(r,"mouseleave",this._getMouseEvent),this._domUtils.addEventListener(r,"mouseenter",this._getMouseEvent)),this._domUtils.addEventListener(r,"wheel",this._getMouseEvent,!0)}catch(t){oe.error("MouseEvents:startFeature failed. msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var e=t.getDocument();this._domUtils.removeEventListener(e,"mousemove",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mousedown",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"mouseup",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"click",this._getMouseEvent,!0),this._domUtils.removeEventListener(e,"dblclick",this._getMouseEvent,!0),this._isIE?(this._domUtils.removeEventListener(e.body,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e.body,"mouseenter",this._getMouseEvent)):(this._domUtils.removeEventListener(e,"mouseleave",this._getMouseEvent),this._domUtils.removeEventListener(e,"mouseenter",this._getMouseEvent)),this._domUtils.removeEventListener(e,"wheel",this._getMouseEvent,!0)}catch(t){oe.error("MouseEvents:stopFeature failed. msg: ".concat(t.message),t)}}},{key:"_getMouseCoordinates",value:function(t){return this._getConfigurationKey()?-1e3:t?Math.round(t):-1}},{key:"_getConfigurationKey",value:function(){return this._configurationRepository.get(et)}}],[{key:"getDefaultSettings",value:function(){return Sp}}])}(Co);function Tp(t){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(t)}function Cp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Op(n.key),n)}}function Op(t){var e=function(t,e){if("object"!=Tp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tp(e)?e:e+""}function Mp(t,e,r){return e=jp(e),function(t,e){if(e&&("object"==Tp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bp()?Reflect.construct(e,r||[],jp(t).constructor):e.apply(t,r))}function Bp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bp=function(){return!!t})()}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(t)}function xp(t,e){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xp(t,e)}var Lp={configKey:"isTabsEvents",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},Rp=0,Ap=1,Ip=2,Np=["eventSequence","timestamp","type","id","href","referrer","currentTabsList"],Dp=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mp(this,e))._utils=t,n._currState=null,n._dataQueue=r,n._tabData={id:"",openTabTS:0},n._onUnloadTabBinded=n._onUnloadTab.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xp(t,e)}(e,t),function(t,e,r){return e&&Cp(t.prototype,e),r&&Cp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){oe.info("Starting tab events feature"),this._initTabInfo(),window.addEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"stopFeature",value:function(){oe.info("Stopping tab events feature"),window.removeEventListener("beforeunload",this._onUnloadTabBinded)}},{key:"_initTabInfo",value:function(){var t=this._utils.StorageUtils.getFromLocalStorage("cdTabList");t||(t=[]);var e=Rp;this._tabData=this._utils.StorageUtils.getFromSessionStorage("cdTabData")||this._tabData.id,this._tabData||(this._updateTabData(),e=Ap);for(var r=-1,n=0,o=t.length;n<o;n++)if(t[n][0]===this._tabData.id){r=n;break}-1!==r&&r!==t.length||(t.push([this._tabData.id,this._tabData.openTabTS]),this._utils.StorageUtils.saveToLocalStorage("cdTabList",t),oe.debug("added tab to list. "+this._tabData.id+", tab index="+t.length));var i=this._utils.getDocUrl(),a=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),s=JSON.stringify(t);this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(Np,{eventSequence:a,timestamp:this._tabData.openTabTS,type:e,id:this._tabData.id||"",href:i||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:s||""}))}},{key:"_onUnloadTab",value:function(){var t=this._utils.StorageUtils.getFromLocalStorage("cdTabList");t||(t=[]);var e=this.getEventTimestamp(),r=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=this._utils.getDocUrl(),o=Ip,i=JSON.stringify(t);oe.debug("removing tab from list. id:".concat(this._tabData.id,", timestamp:").concat(e)),this._dataQueue.addToQueue("tab_events",this._utils.convertToArrayByMap(Np,{eventSequence:r,timestamp:e,type:o,id:this._tabData.id||"",href:n||"",referrer:this._utils.clearTextFromNumbers(document.referrer),currentTabsList:i||""}),!0,!0);for(var a=0,s=t.length;a<s;a++)if(t[a][0]===this._tabData.id){t.splice(a,1);break}this._utils.StorageUtils.saveToLocalStorage("cdTabList",t)}},{key:"_updateTabData",value:function(){this._tabData={},this._tabData={id:this._utils.generateUUID(),openTabTS:this.getEventTimestamp()},oe.debug("initialize tab data: id:".concat(this._tabData.id,", timestamp:").concat(this._tabData.openTabTS)),this._utils.StorageUtils.saveToSessionStorage("cdTabData",this._tabData)}}],[{key:"getDefaultSettings",value:function(){return Lp}}])}(Co);function Fp(t){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(t)}function Up(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qp(n.key),n)}}function Hp(t,e,r){return e=Wp(e),function(t,e){if(e&&("object"==Fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gp()?Reflect.construct(e,r||[],Wp(t).constructor):e.apply(t,r))}function Gp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gp=function(){return!!t})()}function Wp(t){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wp(t)}function Vp(t,e){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vp(t,e)}function Kp(t,e,r){return(e=Qp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qp(t){var e=function(t,e){if("object"!=Fp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fp(e)?e:e+""}var zp={configKey:"isLocationEvents",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!1,isFrameRelated:!1,runInSlave:!1,runInLean:!1,runInUns:!1,isRunning:!1,instance:null},qp=["eventSequence","timestamp","longitude","latitude","accuracy","speed","provider"],Yp=function(t){function e(t,r,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kp(o=Hp(this,e),"_subscribeForLocationEvents",(function(){o._unsubscribeFromLocationEvents(),o._watcherID=o._navigator.geolocation.watchPosition(o._onGeoLocationPositionEvent,o._onGeoLocationPositionError),o._clearLocationEventsTimeout(),o._locationEventsTimeoutID=setTimeout((function(){o._unsubscribeFromLocationEvents()}))})),Kp(o,"_unsubscribeFromLocationEvents",(function(){o._clearLocationEventsTimeout(),o._watcherID&&(o._navigator.geolocation.clearWatch(o._watcherID),o._watcherID=null)})),Kp(o,"_onGeoLocationPositionEvent",(function(t){o._sendData(t)})),Kp(o,"_onGeoLocationPositionError",(function(t){oe.warn("Failed getting geolocation with code ".concat(t.code,". ").concat(t.message))})),o._configurationRepository=n,o._locationEventsTimeoutMsec=o._configurationRepository.get(N),o._utils=r,o._dataQ=t,o._navigator=i,o._watcherID=null,o._locationEventsTimeoutID=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vp(t,e)}(e,t),function(t,e,r){return e&&Up(t.prototype,e),r&&Up(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._subscribeForLocationIfPermissionGranted()}},{key:"stopFeature",value:function(){this._unsubscribeFromLocationEvents()}},{key:"updateFeatureConfig",value:function(){try{this._configurationRepository.get(N)!==this._locationEventsTimeoutMsec&&(this._locationEventsTimeoutMsec=this._configurationRepository.get(N))}catch(t){oe.error("LocationEvents: updateFeatureConfig failed, msg: ".concat(t.message),t)}}},{key:"_subscribeForLocationIfPermissionGranted",value:function(){var t=this;this._navigator.permissions&&this._navigator.permissions.query&&this._navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?t._subscribeForLocationEvents():oe.info("location permission is denied. Location data will not be collected")})).catch((function(t){oe.error("Failed querying for geolocation permission. ".concat(t.message))}))}},{key:"_clearLocationEventsTimeout",value:function(){this._locationEventsTimeoutID&&clearTimeout(this._locationEventsTimeoutID),this._locationEventsTimeoutID=null}},{key:"_sendData",value:function(t){var e=t.coords,r=this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),n=this.getEventTimestamp();this._dataQ.addToQueue("location_events",this._utils.convertToArrayByMap(qp,{eventSequence:r,timestamp:n,longitude:e.longitude||-1,latitude:e.latitude||-1,accuracy:e.accuracy||-1,speed:e.speed||-1,provider:""}))}}],[{key:"getDefaultSettings",value:function(){return zp}}])}(Co);function Jp(t){return Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(t)}function Xp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iy(n.key),n)}}function Zp(t,e,r){return e=ry(e),function(t,e){if(e&&("object"==Jp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$p()?Reflect.construct(e,r||[],ry(t).constructor):e.apply(t,r))}function $p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($p=function(){return!!t})()}function ty(t,e,r,n){var o=ey(ry(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function ey(){return ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ry(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ey.apply(null,arguments)}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ry(t)}function ny(t,e){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ny(t,e)}function oy(t,e,r){return(e=iy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iy(t){var e=function(t,e){if("object"!=Jp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jp(e)?e:e+""}var ay=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oy(a=Zp(this,e),"_collectEventElement",(function(t){var e=a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=a.getEventTimestamp(),n=a.getTimestampFromEvent(t),o=a._maskingService.maskText(t.elementValue,t.elementId),i=Ef[t.eventType];o&&o.length>a._maxElemValLength&&(o=""),a._dataQueue.addToQueue("element_events",a._utils.convertToArrayByMap(kf,{eventSequence:e,timestamp:r,eventType:i,isTrusted:-1,elementHash:t.hashCode,length:o.length,elementValues:o,selected:-1,hashedValue:"",relativeTime:n}))})),oy(a,"_collectElement",(function(t){if(!a._utils.isUndefinedNull(t.hashCode)&&!a._elementWMap.has(t.hashCode)){a._elementWMap.add(t.hashCode);var e=a._maskingService.maskAbsoluteIfRequired(t.elementId,t.elementId);a._dataQueue.addToQueue("elements",[a._contextMgr.contextHash,t.hashCode,"",e||"","",t.widgetType||"",t.dxPosition||0,t.dyPosition||0,t.widthElement||0,t.heightElement||0,"","","","","","",0,t.timeStamp,"","",""])}})),a._msgBus=t,a._dataQueue=r,a._utils=n,a._contextMgr=o,a._maskingService=i,a._elementWMap=new Set,a._maxElemValLength=200,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ny(t,e)}(e,t),function(t,e,r){return e&&Xp(t.prototype,e),r&&Xp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){ty(e,"startFeature",this,3)([]),this._msgBus.subscribe(go.ElementEventsEvent,this._collectEventElement),this._msgBus.subscribe(go.ElementsEvent,this._collectElement)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(go.ElementEventsEvent,this._collectEventElement),this._msgBus.unsubscribe(go.ElementsEvent,this._collectElement),ty(e,"stopFeature",this,3)([])}}])}(Co);function sy(t){return sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(t)}function uy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yy(n.key),n)}}function cy(t,e,r){return e=dy(e),function(t,e){if(e&&("object"==sy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ly()?Reflect.construct(e,r||[],dy(t).constructor):e.apply(t,r))}function ly(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ly=function(){return!!t})()}function fy(t,e,r,n){var o=hy(dy(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function hy(){return hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=dy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},hy.apply(null,arguments)}function dy(t){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dy(t)}function py(t,e){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},py(t,e)}function yy(t){var e=function(t,e){if("object"!=sy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sy(e)?e:e+""}var vy=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=yy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(i=cy(this,e),"_onKeyEvent",(function(t){var e=i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),r=i.getEventTimestamp(),n=t.char,o=i._maskingService.maskKey(n,"",t.elementId),a=o.key.length>1?"":o.key,s=i.getTimestampFromEvent(t);i._dataQueue.addToQueue("key_events",i._utils.convertToArrayByMap(ri,{eventSequence:e,timestamp:r,eventType:2,isTrusted:-1,elementHash:t.hashCode,charCode:o.charCode,character:a,keyComboType:-1,isCtrl:!1,isShift:!1,isAlt:!1,isMetaKey:!1,keyLocation:0,code:o.code||"",key:o.key||"",isRepeat:!1,keyRegion:"-1",relativeTime:s,isSameKey:-1}))})),i._msgBus=t,i._dataQueue=r,i._utils=n,i._maskingService=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&py(t,e)}(e,t),function(t,e,r){return e&&uy(t.prototype,e),r&&uy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){fy(e,"startFeature",this,3)([]),this._msgBus.subscribe(go.KeyEvent,this._onKeyEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(go.KeyEvent,this._onKeyEvent),fy(e,"stopFeature",this,3)([])}}])}(Co);function my(t){return my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(t)}function by(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Py(n.key),n)}}function gy(t,e,r){return e=Ey(e),function(t,e){if(e&&("object"==my(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_y()?Reflect.construct(e,r||[],Ey(t).constructor):e.apply(t,r))}function _y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_y=function(){return!!t})()}function wy(t,e,r,n){var o=Sy(Ey(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function Sy(){return Sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ey(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Sy.apply(null,arguments)}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ey(t)}function ky(t,e){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ky(t,e)}function Py(t){var e=function(t,e){if("object"!=my(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=my(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==my(e)?e:e+""}var Ty={onTapDown:0,onTapUp:2},Cy=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=Py(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(o=gy(this,e),"_onTouchEvent",(function(t){var e=Ty[t.touchState];e!==Ty.onTapDown&&e!==Ty.onTapUp||o._msgBus.publish(Bn,{action:e});var r=o.getEventTimestamp(),n=o._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=o.getTimestampFromEvent(t);o._utils.isUndefinedNull(e)&&(e=-1),o._dataQueue.addToQueue("touch_events",o._utils.convertToArrayByMap(Fo,{eventSequence:n,timestamp:r,eventType:e,isTrusted:-1,elementHash:t.hashCode,clientX:t.x?Math.round(t.x):0,clientY:t.y?Math.round(t.y):0,touchIndex:t.pointer,touchSizeMajor:t.radiusMajor?2*t.radiusMajor:0,touchSizeMinor:t.radiusMinor?2*t.radiusMinor:0,pageX:0,pageY:0,screenX:0,screenY:0,relativeTime:i,touchPressure:t.pressure||-1}))})),o._msgBus=t,o._dataQueue=r,o._utils=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ky(t,e)}(e,t),function(t,e,r){return e&&by(t.prototype,e),r&&by(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){wy(e,"startFeature",this,3)([]),this._msgBus.subscribe(go.TouchEvent,this._onTouchEvent)}},{key:"stopFeature",value:function(){this._msgBus.unsubscribe(go.TouchEvent,this._onTouchEvent),wy(e,"stopFeature",this,3)([])}}])}(Co);function Oy(t){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(t)}function My(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iy(n.key),n)}}function By(t,e,r){return e=Ry(e),function(t,e){if(e&&("object"==Oy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jy()?Reflect.construct(e,r||[],Ry(t).constructor):e.apply(t,r))}function jy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jy=function(){return!!t})()}function xy(t,e,r,n){var o=Ly(Ry(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function Ly(){return Ly="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ry(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ly.apply(null,arguments)}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ry(t)}function Ay(t,e){return Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ay(t,e)}function Iy(t){var e=function(t,e){if("object"!=Oy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oy(e)?e:e+""}var Ny={mousemove:0,onTapDown:1,onTapUp:2},Dy=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=Iy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(a=By(this,e),"_onMouseEvent",(function(t){var e=Ny[t.type],r=a.getTimestampFromEvent(t);a._dataQueue.addToQueue("mouse_events",a._utils.convertToArrayByMap(kp,{eventSequence:a._utils.StorageUtils.getAndUpdateEventSequenceNumber(),timestamp:a.getEventTimestamp(),eventType:e,isTrusted:"mousemove"===t.type?Oo[t.isTrusted]:-1,elementHash:"mousemove"===t.type?0:t.hashCode,pageX:"mousemove"===t.type?a._getMouseCoordinates(t.pageX):0,pageY:"mousemove"===t.type?a._getMouseCoordinates(t.pageY):0,screenX:a._getMouseCoordinates(t.screenX),screenY:a._getMouseCoordinates(t.screenY),button:0,wheelDelta:0,clientX:"mousemove"===t.type?Math.round(t.clientX):0,clientY:"mousemove"===t.type?Math.round(t.clientY):0,eventDetail:"mousemove"===t.type&&t.detail||0,buttonNew:0,relativeTime:r}))})),a._msgBus=t,a._dataQueue=r,a._utils=n,a._configurationRepository=o,a._domUtils=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ay(t,e)}(e,t),function(t,e,r){return e&&My(t.prototype,e),r&&My(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(t){xy(e,"startFeature",this,3)([]);try{var r=t.getDocument();this._domUtils.addEventListener(r,"mousemove",this._onMouseEvent,!0),this._msgBus.subscribe(go.MouseEvent,this._onMouseEvent)}catch(t){oe.error("MouseEvents:startFeature failed. msg: ".concat(t.message),t)}}},{key:"stopFeature",value:function(t){try{var r=t.getDocument();this._domUtils.removeEventListener(r,"mousemove",this._onMouseEvent,!0),this._msgBus.unsubscribe(go.MouseEvent,this._onMouseEvent)}catch(t){oe.error("MouseEvents:stopFeature failed. msg: ".concat(t.message),t)}xy(e,"stopFeature",this,3)([])}},{key:"_getMouseCoordinates",value:function(t){return this._getConfigurationKey()?-1e3:t?Math.round(t):-1}},{key:"_getConfigurationKey",value:function(){return this._configurationRepository.get(et)}}])}(Co);function Fy(t){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(t)}function Uy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hy(n.key),n)}}function Hy(t){var e=function(t,e){if("object"!=Fy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fy(e)?e:e+""}var Gy=function(){return function(t,e,r){return e&&Uy(t.prototype,e),r&&Uy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"validateParams",value:function(){throw new Error("_validateParams should be overridden")}},{key:"buildQueueMessage",value:function(){throw new Error("buildQueueMessage should be overridden")}},{key:"validateMessage",value:function(){throw new Error("_validateMessage should be overridden")}},{key:"getName",value:function(){throw new Error("_getName should be overridden")}}])}();function Wy(t){return Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wy(t)}function Vy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ky(n.key),n)}}function Ky(t){var e=function(t,e){if("object"!=Wy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wy(e)?e:e+""}function Qy(t,e,r){return e=qy(e),function(t,e){if(e&&("object"==Wy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zy()?Reflect.construct(e,r||[],qy(t).constructor):e.apply(t,r))}function zy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zy=function(){return!!t})()}function qy(t){return qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qy(t)}function Yy(t,e){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yy(t,e)}var Jy=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Qy(this,e)).validateParams(t,r,n,o,i,a,s),u.isChrome=t,u.isFirefox=r,u.isEdge=n,u.isIE=o,u.isSafari=i,u.isOpera=a,u.isBlink=s,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yy(t,e)}(e,t),function(t,e,r){return e&&Vy(t.prototype,e),r&&Vy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,r,n,o,i,a){"boolean"==typeof t&&"boolean"==typeof e&&"boolean"==typeof r&&"boolean"==typeof n&&"boolean"==typeof o&&"boolean"==typeof i&&"boolean"==typeof a||oe.warn("wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: ".concat(Wy(t),"},\n            isFirefox : {expected: boolean, received: ").concat(Wy(e),"},isEdge : {expected: boolean, received: ").concat(Wy(r),"},isIE : {expected: boolean, received: ").concat(Wy(n),"},\n            isSafari : {expected: boolean, received: ").concat(Wy(o),"},isOpera : {expected: boolean, received: ").concat(Wy(i),"} ,isBlink : {expected: boolean, received: ").concat(Wy(a),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.isChrome,this.isFirefox,this.isEdge,this.isIE,this.isSafari,this.isOpera,this.isBlink]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&7===t[1].length||oe.warn("BrowserDetect - Contract verification failed")}},{key:"getName",value:function(){return"browser_spoofing"}}])}(Gy);function Xy(t){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(t)}function Zy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$y(n.key),n)}}function $y(t){var e=function(t,e){if("object"!=Xy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xy(e)?e:e+""}function tv(t,e,r){return e=rv(e),function(t,e){if(e&&("object"==Xy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ev()?Reflect.construct(e,r||[],rv(t).constructor):e.apply(t,r))}function ev(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ev=function(){return!!t})()}function rv(t){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rv(t)}function nv(t,e){return nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nv(t,e)}var ov={configKey:"isBrowserDetect",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},iv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tv(this,e))._dataQ=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nv(t,e)}(e,t),function(t,e,r){return e&&Zy(t.prototype,e),r&&Zy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=!1,e=!1,r=!1,n=!1,o=!1,i=!1,a=!1;if(this.doesUserAagentDataExists())navigator.userAgentData.brands.forEach((function(n){"Google Chrome"===n.brand&&(t=!0),"Opera"===n.brand&&(e=!0),"Microsoft Edge"===n.brand&&(i=!0),"Firefox"===n.brand&&(r=!0)})),navigator.userAgentData.platform&&(n="macOS"===navigator.userAgentData.platform&&!t&&!i&&!e&&/Safari/.test(navigator.userAgent)),a=t||e;else{var s=navigator.userAgent;e=/OPR|Opera/.test(s),r=/Firefox/.test(s),n=/Safari/.test(s)&&/Apple Computer/.test(navigator.vendor),o=/MSIE|Trident/.test(s),i=/Edg/.test(s),a=((t=/Chrome/.test(s)&&!i&&!e&&/Google Inc/.test(navigator.vendor))||e)&&!!window.CSS}var u=new Jy(t,r,i,o,n,e,a).buildQueueMessage();this._dataQ.addToQueue("static_fields",u,!1)}},{key:"doesUserAagentDataExists",value:function(){return navigator.userAgentData&&navigator.userAgentData.brands&&navigator.userAgentData.brands.length>0}}],[{key:"getDefaultSettings",value:function(){return ov}}])}(Co);function av(t){return av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(t)}function sv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uv(n.key),n)}}function uv(t){var e=function(t,e){if("object"!=av(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=av(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==av(e)?e:e+""}function cv(t,e,r){return e=fv(e),function(t,e){if(e&&("object"==av(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lv()?Reflect.construct(e,r||[],fv(t).constructor):e.apply(t,r))}function lv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lv=function(){return!!t})()}function fv(t){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fv(t)}function hv(t,e){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hv(t,e)}var dv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cv(this,e)).validateParams(t),r.scriptVersion=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hv(t,e)}(e,t),function(t,e,r){return e&&sv(t.prototype,e),r&&sv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn(" wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: ".concat(av(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.scriptVersion];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("version_client, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"version_client"}}])}(Gy);function pv(t){return pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(t)}function yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vv(n.key),n)}}function vv(t){var e=function(t,e){if("object"!=pv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pv(e)?e:e+""}function mv(t,e,r){return e=gv(e),function(t,e){if(e&&("object"==pv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bv()?Reflect.construct(e,r||[],gv(t).constructor):e.apply(t,r))}function bv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bv=function(){return!!t})()}function gv(t){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gv(t)}function _v(t,e){return _v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_v(t,e)}var wv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mv(this,e)).validateParams(t),r.source=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_v(t,e)}(e,t),function(t,e,r){return e&&yv(t.prototype,e),r&&yv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn(" wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: ".concat(pv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.source];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("device_source, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_source"}}])}(Gy);function Sv(t){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(t)}function Ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kv(n.key),n)}}function kv(t){var e=function(t,e){if("object"!=Sv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sv(e)?e:e+""}function Pv(t,e,r){return e=Cv(e),function(t,e){if(e&&("object"==Sv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tv()?Reflect.construct(e,r||[],Cv(t).constructor):e.apply(t,r))}function Tv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tv=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cv(t)}function Ov(t,e){return Ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ov(t,e)}var Mv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pv(this,e)).validateParams(t),r.platform=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ov(t,e)}(e,t),function(t,e,r){return e&&Ev(t.prototype,e),r&&Ev(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn(" wrong type in OS, BrowserProps parameters. platform : {expected: string, received: ".concat(Sv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.platform];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("os, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os"}}])}(Gy);function Bv(t){return Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(t)}function jv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xv(n.key),n)}}function xv(t){var e=function(t,e){if("object"!=Bv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bv(e)?e:e+""}function Lv(t,e,r){return e=Av(e),function(t,e){if(e&&("object"==Bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rv()?Reflect.construct(e,r||[],Av(t).constructor):e.apply(t,r))}function Rv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rv=function(){return!!t})()}function Av(t){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Av(t)}function Iv(t,e){return Iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Iv(t,e)}var Nv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lv(this,e)).validateParams(t),r.version=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iv(t,e)}(e,t),function(t,e,r){return e&&jv(t.prototype,e),r&&jv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||null===t||oe.warn(" wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: ".concat(Bv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.version];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&("number"==typeof t[1]||null===t[1])||oe.warn("os_version, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_version"}}])}(Gy);function Dv(t){return Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(t)}function Fv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uv(n.key),n)}}function Uv(t){var e=function(t,e){if("object"!=Dv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dv(e)?e:e+""}function Hv(t,e,r){return e=Wv(e),function(t,e){if(e&&("object"==Dv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gv()?Reflect.construct(e,r||[],Wv(t).constructor):e.apply(t,r))}function Gv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gv=function(){return!!t})()}function Wv(t){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wv(t)}function Vv(t,e){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vv(t,e)}var Kv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hv(this,e)).validateParams(t),r.osName=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vv(t,e)}(e,t),function(t,e,r){return e&&Fv(t.prototype,e),r&&Fv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn(" wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: ".concat(Dv(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.osName];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("os_family, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"os_family"}}])}(Gy);function Qv(t){return Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(t)}function zv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qv(n.key),n)}}function qv(t){var e=function(t,e){if("object"!=Qv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qv(e)?e:e+""}function Yv(t,e,r){return e=Xv(e),function(t,e){if(e&&("object"==Qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jv()?Reflect.construct(e,r||[],Xv(t).constructor):e.apply(t,r))}function Jv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jv=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xv(t)}function Zv(t,e){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zv(t,e)}var $v=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yv(this,e)).validateParams(t,r),n.pointer=t,n.hover=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zv(t,e)}(e,t),function(t,e,r){return e&&zv(t.prototype,e),r&&zv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){!("number"!=typeof t||1!==t&&2!==t&&3!==t&&4!==t&&5!==t||"number"!=typeof e||1!==e&&2!==e&&3!==e&&4!==e&&5!==e)||oe.warn(" wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: ".concat(Qv(t),"}, hover : {expected: number, received: ").concat(Qv(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.pointer,this.hover]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&2===t[1].length||oe.warn("input_mech, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"input_mech"}}])}(Gy);function tm(t){return tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(t)}function em(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rm(n.key),n)}}function rm(t){var e=function(t,e){if("object"!=tm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tm(e)?e:e+""}function nm(t,e,r){return e=im(e),function(t,e){if(e&&("object"==tm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,om()?Reflect.construct(e,r||[],im(t).constructor):e.apply(t,r))}function om(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(om=function(){return!!t})()}function im(t){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},im(t)}function am(t,e){return am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},am(t,e)}var sm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nm(this,e)).validateParams(t),r.hardwareConcurrency=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&am(t,e)}(e,t),function(t,e,r){return e&&em(t.prototype,e),r&&em(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||oe.warn("wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: ".concat(tm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.hardwareConcurrency];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("cores,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cores"}}])}(Gy);function um(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return cm(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cm(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function cm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function lm(t){return lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(t)}function fm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hm(n.key),n)}}function hm(t){var e=function(t,e){if("object"!=lm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lm(e)?e:e+""}function dm(t,e,r){return e=ym(e),function(t,e){if(e&&("object"==lm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pm()?Reflect.construct(e,r||[],ym(t).constructor):e.apply(t,r))}function pm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pm=function(){return!!t})()}function ym(t){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ym(t)}function vm(t,e){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vm(t,e)}var mm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=dm(this,e)).validateParams(t),r.plugins=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vm(t,e)}(e,t),function(t,e,r){return e&&fm(t.prototype,e),r&&fm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachPluginIsValid(t)||oe.warn(" wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: ".concat(lm(t),"}"))}},{key:"_eachPluginIsValid",value:function(t){var e,r=!0,n=!0,o=!0,i=um(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var s,u=um(a);try{for(u.s();!(s=u.n()).done;){"string"!=typeof s.value&&(n=!1)}}catch(t){u.e(t)}finally{u.f()}}else r=!1}}catch(t){i.e(t)}finally{i.f()}return r&&o&&n}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.plugins];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||oe.warn("plugins, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"plugins"}}])}(Gy);function bm(t){return bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(t)}function gm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_m(n.key),n)}}function _m(t){var e=function(t,e){if("object"!=bm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bm(e)?e:e+""}function wm(t,e,r){return e=Em(e),function(t,e){if(e&&("object"==bm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sm()?Reflect.construct(e,r||[],Em(t).constructor):e.apply(t,r))}function Sm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sm=function(){return!!t})()}function Em(t){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Em(t)}function km(t,e){return km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},km(t,e)}var Pm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wm(this,e)).validateParams(t),r.userAgent=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&km(t,e)}(e,t),function(t,e,r){return e&&gm(t.prototype,e),r&&gm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn("wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: ".concat(bm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.userAgent];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("js_ua, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"js_ua"}}])}(Gy);function Tm(t){return Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(t)}function Cm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Om(n.key),n)}}function Om(t){var e=function(t,e){if("object"!=Tm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tm(e)?e:e+""}function Mm(t,e,r){return e=jm(e),function(t,e){if(e&&("object"==Tm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bm()?Reflect.construct(e,r||[],jm(t).constructor):e.apply(t,r))}function Bm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bm=function(){return!!t})()}function jm(t){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jm(t)}function xm(t,e){return xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xm(t,e)}var Lm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mm(this,e)).validateParams(t),r.tz=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xm(t,e)}(e,t),function(t,e,r){return e&&Cm(t.prototype,e),r&&Cm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||oe.warn("wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: ".concat(Tm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.tz];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("time_zone, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"time_zone"}}])}(Gy);function Rm(t){return Rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(t)}function Am(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Im(n.key),n)}}function Im(t){var e=function(t,e){if("object"!=Rm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rm(e)?e:e+""}function Nm(t,e,r){return e=Fm(e),function(t,e){if(e&&("object"==Rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dm()?Reflect.construct(e,r||[],Fm(t).constructor):e.apply(t,r))}function Dm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dm=function(){return!!t})()}function Fm(t){return Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fm(t)}function Um(t,e){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Um(t,e)}var Hm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nm(this,e)).validateParams(t),r.isCookie=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Um(t,e)}(e,t),function(t,e,r){return e&&Am(t.prototype,e),r&&Am(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"boolean"==typeof t||oe.warn("wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: ".concat(Rm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.isCookie];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"boolean"==typeof t[1]||oe.warn("CookieEnabled,BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"cookie_enabled"}}])}(Gy);function Gm(t){return Gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(t)}function Wm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vm(n.key),n)}}function Vm(t){var e=function(t,e){if("object"!=Gm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gm(e)?e:e+""}function Km(t,e,r){return e=zm(e),function(t,e){if(e&&("object"==Gm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qm()?Reflect.construct(e,r||[],zm(t).constructor):e.apply(t,r))}function Qm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qm=function(){return!!t})()}function zm(t){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zm(t)}function qm(t,e){return qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qm(t,e)}var Ym=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Km(this,e)).validateParams(t),r.memory=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qm(t,e)}(e,t),function(t,e,r){return e&&Wm(t.prototype,e),r&&Wm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t&&(.25===t||.5===t||1===t||2===t||4===t||8===t||0===t)||oe.warn("wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:".concat(Gm(t)," value:").concat(t,"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.memory];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("device_memory, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"device_memory"}}])}(Gy);function Jm(t){return Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(t)}function Xm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zm(n.key),n)}}function Zm(t){var e=function(t,e){if("object"!=Jm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jm(e)?e:e+""}function $m(t,e,r){return e=eb(e),function(t,e){if(e&&("object"==Jm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tb()?Reflect.construct(e,r||[],eb(t).constructor):e.apply(t,r))}function tb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tb=function(){return!!t})()}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eb(t)}function rb(t,e){return rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rb(t,e)}var nb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$m(this,e)).validateParams(t),r.language=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rb(t,e)}(e,t),function(t,e,r){return e&&Xm(t.prototype,e),r&&Xm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn(" wrong type in Lang, BrowserProps parameters. language : {expected: string, received: ".concat(Jm(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.language];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("main_lang, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"main_lang"}}])}(Gy);function ob(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ib(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ib(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ib(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ab(t){return ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ab(t)}function sb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ub(n.key),n)}}function ub(t){var e=function(t,e){if("object"!=ab(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ab(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ab(e)?e:e+""}function cb(t,e,r){return e=fb(e),function(t,e){if(e&&("object"==ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lb()?Reflect.construct(e,r||[],fb(t).constructor):e.apply(t,r))}function lb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lb=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fb(t)}function hb(t,e){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hb(t,e)}var db=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cb(this,e)).validateParams(t),r.languagesList=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hb(t,e)}(e,t),function(t,e,r){return e&&sb(t.prototype,e),r&&sb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachLangIsValid(t)||oe.warn(" wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: ".concat(ab(t),"}"))}},{key:"_eachLangIsValid",value:function(t){var e,r=!0,n=ob(t);try{for(n.s();!(e=n.n()).done;){"string"!=typeof e.value&&(r=!1)}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.languagesList];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||oe.warn("languages, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"languages"}}])}(Gy);function pb(t){return pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pb(t)}function yb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vb(n.key),n)}}function vb(t){var e=function(t,e){if("object"!=pb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pb(e)?e:e+""}function mb(t,e,r){return e=gb(e),function(t,e){if(e&&("object"==pb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bb()?Reflect.construct(e,r||[],gb(t).constructor):e.apply(t,r))}function bb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bb=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gb(t)}function _b(t,e){return _b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_b(t,e)}var wb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mb(this,e)).validateParams(t),r.buildID=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_b(t,e)}(e,t),function(t,e,r){return e&&yb(t.prototype,e),r&&yb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){void 0!==t&&"string"==typeof t||oe.warn("The buildID is either undefined or of a wrong type. Expected string, received: ".concat(pb(t)))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.buildID];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("navigator_build_id, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_build_id"}}])}(Gy);function Sb(t){return Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(t)}function Eb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kb(n.key),n)}}function kb(t){var e=function(t,e){if("object"!=Sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sb(e)?e:e+""}function Pb(t,e,r){return e=Cb(e),function(t,e){if(e&&("object"==Sb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tb()?Reflect.construct(e,r||[],Cb(t).constructor):e.apply(t,r))}function Tb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tb=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cb(t)}function Ob(t,e){return Ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ob(t,e)}var Mb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pb(this,e)).validateParams(t),r.maxTouchPoints=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ob(t,e)}(e,t),function(t,e,r){return e&&Eb(t.prototype,e),r&&Eb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){void 0!==t&&"number"==typeof t||oe.warn("wrong type in MaxTouchPointsContract parameters. Expected: number, received: ".concat(Sb(t)))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.maxTouchPoints];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("navigator_max_touch_points, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"navigator_max_touch_points"}}])}(Gy);function Bb(t){return Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bb(t)}function jb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xb(n.key),n)}}function xb(t){var e=function(t,e){if("object"!=Bb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bb(e)?e:e+""}function Lb(t,e,r){return e=Ab(e),function(t,e){if(e&&("object"==Bb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rb()?Reflect.construct(e,r||[],Ab(t).constructor):e.apply(t,r))}function Rb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rb=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ab(t)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ib(t,e)}var Nb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lb(this,e)).validateParams(t),r.math=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}(e,t),function(t,e,r){return e&&jb(t.prototype,e),r&&jb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn("wrong type in MathDetect parameters. renderer: {expected: string, received: ".concat(Bb(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.math];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("MathDetect - Contract verification failed")}},{key:"getName",value:function(){return"math_detect"}}])}(Gy);function Db(t){return Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Db(t)}function Fb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ub(n.key),n)}}function Ub(t){var e=function(t,e){if("object"!=Db(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Db(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Db(e)?e:e+""}function Hb(t,e,r){return e=Wb(e),function(t,e){if(e&&("object"==Db(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gb()?Reflect.construct(e,r||[],Wb(t).constructor):e.apply(t,r))}function Gb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gb=function(){return!!t})()}function Wb(t){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wb(t)}function Vb(t,e){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vb(t,e)}var Kb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hb(this,e)).validateParams(t),r.browserDisplay=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vb(t,e)}(e,t),function(t,e,r){return e&&Fb(t.prototype,e),r&&Fb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn("wrong type in BrowserDisplay, BrowserProps parameters. BrowserDisplay : {expected: string, received: ".concat(Db(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.browserDisplay];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("TransparencyReduced, BrowserPropsContract - Contract verification failed")}},{key:"getName",value:function(){return"browser_display_detect"}}])}(Gy);function Qb(t){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qb(t)}function zb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qb(n.key),n)}}function qb(t){var e=function(t,e){if("object"!=Qb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qb(e)?e:e+""}function Yb(t,e,r){return e=Xb(e),function(t,e){if(e&&("object"==Qb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jb()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function Jb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jb=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xb(t)}function Zb(t,e){return Zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zb(t,e)}var $b={configKey:"collectBrowserProps",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},tg=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Yb(this,e))._dataQ=t,i._pointerHoverDetector=r,i._utils=n,i._configurationRepository=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zb(t,e)}(e,t),function(t,e,r){return e&&zb(t.prototype,e),r&&zb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;oe.info("Collecting Browser Props");var r=new dv(this._utils.scriptVersion).buildQueueMessage();this._dataQ.addToQueue("static_fields",r,!1);var n=new wv("js").buildQueueMessage();this._dataQ.addToQueue("static_fields",n,!1),oe.info("SDK Version is ".concat(this._utils.scriptVersion));var o=e.getLanguage();if(o){this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(oe.debug("Hashing language field according to configuration"),o=this._utils.getHash(o).toString());var i=new nb(o).buildQueueMessage();this._dataQ.addToQueue("static_fields",i,!1)}var a=new Mv(e.getAvailablePlatform(window.navigator)).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1);var s=e.getOperatingSystem(),u=new Nv(s.version).buildQueueMessage();this._dataQ.addToQueue("static_fields",u,!1);var c=new Kv(s.name).buildQueueMessage();this._dataQ.addToQueue("static_fields",c,!1);var l=this._pointerHoverDetector.getPointerHover(),f=new $v(l.pointer,l.hover).buildQueueMessage();this._dataQ.addToQueue("static_fields",f,!1);var h=new sm(window.navigator.hardwareConcurrency||0).buildQueueMessage();if(this._dataQ.addToQueue("static_fields",h,!1),navigator.languages){var d=navigator.languages;this._configurationRepository.get("browserPropsShouldHashLanguageField")&&(oe.debug("Hashing languages field according to configuration"),d=Array.from(d,(function(e){return t._utils.getHash(e).toString()})));var p=new db(d).buildQueueMessage();this._dataQ.addToQueue("static_fields",p,!1)}var y=e.getPlugins();if(y&&y.length>0){var v=new mm(y).buildQueueMessage();this._dataQ.addToQueue("static_fields",v,!1)}var m=new Pm(navigator.userAgent).buildQueueMessage();this._dataQ.addToQueue("static_fields",m,!1);var b=-1*(new Date).getTimezoneOffset(),g=new Lm(b).buildQueueMessage();this._dataQ.addToQueue("static_fields",g,!1);var _=e.checkCookie(),w=new Hm(_).buildQueueMessage();this._dataQ.addToQueue("static_fields",w,!1);var S=navigator.deviceMemory||0,E=new Ym(S).buildQueueMessage();this._dataQ.addToQueue("static_fields",E,!1);var k=navigator.buildID;if(k){var P=new wb(k).buildQueueMessage();this._dataQ.addToQueue("static_fields",P,!1)}var T=navigator.maxTouchPoints,C=new Mb(T).buildQueueMessage();this._dataQ.addToQueue("static_fields",C,!1);var O="".concat(e.isTransparencyReduced(),",\n        ").concat(e.isMotionReduced(),",\n        ").concat(e.getColorGamut(),",\n        ").concat(e.areColorsForced(),",\n        ").concat(e.areColorsInverted(),",\n        ").concat(e.isHDR(),",\n        ").concat(e.getMonochromeDepth()),M=new Kb(O).buildQueueMessage();this._dataQ.addToQueue("static_fields",M,!1);var B=e.getMathFingerprint(),j=new Nb(B).buildQueueMessage();this._dataQ.addToQueue("static_fields",j,!1),oe.info("Browser Props collected")}}],[{key:"getDefaultSettings",value:function(){return $b}},{key:"getLanguage",value:function(){if(navigator){if(navigator.language)return navigator.language;if(navigator.userLanguage)return navigator.userLanguage}}},{key:"getMonochromeDepth",value:function(){if(matchMedia("(min-monochrome: 0)").matches)for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t}},{key:"isHDR",value:function(){var t=function(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches};return t("high")?"high":t("standard")?"standard":"undefined"}},{key:"areColorsInverted",value:function(){var t=function(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches};return t("inverted")?"inverted":t("none")?"none":"undefined"}},{key:"areColorsForced",value:function(){var t=function(t){return matchMedia("(forced-colors: ".concat(t,")")).matches};return t("active")?"active":t("none")?"none":"undefined"}},{key:"getColorGamut",value:function(){for(var t=0,e=["rec2020","p3","srgb"];t<e.length;t++){var r=e[t];if(matchMedia("(color-gamut: ".concat(r,")")).matches)return r}return"undefined"}},{key:"isMotionReduced",value:function(){var t=function(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches};return t("reduce")?"reduce":t("no-preference")?"no-preference":"undefined"}},{key:"isTransparencyReduced",value:function(){var t=function(t){return matchMedia("(prefers-reduced-transparency: ".concat(t,")")).matches};return t("reduce")?"reduce":t("no-preference")?"no-preference":"undefined"}},{key:"getMathFingerprint",value:function(){return[Math.acos(.12312423423423424),Math.acosh(1e308),Math.asin(.12312423423423424),Math.asinh(1),Math.atan(.5),Math.atanh(.5),Math.sin(-1e300),Math.sinh(1),Math.cos(10.000000000123),Math.cosh(1),Math.tan(-1e300),Math.tanh(1),Math.exp(1),Math.expm1(1),Math.log1p(10),Math.pow(Math.PI,-100)].join("|")}},{key:"getPlugins",value:function(){try{var t=[];if(window.navigator.plugins&&window.navigator.plugins.length>0)for(var r=0,n=window.navigator.plugins.length;r<n;r++)t.push([window.navigator.plugins[r].name,window.navigator.plugins[r].filename,window.navigator.plugins[r].description,window.navigator.plugins[r].version?window.navigator.plugins[r].version:""]);else if(window.navigator.mimeTypes&&window.navigator.mimeTypes.length>0)for(var o=0;o<window.navigator.mimeTypes.length;o++)t.push([window.navigator.mimeTypes[o].type,"",window.navigator.mimeTypes[o].description,""]);var i=e.isActiveXAndFlashEnabled;return e.augmentWithFlashInIE(t,window.navigator.plugins,i),t}catch(t){oe.warn("getPlugins error: ".concat(t.message),t)}}},{key:"checkCookie",value:function(){var t=navigator.cookieEnabled;return t||(this._utils.StorageUtils.setCookie("testcookie","1",6e4),t=-1!==document.cookie.indexOf("testcookie")),t}},{key:"getOperatingSystem",value:function(){for(var t,r,n=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],o=[e.getAvailablePlatform(window.navigator),navigator.userAgent].join(" "),i="",a="Unknown",s=0;s<n.length;s++)if(new RegExp(n[s].value,"i").test(o)){if(t=new RegExp(n[s].version+"[- /:;]([\\d._]+)","i"),r=o.match(t)){r[1]&&(r=r[1]),r=r.split(/[._]+/);for(var u=0;u<r.length;u++)i+=0===u?r[u]+".":r[u]}a=n[s].name;break}return{version:parseFloat(i)||null,name:a}}},{key:"isActiveXAndFlashEnabled",value:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}}},{key:"getAvailablePlatform",value:function(t){return"platform"in t?t.platform:"userAgentData"in t?t.userAgentData.platform:null}},{key:"augmentWithFlashInIE",value:function(t,e,r){if("[object PluginArray]"===Object.prototype.toString.call(e))return t;return r()&&t.push(["Flash32_32_0_0_238.ocx",2,"Shockwave Flash","32.0.0.238"]),t}}])}(Co);function eg(t){return eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(t)}function rg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ng(n.key),n)}}function ng(t){var e=function(t,e){if("object"!=eg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eg(e)?e:e+""}function og(t,e,r){return e=ag(e),function(t,e){if(e&&("object"==eg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ig()?Reflect.construct(e,r||[],ag(t).constructor):e.apply(t,r))}function ig(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ig=function(){return!!t})()}function ag(t){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ag(t)}function sg(t,e){return sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sg(t,e)}var ug=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=og(this,e)).validateParams(t),r.dnt=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sg(t,e)}(e,t),function(t,e,r){return e&&rg(t.prototype,e),r&&rg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t&&(0===t||1===t||2===t)||oe.warn("wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: ".concat(eg(t),", value: ").concat(t))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.dnt];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("DoNotTrack - Contract verification failed")}},{key:"getName",value:function(){return"dnt"}}])}(Gy);function cg(t){return cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(t)}function lg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fg(n.key),n)}}function fg(t){var e=function(t,e){if("object"!=cg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cg(e)?e:e+""}function hg(t,e,r){return e=pg(e),function(t,e){if(e&&("object"==cg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dg()?Reflect.construct(e,r||[],pg(t).constructor):e.apply(t,r))}function dg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dg=function(){return!!t})()}function pg(t){return pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pg(t)}function yg(t,e){return yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yg(t,e)}var vg={configKey:"isDoNotTrack",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},mg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hg(this,e))._dataQ=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yg(t,e)}(e,t),function(t,e,r){return e&&lg(t.prototype,e),r&&lg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=navigator.doNotTrack;void 0===t&&void 0===(t=window.doNotTrack)&&(t=navigator.msDoNotTrack);var e=new ug(t=null===t||"unspecified"===t||"0"===t?0:"1"===t?1:2).buildQueueMessage();this._dataQ.addToQueue("static_fields",e,!1)}}],[{key:"getDefaultSettings",value:function(){return vg}}])}(Co);function bg(t){return bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(t)}function gg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_g(n.key),n)}}function _g(t){var e=function(t,e){if("object"!=bg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bg(e)?e:e+""}function wg(t,e,r){return e=Eg(e),function(t,e){if(e&&("object"==bg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sg()?Reflect.construct(e,r||[],Eg(t).constructor):e.apply(t,r))}function Sg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sg=function(){return!!t})()}function Eg(t){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eg(t)}function kg(t,e){return kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kg(t,e)}var Pg=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=wg(this,e)).validateParams(t,r,n,o),i.renderer=t,i.vendor=r,i.version=n,i.supportedExtensions=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kg(t,e)}(e,t),function(t,e,r){return e&&gg(t.prototype,e),r&&gg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,r,n){"string"==typeof t&&"string"==typeof e&&"string"==typeof r&&"string"==typeof n||oe.warn("wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: ".concat(bg(t),"}, vendor: {expected: string, received: ").concat(bg(e),"},\n            version: {expected: string, received: ").concat(bg(r),"}, supportedExtensions: {expected: string, received: ").concat(bg(n),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.renderer,this.vendor,this.version,this.supportedExtensions]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&4===t[1].length||oe.warn("GraphicDetect - Contract verification failed")}},{key:"getName",value:function(){return"grph_card"}}])}(Gy);function Tg(t){return Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(t)}function Cg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Og(n.key),n)}}function Og(t){var e=function(t,e){if("object"!=Tg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tg(e)?e:e+""}function Mg(t,e,r){return e=jg(e),function(t,e){if(e&&("object"==Tg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bg()?Reflect.construct(e,r||[],jg(t).constructor):e.apply(t,r))}function Bg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bg=function(){return!!t})()}function jg(t){return jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jg(t)}function xg(t,e){return xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xg(t,e)}var Lg={configKey:"isVMDetection",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Rg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mg(this,e))._dataQ=t,r.canvasId="cd_canvas",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xg(t,e)}(e,t),function(t,e,r){return e&&Cg(t.prototype,e),r&&Cg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){try{this._getMappedRenderInfo()}catch(t){oe.error("Failed collecting Graphic Card information. ".concat(t))}}},{key:"_getMappedRenderInfo",value:function(){oe.info("Collecting Graphic Card props");var t={renderer:"unknown",vendor:"",version:"unknown",supportedExtensions:""};if(window.WebGLRenderingContext||window.WebGL2RenderingContext){var e=document.createElement("canvas");e.id=this.canvasId;var r=e.getContext("experimental-webgl");if(r){var n=r.getExtension("WEBGL_debug_renderer_info");if(null!=n){t.renderer=r.getParameter(n.UNMASKED_RENDERER_WEBGL),t.vendor=r.getParameter(n.UNMASKED_VENDOR_WEBGL),t.supportedExtensions=r.getSupportedExtensions().join(",");if(t.renderer.indexOf("Intel")>-1&&t.renderer.indexOf("HD Graphics")>-1){var o=t.renderer.match(/\d+/g);if(o){var i=o[0];i>500&&i<599&&(t.version="SKL (6th gen core)"),i>5300&&i<6999&&(t.version="BDW (5th gen core)")}}}}}var a=new Pg(t.renderer,t.vendor,t.version,t.supportedExtensions).buildQueueMessage();this._dataQ.addToQueue("static_fields",a,!1),oe.info("Graphic Card props collected")}}],[{key:"getDefaultSettings",value:function(){return Lg}}])}(Co);function Ag(t){return Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(t)}function Ig(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ng(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ng(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ng(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Dg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fg(n.key),n)}}function Fg(t){var e=function(t,e){if("object"!=Ag(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ag(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ag(e)?e:e+""}function Ug(t,e,r){return e=Gg(e),function(t,e){if(e&&("object"==Ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hg()?Reflect.construct(e,r||[],Gg(t).constructor):e.apply(t,r))}function Hg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hg=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gg(t)}function Wg(t,e){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wg(t,e)}var Vg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ug(this,e)).validateParams(t),r.mediaDevices=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wg(t,e)}(e,t),function(t,e,r){return e&&Dg(t.prototype,e),r&&Dg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){Array.isArray(t)&&this._eachDeviceIsValid(t)||oe.warn(" wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: ".concat(t,"}"))}},{key:"_eachDeviceIsValid",value:function(t){var e,r=!0,n=!0,o=!0,i=Ig(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(Array.isArray(a)){4!==a.length&&(o=!1);var s,u=Ig(a);try{for(u.s();!(s=u.n()).done;){"string"!=typeof s.value&&(n=!1)}}catch(t){u.e(t)}finally{u.f()}}else r=!1}}catch(t){i.e(t)}finally{i.f()}return r&&o&&n}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.mediaDevices];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])||oe.warn("MediaDevices - Contract verification failed")}},{key:"getName",value:function(){return"media_devices"}}])}(Gy);function Kg(t){return Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(t)}function Qg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zg(n.key),n)}}function zg(t){var e=function(t,e){if("object"!=Kg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kg(e)?e:e+""}function qg(t,e,r){return e=Jg(e),function(t,e){if(e&&("object"==Kg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yg()?Reflect.construct(e,r||[],Jg(t).constructor):e.apply(t,r))}function Yg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yg=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jg(t)}function Xg(t,e){return Xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xg(t,e)}var Zg={configKey:"isMediaDevices",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},$g=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qg(this,e))._dataQ=t,r._navigator=n,r._metric="MediaDevicesFeature",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xg(t,e)}(e,t),function(t,e,r){return e&&Qg(t.prototype,e),r&&Qg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then((function(e){var r=[];e.forEach((function(t){var e=[t.kind||"",t.label||"",t.deviceId||"",t.groupId||""];r.push(e)}));var n=new Vg(r).buildQueueMessage();t._dataQ.addToQueue("static_fields",n,!1)})).catch((function(e){t.cancelMonitor(t._metric),oe.error("MediaDevicesFeature:startFeature failed to enumerateDevices: ".concat(e.message))}))}}],[{key:"getDefaultSettings",value:function(){return Zg}}])}(Co);function t_(t){return t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t_(t)}function e_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r_(n.key),n)}}function r_(t){var e=function(t,e){if("object"!=t_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=t_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t_(e)?e:e+""}function n_(t,e,r){return e=i_(e),function(t,e){if(e&&("object"==t_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o_()?Reflect.construct(e,r||[],i_(t).constructor):e.apply(t,r))}function o_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o_=function(){return!!t})()}function i_(t){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i_(t)}function a_(t,e){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a_(t,e)}var s_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n_(this,e)).validateParams(t,r),n.per=t,n.state=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a_(t,e)}(e,t),function(t,e,r){return e&&e_(t.prototype,e),r&&e_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){"string"==typeof t&&"number"==typeof e||oe.warn("wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: ".concat(t_(t),"}, state : {expected: number, received: ").concat(t_(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.state];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("per, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.per)}}])}(Gy);function u_(t){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u_(t)}function c_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l_(n.key),n)}}function l_(t){var e=function(t,e){if("object"!=u_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u_(e)?e:e+""}function f_(t,e,r){return e=d_(e),function(t,e){if(e&&("object"==u_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h_()?Reflect.construct(e,r||[],d_(t).constructor):e.apply(t,r))}function h_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h_=function(){return!!t})()}function d_(t){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d_(t)}function p_(t,e){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p_(t,e)}var y_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=f_(this,e)).validateParams(t),r.persistent=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p_(t,e)}(e,t),function(t,e,r){return e&&c_(t.prototype,e),r&&c_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"number"==typeof t||oe.warn("wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: ".concat(u_(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.persistent];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("per_storage, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_storage"}}])}(Gy);function v_(t){return v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v_(t)}function m_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b_(n.key),n)}}function b_(t){var e=function(t,e){if("object"!=v_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v_(e)?e:e+""}function g_(t,e,r){return e=w_(e),function(t,e){if(e&&("object"==v_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,__()?Reflect.construct(e,r||[],w_(t).constructor):e.apply(t,r))}function __(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(__=function(){return!!t})()}function w_(t){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w_(t)}function S_(t,e){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S_(t,e)}var E_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=g_(this,e)).validateParams(t,r),n.kind=t,n.perm=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S_(t,e)}(e,t),function(t,e,r){return e&&m_(t.prototype,e),r&&m_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){"string"==typeof t&&"number"==typeof e||oe.warn("wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: ".concat(v_(t),"}, perm : {expected: number, received: ").concat(v_(e),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.perm];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"number"==typeof t[1]||oe.warn("PerKind, UserPermissionContract - Contract verification failed")}},{key:"getName",value:function(){return"per_".concat(this.kind)}}])}(Gy);function k_(t){return k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k_(t)}function P_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T_(n.key),n)}}function T_(t){var e=function(t,e){if("object"!=k_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k_(e)?e:e+""}function C_(t,e,r){return e=M_(e),function(t,e){if(e&&("object"==k_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,O_()?Reflect.construct(e,r||[],M_(t).constructor):e.apply(t,r))}function O_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O_=function(){return!!t})()}function M_(t){return M_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M_(t)}function B_(t,e){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B_(t,e)}var j_={configKey:"isUserPermissions",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},x_=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=C_(this,e))._permDefs={granted:1,prompt:2,denied:3,true:1,false:3},r._permissions=["geolocation","midi","notifications","push"],r._dataQ=t,r._navigator=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B_(t,e)}(e,t),function(t,e,r){return e&&P_(t.prototype,e),r&&P_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._reportQueryPermissions(),this._reportStoragePermission(),this._reportMicCameraPermissions()}},{key:"_reportQueryPermissions",value:function(){var t=this;if(this._navigator.permissions&&this._navigator.permissions.query)for(var e=oe,r=function(){var r=t._permissions[n];t._navigator.permissions.query({name:r}).then((function(e){var n=t._permDefs[e.state]||-1,o=new s_(r,n).buildQueueMessage();t._dataQ.addToQueue("static_fields",o,!1)})).catch((function(t){e.debug("Failed querying for ".concat(r," permissions ").concat(t.message))}))},n=0;n<this._permissions.length;n++)r()}},{key:"_reportStoragePermission",value:function(){var t=this;this._navigator.storage&&this._navigator.storage.persisted&&this._navigator.storage.persisted().then((function(e){var r=new y_(t._permDefs[e]||-1).buildQueueMessage();t._dataQ.addToQueue("static_fields",r,!1)})).catch((function(t){oe.debug("Failed to check storage persisted: ".concat(t.message))}))}},{key:"_reportMicCameraPermissions",value:function(){var t=this,e={audio:!1,video:!1};this._navigator.mediaDevices&&this._navigator.mediaDevices.enumerateDevices&&this._navigator.mediaDevices.enumerateDevices().then((function(r){r.forEach((function(r){if(!((a=r.kind).includes("audio")&&e.audio||a.includes("video")&&e.video)){var n=function(t){return t.includes("audio")?(e.audio=!0,"audio"):t.includes("video")?(e.video=!0,"video"):void 0}(r.kind),o=""!==r.label?t._permDefs.granted:t._permDefs.denied,i=new E_(n,o).buildQueueMessage();t._dataQ.addToQueue("static_fields",i,!1)}var a}))})).catch((function(t){oe.debug("UserPermissions:startFeature failed to enumerateDevices: ".concat(t.message))}))}}],[{key:"getDefaultSettings",value:function(){return j_}}])}(Co);function L_(t){return L_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L_(t)}function R_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A_(n.key),n)}}function A_(t){var e=function(t,e){if("object"!=L_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=L_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L_(e)?e:e+""}function I_(t,e,r){return e=D_(e),function(t,e){if(e&&("object"==L_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N_()?Reflect.construct(e,r||[],D_(t).constructor):e.apply(t,r))}function N_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N_=function(){return!!t})()}function D_(t){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D_(t)}function F_(t,e){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F_(t,e)}var U_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=I_(this,e)).validateParams(t),r.isPrivate=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F_(t,e)}(e,t),function(t,e,r){return e&&R_(t.prototype,e),r&&R_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"boolean"==typeof t||oe.warn("wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: ".concat(L_(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.isPrivate];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"boolean"==typeof t[1]||oe.warn("IsPrivateBrowsing - Contract verification failed")}},{key:"getName",value:function(){return"is_private_browsing"}}])}(Gy);function H_(t){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H_(t)}function G_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W_(n.key),n)}}function W_(t){var e=function(t,e){if("object"!=H_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H_(e)?e:e+""}function V_(t,e,r){return e=Q_(e),function(t,e){if(e&&("object"==H_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,K_()?Reflect.construct(e,r||[],Q_(t).constructor):e.apply(t,r))}function K_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(K_=function(){return!!t})()}function Q_(t){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q_(t)}function z_(t,e){return z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z_(t,e)}var q_={configKey:"isPrivateBrowsing",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Y_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V_(this,e))._dataQ=t,n._privateBrowsingDetector=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z_(t,e)}(e,t),function(t,e,r){return e&&G_(t.prototype,e),r&&G_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){var t=this;this._privateBrowsingDetector.detectPrivateMode((function(e){var r=new U_(e).buildQueueMessage();t._dataQ.addToQueue("static_fields",r,!1)}))}}],[{key:"getDefaultSettings",value:function(){return q_}}])}(Co);function J_(t){return J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J_(t)}function X_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Z_(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z_(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function $_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tw(n.key),n)}}function tw(t){var e=function(t,e){if("object"!=J_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J_(e)?e:e+""}function ew(t,e,r){return e=nw(e),function(t,e){if(e&&("object"==J_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rw()?Reflect.construct(e,r||[],nw(t).constructor):e.apply(t,r))}function rw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rw=function(){return!!t})()}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nw(t)}function ow(t,e){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ow(t,e)}var iw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ew(this,e)).validateParams(t,r),n.dataType=t,n.fontList=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ow(t,e)}(e,t),function(t,e,r){return e&&$_(t.prototype,e),r&&$_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e){if(!(Array.isArray(e)&&2===e.length&&Object.values(aw).includes(t)))throw oe.warn("Invalid parameters in FontsDetectionContract. \n                dataType: {expected: ".concat(Object.keys(aw).join(", "),", received: ").concat(t,"},\n                fontList: {expected: tuple [string, array], received: ").concat(JSON.stringify(e),"}")),new Error("Invalid parameters provided to FontsDetectionContract.")}},{key:"buildQueueMessage",value:function(){var t;if(this.dataType===aw.V1_ONLY)t=this.fontList[0].join(",");else if(this.dataType===aw.V2_ONLY)t=this.fontList[1];else{if(this.dataType!==aw.V1_AND_V2)throw new Error("Invalid dataType: ".concat(this.dataType));t=[this.fontList[0].join(","),this.fontList[1]]}var e=[this.getName(),[this.dataType,t]];return this.validateMessage(e),e}},{key:"validateMessage",value:function(t){var e="string"==typeof t[0],r=X_(t[1]||[],2),n=r[0],o=r[1],i=!1;if(n===aw.V1_ONLY?i="string"==typeof o:n===aw.V2_ONLY?i=Array.isArray(o)&&o.every((function(t){return"string"==typeof t})):n===aw.V1_AND_V2&&(i=Array.isArray(o)&&2===o.length&&"string"==typeof o[0]&&Array.isArray(o[1])&&o[1].every((function(t){return"string"==typeof t}))),!e||!i)throw oe.warn("FontsDetectionContract - Queue message validation failed."),oe.debug("Invalid message: ".concat(JSON.stringify(t))),new Error("Invalid message structure.")}},{key:"getName",value:function(){return"fonts"}}])}(Gy),aw=Object.freeze({V1_ONLY:"v1",V2_ONLY:"v2",V1_AND_V2:"v1+v2"}),sw=Object.freeze({VERSION1:"VERSION1",VERSION2:"VERSION2"});function uw(t){return uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uw(t)}function cw(t,e,r){return(e=fw(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fw(n.key),n)}}function fw(t){var e=function(t,e){if("object"!=uw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uw(e)?e:e+""}var hw=function(){return function(t,e,r){return e&&lw(t.prototype,e),r&&lw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._storageUtils=e,this._versionKeys=cw(cw({},sw.VERSION1,"detectedFonts_2.1.5"),sw.VERSION2,"detectedFonts_3")}),[{key:"saveFonts",value:function(t,e){var r=this._getKeyByVersion(e);oe.debug("[FONTS-COLLECTOR][".concat(e,"] Saving fonts to localStorage under key: ").concat(r)),this._storageUtils.saveToLocalStorage(r,t)}},{key:"getStoredFonts",value:function(t){var e=this._getKeyByVersion(t),r=this._storageUtils.getFromLocalStorage(e);return oe.debug("[FONTS-COLLECTOR][".concat(t,"] Retrieved fonts from localStorage under key ").concat(e,": ").concat(r)),r}},{key:"_getKeyByVersion",value:function(t){var e=this._versionKeys[t];if(!e)throw new Error("Unsupported font version type: ".concat(t));return e}}])}(),dw=r(344),pw=r.n(dw),yw=r(481),vw=r.n(yw);function mw(t){return mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mw(t)}function bw(t,e,r){return(e=_w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_w(n.key),n)}}function _w(t){var e=function(t,e){if("object"!=mw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mw(e)?e:e+""}var ww=function(){return function(t,e,r){return e&&gw(t.prototype,e),r&&gw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fontVersions=bw(bw({},sw.VERSION1,pw()),sw.VERSION2,vw())}),[{key:"getFontsByVersion",value:function(t){if(this.fontVersions[t])return this.fontVersions[t];throw new Error("Invalid version type. Use one of: ".concat(Object.keys(sw).join(", ")))}}])}(),Sw=ww;function Ew(t){return Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ew(t)}function kw(){kw=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ew(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ew(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Pw(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cw(n.key),n)}}function Cw(t){var e=function(t,e){if("object"!=Ew(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ew(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ew(e)?e:e+""}var Ow=function(){return function(t,e,r){return e&&Tw(t.prototype,e),r&&Tw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"detect",value:(t=kw().mark((function t(e,r){return kw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error('Method "checkFontList" must be implemented.');case 1:case"end":return t.stop()}}),t)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Pw(i,n,o,a,s,"next",t)}function s(t){Pw(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t,r){return e.apply(this,arguments)})},{key:"release",value:function(){throw new Error('Method "release" must be implemented.')}},{key:"isSupported",value:function(){throw new Error('Method "isSupported" must be implemented.')}}]);var t,e}();function Mw(t){return Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mw(t)}function Bw(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return jw(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function jw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xw(){xw=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Mw(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Mw(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Lw(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Rw(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lw(i,n,o,a,s,"next",t)}function s(t){Lw(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Aw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iw(n.key),n)}}function Iw(t){var e=function(t,e){if("object"!=Mw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mw(e)?e:e+""}function Nw(t,e,r){return e=Fw(e),function(t,e){if(e&&("object"==Mw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dw()?Reflect.construct(e,r||[],Fw(t).constructor):e.apply(t,r))}function Dw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dw=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fw(t)}function Uw(t,e){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uw(t,e)}var Hw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nw(this,e))._domUtils=t,r._baselineFonts=["sans-serif","serif","fangsong","cursive","fantasy","monospace","emoji","ui-rounded","math","system-ui","ui-serif","ui-sans-serif","unknown"],r._testText="AaBb123!@# ××‘×’×“ ×Ø¨Øª ä½ å¥½ä¸– ã‚ã‚¢ à¤…à¤†à¤‹Ð˜Î” à¸ªà¸§à¸± à¸­à¸² áƒ áƒ£áƒª áƒ™Ð·Ø¡Î» âµ ðŒ„ Ñ„ØºðŸ˜€âœ”",r._fontSize="48px",r._canvas=null,r._context=null,r._baselineWidths={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uw(t,e)}(e,t),function(t,e,r){return e&&Aw(t.prototype,e),r&&Aw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"detect",value:(o=Rw(xw().mark((function t(e,r){var n,o;return xw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasReleased){t.next=2;break}throw new Error("CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.");case 2:if(this._initialized){t.next=5;break}return t.next=5,this._initialize();case 5:if(void 0!==(n=this._baselineWidths[r])){t.next=8;break}throw new Error('Font family "'.concat(r,'" is not recognized.'));case 8:return this._context.font="".concat(this._fontSize,' "').concat(e,'", ').concat(r),o=this._context.measureText(this._testText).width,t.abrupt("return",o!==n);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"release",value:(n=Rw(xw().mark((function t(){return xw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._hasReleased=!0,this._canvas=null,this._context=null,this._baselineWidths=null;case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"isSupported",value:function(){try{var t=document.createElement("canvas");return Boolean(t.getContext&&t.getContext("2d"))}catch(t){return!1}}},{key:"_initialize",value:(r=Rw(xw().mark((function t(){var e,r,n,o;return xw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._domUtils.awaitWindowDocumentReady(window);case 2:this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._context.textBaseline="alphabetic",this._context.direction="ltr",this._baselineWidths={},e=Bw(this._baselineFonts);try{for(e.s();!(r=e.n()).done;)n=r.value,this._context.font="".concat(this._fontSize,' "non-existed-font", ').concat(n),o=this._context.measureText(this._testText).width,this._baselineWidths[n]=o}catch(t){e.e(t)}finally{e.f()}this._initialized=!0;case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]);var r,n,o}(Ow);function Gw(t){return Gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gw(t)}function Ww(){Ww=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Gw(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Gw(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Vw(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Kw(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Vw(i,n,o,a,s,"next",t)}function s(t){Vw(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Qw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zw(n.key),n)}}function zw(t){var e=function(t,e){if("object"!=Gw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gw(e)?e:e+""}function qw(t,e,r){return e=Jw(e),function(t,e){if(e&&("object"==Gw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yw()?Reflect.construct(e,r||[],Jw(t).constructor):e.apply(t,r))}function Yw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yw=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jw(t)}function Xw(t,e){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xw(t,e)}var Zw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qw(this,e))._domUtils=t,r._testText="AaBb123!@# ××‘×’×“ ×Ø¨Øª ä½ å¥½ä¸– ã‚ã‚¢ à¤…à¤†à¤‹Ð˜Î” à¸ªà¸§à¸± à¸­à¸² áƒ áƒ£áƒª áƒ™Ð·Ø¡Î» âµ ðŒ„ Ñ„ØºðŸ˜€âœ”",r._testFontSize="48px",r._baselineFontFamilies=["monospace","sans-serif","serif"],r._baselineMetrics={},r._testNode=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xw(t,e)}(e,t),function(t,e,r){return e&&Qw(t.prototype,e),r&&Qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"detect",value:(o=Kw(Ww().mark((function t(e,r){var n,o,i;return Ww().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasReleased){t.next=2;break}throw new Error("DomFontDetector has been released and is no longer usable. Please create a new instance to use the detector.");case 2:if(this._initialized){t.next=5;break}return t.next=5,this._initialize();case 5:return this._testNode.style.fontFamily='"'.concat(e,'", ').concat(r),n=this._testNode.offsetWidth,o=this._testNode.offsetHeight,i=this._baselineMetrics[r],t.abrupt("return",n!==i.width||o!==i.height);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"release",value:(n=Kw(Ww().mark((function t(){return Ww().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._hasReleased=!0,this._testNode&&document.body.removeChild(this._testNode),this._testNode=null,this._baselineMetrics={};case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"isSupported",value:function(){return!0}},{key:"_initialize",value:(r=Kw(Ww().mark((function t(){var e=this;return Ww().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._domUtils.awaitWindowDocumentReady(window);case 2:this._testNode=document.createElement("span"),this._testNode.style.fontSize=this._testFontSize,this._testNode.style.lineHeight="1",this._testNode.style.fontStretch="condensed",this._testNode.style.whiteSpace="nowrap",this._testNode.style.position="absolute",this._testNode.style.visibility="hidden",this._testNode.textContent=this._testText,document.body.appendChild(this._testNode),this._baselineFontFamilies.forEach((function(t){e._testNode.style.fontFamily="non-existed-font, ".concat(t),e._baselineMetrics[t]={width:e._testNode.offsetWidth,height:e._testNode.offsetHeight}})),this._initialized=!0;case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]);var r,n,o}(Ow);function $w(t){return $w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(t)}function tS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eS(n.key),n)}}function eS(t){var e=function(t,e){if("object"!=$w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$w(e)?e:e+""}var rS=function(){return function(t,e,r){return e&&tS(t.prototype,e),r&&tS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("domUtils is required for FontDetectorProvider.");this._domUtils=e,this._logsTag="[FONTS-COLLECTOR]"}),[{key:"getBestDetector",value:function(){for(var t=this,e=0,r=[{detector:function(){return new Hw(t._domUtils)},name:"CanvasFontDetector"},{detector:function(){return new Zw(t._domUtils)},name:"DomFontDetector"}];e<r.length;e++){var n=r[e],o=n.detector,i=n.name;try{var a=o();if(a.isSupported())return oe.info("".concat(this._logsTag," Using ").concat(i)),a}catch(t){oe.error("".concat(this._logsTag," ").concat(i," failed:"),t)}}throw new Error("[FontDetectorProvider] No suitable font detection implementation is supported in this environment.")}}])}();function nS(t){return nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nS(t)}function oS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iS(n.key),n)}}function iS(t){var e=function(t,e){if("object"!=nS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nS(e)?e:e+""}var aS="span",sS=function(){return function(t,e,r){return e&&oS(t.prototype,e),r&&oS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domUtils=e,this._baseFonts=["rat-fonts","monospace","sans-serif","serif"],this._testString="mmmmmmmmmmlli",this._testSize="72px",this._chunkSize=30,this._defaultWidth={},this._defaultHeight={},this._body=null,this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]}),[{key:"release",value:function(){this._body&&this._iframe&&this._body.removeChild(this._iframe),this._iframe=null,this._spanArray=null,this._allFontsDiffs=[]}},{key:"init",value:function(){var t=this;return new Promise((function(e,r){try{t.initCallback(e)}catch(t){r(t)}}))}},{key:"initCallback",value:function(t){var e=this;if(this._body=document.body,!this._body)return"";this._iframe=document.createElement("iframe"),this._iframe.setAttribute("sandbox","allow-same-origin"),this._iframe.id=ki,this._iframe.style.visibility="hidden",this._iframe.style.zIndex="-1",this._iframe.style.width=0,this._iframe.style.height=0,this._body.appendChild(this._iframe),this._iframe.contentDocument.body||(this._iframe.style.width=null,this._iframe.style.height=null,this._iframe.contentDocument.appendChild(document.createElement("body"))),this._domUtils.onWindowDocumentReady(this._iframe.contentWindow,(function(){e._createCalculationElements(t)}))}},{key:"_createCalculationElements",value:function(t){var e=document.createElement("span");e.style.fontSize=this._testSize,e.style.visibility="hidden",e.style.position="absolute",e.style.zIndex="-1",e.style.lineHeight="normal",e.innerHTML=this._testString;for(var r=0;r<this._baseFonts.length;r++)e.style.fontFamily=this._baseFonts[r],this._iframe.contentDocument.body.appendChild(e),this._defaultWidth[this._baseFonts[r]]=e.offsetWidth,this._defaultHeight[this._baseFonts[r]]=e.offsetHeight,this._iframe.contentDocument.body.removeChild(e);oe.debug("FontsScanner:init - base fonts width: \n                ".concat(this._baseFonts[0],":").concat(this._defaultWidth[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultWidth[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultWidth[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultWidth[this._baseFonts[3]])),oe.debug("FontsScanner:init - base fonts height: \n                ".concat(this._baseFonts[0],":").concat(this._defaultHeight[this._baseFonts[0]],";\n                ").concat(this._baseFonts[1],":").concat(this._defaultHeight[this._baseFonts[1]],";\n                ").concat(this._baseFonts[2],":").concat(this._defaultHeight[this._baseFonts[2]],";\n                ").concat(this._baseFonts[3],":").concat(this._defaultHeight[this._baseFonts[3]])),this._createSpanArray(),t()}},{key:"_createSpanArray",value:function(){var t=document.createElement("div");t.id="currentDiv",t.style.position="absolute",t.style.visibility="hidden";for(var e=0;e<this._chunkSize;e++){var r=document.createElement("span");r.style.lineHeight="normal",r.style.position="absolute",r.style.zIndex="-1",r.style.fontSize=this._testSize,r.innerHTML=this._testString,t.appendChild(r);var n=document.createElement("br");t.appendChild(n)}this._iframe.contentDocument.body.appendChild(t),this._spanArray=t}},{key:"getAllFontsDiffs",value:function(){return this._allFontsDiffs}}])}();function uS(t){return uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uS(t)}function cS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lS(n.key),n)}}function lS(t){var e=function(t,e){if("object"!=uS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uS(e)?e:e+""}function fS(t,e,r){return e=dS(e),function(t,e){if(e&&("object"==uS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hS()?Reflect.construct(e,r||[],dS(t).constructor):e.apply(t,r))}function hS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hS=function(){return!!t})()}function dS(t){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dS(t)}function pS(t,e){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pS(t,e)}var yS=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fS(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pS(t,e)}(e,t),function(t,e,r){return e&&cS(t.prototype,e),r&&cS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"scan",value:function(t,e){var r=this;return this.init().then((function(){return new Promise((function(n,o){try{r.detectCallback(t,e,n)}catch(t){o(t)}}))})).catch((function(t){return Promise.reject(t)}))}},{key:"detectCallback",value:function(t,e,r){var n=this,o=[],i=0,a=0;if(!this._spanArray)return r(o),o;var s=this._spanArray.getElementsByTagName(aS),u=this._defaultWidth[e],c=this._defaultHeight[e],l=function(t){t.forEach((function(t){var e=Math.abs(t.offsetWidth-u),r=Math.abs(t.offsetHeight-c);n._allFontsDiffs.push([t.id,e,r]),(e>1||r>1)&&(o[i]=t.id,i++)}))};t.forEach((function(t){a>=n._chunkSize&&(a=0,l(Array.from(s))),s[a].style.fontFamily=t+","+e,s[a].id=t,a++})),a<this._chunkSize&&l(Array.from(s).slice(0,a)),r(o)}}])}(sS);function vS(t){return vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vS(t)}function mS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bS(n.key),n)}}function bS(t){var e=function(t,e){if("object"!=vS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vS(e)?e:e+""}function gS(t,e,r){return e=wS(e),function(t,e){if(e&&("object"==vS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_S()?Reflect.construct(e,r||[],wS(t).constructor):e.apply(t,r))}function _S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_S=function(){return!!t})()}function wS(t){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wS(t)}function SS(t,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SS(t,e)}var ES=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gS(this,e,[t]))._getElementOffsetTask=r._getElementOffsetTask.bind(r),r._lastChunck=!0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}(e,t),function(t,e,r){return e&&mS(t.prototype,e),r&&mS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"scan",value:function(t,e){var r=this;return this.init().then((function(){return new Promise((function(n,o){try{r.detectCallback(t,e,n)}catch(t){o(t)}}))})).catch((function(t){return Promise.reject(t)}))}},{key:"detectCallback",value:function(t,e,r){if(!this._spanArray)return r([]),[];var n,o,i,a,s,u,c,l,f=this._spanArray.getElementsByTagName(aS),h=(n=0,o=Math.min(t.length,this._chunkSize),i=f,a=n,s=[],u=r,c=t,l=e,{next:function(){var t=null;return a<o?(t=i[a],a++,t):null},reset:function(){a=0},addFont:function(t){s.push(t)},runCallback:function(){u(s)},getFontsArray:function(){return c},getFontFamily:function(){return l},getAvailableFonts:function(){return s}});this._lastChunck=!0,this._applyFontsToSpanElements(h,0)}},{key:"_applyFontsToSpanElements",value:function(t,e){var r=this;oe.trace("[FONTS-COLLECTOR][VERSION1] Checking font ".concat(e,"."));for(var n=t.next(),o=t.getFontsArray(),i=t.getFontFamily();null!==n&&e<o.length;)n.style.fontFamily=o[e]+", "+i,n.id=o[e],e++,n=t.next();if(t.reset(),e>=o.length){if(this._lastChunck)return this._lastChunck=!1,window.setTimeout((function(){r._getElementOffsetTask(t,e)}),0);t.runCallback()}else window.setTimeout((function(){r._getElementOffsetTask(t,e)}),0)}},{key:"_getElementOffsetTask",value:function(t,e){var r=this,n=t.getFontFamily(),o=this._defaultWidth[n],i=this._defaultHeight[n],a=t.next();if(a&&a.offsetWidth){var s=Math.abs(a.offsetWidth-o),u=Math.abs(a.offsetHeight-i);this._allFontsDiffs.push([a.id,s,u]),(s>1||u>1)&&t.addFont(a.id),window.setTimeout((function(){r._getElementOffsetTask(t,e)}),0)}else t.reset(),this._applyFontsToSpanElements(t,e)}},{key:"isSupported",value:function(){return!0}}])}(sS);function kS(t){return kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kS(t)}function PS(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return TS(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TS(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function TS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function CS(){CS=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==kS(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(kS(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function OS(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function MS(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){OS(i,n,o,a,s,"next",t)}function s(t){OS(i,n,o,a,s,"throw",t)}a(void 0)}))}}function BS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jS(n.key),n)}}function jS(t){var e=function(t,e){if("object"!=kS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kS(e)?e:e+""}var xS=function(){return function(t,e,r){return e&&BS(t.prototype,e),r&&BS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=e.utils,n=e.domUtils,o=e.detector,i=void 0===o?null:o,a=e.batchSize,s=void 0===a?10:a,u=e.timeoutGap,c=void 0===u?0:u;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw new Error("The 'utils' parameter is required.");if(!n)throw new Error("The 'domUtils' parameter is required.");this._utils=r,this._domUtils=n,this.detector=i,this.batchSize=s,this.timeoutGap=c,this._hasReleased=!1}),[{key:"release",value:(r=MS(CS().mark((function t(){return CS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._hasReleased=!0,!this.detector||"function"!=typeof this.detector.release){t.next=4;break}return t.next=4,this.detector.release();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"scan",value:(e=MS(CS().mark((function t(e,r){var n,o,i,a,s,u,c,l,f;return CS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasReleased){t.next=2;break}throw new Error("BatchFontScanner has been released and cannot be used.");case 2:if(Array.isArray(e)){t.next=4;break}throw new TypeError("The 'fonts' parameter must be an array.");case 4:if(0!==e.length){t.next=6;break}return t.abrupt("return",[]);case 6:n=[],o=this._createBatchIndices(e.length,this.batchSize),i=PS(o),t.prev=9,i.s();case 11:if((a=i.n()).done){t.next=25;break}if(s=a.value,u=s.start,c=s.end,!this._hasReleased){t.next=15;break}throw new Error("BatchFontScanner was released during scanning. Operation aborted.");case 15:return l=performance.now(),t.next=18,this._processBatch(e.slice(u,c),r,n);case 18:if(f=performance.now()-l,oe.trace("Batch processed (".concat(u,"-").concat(c,") in ").concat(f.toFixed(2),"ms.")),!(c<e.length)){t.next=23;break}return t.next=23,this._delay(this.timeoutGap);case 23:t.next=11;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(9),i.e(t.t0);case 30:return t.prev=30,i.f(),t.finish(30);case 33:if(!this._hasReleased){t.next=35;break}throw new Error("BatchFontScanner was released after scanning. Operation aborted.");case 35:return t.abrupt("return",n);case 36:case"end":return t.stop()}}),t,this,[[9,27,30,33]])}))),function(t,r){return e.apply(this,arguments)})},{key:"_processBatch",value:(t=MS(CS().mark((function t(e,r,n){var o,i,a,s;return CS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=PS(e),t.prev=1,o.s();case 3:if((i=o.n()).done){t.next=19;break}if(a=i.value,!this._hasReleased){t.next=7;break}throw new Error("BatchFontScanner was released during batch processing. Operation aborted.");case 7:return t.prev=7,t.next=10,null===(s=this.detector)||void 0===s?void 0:s.detect(a,r);case 10:t.sent&&n.push(a),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),oe.error('Error detecting font "'.concat(a,'":'),t.t0);case 17:t.next=3;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(1),o.e(t.t1);case 24:return t.prev=24,o.f(),t.finish(24);case 27:case"end":return t.stop()}}),t,this,[[1,21,24,27],[7,14]])}))),function(e,r,n){return t.apply(this,arguments)})},{key:"_createBatchIndices",value:function(t,e){return Array.from({length:Math.ceil(t/e)},(function(r,n){return{start:n*e,end:Math.min((n+1)*e,t)}}))}},{key:"_delay",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}}]);var t,e,r}();var LS=function(t){var e=t.utils,r=t.domUtils,n=t.configurationRepository,o=t.fontVersion,i=t.fontDetector,a=void 0===i?null:i,s=n.get(dt);if(o===sw.VERSION1)return s?new ES(r):new yS(r);var u=new rS(r);return new xS({utils:e,domUtils:r,detector:null!=a?a:u.getBestDetector()})};function RS(t){return RS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RS(t)}function AS(t){return function(t){if(Array.isArray(t))return DS(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||NS(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||NS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NS(t,e){if(t){if("string"==typeof t)return DS(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DS(t,e):void 0}}function DS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function FS(){FS=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==RS(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(RS(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function US(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function HS(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){US(i,n,o,a,s,"next",t)}function s(t){US(i,n,o,a,s,"throw",t)}a(void 0)}))}}function GS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WS(n.key),n)}}function WS(t){var e=function(t,e){if("object"!=RS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RS(e)?e:e+""}var VS=function(){return function(t,e,r){return e&&GS(t.prototype,e),r&&GS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("CDUtils instance is required.");if(!r)throw new Error("DOMUtils instance is required.");if(!n)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");if(!Object.values(sw).includes(i))throw new Error("Invalid font version type. Use one of: ".concat(Object.keys(sw).join(", ")));this._logsTag="[FONTS-COLLECTOR][".concat(i,"]"),this._utils=e,this._domUtils=r,this._dataQueue=n,this._configRepo=o,this._fontVersion=i,this._fontScanner=null!=a?a:LS({utils:e,domUtils:r,configurationRepository:o,fontVersion:i,fontDetector:c}),this._fontsProvider=s||new Sw,this._fontCache=u||new hw(e.StorageUtils),this._fontCacheExpiration=864e5}),[{key:"collectFonts",value:(e=HS(FS().mark((function t(){var e,r,n,o,i,a,s,u,c,l,f;return FS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(oe.info("".concat(this._logsTag," Starting font collection.")),n=this._fontCache.getStoredFonts(this._fontVersion),o=null!==(e=null==n?void 0:n.installedFonts)&&void 0!==e?e:n,i=null!==(r=null==n?void 0:n.scannedAt)&&void 0!==r?r:-1,oe.debug("".concat(this._logsTag," Cached fonts retrieved: ").concat(JSON.stringify(o))),t.prev=5,a=Date.now()-i>this._fontCacheExpiration,!o||a){t.next=11;break}return oe.info("".concat(this._logsTag," Font collection complete using valid cache.")),t.abrupt("return",o);case 11:return t.next=13,this._scanForInstalledFonts();case 13:if(s=t.sent,u=s.installedFonts,c=s.scannedAt,l=s.scanTime,f=s.totalFontsScanned,!this._collectorHasStopped){t.next=20;break}return t.abrupt("return");case 20:return oe.debug("".concat(this._logsTag," Detected fonts: ").concat(JSON.stringify(u))),this._fontCache.saveFonts({installedFonts:u,scannedAt:c},this._fontVersion),oe.debug("".concat(this._logsTag," Font cache updated with new fonts.")),oe.info("".concat(this._logsTag," Font collection complete. Scan time: ").concat(l,"ms. Total Fonts Scanned: ").concat(f," Total Installed Fonts: ").concat(u.length)),t.abrupt("return",u);case 27:t.prev=27,t.t0=t.catch(5),oe.error("".concat(this._logsTag," Error during font collection:"),t.t0);case 30:case"end":return t.stop()}}),t,this,[[5,27]])}))),function(){return e.apply(this,arguments)})},{key:"release",value:function(){this._collectorHasStopped=!0,this._fontScanner.release()}},{key:"_scanForInstalledFonts",value:(t=HS(FS().mark((function t(){var e,r,n,o,i,a,s,u,c,l,f;return FS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:oe.info("".concat(this._logsTag," Starting font scanning process.")),e=Date.now(),r=this._fontsProvider.getFontsByVersion(this._fontVersion),n=[],o=0,i=Object.entries(r);case 5:if(!(o<i.length)){t.next=14;break}return a=IS(i[o],2),s=a[0],u=a[1],t.next=9,this._fontScanner.scan(u,s);case 9:c=t.sent,n.push.apply(n,AS(c));case 11:o++,t.next=5;break;case 14:return l=Date.now()-e,f=Object.values(r).reduce((function(t,e){return t+e.length}),0),t.abrupt("return",{installedFonts:n,scanTime:l,scannedAt:Date.now(),totalFontsScanned:f,totalFontsFound:n.length});case 17:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e}();function KS(t){return KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KS(t)}function QS(){QS=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==KS(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(KS(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function zS(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function qS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YS(n.key),n)}}function YS(t){var e=function(t,e){if("object"!=KS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KS(e)?e:e+""}function JS(t,e,r){return e=ZS(e),function(t,e){if(e&&("object"==KS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,XS()?Reflect.construct(e,r||[],ZS(t).constructor):e.apply(t,r))}function XS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(XS=function(){return!!t})()}function ZS(t){return ZS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZS(t)}function $S(t,e){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$S(t,e)}var tE={configKey:"isFonts",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},eE=function(t){function e(t,r,n,o){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=JS(this,e))._logsTag="[FONTS-COLLECTOR][MAIN]",!t)throw new Error("CDUtils instance is required.");if(!r)throw new Error("DOMUtils instance is required.");if(!n)throw new Error("DataQueue instance is required.");if(!o)throw new Error("ConfigurationRepository instance is required.");return i._utils=t,i._domUtils=r,i._dataQueue=n,i._configRepo=o,i._v1Collector=null!=a?a:new VS(t,r,n,o,sw.VERSION1),i._v2Collector=null!=s?s:new VS(t,r,n,o,sw.VERSION2),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$S(t,e)}(e,t),function(t,e,r){return e&&qS(t.prototype,e),r&&qS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:(r=QS().mark((function t(){var e,r;return QS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(oe.info("".concat(this._logsTag," Starting font collection.")),!this._isMobileDevice()){t.next=4;break}return oe.info("".concat(this._logsTag," Mobile phone has detected. aborting font detection.")),t.abrupt("return");case 4:return t.next=6,this._v1Collector.collectFonts();case 6:return e=t.sent,this._enqueueFontData(aw.V1_ONLY,[e,null]),t.next=10,this._v2Collector.collectFonts();case 10:r=t.sent,this._enqueueFontData(aw.V1_AND_V2,[e,r]);case 12:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){zS(i,n,o,a,s,"next",t)}function s(t){zS(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"stopFeature",value:function(){this._collectorHasStopped=!0,this._v1Collector.release(),this._v2Collector.release()}},{key:"_enqueueFontData",value:function(t,e){if(!this._collectorHasStopped){if(!e)throw Error("IllegalState fonts undefined");var r=new iw(t,e).buildQueueMessage();this._dataQueue.addToQueue("static_fields",r,!1),oe.debug("".concat(this._logsTag," Fonts enqueued: ").concat(JSON.stringify(e)))}}},{key:"_isMobileDevice",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}],[{key:"getDefaultSettings",value:function(){return tE}}]);var r,n}(Co);function rE(t){return rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rE(t)}function nE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oE(n.key),n)}}function oE(t){var e=function(t,e){if("object"!=rE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rE(e)?e:e+""}function iE(t,e,r){return e=sE(e),function(t,e){if(e&&("object"==rE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aE()?Reflect.construct(e,r||[],sE(t).constructor):e.apply(t,r))}function aE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aE=function(){return!!t})()}function sE(t){return sE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sE(t)}function uE(t,e){return uE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uE(t,e)}var cE=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=iE(this,e)).validateParams(t,r,n),o.winding=t,o.text=r,o.geometry=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uE(t,e)}(e,t),function(t,e,r){return e&&nE(t.prototype,e),r&&nE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t,e,r){if(!("boolean"==typeof t&&"string"==typeof e&&"string"==typeof r)){var n="wrong type in GfxRenderingContract parameters. winding: {expected: boolean, received: ".concat(rE(t),"}, text: {expected: string, received: ").concat(rE(e),"},\n            geometry: {expected: string, received: ").concat(rE(r),"}");oe.warn(n)}}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),[this.winding,this.text,this.geometry]];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&Array.isArray(t[1])&&3===t[1].length||oe.warn("GfxRendering - Contract verification failed")}},{key:"getName",value:function(){return"gfx"}}])}(Gy);function lE(t){return lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lE(t)}function fE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return hE(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hE(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function dE(t,e,r){return e=yE(e),function(t,e){if(e&&("object"==lE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pE()?Reflect.construct(e,r||[],yE(t).constructor):e.apply(t,r))}function pE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pE=function(){return!!t})()}function yE(t){return yE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yE(t)}function vE(t,e){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vE(t,e)}function mE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gE(n.key),n)}}function bE(t,e,r){return e&&mE(t.prototype,e),r&&mE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gE(t){var e=function(t,e){if("object"!=lE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lE(e)?e:e+""}function _E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wE={configKey:"isGfxRendering",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},SE="0",EE=bE((function t(){_E(this,t),this.winding=!1,this.text="",this.geometry=""})),kE=function(t){function e(t,r){var n;return _E(this,e),(n=dE(this,e))._dataQ=t,n._utils=r,n._metric="GFX",n.canvasElement=null,n.canvasContext=null,n._addToQueueAndCleanUp=n.addToQueueAndCleanUp.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vE(t,e)}(e,t),bE(e,[{key:"startFeature",value:function(){this.initCanvasAndContext(),this.isCanvas2DSupported(this.canvasElement,this.canvasContext)&&this.generateCanvasData()}},{key:"addToQueueAndCleanUp",value:function(t){var e=new cE(t.winding,t.text,t.geometry).buildQueueMessage();this._dataQ.addToQueue("static_fields",e,!1),this.cleanUp()}},{key:"initCanvasAndContext",value:function(){null!==this.canvasElement&&null!==this.canvasContext||(this.canvasElement=document.createElement("canvas"),this.canvasContext=this.buildCanvasContext(this.canvasElement))}},{key:"cleanUp",value:function(){this.canvasContext=null,this.canvasElement=null}},{key:"generateCanvasData",value:function(){var t=this,e=new EE;e.winding=this.hasWinding(this.canvasContext),this.renderTextImage(this.canvasElement,this.canvasContext);var r=this.canvasToText(this.canvasElement),n=this.canvasToText(this.canvasElement);0===r.length||0===n.length||r!==n?(e.text=SE,e.geometry=SE,this._addToQueueAndCleanUp(e)):this.hashCanvasText(r).then((function(r){return e.text=r||SE,t.renderGeometryImage(t.canvasElement,t.canvasContext),t.hashCanvasText(t.canvasToText(t.canvasElement))})).then((function(r){e.geometry=r||SE,t._addToQueueAndCleanUp(e)}))}},{key:"buildCanvasContext",value:function(t){return t.width=1,t.height=1,t.getContext("2d")}},{key:"isCanvas2DSupported",value:function(t,e){return!(!e||!t.toDataURL)}},{key:"renderTextImage",value:function(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.font="11pt Times New Roman";var r="DHO YbmPx KTGUL CQrSfJ iNvZAEW ".concat(String.fromCharCode(55357,56835));"textRendering"in e&&(e.textRendering="geometricPrecision"),e.fillText(r,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.font="18pt Arial",e.fillText(r,4,45)}},{key:"renderGeometryImage",value:function(t,e){t.width=256,t.height=256,e.globalCompositeOperation="multiply";for(var r=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<n.length;r++){var o=fE(n[r],3),i=o[0],a=o[1],s=o[2];e.fillStyle=i,e.beginPath(),e.arc(a,s,40,0,2*Math.PI,!0),e.closePath(),e.fill()}e.fillStyle="#f9c",e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd")}},{key:"canvasToText",value:function(t){try{return t.toDataURL().split(",")[1]}catch(t){return""}}},{key:"hashCanvasText",value:function(t){return this._utils.digest_sha256(t).then((function(t){return t})).catch((function(){return""}))}},{key:"hasWinding",value:function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}}],[{key:"getDefaultSettings",value:function(){return wE}}])}(Co);function PE(t){return PE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PE(t)}function TE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CE(n.key),n)}}function CE(t){var e=function(t,e){if("object"!=PE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PE(e)?e:e+""}function OE(t,e,r){return e=BE(e),function(t,e){if(e&&("object"==PE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ME()?Reflect.construct(e,r||[],BE(t).constructor):e.apply(t,r))}function ME(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ME=function(){return!!t})()}function BE(t){return BE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BE(t)}function jE(t,e){return jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jE(t,e)}var xE=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=OE(this,e)).validateParams(t),r.acoustic=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jE(t,e)}(e,t),function(t,e,r){return e&&TE(t.prototype,e),r&&TE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){"string"==typeof t||oe.warn("wrong type in AudioDetect parameters. renderer: {expected: string, received: ".concat(PE(t),"}"))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.acoustic];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){"string"==typeof t[0]&&"string"==typeof t[1]||oe.warn("AudioDetect - Contract verification failed")}},{key:"getName",value:function(){return"audio_detect"}}])}(Gy);function LE(t){return LE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LE(t)}function RE(){RE=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==LE(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(LE(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function AE(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function IE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NE(n.key),n)}}function NE(t){var e=function(t,e){if("object"!=LE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LE(e)?e:e+""}function DE(t,e,r){return e=UE(e),function(t,e){if(e&&("object"==LE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FE()?Reflect.construct(e,r||[],UE(t).constructor):e.apply(t,r))}function FE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FE=function(){return!!t})()}function UE(t){return UE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UE(t)}function HE(t,e){return HE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HE(t,e)}var GE={configKey:"isAudioDetectFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!0,runInLean:!0,isRunning:!1,instance:null},WE=1,VE=5e3,KE=44100,QE="triangle",zE=1e4,qE={threshold:-50,knee:40,ratio:12,attack:0,release:.25},YE=500,JE=3,XE=4500,ZE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=DE(this,e))._dataQ=t,n._utils=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HE(t,e)}(e,t),function(t,e,r){return e&&IE(t.prototype,e),r&&IE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){oe.info("Starting Audio Detection Feature");try{this._collectAudioFingerprintInfo()}catch(t){oe.error("Failed to collect audio information: ".concat(t))}}},{key:"_collectAudioFingerprintInfo",value:function(){var t=this;oe.info("Collecting audio properties"),this._getAudioFingerprint().then((function(e){return t._utils.digest_sha256(e)})).then((function(e){var r=new xE(e).buildQueueMessage();t._dataQ.addToQueue("static_fields",r,!1),oe.info("Audio properties collected successfully")})).catch((function(t){oe.error("Error collecting audio information: ".concat(t))}))}},{key:"_getAudioFingerprint",value:(r=RE().mark((function t(){var e,r,n,o;return RE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=window.OfflineAudioContext||window.webkitOfflineAudioContext){t.next=4;break}throw new Error("AudioContext is not supported");case 4:return r=new e(WE,VE,KE),n=r.createOscillator(),o=r.createDynamicsCompressor(),n.type=QE,n.frequency.value=zE,o.threshold.value=qE.threshold,o.knee.value=qE.knee,o.ratio.value=qE.ratio,o.attack.value=qE.attack,o.release.value=qE.release,n.connect(o),o.connect(r.destination),n.start(0),t.abrupt("return",this._renderAudio(r).then((function(t){return t.getChannelData(0).subarray(XE).toString()})));case 20:throw t.prev=20,t.t0=t.catch(0),oe.error("Error initializing audio fingerprint: ".concat(t.t0)),t.t0;case 24:case"end":return t.stop()}}),t,this,[[0,20]])})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){AE(i,n,o,a,s,"next",t)}function s(t){AE(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"_renderAudio",value:function(t){var e=YE,r=JE,n=0;return new Promise((function(o,i){var a=function(){try{var s=t.startRendering();"running"===t.state?o(s):"suspended"!==t.state||document.hidden||(++n<r?setTimeout(a,e):i(new Error("Audio context suspended")))}catch(t){i(t)}};a()}))}}],[{key:"getDefaultSettings",value:function(){return GE}}]);var r,n}(Co);function $E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tk(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tk(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ek(t){return ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ek(t)}function rk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nk(n.key),n)}}function nk(t){var e=function(t,e){if("object"!=ek(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ek(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ek(e)?e:e+""}function ok(t,e,r){return e=ak(e),function(t,e){if(e&&("object"==ek(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ik()?Reflect.construct(e,r||[],ak(t).constructor):e.apply(t,r))}function ik(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ik=function(){return!!t})()}function ak(t){return ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ak(t)}function sk(t,e){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sk(t,e)}var uk=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ok(this,e)).validateParams(t),r.data=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sk(t,e)}(e,t),function(t,e,r){return e&&rk(t.prototype,e),r&&rk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"validateParams",value:function(t){if(null===t||"object"!==ek(t)||Array.isArray(t))throw new Error("DevDebugInfoContract - Invalid parameter: data should be a non-null object. Received: ".concat(JSON.stringify(t)))}},{key:"buildQueueMessage",value:function(){var t=[this.getName(),this.data];return this.validateMessage(t),t}},{key:"validateMessage",value:function(t){var e=$E(t,2),r=e[0],n=e[1];if(!("string"==typeof r&&"object"===ek(n)&&null!==n))throw new Error("DevDebugInfoContract - Message validation failed. Invalid message structure: ".concat(JSON.stringify(t)))}},{key:"getName",value:function(){return"client_debug_info"}}])}(Gy);function ck(t){return ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ck(t)}function lk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lk(Object(r),!0).forEach((function(e){hk(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hk(t,e,r){return(e=Pk(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dk(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return pk(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pk(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function pk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function yk(t,e,r){return e=mk(e),function(t,e){if(e&&("object"==ck(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vk()?Reflect.construct(e,r||[],mk(t).constructor):e.apply(t,r))}function vk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vk=function(){return!!t})()}function mk(t){return mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mk(t)}function bk(t,e){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bk(t,e)}function gk(){gk=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ck(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ck(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _k(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function wk(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_k(i,n,o,a,s,"next",t)}function s(t){_k(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Sk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ek(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pk(n.key),n)}}function kk(t,e,r){return e&&Ek(t.prototype,e),r&&Ek(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pk(t){var e=function(t,e){if("object"!=ck(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ck(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ck(e)?e:e+""}var Tk={configKey:"enableDebugInfoFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!1,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Ck=function(){return kk((function t(){Sk(this,t)}),[{key:"dataForDevDebug",value:(t=wk(gk().mark((function t(){return gk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("You must implement dataForDevDebug");case 1:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}],[{key:"validate",value:function(t){return"function"==typeof t.dataForDevDebug}}]);var t}(),Ok=function(t){function e(t,r){var n;if(Sk(this,e),n=yk(this,e),!Array.isArray(r))throw new Error("Sources must be an array.");return r.forEach((function(t,e){if(!Ck.validate(t))throw new Error("Source at index ".concat(e," is not an instance of DevDebugDataSource."))})),n._dataQ=t,n._sources=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bk(t,e)}(e,t),kk(e,[{key:"startFeature",value:(r=wk(gk().mark((function t(){var e,r,n,o,i,a,s;return gk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e={},r=dk(this._sources),t.prev=3,r.s();case 5:if((n=r.n()).done){t.next=19;break}return o=n.value,t.prev=7,t.next=10,o.dataForDevDebug();case 10:(i=t.sent)&&(e=fk(fk({},e),i)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),oe.error("Error collecting DevDebug from source:",t.t0);case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(3),r.e(t.t1);case 24:return t.prev=24,r.f(),t.finish(24);case 27:if(!(e&&Object.keys(e).length>0)){t.next=33;break}if(a=new uk(e),s=a.buildQueueMessage()){t.next=32;break}return t.abrupt("return");case 32:this._dataQ.addToQueue("static_fields",s,!1);case 33:t.next=38;break;case 35:t.prev=35,t.t2=t.catch(0),oe.error("Error collecting DevDebug data:",t.t2);case 38:case"end":return t.stop()}}),t,this,[[0,35],[3,21,24,27],[7,14]])}))),function(){return r.apply(this,arguments)})}],[{key:"getDefaultSettings",value:function(){return Tk}}]);var r}(Co);function Mk(t){return Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mk(t)}function Bk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jk(n.key),n)}}function jk(t){var e=function(t,e){if("object"!=Mk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mk(e)?e:e+""}function xk(t,e,r){return e=Rk(e),function(t,e){if(e&&("object"==Mk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lk()?Reflect.construct(e,r||[],Rk(t).constructor):e.apply(t,r))}function Lk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lk=function(){return!!t})()}function Rk(t){return Rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rk(t)}function Ak(t,e){return Ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ak(t,e)}var Ik={configKey:"isContextPropsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Nk=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=xk(this,e))._dataQ=t,i._domUtils=r,i._perfMonitor=n,i._configurationRepository=o,i._observerCallback=i._observerCallback.bind(i),i.calcTime=i.calcTime.bind(i),i._getEntriesByType=i._getEntriesByType.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ak(t,e)}(e,t),function(t,e,r){return e&&Bk(t.prototype,e),r&&Bk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){if(self.screen){var t=window.devicePixelRatio?window.devicePixelRatio:-1,e=window.devicePixelRatio?window.devicePixelRatio:-1;this._shouldCollectStaticFields()&&this._dataQ.addToQueue("static_fields",["display",[screen.colorDepth,screen.width,screen.height,screen.availHeight||-1,screen.availWidth||-1,t,e]],!1)}this.reportPageLoadTime()}},{key:"_shouldCollectStaticFields",value:function(){var t;return(null===(t=this._configurationRepository)||void 0===t?void 0:t.get(ct))!==zt.SECONDARY}},{key:"_observerCallback",value:function(t,e){var r=t.getEntries()[0];r.duration&&(this.calcTime(r),"disconnect"in e&&e.disconnect())}},{key:"_isEntrySupportedByBrowser",value:function(t){return!("supportedEntryTypes"in window.PerformanceObserver)||PerformanceObserver.supportedEntryTypes.includes(t)}},{key:"_getEntriesByType",value:function(){if(window.performance.timing&&window.performance.timing.loadEventEnd&&window.performance.timing.navigationStart){var t={duration:window.performance.timing.loadEventEnd-window.performance.timing.navigationStart};this.calcTime(t)}}},{key:"calcTime",value:function(t){We.isUndefinedNull(t)?oe.warn("Context Props Feature: no entries of navigation timing were captured"):We.isUndefinedNull(t)||!We.isUndefinedNull(t.duration)?this._perfMonitor.reportMonitor("t.timeTillPageLoad",Math.round(t.duration)):oe.warn("Context Props Feature: page duration loading was not calculated")}},{key:"reportPageLoadTime",value:function(){if(window.performance&&"PerformanceNavigationTiming"in window){var t="navigation";if(!("PerformanceObserver"in window)||!this._isEntrySupportedByBrowser(t))return void this.reportPageLoadTimeFallback();var e=new PerformanceObserver(this._observerCallback);try{e.observe({type:t,buffered:!0})}catch(t){this.reportPageLoadTimeFallback()}}else this.reportPageLoadTimeFallback()}},{key:"reportPageLoadTimeFallback",value:function(){var t=this;tc.isWindowDocumentReady(window)?We.asyncCall.call(this._getEntriesByType):We.addEventListener(self,"load",(function(){We.asyncCall.call(t._getEntriesByType)}))}}],[{key:"getDefaultSettings",value:function(){return Ik}}])}(Co);function Dk(t){return Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dk(t)}function Fk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uk(n.key),n)}}function Uk(t){var e=function(t,e){if("object"!=Dk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dk(e)?e:e+""}function Hk(t,e,r){return e=Wk(e),function(t,e){if(e&&("object"==Dk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gk()?Reflect.construct(e,r||[],Wk(t).constructor):e.apply(t,r))}function Gk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gk=function(){return!!t})()}function Wk(t){return Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wk(t)}function Vk(t,e){return Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vk(t,e)}var Kk={configKey:"isScriptsFeature",isDefault:!1,shouldRunPerContext:!0,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!0,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},Qk=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hk(this,e))._dataQ=t,n._timeoutValue=1e3,n._scriptsRepository=r,n._runDetectionLoopBinded=n._runDetectionLoop.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vk(t,e)}(e,t),function(t,e,r){return e&&Fk(t.prototype,e),r&&Fk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"_checkScriptsData",value:function(){for(var t=document.scripts,e=0;e<t.length;e++){var r={src:t[e].src,text:t[e].text};this._scriptsRepository.exists(r)||(this._scriptsRepository.add(r),this._dataQ.addToQueue("scripts",[null,r.src,r.textHash]))}}},{key:"_runDetectionLoop",value:function(){this._checkScriptsData(),this._timer=setTimeout(this._runDetectionLoopBinded,this._timeoutValue),this._timeoutValue<536870911&&(this._timeoutValue*=4)}},{key:"startFeature",value:function(){this._runDetectionLoop()}},{key:"stopFeature",value:function(){this._timer&&clearTimeout(this._timer)}}],[{key:"getDefaultSettings",value:function(){return Kk}}])}(Co);function zk(t){return zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zk(t)}function qk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yk(n.key),n)}}function Yk(t){var e=function(t,e){if("object"!=zk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zk(e)?e:e+""}function Jk(t,e,r){return e=Zk(e),function(t,e){if(e&&("object"==zk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xk()?Reflect.construct(e,r||[],Zk(t).constructor):e.apply(t,r))}function Xk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xk=function(){return!!t})()}function Zk(t){return Zk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zk(t)}function $k(t,e){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$k(t,e)}var tP={configKey:"isFilesFeature",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!0,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},eP=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Jk(this,e))._utils=r,a._configurationRepository=t,a._sessionService=n,a._muidService=o,a._cidCache=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$k(t,e)}(e,t),function(t,e,r){return e&&qk(t.prototype,e),r&&qk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getFiles",value:function(){if(this._customerId&&this._muid&&this._sid&&this._addrList&&this._addrList.length>0)for(var t,e=0;e<this._addrList.length;e++)t=this._addrList[e]+"?cid="+this._customerId+"&snum="+this._sid+"&muid="+this._muid,this._utils.getPostUrl(t,"GET",null,null,null),this._isSent=!0}},{key:"startFeature",value:function(){var t;this._isSent=!1;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(t){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(t=this._muidService)||void 0===t?void 0:t.muid)||"",this._sid=this._sessionService.sessionId||"",this.getFiles()}},{key:"updateFeatureConfig",value:function(){var t;try{this._addrList=JSON.parse(this._configurationRepository.get("getAddrList"))}catch(t){this._addrList=""}this._customerId=this._cidCache.get()||"",this._muid=(null===(t=this._muidService)||void 0===t?void 0:t.muid)||"",this._sid=this._sessionService.sessionId||"",this._isSent||this.getFiles()}}],[{key:"getDefaultSettings",value:function(){return tP}}])}(Co);function rP(t){return rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rP(t)}function nP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oP(n.key),n)}}function oP(t){var e=function(t,e){if("object"!=rP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rP(e)?e:e+""}function iP(t,e,r){return e=sP(e),function(t,e){if(e&&("object"==rP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aP()?Reflect.construct(e,r||[],sP(t).constructor):e.apply(t,r))}function aP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aP=function(){return!!t})()}function sP(t){return sP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sP(t)}function uP(t,e){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uP(t,e)}var cP={configKey:"isMetadataCollect",isDefault:!0,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInSlave:!0,runInLean:!0,runInUns:!1,isRunning:!1,instance:null},lP=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=iP(this,e))._configurationRepository=t,i._dataQ=r,i._metaDataSiteMapper=n,i._utils=o,i._metaDataSiteMapper.updateObserver(i.onSiteMapperMatch.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uP(t,e)}(e,t),function(t,e,r){return e&&nP(t.prototype,e),r&&nP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"startFeature",value:function(){this._metaDataSiteMapper.initTracking()}},{key:"stopFeature",value:function(){this._metaDataSiteMapper.stopTracking()}},{key:"onSiteMapperMatch",value:function(t){oe.debug("Metadata Collector mapper match - ".concat(JSON.stringify(t))),t.metaVal&&this._dataQ.addToQueue("metadata_map",[null,t.metaVal,this._utils.dateNow()])}},{key:"updateFeatureConfig",value:function(){this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository)}}],[{key:"getDefaultSettings",value:function(){return cP}}])}(Co),fP=null,hP=null,dP=null,pP=null;function yP(t){fP.removeElementEvents(t),fP.addElementEvents(t,!0)}function vP(t){hP.removeElementEvents(t),hP.addElementEvents(t,!0)}function mP(t){dP.removeElementEvents(t),dP.addElementEvents(t,!0)}function bP(t){pP.removeElementEvents(t),pP.addElementEvents(t,!0)}function gP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gP(Object(r),!0).forEach((function(e){MP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wP(t){return wP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wP(t)}function SP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BP(n.key),n)}}function kP(t,e,r){return e&&EP(t.prototype,e),r&&EP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function PP(t,e,r){return e=CP(e),function(t,e){if(e&&("object"==wP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,TP()?Reflect.construct(e,r||[],CP(t).constructor):e.apply(t,r))}function TP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(TP=function(){return!!t})()}function CP(t){return CP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CP(t)}function OP(t,e){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OP(t,e)}function MP(t,e,r){return(e=BP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BP(t){var e=function(t,e){if("object"!=wP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wP(e)?e:e+""}var jP={configKey:"isCrossdomain",isDefault:!1,shouldRunPerContext:!1,shouldRunPerSession:!1,shouldRun:!0,isFrameRelated:!1,runInUns:!1,runInSlave:!1,runInLean:!1,isRunning:!1,instance:null},xP={found:0,new:1},LP=/(?=(child\-src)|(frame\-src))([^;]+)/gi,RP=/http[s]?:\/\/([^\/]+)/gi,AP={resource:null,iframeElement:!1,blockedByCSP:!1,iframeLoaded:!1,ACKMessageSent:!1,ACKMessageRecieved:!1,unavailable:!1},IP=["eventSequence","timestamp","eventType","domainUrl","muid"],NP=function(t){function e(t){var r;return SP(this,e),MP(r=PP(this,e),"startFeature",(function(t){r._domainsResources=r._configurationRepository.get(C),r._crossDomainsTimeout=r._configurationRepository.get(O),Array.isArray(r._domainsResources)&&r._domainsResources.length>0&&(r._windowMessageEmitter.startObserver(t),r._domainsResources.forEach((function(t){var e=t.match(RP);if(null!==e&&"string"==typeof e[0]){var n=e[0];if("object"===wP(r._domainsStates[n]))return;r._domainsStates[n]=_P({},AP),r._domainsStates[n].resource=t,r._domains.push(n)}})),Array.isArray(r._domains)&&r._domains.length>0&&(r.isBlockedByCSP(t,r._domains),r._domUtils.onDocumentBody(t.Context,(function(){r.connectDomains(t)}))))})),MP(r,"stopFeature",(function(t){r._clearFeaturesObjects(t)})),MP(r,"_clearFeaturesObjects",(function(t){r._windowMessageEmitter.stopObserver(t),Array.isArray(r._domains)&&r._domains.length>0&&(r._domains.forEach((function(e){r.clearDomElements(t,e)})),r._domains=[],r._domainsStates={})})),MP(r,"connectDomains",(function(t){Array.isArray(r._domains)&&r._domains.length>0&&(r._domains.forEach((function(e){r._domainsStates[e].blockedByCSP||!1!==r._domainsStates[e].iframeElement||r.createIframe(t,e)})),r._domainsTimeoutFunc=setTimeout((function(){r._domains.forEach((function(e){"object"===wP(r._domainsStates[e])&&!1===r._domainsStates[e].ACKMessageRecieved&&!1===r._domainsStates[e].unavailable&&(oe.warn("Cross Domain feature - domain ".concat(e," is unavailable")),r._domainsStates[e].unavailable=!0,r.clearDomElements(t,e))}))}),r._crossDomainsTimeout))})),MP(r,"createIframe",(function(t,n){var o=t.getDocument().createElement("iframe");o.onload=function(){r.postNextMessage(n)},o.id=Pi+e.generateRandomID(),o.src=r._domainsStates[n].resource,o.style.display="none",o.style.opacity="0",o.width="1",o.height="1",t.getDocument().body.appendChild(o),r._domainsStates[n].iframeElement=o})),MP(r,"clearDomElements",(function(t,e){var n=r._domainsStates[e].iframeElement;"object"===wP(n)&&(null!==t.getDocument().getElementById(r._domainsStates[e].iframeElement.id)&&t.getDocument().body.removeChild(n))})),MP(r,"postNextMessage",(function(t){if(!r._domainsStates[t].ACKMessageRecieved&&r._domainsStates[t].iframeElement){var e={muid:r._generatedMUID};r._domainsStates[t].iframeElement.contentWindow.postMessage(JSON.stringify(e),t),r._domainsStates[t].ACKMessageSent=!0}})),MP(r,"isBlockedByCSP",(function(t,e){if(!Array.isArray(e)||e.length<1)throw new Error("Domains are expected for content security policy assertion");var n=!1;[].slice.call(t.getDocument().getElementsByTagName("meta")).forEach((function(t){if("Content-Security-Policy"===t.getAttribute("http-equiv")){n=!0;var o=t.getAttribute("content").match(LP);e.forEach((function(t){o&&-1===o[0].indexOf(t)&&"object"===wP(r._domainsStates[t])&&(r._domainsStates[t].blockedByCSP=!0,oe.warn("Cross Domain feature - domain ".concat(t," is blocked by CSP")))}))}if(n)return!1}))})),MP(r,"windowMessageHandler",(function(t){var e=t.message.origin;if(r._domainsStates.hasOwnProperty(e)){if(!0===r._domainsStates[e].ACKMessageRecieved)return;r._domainsStates[e].ACKMessageRecieved=!0,r.clearDomElements(new Ni(t.message.currentTarget),e);var n=t.message.data;r.sendToQueue(e,n)}})),MP(r,"sendToQueue",(function(t,e){var n=t.replace(/http[s]?:\/\//i,"");"object"===wP(e.found)&&Object.keys(e.found).forEach((function(t){var o=r._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=n,a=e.found[t].split("__"),s={eventType:r._eventType.found,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};r._dataQ.addToQueue("crossmuid_event",r._utils.convertToArrayByMap(IP,s),!0)})),"object"===wP(e.new)&&Object.keys(e.new).forEach((function(t){var o=r._utils.StorageUtils.getAndUpdateEventSequenceNumber(),i=n,a=e.new[t].split("__"),s={eventType:r._eventType.new,eventSequence:o,domainUrl:i,muid:a[0],timestamp:a[1]};r._dataQ.addToQueue("crossmuid_event",r._utils.convertToArrayByMap(IP,s))})),"object"===wP(e.error_message)&&oe.warn("Cross Domain feature - domain ".concat(n," error. Error Message: \n                ").concat(e.error_message," Code: ").concat(e.error_code))})),MP(r,"updateFeatureConfig",(function(t){r._domainsResources=r._configurationRepository.get(C),r._crossDomainsTimeout=r._configurationRepository.get(O),clearTimeout(r._domainsTimeoutFunc),r._domainsTimeoutFunc=null,r.updateDomainStates(t)})),MP(r,"updateDomainStates",(function(t){Array.isArray(r._domainsResources)&&r._domainsResources.length>0&&(r._domains=[],r._domainsResources.forEach((function(t){var e=t.match(RP);if(null!==e&&"string"==typeof e[0]){var n=e[0];"object"!==wP(r._domainsStates[n])&&(r._domainsStates[n]=_P({},AP),r._domainsStates[n].resource=t),r._domains.push(n)}})),Array.isArray(r._domains)&&r._domains.length>0&&(r.isBlockedByCSP(t,r._domains),r._domUtils.onDocumentBody(t.Context,(function(){r.connectDomains(t)}))))})),r._configurationRepository=t.configurationRepository,r._dataQ=t.dataQ,r._utils=t.utils,r._domUtils=t.domUtils,r._eventType=t.eventType,r._messageBus=t.messageBus,r._windowMessageEmitter=t.windowMessageEventEmitter,r._messageBus.subscribe(ho,r.windowMessageHandler),r._generatedMUID=r._utils.dateNow()+"-"+r._utils.generateUUID().toUpperCase(),r._domainsStates={},r._domainsResources=[],r._domains=[],r._domainsTimeoutFunc=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OP(t,e)}(e,t),kP(e,null,[{key:"getDefaultSettings",value:function(){return jP}},{key:"Builder",get:function(){return function(){return kP((function t(e,r,n,o,i){SP(this,t),this.configurationRepository=e,this.dataQ=r,this.utils=n,this.domUtils=o,this.eventType=i}),[{key:"withMessageBus",value:function(t){return this.messageBus=t,this}},{key:"withWindowMessageEventEmitter",value:function(t){return this.windowMessageEventEmitter=t,this}},{key:"build",value:function(){return new e(this)}}])}()}},{key:"generateRandomID",value:function(){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",e="",r=0;r<16;r++)e+=t.charAt(Math.floor(36*Math.random()));return e}}])}(Co),DP=NP;function FP(t){return FP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FP(t)}function UP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HP(n.key),n)}}function HP(t){var e=function(t,e){if("object"!=FP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FP(e)?e:e+""}var GP=function(){return function(t,e,r){return e&&UP(t.prototype,e),r&&UP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"getEventTimestamp",value:function(){return We.dateNow()}},{key:"getTimestampFromEvent",value:function(t){return t.timeStamp?We.cutDecimalPointDigits(t.timeStamp,3):0}},{key:"updateFeatureConfig",value:function(){}},{key:"processElements",value:function(t,e,r,n,o){t.forEach((function(t){var i=r.isListed(t);i&&!e?n.call(r,t):i||o.call(r,t,!1)}))}}])}();function WP(t){return WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WP(t)}function VP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JP(n.key),n)}}function KP(t,e,r){return e=zP(e),function(t,e){if(e&&("object"==WP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,QP()?Reflect.construct(e,r||[],zP(t).constructor):e.apply(t,r))}function QP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(QP=function(){return!!t})()}function zP(t){return zP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zP(t)}function qP(t,e){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qP(t,e)}function YP(t,e,r){return(e=JP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JP(t){var e=function(t,e){if("object"!=WP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WP(e)?e:e+""}function XP(t){return function(t){if(Array.isArray(t))return ZP(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ZP(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZP(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var $P="input:not([type='color']):not([type='hidden']):not([type='file']):not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea",tT=function(t,e){return{applyAction:function(r,n,o){if(!["start","stop"].includes(n))return!1;var i=r.getDocument(),a=[];if(e>0){var s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(r<=0)return[];var n=[],o=t.querySelectorAll($P);return n.push.apply(n,XP(o)),r>1&&t.querySelectorAll("*").forEach((function(t){t.shadowRoot&&n.push.apply(n,XP(s(t.shadowRoot,r-1)))})),n};a=s(i)}else for(var u=i.querySelectorAll($P),c=0;c<u.length;c++)a.push(u[c]);a.length>0&&t[n](a,r.Context,o)}}},eT=function(t){function e(t,r,n,o,i,a,s,u,c){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),YP(l=KP(this,e),"handleInputEvents",(function(t){"InputEvent"===t.constructor.name&&l._inputEventsPerElement.set(t.target,{});var e=t.target.value||"";""!==e&&(e=l._maskingService.maskText(e,t.target.id)),l._sendToQueue(t,{length:e?e.length:0,elementValues:e,selected:-1})})),YP(l,"handleFocusBlurEvents",(function(t){l._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),YP(l,"handleSyntheticInputEvents",(function(t){if(!l._inputEventsPerElement.has(t.target)||void 0!==t.jQueryMask&&("autotab"===t.jQueryMask||"prasleyValidator"===t.jQueryMask)){var e=t.target.value||"";""!==e&&(e=l._maskingService.maskText(e,t.target.id)),l._sendToQueue(t,{length:e?e.length:0,elementValues:e,selected:-1})}})),l._elements=t,l._sendToQueue=r,l._messageBus=o,l._CDUtils=n,l._StandardInputEventsEmitter=i,l._SyntheticMaskInputEventsHandler=a,l._SyntheticAutotabInputEventsHandler=s,l._maskingService=u,l._inputEventsPerElement=new WeakMap,l._maxShadowDepth=c,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}(e,t),function(t,e,r){return e&&VP(t.prototype,e),r&&VP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){this._messageBus.subscribe(Qn,this.handleInputEvents),this._messageBus.subscribe(zn,this.handleFocusBlurEvents),this._messageBus.subscribe(qn,this.handleFocusBlurEvents),this._messageBus.subscribe(to,this.handleSyntheticInputEvents),tT(this._StandardInputEventsEmitter,this._maxShadowDepth).applyAction(t,"start"),tT(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth).applyAction(t,"start"),tT(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth).applyAction(t,"start")}},{key:"unbind",value:function(t){tT(this._StandardInputEventsEmitter,this._maxShadowDepth).applyAction(t,"stop"),tT(this._SyntheticMaskInputEventsHandler,this._maxShadowDepth).applyAction(t,"stop"),tT(this._SyntheticAutotabInputEventsHandler,this._maxShadowDepth).applyAction(t,"stop"),this._messageBus.unsubscribe(Qn,this.handleInputEvents),this._messageBus.unsubscribe(zn,this.handleFocusBlurEvents),this._messageBus.unsubscribe(qn,this.handleFocusBlurEvents),this._messageBus.unsubscribe(to,this.handleSyntheticInputEvents)}},{key:"addOnLoadInputData",value:function(t,e){var r=t.getDocument().querySelectorAll($P);this.processElements(r,e,this._elements,this._elements.resendElementPerContext,this._elements.getElement)}}])}(GP),rT=eT;function nT(t){return nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nT(t)}function oT(t){return function(t){if(Array.isArray(t))return iT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return iT(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iT(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function aT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fT(n.key),n)}}function sT(t,e,r){return e=cT(e),function(t,e){if(e&&("object"==nT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uT()?Reflect.construct(e,r||[],cT(t).constructor):e.apply(t,r))}function uT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uT=function(){return!!t})()}function cT(t){return cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cT(t)}function lT(t,e){return lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lT(t,e)}function fT(t){var e=function(t,e){if("object"!=nT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nT(e)?e:e+""}var hT=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=fT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(u=sT(this,e),"handleInputEvents",(function(t){var e,r,n,o,i,a,s="",c=null==t||null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,null===(r=u._inputElementSettings)||void 0===r?void 0:r.elementDataAttribute);if(c)s=c;else if(null!=t&&null!==(n=t.target)&&void 0!==n&&n.ariaValueNow)s=t.target.ariaValueNow;else if(null!=t&&null!==(o=t.target)&&void 0!==o&&o.value){var l;s=null===(l=t.target)||void 0===l?void 0:l.value}else if(null!=t&&t[null===(i=u._inputElementSettings)||void 0===i?void 0:i.elementDataAttribute]){var f;s=t[null===(f=u._inputElementSettings)||void 0===f?void 0:f.elementDataAttribute]}""!==s&&(s=u._maskingService.maskText(s,t.id)),""!==s&&u._sendToQueue(t,{length:(null===(a=s)||void 0===a?void 0:a.length)||0,elementValues:s,selected:-1})})),u._elements=t,u._sendToQueue=r,u._CDUtils=n,u._messageBus=o,u._StandardCustomInputEmitter=i,u._maskingService=a,u._inputElementSettings=s,u._elementsFromDoc={mainElement:"",customButtons:[]},u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lT(t,e)}(e,t),function(t,e,r){return e&&aT(t.prototype,e),r&&aT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e,r,n,o;if(null!==(e=this._inputElementSettings)&&void 0!==e&&e.parentElementSelector||null!==(r=this._inputElementSettings)&&void 0!==r&&r.childElementWithCustomAttribute){var i=t.getDocument();this._messageBus.subscribe(bo,this.handleInputEvents);var a=[null===(n=this._elementsFromDoc)||void 0===n?void 0:n.mainElement].concat(oT(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.addListenersBySelector(a)}}},{key:"unbind",value:function(t){var e,r,n,o;if(null!==(e=this._inputElementSettings)&&void 0!==e&&e.parentElementSelector||null!==(r=this._inputElementSettings)&&void 0!==r&&r.childElementWithCustomAttribute){var i=t.getDocument();this._messageBus.subscribe(bo,this.handleInputEvents);var a=[null===(n=this._elementsFromDoc)||void 0===n?void 0:n.mainElement].concat(oT(this._elementsFromDoc.customButtons));""===(null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement)&&this.getSelectElementsFromDoc(i),this.removeListenersBySelector(a)}}},{key:"getSelectElementsFromDoc",value:function(t){var e,r,n,o=this,i=t.querySelector("body"),a=t.querySelector(null===(e=this._inputElementSettings)||void 0===e?void 0:e.childElementWithCustomAttribute);i&&(a&&(this._elementsFromDoc.mainElement=a),null!==(r=this._inputElementSettings)&&void 0!==r&&r.customButtons&&(null===(n=this._inputElementSettings)||void 0===n||n.customButtons.forEach((function(e){var r=t.querySelector(e);r&&o._elementsFromDoc.customButtons.push(r)}))));return this._elementsFromDoc}},{key:"addListenersBySelector",value:function(t){var e;null!==(e=this._elementsFromDoc)&&void 0!==e&&e.mainElement&&t.length>=1&&this._StandardCustomInputEmitter.start(t)}},{key:"removeListenersBySelector",value:function(t){var e;null!==(e=this._elementsFromDoc)&&void 0!==e&&e.mainElement&&t.length>=1&&this._StandardCustomInputEmitter.stop(t),this._elementsFromDoc={mainElement:"",customButtons:[]}}},{key:"addOnLoadInputData",value:function(t,e){var r,n,o,i,a,s=this;if(null!==(r=this._inputElementSettings)&&void 0!==r&&r.parentElementSelector||null!==(n=this._inputElementSettings)&&void 0!==n&&n.childElementWithCustomAttribute){var u=t.getDocument(),c=[null===(o=this._elementsFromDoc)||void 0===o?void 0:o.mainElement].concat(oT(this._elementsFromDoc.customButtons));""===(null===(i=this._elementsFromDoc)||void 0===i?void 0:i.mainElement)&&this.getSelectElementsFromDoc(u),null!==(a=this._elementsFromDoc)&&void 0!==a&&a.mainElement&&c.length>=1&&c.forEach((function(t){s._elements.isListed(t)?e||s._elements.resendElementPerContext(t):s._elements.getElement(t,!1)}))}}}])}(GP),dT=hT;function pT(t){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pT(t)}function yT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_T(n.key),n)}}function vT(t,e,r){return e=bT(e),function(t,e){if(e&&("object"==pT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mT()?Reflect.construct(e,r||[],bT(t).constructor):e.apply(t,r))}function mT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mT=function(){return!!t})()}function bT(t){return bT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bT(t)}function gT(t,e){return gT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gT(t,e)}function _T(t){var e=function(t,e){if("object"!=pT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pT(e)?e:e+""}var wT="input[type='button'], input[type='radio'], input[type='checkbox'], button",ST=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=_T(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(u=vT(this,e),"handleOnClickEvents",(function(t){var e=t.target,r=e.value||e.innerHTML||"";r=u._maskingService.maskText(r,t.target.id),u._sendToQueue(t,{length:r.length,elementValues:r,selected:void 0===e.checked?-1:e.checked?1:0})})),u._elements=s,u._sendToQueue=t,u._CDUtils=r,u._messageBus=n,u._StandardOnClickEventsEmitter=i,u._configurationRepository=o,u._enableAutoElementId=o.get(st),u._maskingService=a,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gT(t,e)}(e,t),function(t,e,r){return e&&yT(t.prototype,e),r&&yT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe(Yn,this.handleOnClickEvents),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){for(var e=[],r=t.getDocument().querySelectorAll(wT),n=0;n<r.length;n++)e.push(r[n]);this._StandardOnClickEventsEmitter.stop(e),this._messageBus.unsubscribe(Yn,this.handleOnClickEvents)}},{key:"addListenersBySelector",value:function(t){for(var e=[],r=t.querySelectorAll(wT),n=0;n<r.length;n++)e.push(r[n]);this._StandardOnClickEventsEmitter.start(e)}},{key:"addOnLoadInputData",value:function(t,e){if(this._enableAutoElementId){var r=t.getDocument().querySelectorAll(wT);this.processElements(r,e,this._elements,this._elements.resendElementPerContext,this._elements.getElement)}}}])}(GP),ET=ST;function kT(t){return kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kT(t)}function PT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jT(n.key),n)}}function TT(t,e,r){return e=OT(e),function(t,e){if(e&&("object"==kT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CT()?Reflect.construct(e,r||[],OT(t).constructor):e.apply(t,r))}function CT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CT=function(){return!!t})()}function OT(t){return OT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OT(t)}function MT(t,e){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MT(t,e)}function BT(t,e,r){return(e=jT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jT(t){var e=function(t,e){if("object"!=kT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kT(e)?e:e+""}var xT="select",LT=function(t){function e(t,r,n,o,i,a,s,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),BT(c=TT(this,e),"handleOnChangeEvents",(function(t){var e=c._CDUtils.getDropDownListValues(t.target,c._maskingService).join(";");e=c._CDUtils.clearTextFromNumbers(e);var r=t.target.selectedIndex,n=t.target.value.length;c._sendToQueue(t,{length:n,selected:r,elementValues:e})})),BT(c,"handleBlurEvent",(function(t){c._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),BT(c,"handleFocusEvent",(function(t){c._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),c._sendToQueue=t,c._CDUtils=r,c._messageBus=n,c._StandardOnChangeEventsEmitter=o,c._elementFocusEventEmitter=i,c._elementBlurEventEmitter=a,c._configurationRepository=s,c._collectSelectElementBlurAndFocusEvents=c._configurationRepository.get(X),c._maskingService=u,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MT(t,e)}(e,t),function(t,e,r){return e&&PT(t.prototype,e),r&&PT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe(Jn,this.handleOnChangeEvents),this._messageBus.subscribe(Xn,this.handleFocusEvent),this._messageBus.subscribe(Zn,this.handleBlurEvent),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){var e=t.getDocument(),r=this._getSelectElementsFromDoc(e);this._StandardOnChangeEventsEmitter.stop(r),this._elementFocusEventEmitter.stop(r),this._elementBlurEventEmitter.stop(r),this._messageBus.unsubscribe(Jn,this.handleOnChangeEvents),this._messageBus.unsubscribe(Xn,this.handleFocusEvent),this._messageBus.unsubscribe(Zn,this.handleBlurEvent)}},{key:"addListenersBySelector",value:function(t){var e=this._getSelectElementsFromDoc(t);this._StandardOnChangeEventsEmitter.start(e),this._collectSelectElementBlurAndFocusEvents&&(this._elementFocusEventEmitter.start(e),this._elementBlurEventEmitter.start(e))}},{key:"updateSettings",value:function(t){if(this._collectSelectElementBlurAndFocusEvents=this._configurationRepository.get(X),!this._collectSelectElementBlurAndFocusEvents){var e=t.getDocument(),r=this._getSelectElementsFromDoc(e);this._elementFocusEventEmitter.stop(r),this._elementBlurEventEmitter.stop(r)}}},{key:"_getSelectElementsFromDoc",value:function(t){for(var e=[],r=t.querySelectorAll(xT),n=0;n<r.length;n++)e.push(r[n]);return e}}])}(GP),RT=LT;function AT(t){return AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AT(t)}function IT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HT(n.key),n)}}function NT(t,e,r){return e=FT(e),function(t,e){if(e&&("object"==AT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,DT()?Reflect.construct(e,r||[],FT(t).constructor):e.apply(t,r))}function DT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(DT=function(){return!!t})()}function FT(t){return FT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FT(t)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UT(t,e)}function HT(t){var e=function(t,e){if("object"!=AT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AT(e)?e:e+""}var GT="form",WT=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,r){(e=HT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(o=NT(this,e),"handleOnFormEvents",(function(t){oe.trace("ElementEvents:_onFormSubmitEvent"),o._sendToQueue(t,{length:0,selected:-1,elementValues:""})})),o._sendToQueue=t,o._messageBus=r,o._StandardOnFormEventsEmitter=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}(e,t),function(t,e,r){return e&&IT(t.prototype,e),r&&IT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"bind",value:function(t){var e=t.getDocument();this._messageBus.subscribe($n,this.handleOnFormEvents),this.addListenersBySelector(e)}},{key:"unbind",value:function(t){for(var e=[],r=t.getDocument().querySelectorAll(GT),n=0;n<r.length;n++)e.push(r[n]);this._StandardOnFormEventsEmitter.stop(e),this._messageBus.unsubscribe($n,this.handleOnFormEvents)}},{key:"addListenersBySelector",value:function(t){for(var e=[],r=t.querySelectorAll(GT),n=0;n<r.length;n++)e.push(r[n]);this._StandardOnFormEventsEmitter.start(e)}}])}(GP),VT=WT;function KT(t){return KT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KT(t)}function QT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zT(n.key),n)}}function zT(t){var e=function(t,e){if("object"!=KT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KT(e)?e:e+""}var qT=function(){return function(t,e,r){return e&&QT(t.prototype,e),r&&QT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"detectPrivateMode",value:function(t){this._isWebkitBrowser()?this._detectPrivateBrowsingOnWebkit(t):this._isMozillaBrowser()?this._detectPrivateBrowsingOnMozilla(t):this._isIE10OrLater(window.navigator.userAgent)?this._detectPrivateBrowsingOnIESinceVersion10(t):window.localStorage&&/Safari/.test(window.navigator.userAgent)?this._detectPrivateBrowsingOnSafari(t):t(null)}},{key:"_isWebkitBrowser",value:function(){return!!window.webkitRequestFileSystem}},{key:"_isMozillaBrowser",value:function(){return"MozAppearance"in document.documentElement.style}},{key:"_isIE10OrLater",value:function(t){var e=t.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var r=/(?:msie|rv:)\s?([\d\.]+)/.exec(e);if(r&&parseInt(r[1],10)>=10)return!0;if((r="documentElement"in document&&("filters"in document.documentElement||"documentMode"in document))&&document.documentMode&&parseFloat((e.match(/.+(?:ie|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;r=/edge/.test(e);var n=!!e.match(/trident\/7\./);if((r||n)&&parseFloat((e.match(/.+(?:edge|rv)[\/: ]([\d.]+)/)||[])[1])>=10)return!0;return!1}},{key:"_detectPrivateBrowsingOnWebkit",value:function(t){void 0!==navigator.storage&&"function"==typeof navigator.storage.estimate?this._storageEstimateDetectionOnWebkit(t):this._fileSystemDetectionOnWebkit(t)}},{key:"_fileSystemDetectionOnWebkit",value:function(t){window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t(!1)}),(function(){t(!0)}))}},{key:"_storageEstimateDetectionOnWebkit",value:function(t){navigator.storage.estimate().then((function(e){var r=e.quota;t(r<12e7)})).catch((function(t){oe.error("failed to detect private browsing",t)}))}},{key:"_detectPrivateBrowsingOnMozilla",value:function(t){try{var e=(indexedDB||window.indexedDB).open("test");e.onerror=function(){t(!0)},e.onsuccess=function(){t(!1)}}catch(e){t(!0)}}},{key:"_detectPrivateBrowsingOnIESinceVersion10",value:function(t){var e=!1;try{window.indexedDB||(e=!0)}catch(t){e=!0}t(e)}},{key:"_detectPrivateBrowsingOnSafari",value:function(t){var e;try{window.openDatabase(null,null,null,null)}catch(t){e=!0}try{window.localStorage.setItem("test",1)}catch(t){e=!0}e||(e=!1,window.localStorage.removeItem("test")),t(e)}}])}();function YT(t){return YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YT(t)}function JT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XT(n.key),n)}}function XT(t){var e=function(t,e){if("object"!=YT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YT(e)?e:e+""}var ZT=1,$T=2,tC=3,eC=4,rC=5,nC=1,oC=2,iC=3,aC=4,sC=function(){return function(t,e,r){return e&&JT(t.prototype,e),r&&JT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"getPointerHover",value:function(){var t={pointer:rC,hover:rC};if(window.matchMedia){var e=window.matchMedia;e("( any-pointer: fine )").matches?t.pointer=ZT:e("( any-pointer: coarse )").matches?t.pointer=$T:e("( any-pointer: none )").matches?t.pointer=tC:e("( any-pointer )").matches&&(t.pointer=eC),e("( any-hover: hover )").matches?t.hover=nC:e("( any-hover: on-demand )").matches?t.hover=oC:e("( any-hove: none )").matches?t.hover=iC:window.matchMedia("( any-hover )").matches&&(t.hover=aC)}return t}}])}();function uC(t){return uC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uC(t)}function cC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lC(n.key),n)}}function lC(t){var e=function(t,e){if("object"!=uC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uC(e)?e:e+""}var fC=function(){return function(t,e,r){return e&&cC(t.prototype,e),r&&cC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e,this._scriptList=[]}),[{key:"count",value:function(){return this._scriptList.length}},{key:"exists",value:function(t){/\d\d\d/.test(t.src)&&(t.src=this._utils.clearTextFromNumbers(t.src));for(var e=this._utils.getHash(t.text),r=0;r<this._scriptList.length;r++)if(t.src&&t.src===this._scriptList[r].src||e&&e===this._scriptList[r].textHash)return!0;return!1}},{key:"add",value:function(t){t.textHash=this._utils.getHash(t.text),/\d\d\d/.test(t.src)&&(t.src=this._utils.clearTextFromNumbers(t.src)),this._scriptList.push({src:t.src,textHash:t.textHash})}}])}();function hC(t){return hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hC(t)}function dC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pC(n.key),n)}}function pC(t){var e=function(t,e){if("object"!=hC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hC(e)?e:e+""}var yC=function(){return function(t,e,r){return e&&dC(t.prototype,e),r&&dC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=pC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleMutationEvent",(function(t,e){t&&e&&r._messageBus.publish(Wn,{mutation:t,browserContext:e})})),this._messageBus=e,"object"!==hC(this._messageBus))throw new Error("Bootstrap aborted! MessageBus missing for MutationEmitter");this._documentObservers=new WeakMap}),[{key:"startObserver",value:function(t){var e=this,r=t.getDocument();if(!this._documentObservers.has(r)){var n=new window.MutationObserver((function(r){try{for(var n=0;n<r.length;n++){var o=r[n];if(o.addedNodes.length>0){e.handleMutationEvent(o,t);break}}}catch(t){oe.error("An error has occurred: ".concat(t.message))}}));n.observe(r,{childList:!0,subtree:!0}),this._documentObservers.set(r,{instance:n})}}},{key:"stopObserver",value:function(t){var e,r=t.getDocument();this._documentObservers.has(r)&&(e=this._documentObservers.get(r))&&(e.instance&&e.instance.disconnect(),this._documentObservers.delete(r))}}])}();function vC(t){return vC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vC(t)}function mC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gC(n.key),n)}}function bC(t,e,r){return(e=gC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gC(t){var e=function(t,e){if("object"!=vC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vC(e)?e:e+""}var _C=function(){return function(t,e,r){return e&&mC(t.prototype,e),r&&mC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bC(this,"handleInputEvents",(function(t){o._messageBus.publish(Qn,t)})),bC(this,"handleFocusEvents",(function(t){o._messageBus.publish(zn,t)})),bC(this,"handleBlurEvents",(function(t){o._messageBus.publish(qn,t)})),this._messageBus=e,this._eventAggregator=r,this._elementBindingWMap=new WeakMap,this._utils=n,this.defaultInputEventListener=[{event:"input",handler:this.handleInputEvents},{event:"focus",handler:this.handleFocusEvents},{event:"blur",handler:this.handleBlurEvents}]}),[{key:"start",value:function(t,e,r){var n=this;t.forEach((function(t){if(!n._elementBindingWMap.has(t)){var o=[];void 0!==r?"function"==typeof r.func&&Array.isArray(r.allowedEvents)&&r.allowedEvents.length>0&&(r.func(e,t)?n.defaultInputEventListener.forEach((function(t){r.allowedEvents.includes(t.event)&&o.push(t)})):o=Array.from(n.defaultInputEventListener)):o=Array.from(n.defaultInputEventListener),o.forEach((function(e){n._eventAggregator.addEventListener(t,e.event,e.handler)})),n._elementBindingWMap.set(t,{isBinded:!0,listeners:[n.handleInputEvents,n.handleFocusEvents,n.handleBlurEvents],isUsingJQuery:!1})}}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var r=e._elementBindingWMap.get(t);r&&r.isBinded&&(e.defaultInputEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(r){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach((function(r){e._utils.JQueryUtils.addEventListener(t,r.event,r.handler)}))}else this.defaultInputEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleInputEvents,this.handleFocusEvents,this.handleBlurEvents],isUsingJQuery:r})}}},{key:"removeElementEvents",value:function(t){var e=this,r=this._elementBindingWMap.get(t);if(r&&r.isBinded){if(r.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultInputEventListener.forEach((function(r){e._utils.JQueryUtils.removeEventListener(t,r.event,r.handler)}))}else this.defaultInputEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}();function wC(t){return wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wC(t)}function SC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EC(n.key),n)}}function EC(t){var e=function(t,e){if("object"!=wC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wC(e)?e:e+""}var kC=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){kC=!0}});window.addEventListener("test",null,t)}catch(t){}}();var PC=function(){return function(t,e,r){return e&&SC(t.prototype,e),r&&SC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"addEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];kC?t.addEventListener(e,r,{capture:n,passive:o,once:i}):t.addEventListener?t.addEventListener(e,r,n):t.attachEvent("on"+e,r)}},{key:"removeEventListener",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener?t.removeEventListener(e,r,n):t.detachEvent("on"+e,r)}}])}();function TC(t){return TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TC(t)}function CC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OC(n.key),n)}}function OC(t){var e=function(t,e){if("object"!=TC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TC(e)?e:e+""}var MC=function(){return function(t,e,r){return e&&CC(t.prototype,e),r&&CC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=OC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleOnClickEvents",(function(t){o._messageBus.publish(Yn,t)})),this._messageBus=e,this._eventAggregator=r,this._elementBindingWMap=new WeakMap,this._utils=n,this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnClickEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnClickEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var r=e._elementBindingWMap.get(t);r&&r.isBinded&&(e.defaultOnClickEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(r){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach((function(r){e._utils.JQueryUtils.addEventListener(t,r.event,r.handler)}))}else this.defaultOnClickEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnClickEvents],isUsingJQuery:r})}}},{key:"removeElementEvents",value:function(t){var e=this,r=this._elementBindingWMap.get(t);if(r&&r.isBinded){if(r.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnClickEventListener.forEach((function(r){e._utils.JQueryUtils.removeEventListener(t,r.event,r.handler)}))}else this.defaultOnClickEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),BC=MC;function jC(t){return jC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jC(t)}function xC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LC(n.key),n)}}function LC(t){var e=function(t,e){if("object"!=jC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jC(e)?e:e+""}var RC=function(){return function(t,e,r){return e&&xC(t.prototype,e),r&&xC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=LC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleOnChangeEvents",(function(t){o._messageBus.publish(Jn,t)})),this._messageBus=e,this._eventAggregator=r,this._elementBindingWMap=new WeakMap,this._utils=n,this.defaultOnChangeEventListener=[{event:"change",handler:this.handleOnChangeEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnChangeEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnChangeEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var r=e._elementBindingWMap.get(t);r&&r.isBinded&&(e.defaultOnChangeEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(r){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach((function(r){e._utils.JQueryUtils.addEventListener(t,r.event,r.handler)}))}else this.defaultOnChangeEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnChangeEvents],isUsingJQuery:r})}}},{key:"removeElementEvents",value:function(t){var e=this,r=this._elementBindingWMap.get(t);if(r&&r.isBinded){if(r.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnChangeEventListener.forEach((function(r){e._utils.JQueryUtils.removeEventListener(t,r.event,r.handler)}))}else this.defaultOnChangeEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),AC=RC;function IC(t){return IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IC(t)}function NC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DC(n.key),n)}}function DC(t){var e=function(t,e){if("object"!=IC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IC(e)?e:e+""}var FC=function(){return function(t,e,r){return e&&NC(t.prototype,e),r&&NC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=DC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleOnFormSubmitEvents",(function(t){o._messageBus.publish($n,t)})),this._messageBus=e,this._eventAggregator=r,this._elementBindingWMap=new WeakMap,this._utils=n,this.defaultOnFormEventListener=[{event:"submit",handler:this.handleOnFormSubmitEvents}]}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._elementBindingWMap.has(t)||(e.defaultOnFormEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)})),e._elementBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnFormSubmitEvents],isUsingJQuery:!1}))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var r=e._elementBindingWMap.get(t);r&&r.isBinded&&(e.defaultOnFormEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),e._elementBindingWMap.delete(t))}))}},{key:"addElementEvents",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._elementBindingWMap.has(t)){if(r){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to add event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach((function(r){e._utils.JQueryUtils.addEventListener(t,r.event,r.handler)}))}else this.defaultOnFormEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)}));this._elementBindingWMap.set(t,{isBinded:!0,listeners:[this.handleOnFormSubmitEvents],isUsingJQuery:r})}}},{key:"removeElementEvents",value:function(t){var e=this,r=this._elementBindingWMap.get(t);if(r&&r.isBinded){if(r.isUsingJQuery){if(!this._utils.JQueryUtils.isJQueryAvailable())return void oe.error("Unable to remove event listeners for element using jQuery because jQuery is not available");this.defaultOnFormEventListener.forEach((function(r){e._utils.JQueryUtils.removeEventListener(t,r.event,r.handler)}))}else this.defaultOnFormEventListener.forEach((function(t){e._eventAggregator.removeEventListener(elements,t.event,t.handler)}));this._elementBindingWMap.delete(t)}}}])}(),UC=FC;function HC(t){return HC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HC(t)}function GC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WC(n.key),n)}}function WC(t){var e=function(t,e){if("object"!=HC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HC(e)?e:e+""}var VC=function(){return function(t,e,r){return e&&GC(t.prototype,e),r&&GC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=WC(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"isJQueryDataSupported",(function(t){return!(!t.jQuery||!t.jQuery._data)})),this._messageBus=e,this._eventAggregator=r,this._elementBindingWMap=new WeakMap,this._utils=n,this.defaultEventListener=[{event:"keypress",handler:this.handleKeypressEvents.bind(this)}]}),[{key:"handleKeypressEvents",value:function(t,e){}},{key:"registerElement",value:function(t,e){var r=this;if(!this._elementBindingWMap.has(t)){var n={};this.defaultEventListener.forEach((function(o){var i=function(t){o.handler(t,e)};n[o.event]=i,r._eventAggregator.addEventListener(t,o.event,i)})),this._elementBindingWMap.set(t,{isBinded:!0,listeners:n})}}},{key:"unregisterElements",value:function(t){var e=this;t.forEach((function(t){var r=e._elementBindingWMap.get(t);r&&r.isBinded&&(e.defaultEventListener.forEach((function(n){e._eventAggregator.removeEventListener(t,n.event,r.listeners[n.event])})),e._elementBindingWMap.delete(t))}))}},{key:"publishEvent",value:function(t,e,r,n){var o={bubbles:!0,cancelBubble:!1,cancelable:!1,composed:!0,currentTarget:null,data:n,dataTransfer:null,defaultPrevented:!1,detail:0,eventPhase:0,inputType:r,isComposing:!1,isTrusted:!0,jqueryMask:e,returnValue:!0,sourceCapabilities:null,srcElement:Object.assign(t.target||t.srcElement,{}),target:Object.assign(t.target,{}),timeStamp:t.timeStamp,type:"input",view:null,which:0};this._messageBus.publish(to,o)}}])}();function KC(t){return KC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KC(t)}function QC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zC(n.key),n)}}function zC(t){var e=function(t,e){if("object"!=KC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KC(e)?e:e+""}function qC(t,e,r){return e=JC(e),function(t,e){if(e&&("object"==KC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YC()?Reflect.construct(e,r||[],JC(t).constructor):e.apply(t,r))}function YC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YC=function(){return!!t})()}function JC(t){return JC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JC(t)}function XC(t,e){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XC(t,e)}var ZC=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qC(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XC(t,e)}(e,t),function(t,e,r){return e&&QC(t.prototype,e),r&&QC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"start",value:function(t,e){var r=this;e=e||window.self,t.forEach((function(t){r.isJQueryDataSupported(e)&&r.hasMaskEventSupported(t,e)&&r.registerElement(t,e)}))}},{key:"stop",value:function(t){this.unregisterElements(t)}},{key:"hasMaskEventSupported",value:function(t,e){var r=e.jQuery._data(t,"events");if(void 0===r)return!1;for(var n=Object.keys(r),o=0;o<n.length;o++)if("unmask"===n[o])return!0;return!1}},{key:"handleKeypressEvents",value:function(t,e){if(this.isJQueryDataSupported(e)&&this.hasMaskEventSupported(t.target,e)){var r=t.key;this.publishEvent(t,"maskedInput","insertText",r)}}}])}(VC);function $C(t){return $C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$C(t)}function tO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eO(n.key),n)}}function eO(t){var e=function(t,e){if("object"!=$C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$C(e)?e:e+""}function rO(t,e,r){return e=oO(e),function(t,e){if(e&&("object"==$C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nO()?Reflect.construct(e,r||[],oO(t).constructor):e.apply(t,r))}function nO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nO=function(){return!!t})()}function oO(t){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oO(t)}function iO(t,e){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iO(t,e)}var aO=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rO(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iO(t,e)}(e,t),function(t,e,r){return e&&tO(t.prototype,e),r&&tO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"start",value:function(t,e){var r=this;t.forEach((function(t){r.isJQueryDataSupported(e)&&r.hasjQueryAutoTab(t,e)&&r.registerElement(t,e)}))}},{key:"stop",value:function(t){this.unregisterElements(t)}},{key:"hasjQueryAutoTab",value:function(t,e){if(void 0===e.jQuery._data(t,"events"))return!1;for(var r=Object.keys(e.jQuery._data(t,"events")),n=0;n<r.length;n++)if(-1!==r[n].indexOf("autotab"))return!0;return!1}},{key:"handleKeypressEvents",value:function(t,e){if(this.isJQueryDataSupported(e)&&this.hasjQueryAutoTab(t.target,e)){var r=t.key;8!==t.keyCode&&this.publishEvent(t,"autotab","insertText",r)}}}])}(VC);function sO(t){return sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sO(t)}function uO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cO(n.key),n)}}function cO(t){var e=function(t,e){if("object"!=sO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sO(e)?e:e+""}var lO=function(){return function(t,e,r){return e&&uO(t.prototype,e),r&&uO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=cO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleFocusEvent",(function(t){n._messageBus.publish(ao,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"focus",this.handleFocusEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"focus",this.handleFocusEvent)}}])}(),fO=lO;function hO(t){return hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hO(t)}function dO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pO(n.key),n)}}function pO(t){var e=function(t,e){if("object"!=hO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hO(e)?e:e+""}var yO=function(){return function(t,e,r){return e&&dO(t.prototype,e),r&&dO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=pO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleBlurEvent",(function(t){n._messageBus.publish(so,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"blur",this.handleBlurEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"blur",this.handleBlurEvent)}}])}(),vO=yO;function mO(t){return mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mO(t)}function bO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gO(n.key),n)}}function gO(t){var e=function(t,e){if("object"!=mO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mO(e)?e:e+""}var _O=function(){return function(t,e,r){return e&&bO(t.prototype,e),r&&bO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=gO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleResizeEvent",(function(t){n._messageBus.publish(uo,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"resize",this.handleResizeEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"resize",this.handleResizeEvent)}}])}(),wO=_O;function SO(t){return SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SO(t)}function EO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kO(n.key),n)}}function kO(t){var e=function(t,e){if("object"!=SO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SO(e)?e:e+""}var PO=function(){return function(t,e,r){return e&&EO(t.prototype,e),r&&EO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=kO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleDOMContentLoadedEvent",(function(t){n._messageBus.publish(co,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"DOMContentLoaded",this.handleDOMContentLoadedEvent)}}])}(),TO=PO;function CO(t){return CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CO(t)}function OO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MO(n.key),n)}}function MO(t){var e=function(t,e){if("object"!=CO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=CO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CO(e)?e:e+""}var BO=function(){return function(t,e,r){return e&&OO(t.prototype,e),r&&OO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=MO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleVisibilityChangeEvent",(function(t){n._messageBus.publish(lo,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"visibilitychange",this.handleVisibilityChangeEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"visibilitychange",this.handleVisibilityChangeEvent)}}])}(),jO=BO;function xO(t){return xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xO(t)}function LO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RO(n.key),n)}}function RO(t){var e=function(t,e){if("object"!=xO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xO(e)?e:e+""}var AO=function(){return function(t,e,r){return e&&LO(t.prototype,e),r&&LO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=RO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleScrollEvent",(function(t){n._messageBus.publish(fo,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"scroll",this.handleScrollEvent,!1,!0)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"scroll",this.handleScrollEvent)}}])}(),IO=AO;function NO(t){return NO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NO(t)}function DO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FO(n.key),n)}}function FO(t){var e=function(t,e){if("object"!=NO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NO(e)?e:e+""}var UO=function(){return function(t,e,r){return e&&DO(t.prototype,e),r&&DO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=FO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleWindowMessage",(function(t){t&&n._messageBus.publish(ho,{message:t})})),this._messageBus=e,this._EventAggregator=r,this._windowListeners=new WeakMap,this.defaultPostMessageEventListener=[{event:"message",handler:this.handleWindowMessage}]}),[{key:"startObserver",value:function(t){var e=this;this._windowListeners.has(t.Context)||(this.defaultPostMessageEventListener.forEach((function(r){e._EventAggregator.addEventListener(t.Context,r.event,r.handler)})),this._windowListeners.set(t.Context,{isBinded:!0,listeners:[this.handleWindowMessage]}))}},{key:"stopObserver",value:function(t){var e=this,r=this._windowListeners.get(t.Context);r&&r.isBinded&&(this.defaultPostMessageEventListener.forEach((function(r){e._EventAggregator.removeEventListener(t.Context,r.event,r.handler)})),this._windowListeners.delete(t.Context))}}])}();function HO(t){return HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HO(t)}function GO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WO(n.key),n)}}function WO(t){var e=function(t,e){if("object"!=HO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HO(e)?e:e+""}var VO=function(){return function(t,e,r){return e&&GO(t.prototype,e),r&&GO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=WO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleDeviceOrientationEvent",(function(t){n._messageBus.publish(oo,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(){this._eventAggregator.addEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}},{key:"stop",value:function(){this._eventAggregator.removeEventListener(window,"deviceorientation",this.handleDeviceOrientationEvent)}}])}(),KO=VO;function QO(t){return QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QO(t)}function zO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qO(n.key),n)}}function qO(t){var e=function(t,e){if("object"!=QO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QO(e)?e:e+""}var YO=function(){return function(t,e,r){return e&&zO(t.prototype,e),r&&zO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=qO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleBeforeInstallPrompt",(function(t){n._messageBus.publish(io,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.addEventListener(t,"beforeinstallprompt",this.handleBeforeInstallPrompt)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid window parameter");this._eventAggregator.removeEventListener(t,"beforeinstallprompt",this.handleBeforeInstallPrompt)}}])}(),JO=YO;function XO(t){return XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XO(t)}function ZO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$O(n.key),n)}}function $O(t){var e=function(t,e){if("object"!=XO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XO(e)?e:e+""}var tM=function(){return function(t,e,r){return e&&ZO(t.prototype,e),r&&ZO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=$O(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleCutEvent",(function(t){n._messageBus.publish(eo,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"cut",this.handleCutEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"cut",this.handleCutEvent)}}])}(),eM=tM;function rM(t){return rM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rM(t)}function nM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oM(n.key),n)}}function oM(t){var e=function(t,e){if("object"!=rM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rM(e)?e:e+""}var iM=function(){return function(t,e,r){return e&&nM(t.prototype,e),r&&nM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=oM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleCopyEvent",(function(t){n._messageBus.publish(ro,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"copy",this.handleCopyEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"copy",this.handleCopyEvent)}}])}(),aM=iM;function sM(t){return sM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sM(t)}function uM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cM(n.key),n)}}function cM(t){var e=function(t,e){if("object"!=sM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sM(e)?e:e+""}var lM=function(){return function(t,e,r){return e&&uM(t.prototype,e),r&&uM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=cM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handlePasteEvent",(function(t){n._messageBus.publish(no,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.addEventListener(t,"paste",this.handlePasteEvent)}},{key:"stop",value:function(t){if(!t)throw new Error("invalid document parameter");this._eventAggregator.removeEventListener(t,"paste",this.handlePasteEvent)}}])}(),fM=lM;function hM(t){return hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hM(t)}function dM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pM(n.key),n)}}function pM(t){var e=function(t,e){if("object"!=hM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hM(e)?e:e+""}var yM=function(){return function(t,e,r){return e&&dM(t.prototype,e),r&&dM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=pM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleElementFocusEvents",(function(t){n._messageBus.publish(Xn,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.addEventListener(t,"focus",e.handleElementFocusEvents)}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.removeEventListener(t,"focus",e.handleElementFocusEvents)}))}}])}(),vM=yM;function mM(t){return mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mM(t)}function bM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gM(n.key),n)}}function gM(t){var e=function(t,e){if("object"!=mM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mM(e)?e:e+""}var _M=function(){return function(t,e,r){return e&&bM(t.prototype,e),r&&bM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=gM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"handleElementBlurEvents",(function(t){n._messageBus.publish(Zn,t)})),this._messageBus=e,this._eventAggregator=r}),[{key:"start",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.addEventListener(t,"blur",e.handleElementBlurEvents)}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){e._eventAggregator.removeEventListener(t,"blur",e.handleElementBlurEvents)}))}}])}(),wM=_M;function SM(t){return SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SM(t)}function EM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PM(n.key),n)}}function kM(t,e,r){return(e=PM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PM(t){var e=function(t,e){if("object"!=SM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SM(e)?e:e+""}var TM=function(){return function(t,e,r){return e&&EM(t.prototype,e),r&&EM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kM(this,"mousemove",(function(t){o._messageBus.publish(bo,t)})),kM(this,"keydown",(function(t){o._messageBus.publish(bo,t)})),kM(this,"mouseleave",(function(t){o._eventAggregator.removeEventListener(t.target,"mousemove",o.mousemove),o._messageBus.publish(bo,t)})),kM(this,"mouseup",(function(t){o._eventAggregator.removeEventListener(t.target,"mousemove",o.mousemove),o._eventAggregator.removeEventListener(t.target,"mouseleave",o.mouseleave)})),kM(this,"mousedown",(function(t){o._eventAggregator.addEventListener(t.target,"mousemove",o.mousemove),o._eventAggregator.addEventListener(t.target,"mouseleave",o.mouseleave),o._eventAggregator.addEventListener(t.target,"mouseup",o.mouseup),o._eventAggregator.addEventListener(t.target,"keydown",o.keydown)})),kM(this,"handleFocus",(function(t){o._messageBus.publish(bo,t)})),kM(this,"handleMouseEnter",(function(t){o._eventAggregator.addEventListener(t.target,"mousedown",o.mousedown)})),kM(this,"handleOnClickEvents",(function(){o._messageBus.publish(bo,o._mainElm)})),this._messageBus=e,this._eventAggregator=r,this._utils=n,this._elementsBindingWMap=new WeakMap,this.customInputEventListener=[{event:"mouseenter",handler:this.handleMouseEnter},{event:"focus",handler:this.handleFocus}],this.defaultOnClickEventListener=[{event:"click",handler:this.handleOnClickEvents}],this._mainElm="",this._mainTagName=["SPAN","DIV"],this._btnTagName="BUTTON",this._btnInnerText=["+","-"]}),[{key:"start",value:function(t){var e=this;t&&t.forEach((function(t){e._elementsBindingWMap.has(t)||(null!=t&&t.tagName&&e._mainTagName.includes(t.tagName)&&(e._mainElm=t,e.customInputEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)})),e._elementsBindingWMap.set(t,{isBinded:!0,listeners:[e.handleMouseEnter,e.handleFocus],isUsingJQuery:!1})),(null!=t&&t.tagName&&t.tagName===e._btnTagName||null!=t&&t.innerText&&e._btnInnerText.includes(t.innerText))&&(e.defaultOnClickEventListener.forEach((function(r){e._eventAggregator.addEventListener(t,r.event,r.handler)})),e._elementsBindingWMap.set(t,{isBinded:!0,listeners:[e.handleOnClickEvents],isUsingJQuery:!1})))}))}},{key:"stop",value:function(t){var e=this;t.forEach((function(t){var r=e._elementsBindingWMap.get(t);null!=r&&r.isBinded&&(null!=t&&t.tagName&&e._mainTagName.includes(t.tagName)&&e.customInputEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),(null!=t&&t.tagName&&t.tagName===e._btnTagName||null!=t&&t.innerText&&e._btnInnerText.includes(t.innerText))&&e.defaultOnClickEventListener.forEach((function(r){e._eventAggregator.removeEventListener(t,r.event,r.handler)})),e._elementsBindingWMap.delete(t))}))}}])}(),CM=TM;function OM(t){return OM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OM(t)}function MM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function BM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xM(n.key),n)}}function jM(t,e,r){return(e=xM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xM(t){var e=function(t,e){if("object"!=OM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OM(e)?e:e+""}var LM=[{name:"MouseEvents",className:Pp,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.MouseEvents.instance=new Dy(this._msgBus,this._dataQ,this._utils,this._configurationRepository,tc):this._features.list.MouseEvents.instance=new Pp(this._utils,tc,this._elements,this._dataQ,this._configurationRepository)}}},{name:"KeyEvents",className:ni,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.KeyEvents.instance=new vy(this._msgBus,this._dataQ,this._utils,this._maskingService):this._features.list.KeyEvents.instance=new ni(this._configurationRepository,this._utils,this._elements,this._dataQ,this._msgBus,this._sameCharService,this._maskingService)}}},{name:"TouchEvents",className:Uo,init:function(){return function(){this._configurations.isFlutterApp()?this._features.list.TouchEvents.instance=new Cy(this._msgBus,this._dataQ,this._utils):this._features.list.TouchEvents.instance=new Uo(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"ClipboardEvents",className:Hf,init:function(){return function(){var t=new Hf.Builder(this._utils,this._elements,this._dataQ),e=new eM(this._msgBus,PC),r=new aM(this._msgBus,PC),n=new fM(this._msgBus,PC);t.withMessageBus(this._msgBus).withCutEventEmitter(e).withCopyEventEmitter(r).withPasteEventEmitter(n),this._features.list.ClipboardEvents.instance=t.build()}}},{name:"ElementEvents",className:Tf,init:function(){return function(){if(this._configurations.isFlutterApp())this._features.list.ElementEvents.instance=new ay(this._msgBus,this._dataQ,this._utils,this._contextMgr,this._maskingService);else{var t=new _C(this._msgBus,PC,this._utils),e=new BC(this._msgBus,PC,this._utils),r=new AC(this._msgBus,PC,this._utils),n=new vM(this._msgBus,PC,this._utils),o=new wM(this._msgBus,PC,this._utils),i=new UC(this._msgBus,PC,this._utils),a=new CM(this._msgBus,PC,this._utils),s=new Kr(MutationObserver,this._utils,tc,"jQueryElementListenerConfig",null,!1),u=(fP=t,hP=e,dP=r,pP=i,{bindInputEvents:yP,bindOnClickEvents:vP,bindOnChangeEvents:mP,bindOnFormsEvents:bP}),c=new Tf.Builder(this._configurationRepository,this._utils,tc,this._elements,this._dataQ,this._configurations.getMaxShadowDepth()),l=new yC(this._msgBus),f=new ZC(this._msgBus,PC,this._utils),h=new aO(this._msgBus,PC,this._utils);c.withjQueryElementListenerSiteMapper(s),c.withMessageBus(this._msgBus),c.withMutationEmitter(l),c.withjQueryElementsHandler(u),c.withInputEvents(rT,$P,this._maskingService),c.withStandardInputEventsEmitter(t),c.withSyntheticMaskInputEventsHandler(f),c.withSyntheticAutotabInputEventsHandler(h),c.withClickEvents(ET,wT),c.withStandardOnClickEventsEmitter(e),c.withSelectElementEvents(RT,xT),c.withElementFocusEventsEmitter(n),c.withElementBlurEventsEmitter(o),c.withStandardOnChangeEventsEmitter(r),c.withFormEvents(VT,GT),c.withStandardOnFormEventsEmitter(i),c.withCustomInputEventEmitter(dT,a),this._features.list.ElementEvents.instance=c.build()}}}},{name:"WindowEvents",className:Sh,init:function(){return function(){var t=new Sh.Builder(this._configurationRepository,We,this._dataQ),e=new fO(this._msgBus,PC),r=new vO(this._msgBus,PC),n=new wO(this._msgBus,PC),o=new TO(this._msgBus,PC),i=new jO(this._msgBus,PC),a=new IO(this._msgBus,PC);t.withMessageBus(this._msgBus),t.withFocusEventEmitter(e),t.withBlurEventEmitter(r),t.withResizeEventEmitter(n),t.withDOMContentLoadedEventEmitter(o),t.withVisibilityChangeEventEmitter(i),t.withScrollEventEmitter(a),this._features.list.WindowEvents.instance=t.build()}}},{name:"MetadataCollector",className:lP,init:function(){return function(){var t=new Kr(MutationObserver,this._utils,tc,"metadataConfig",null,!1);this._features.list.MetadataCollector.instance=new lP(this._configurationRepository,this._dataQ,t,this._utils)}}},{name:"TabsEvents",className:Dp,init:function(){return function(){this._features.list.TabsEvents.instance=new Dp(this._utils,this._dataQ)}}},{name:"DoNotTrack",className:mg,init:function(){return function(){this._features.list.DoNotTrack.instance=new mg(this._dataQ)}}},{name:"BrowserProps",className:tg,init:function(){return function(){this._features.list.BrowserProps.instance=new tg(this._dataQ,sC,this._utils,this._configurationRepository)}}},{name:"IsPrivateBrowsing",className:Y_,init:function(){return function(){var t=new qT;this._features.list.IsPrivateBrowsing.instance=new Y_(this._dataQ,t)}}},{name:"FontsDetectionFeature",className:eE,init:function(){return function(){this._features.list.FontsDetectionFeature.instance=new eE(this._utils,tc,this._dataQ,this._configurationRepository)}}},{name:"GraphicDetectFeature",className:Rg,init:function(){return function(){this._features.list.GraphicDetectFeature.instance=new Rg(this._dataQ)}}},{name:"BrowserDetect",className:iv,init:function(){return function(){this._features.list.BrowserDetect.instance=new iv(this._dataQ)}}},{name:"FilesFeature",className:eP,init:function(){return function(){this._features.list.FilesFeature.instance=new eP(this._configurationRepository,this._utils,this._sessionService,this._muidService,this._cidCache)}}},{name:"UserPermissions",className:x_,init:function(){return function(){this._features.list.UserPermissions.instance=new x_(this._dataQ)}}},{name:"MediaDevicesFeature",className:$g,init:function(){return function(){this._features.list.MediaDevicesFeature.instance=new $g(this._dataQ)}}},{name:"ContextPropsFeature",className:Nk,init:function(){return function(){this._features.list.ContextPropsFeature.instance=new Nk(this._dataQ,tc,this._perfMonitor,this._configurationRepository)}}},{name:"GfxRenderingFeature",className:kE,init:function(){return function(){this._features.list.GfxRenderingFeature.instance=new kE(this._dataQ,We)}}},{name:"AudioDetectFeature",className:ZE,init:function(){return function(){this._features.list.AudioDetectFeature.instance=new ZE(this._dataQ,We)}}},{name:"DevDebugFeature",className:Ok,init:function(){return function(){this._features.list.DevDebugFeature.instance=new Ok(this._dataQ,[this._muidEncryptedService])}}},{name:"ScriptsFeature",className:Qk,init:function(){return function(){var t=new fC(this._utils);this._features.list.ScriptsFeature.instance=new Qk(this._dataQ,t)}}},{name:"AccelerometerEvents",className:jh,init:function(){return function(){this._features.list.AccelerometerEvents.instance=new jh(this._configurationRepository,this._utils,this._sensorDataQ)}}},{name:"PinchZoomEvents",className:Kh,init:function(){return function(){this._features.list.PinchZoomEvents.instance=new Kh(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"ScriptEvents",className:rd,init:function(){return function(){this._features.list.ScriptEvents.instance=new rd(this._utils,this._dataQ)}}},{name:"NetInfoEvents",className:hd,init:function(){return function(){this._features.list.NetInfoEvents.instance=new hd(this._utils,this._dataQ)}}},{name:"DeviceOrientationCollector",className:Ed,init:function(){return function(){this._features.list.DeviceOrientationCollector.instance=new Ed(this._utils,this._dataQ)}}},{name:"TapEvents",className:Rd,init:function(){return function(){this._features.list.TapEvents.instance=new Rd(this._configurationRepository,this._utils,this._elements,this._dataQ)}}},{name:"LocationEvents",className:Yp,init:function(){return function(){this._features.list.LocationEvents.instance=new Yp(this._dataQ,this._utils,this._configurationRepository)}}},{name:"StorageEvents",className:Kd,init:function(){return function(){this._features.list.StorageEvents.instance=new Kd(this._utils,this._elements,this._dataQ,this._msgBus)}}},{name:"PrintEvents",className:np,init:function(){return function(){this._features.list.PrintEvents.instance=new np(this._utils,this._dataQ)}}},{name:"LightSensorEvents",className:dp,init:function(){return function(){this._features.list.LightSensorEvents.instance=new dp(this._dataQ,this._utils,this._configurationRepository)}}},{name:"CrossDomain",className:DP,init:function(){return function(){var t=new DP.Builder(this._configurationRepository,this._dataQ,this._utils,tc,xP),e=new UO(this._msgBus,PC);t.withMessageBus(this._msgBus),t.withWindowMessageEventEmitter(e),this._features.list.CrossDomain.instance=t.build()}}},{name:"OrientationEvents",className:Xf,init:function(){return function(){var t=new KO(this._msgBus,PC);this._features.list.OrientationEvents.instance=new Xf(this._configurationRepository,this._utils,this._sensorDataQ,this._msgBus,t)}}},{name:"BeforeInstallPromptEvents",className:uh,init:function(){return function(){var t=new JO(this._msgBus,PC);this._features.list.BeforeInstallPromptEvents.instance=new uh(this._dataQ,this._utils,this._msgBus,t)}}}],RM=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){return e&&BM(t.prototype,e),r&&BM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,null,[{key:"register",value:function(){var e=this;t.list={},LM.forEach((function(t){e._addFeature(t)}))}},{key:"registerLeanFeatures",value:function(){var e=this;t.list={},LM.forEach((function(t){t.className.getDefaultSettings().runInLean&&e._addFeature(t)}))}},{key:"getDefaultFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.isDefault}))}},{key:"getPerContextFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.shouldRunPerContext}))}},{key:"getPerSessionFeatures",value:function(){return this.getFeaturesByCondition((function(t){return t.shouldRunPerSession}))}},{key:"getNonDefaultFeatures",value:function(){return this.getFeaturesByCondition((function(t){return!t.isDefault&&!t.shouldRunPerContext&&!t.shouldRunPerSession}))}},{key:"getFeaturesByCondition",value:function(e){var r={};return Object.keys(t.list).forEach((function(n){var o=t.list[n];e(o)&&(r[n]=o)})),r}},{key:"_addFeature",value:function(e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?MM(Object(r),!0).forEach((function(e){jM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e.className.getDefaultSettings()),n=e.name;r.init=e.init(),t.list[n]=r}}])}();function AM(t){return AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AM(t)}function IM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NM(n.key),n)}}function NM(t){var e=function(t,e){if("object"!=AM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AM(e)?e:e+""}jM(RM,"list",void 0);var DM=function(){return function(t,e,r){return e&&IM(t.prototype,e),r&&IM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageBus=e}),[{key:"collectElement",value:function(t,e,r,n,o,i,a,s,u){this.messageBus.publish(go.ElementsEvent,{hashCode:t,elementId:e,widthElement:r,heightElement:n,dxPosition:o,dyPosition:i,widgetType:a,timeStamp:u})}},{key:"collectElementEvent",value:function(t,e,r,n,o){this.messageBus.publish(go.ElementEventsEvent,{hashCode:t,elementId:e,eventType:r,elementValue:n,timeStamp:o})}},{key:"collectTouchEvent",value:function(t,e,r,n,o,i,a,s,u,c,l,f){this.messageBus.publish(go.TouchEvent,{hashCode:t,touchState:e,x:r,y:n,pointer:o,radiusMajor:s,radiusMinor:u,pressure:c,timeStamp:f})}},{key:"collectKeyEvent",value:function(t,e,r,n){this.messageBus.publish(go.KeyEvent,{hashCode:t,elementId:e,char:r,timeStamp:n})}},{key:"collectOnMouseEvent",value:function(t,e,r,n,o,i,a,s,u,c,l,f){this.messageBus.publish(go.MouseEvent,{hashCode:t,type:e,screenX:r,screenY:n,pointer:o,radiusMajor:s,radiusMinor:u,pressure:c,timeStamp:f})}}])}();function FM(t){return FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FM(t)}function UM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HM(n.key),n)}}function HM(t){var e=function(t,e){if("object"!=FM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FM(e)?e:e+""}var GM=function(){return function(t,e,r){return e&&UM(t.prototype,e),r&&UM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._protocolType=e.includes(be)?4:3}),[{key:"get",value:function(){return this._protocolType}}])}();function WM(t){return WM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WM(t)}function VM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KM(n.key),n)}}function KM(t){var e=function(t,e){if("object"!=WM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WM(e)?e:e+""}var QM=function(){return function(t,e,r){return e&&VM(t.prototype,e),r&&VM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=new URL(e);this._baseServerAddress=r.protocol+"//"+r.host}),[{key:"get",value:function(){return this._baseServerAddress}}])}();function zM(t){return zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zM(t)}function qM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return YM(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YM(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function JM(){JM=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==zM(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(zM(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function XM(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ZM(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){XM(i,n,o,a,s,"next",t)}function s(t){XM(i,n,o,a,s,"throw",t)}a(void 0)}))}}function $M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eB(n.key),n)}}function tB(t,e,r){return(e=eB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eB(t){var e=function(t,e){if("object"!=zM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zM(e)?e:e+""}var rB=function(){function t(e){var r=e.storeName;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw new Error("Store name must be provided.");if(t.instances.has(r))return t.instances.get(r);if(!t.DB_CONFIG.STORE_SCHEMAS[r])throw new Error('Store "'.concat(r,'" is not defined in the schema.'));this.storeName=r,this.db=null,this.initialized=!1,t.instances.set(r,this)}return function(t,e,r){return e&&$M(t.prototype,e),r&&$M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"init",value:(s=ZM(JM().mark((function t(){return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._openDB();case 4:this.db=t.sent,this.initialized=!0;case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_openDB",value:function(){return new Promise((function(e,r){var n=indexedDB.open(t.DB_CONFIG.NAME,t.DB_CONFIG.VERSION);n.onupgradeneeded=function(e){var r=e.target.result;oe.debug("Database upgrade: Version ".concat(e.oldVersion," -> ").concat(e.newVersion));for(var n=0,o=Object.entries(t.DB_CONFIG.STORE_SCHEMAS);n<o.length;n++){var i=qM(o[n],1)[0];r.objectStoreNames.contains(i)?oe.debug("Object store exists: ".concat(i)):(oe.debug("Creating object store: ".concat(i)),r.createObjectStore(i))}},n.onsuccess=function(r){oe.debug('Database "'.concat(t.DB_CONFIG.NAME,'" opened successfully.')),e(r.target.result)},n.onerror=function(e){oe.error('Error opening database "'.concat(t.DB_CONFIG.NAME,'":'),e.target.error),r(e.target.error)}}))}},{key:"_openObjectStore",value:function(t){if(!this.db)throw new Error("Database is not initialized. Call init() first.");return this.db.transaction([this.storeName],t).objectStore(this.storeName)}},{key:"addRecord",value:(a=ZM(JM().mark((function t(e,r){var n=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,o){var i=n._openObjectStore("readwrite").put(r,e);i.onsuccess=function(){return t("Record added successfully.")},i.onerror=function(t){return o("Add record error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"getRecord",value:(i=ZM(JM().mark((function t(e){var r=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,n){var o=r._openObjectStore("readonly").get(e);o.onsuccess=function(e){return t(e.target.result||null)},o.onerror=function(t){return n("Get record error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRecord",value:(o=ZM(JM().mark((function t(e,r){var n=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,o){var i=n._openObjectStore("readwrite").put(r,e);i.onsuccess=function(){return t("Record updated successfully.")},i.onerror=function(t){return o("Update record error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"deleteRecord",value:(n=ZM(JM().mark((function t(e){var r=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,n){var o=r._openObjectStore("readwrite").delete(e);o.onsuccess=function(){return t("Record deleted successfully.")},o.onerror=function(t){return n("Delete record error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getAllRecords",value:(r=ZM(JM().mark((function t(){var e=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,r){var n=e._openObjectStore("readonly").getAll();n.onsuccess=function(e){return t(e.target.result)},n.onerror=function(t){return r("Get all records error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"clearStore",value:(e=ZM(JM().mark((function t(){var e=this;return JM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",new Promise((function(t,r){var n=e._openObjectStore("readwrite").clear();n.onsuccess=function(){return t("All records cleared successfully.")},n.onerror=function(t){return r("Clear store error: ".concat(t.target.error))}})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"release",value:function(){this.db&&(this.db.close(),this.db=null,this.initialized=!1,t.instances.delete(this.storeName),oe.debug('Database "'.concat(t.DB_CONFIG.NAME,'" connection for store "').concat(this.storeName,'" closed.')))}}]);var e,r,n,o,i,a,s}();function nB(t){return nB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nB(t)}function oB(){oB=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==nB(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(nB(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function iB(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function aB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){iB(i,n,o,a,s,"next",t)}function s(t){iB(i,n,o,a,s,"throw",t)}a(void 0)}))}}function sB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uB(n.key),n)}}function uB(t){var e=function(t,e){if("object"!=nB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nB(e)?e:e+""}tB(rB,"instances",new Map),tB(rB,"DB_CONFIG",{NAME:"bio",VERSION:1,STORE_SCHEMAS:{emuid:{},keystore:{}}});var cB=function(){return function(t,e,r){return e&&sB(t.prototype,e),r&&sB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=null!=e?e:new rB({storeName:"keystore"})}),[{key:"init",value:(i=aB(oB().mark((function t(){return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.init();case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getKey",value:(o=aB(oB().mark((function t(e){var r,n;return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.storage.getRecord(e);case 3:if(r=t.sent){t.next=11;break}return t.next=7,this._generateKey();case 7:return n=t.sent,t.next=10,this._saveKey(e,n);case 10:return t.abrupt("return",n);case 11:return t.abrupt("return",r);case 14:throw t.prev=14,t.t0=t.catch(0),oe.error("Failed to import key:",t.t0),new Error("Key retrieval failed.");case 18:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t){return o.apply(this,arguments)})},{key:"deleteKey",value:(n=aB(oB().mark((function t(e){return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.deleteRecord(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_generateKey",value:(r=aB(oB().mark((function t(){return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),oe.error("Failed to generate key:",t.t0),new Error("Key generation failed.");case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),function(){return r.apply(this,arguments)})},{key:"_saveKey",value:(e=aB(oB().mark((function t(e,r){return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.storage.addRecord(e,r);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),oe.error("Failed to save key:",t.t0),new Error("Key saving failed.");case 9:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t,r){return e.apply(this,arguments)})},{key:"_clearKeys",value:(t=aB(oB().mark((function t(){return oB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.clearStore();case 2:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"release",value:function(){this.storage.release()}}]);var t,e,r,n,o,i}();function lB(t){return lB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lB(t)}function fB(){fB=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==lB(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(lB(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function hB(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function dB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hB(i,n,o,a,s,"next",t)}function s(t){hB(i,n,o,a,s,"throw",t)}a(void 0)}))}}function pB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yB(n.key),n)}}function yB(t){var e=function(t,e){if("object"!=lB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lB(e)?e:e+""}var vB=function(){return function(t,e,r){return e&&pB(t.prototype,e),r&&pB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("encryptionKeyName is required.");this.encryptionKeyName=e,this.keyStore=null!=r?r:new cB,this.isInitialized=!1}),[{key:"init",value:(r=dB(fB().mark((function t(){return fB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isInitialized){t.next=4;break}return t.next=3,this.keyStore.init();case 3:this.isInitialized=!0;case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"encrypt",value:(e=dB(fB().mark((function t(e){var r,n,o,i,a;return fB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.prev=2,t.next=5,this.keyStore.getKey(this.encryptionKeyName);case 5:return r=t.sent,n=window.crypto.getRandomValues(new Uint8Array(12)),o=(new TextEncoder).encode(e),t.next=10,window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},r,o);case 10:return i=t.sent,a=new Uint8Array(i),t.abrupt("return",{encryptedData:Array.from(a),iv:Array.from(n)});case 15:throw t.prev=15,t.t0=t.catch(2),oe.error("Encryption failed:",t.t0),new Error("Encryption error occurred.");case 19:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(t){return e.apply(this,arguments)})},{key:"decrypt",value:(t=dB(fB().mark((function t(e,r){var n,o,i,a,s;return fB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.prev=2,t.next=5,this.keyStore.getKey(this.encryptionKeyName);case 5:return n=t.sent,o=new Uint8Array(e).buffer,i=new Uint8Array(r),t.next=10,window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},n,o);case 10:return a=t.sent,s=(new TextDecoder).decode(a),t.abrupt("return",s);case 15:throw t.prev=15,t.t0=t.catch(2),oe.error("Decryption failed:",t.t0),new Error("Decryption error occurred.");case 19:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(e,r){return t.apply(this,arguments)})}]);var t,e,r}();function mB(t){return mB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mB(t)}function bB(){bB=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==mB(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mB(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function gB(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function _B(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gB(i,n,o,a,s,"next",t)}function s(t){gB(i,n,o,a,s,"throw",t)}a(void 0)}))}}function wB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SB(n.key),n)}}function SB(t){var e=function(t,e){if("object"!=mB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mB(e)?e:e+""}var EB=function(){return function(t,e,r){return e&&wB(t.prototype,e),r&&wB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=e.storeName,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indexedDBStorage=new rB({storeName:r}),this.cryptoService=null!=n?n:new vB(r),this.initialized=!1}),[{key:"init",value:(u=_B(bB().mark((function t(){return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.indexedDBStorage.init();case 4:return t.next=6,this.cryptoService.init();case 6:this.initialized=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"release",value:function(){this.indexedDBStorage.release(),this.encryptionKeyStorage.release(),this.initialized=!1}},{key:"addRecord",value:(s=_B(bB().mark((function t(e,r){var n;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.next=4,this._encryptRecord(r);case 4:return n=t.sent,t.abrupt("return",this.indexedDBStorage.addRecord(e,n));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"getRecord",value:(a=_B(bB().mark((function t(e){var r;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.next=4,this.indexedDBStorage.getRecord(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",this._decryptRecord(r));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"updateRecord",value:(i=_B(bB().mark((function t(e,r){var n;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.next=4,this._encryptRecord(r);case 4:return n=t.sent,t.abrupt("return",this.indexedDBStorage.updateRecord(e,n));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"deleteRecord",value:(o=_B(bB().mark((function t(e){return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.indexedDBStorage.deleteRecord(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getAllRecords",value:(n=_B(bB().mark((function t(){var e,r=this;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.next=4,this.indexedDBStorage.getAllRecords();case 4:return e=t.sent,t.abrupt("return",Promise.all(e.map((function(t){return r._decryptRecord(t)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"clearStore",value:(r=_B(bB().mark((function t(){return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.indexedDBStorage.clearStore());case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_encryptRecord",value:(e=_B(bB().mark((function t(e){var r,n,o;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoService.encrypt(JSON.stringify(e));case 2:return r=t.sent,n=r.encryptedData,o=r.iv,t.abrupt("return",{encryptedData:n,iv:o});case 6:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_decryptRecord",value:(t=_B(bB().mark((function t(e){var r,n,o;return bB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.encryptedData,n=e.iv,t.next=3,this.cryptoService.decrypt(r,n);case 3:return o=t.sent,t.abrupt("return",JSON.parse(o));case 5:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})}]);var t,e,r,n,o,i,a,s,u}();function kB(t){return kB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kB(t)}function PB(){PB=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function b(){}function g(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==r&&n.call(S,a)&&(_=S);var E=g.prototype=m.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==kB(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(kB(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function TB(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function CB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){TB(i,n,o,a,s,"next",t)}function s(t){TB(i,n,o,a,s,"throw",t)}a(void 0)}))}}function OB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MB(n.key),n)}}function MB(t){var e=function(t,e){if("object"!=kB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kB(e)?e:e+""}var BB=function(){return function(t,e,r){return e&&OB(t.prototype,e),r&&OB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=e.domUtils,n=e.utils,o=e.dataQ,i=e.configurationRepository,a=e.keys,s=void 0===a?{indexedDBKey:"emuid"}:a,u=e.encryptedIndexedDB,c=void 0===u?new EB({storeName:"emuid"}):u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._emuid=null,this._domUtils=r,this._utils=n,this._dataQ=o,this._configurationRepository=i,this._encryptedStorage=c,this._keys=s}),[{key:"_initMuid",value:(n=CB(PB().mark((function t(){var e;return PB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,oe.info("Initializing Encrypted MUID..."),e=this._emuid,this._isValidMuid(e)){t.next=8;break}return oe.debug("Fetching existing Encrypted MUID from storage..."),t.next=7,this._fetchMuidFromStorage();case 7:e=t.sent;case 8:if(this._isValidMuid(e)){t.next=15;break}return oe.warn("No valid Encrypted MUID found. Generating a new one..."),t.next=12,this._generateNewMuid();case 12:return e=t.sent,t.next=15,this._saveMuidToStorage(e);case 15:this._emuid=e,oe.info("Encrypted MUID successfully initialized"),t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(0),oe.error("Failed to initialize MUID:",t.t0),t.t0;case 23:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(){return n.apply(this,arguments)})},{key:"dataForDevDebug",value:(r=CB(PB().mark((function t(){return PB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._emuid){t.next=3;break}return t.next=3,this._initMuid();case 3:return t.abrupt("return",{emuid:this._emuid});case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_fetchMuidFromStorage",value:(e=CB(PB().mark((function t(){var e;return PB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._encryptedStorage.getRecord(this._keys.indexedDBKey);case 3:return e=t.sent,oe.debug("Fetched Encrypted MUID from storage."),t.abrupt("return",(null==e?void 0:e.emuid)||null);case 8:return t.prev=8,t.t0=t.catch(0),oe.error("Error retrieving Encrypted MUID from storage:",t.t0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return e.apply(this,arguments)})},{key:"_saveMuidToStorage",value:(t=CB(PB().mark((function t(e){return PB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._encryptedStorage.updateRecord(this._keys.indexedDBKey,{emuid:e});case 3:oe.debug("Encrypted MUID saved to storage."),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),oe.error("Error saving Encrypted MUID to storage:",t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(e){return t.apply(this,arguments)})},{key:"_generateNewMuid",value:function(){return this._utils.dateNow()+"-"+this._utils.generateUUID().toUpperCase()}},{key:"_isValidMuid",value:function(t){return!!t&&/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)}}]);var t,e,r,n}();function jB(t){return jB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jB(t)}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LB(n.key),n)}}function LB(t){var e=function(t,e){if("object"!=jB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jB(e)?e:e+""}var RB=function(){return function(t,e,r){return e&&xB(t.prototype,e),r&&xB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._serverWorker=null,this._serverWorkerCommunicator=null,this._configurationService=null,this._featureBuilder=null,this._featureService=null,this._dataQ=null,this._frameHandler=null,this._eventHandlers=[],this._contextMgr=null,this._runWorker=function(t){return new gr(t.getUseUrlWorker(),t.getWorkerUrl()).create()}}),[{key:"start",value:function(t,e){this._loadSystem(t,e)}},{key:"stop",value:function(){this._serverWorker&&this._serverWorker.close(),this.heartBeatService&&this.heartBeatService.stop()}},{key:"registerPostLoadEvents",value:function(){this._slaveListener.onResetSessionTrigger.subscribe(this._sessionService.resetSession.bind(this._sessionService))}},{key:"flushAllMessages",value:function(){this._dataQ.flushAllMessages()}},{key:"handleCoordinatesMaskingConfigurationUpdate",value:function(t){this._coordinatesMaskingConfigurationUpdater.updateConfig(t)}},{key:"getServerWorkerCommunicator",value:function(){return this._serverWorkerCommunicator}},{key:"getFeatureBuilder",value:function(){return this._featureBuilder}},{key:"getFeatureService",value:function(){return this._featureService}},{key:"getConfigurationService",value:function(){return this._configurationService}},{key:"getConfigurationRepository",value:function(){return this._configurationRepository}},{key:"getSessionService",value:function(){return this._sessionService}},{key:"getContextMgr",value:function(){return this._contextMgr}},{key:"getMuidService",value:function(){return this._muidService}},{key:"getEncryptedMuidService",value:function(){return this._muidEncryptedService}},{key:"getApiBridge",value:function(){return this._customerApiBridge}},{key:"getPerfMonitor",value:function(){return this._perfMonitor}},{key:"getServerStateMgr",value:function(){return this._serverStateMgr}},{key:"getMessageBus",value:function(){return this._msgBus}},{key:"getAgentIdService",value:function(){return this._agentIdService}},{key:"_loadSystem",value:function(t,e){var r,n;this._runServerWorker(e),this._serverWorkerCommunicator=new Lr,this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);var o=new Ll(tc,this._serverWorkerCommunicator,null,"logPerfQPassWorkerInterval",Xe);this._perfMonitor=new Hr(o),this._configurationRepository=new Mn,new sl(this._configurationRepository,e).loadStartUpConfigurations();var i=null===(r=this._configurationRepository)||void 0===r?void 0:r.get(ft);this._shouldEnableWorkerWupMessagesHashing(i,this._serverWorkerCommunicator);var a=new Nl(We,this._configurationRepository),s=new Kr(self.MutationObserver,We,tc,"contextConfiguration",null,!0,400);this._contextMgr=new $r(We,s,this._serverWorkerCommunicator,a);var u=new Pl(o,this._contextMgr.url),c=new ie(u);oe.setLogger(c);var l=null===(n=this._configurationRepository)||void 0===n?void 0:n.get(lt);this._registerFeatures(l),this._currScriptName=document.currentScript?document.currentScript.src:"",this._globalexceptionHandler=new nn(We,this._currScriptName),this._msgBus=new cn,this._dataQ=new Nr(tc,this._serverWorkerCommunicator,this._contextMgr,"dataQPassWorkerInterval",Je),this._agentIdCache=new of(a),this._agentIdService=new cf(this._agentIdCache,this._serverWorkerCommunicator),this._cidCache=new dn(e.getWupServerURL()),this._serverStateMgr=new En(this._serverWorkerCommunicator,We,this._agentIdService),this._sessionInfoService=new pc,this._sensorGateKeeper=new bc(this._sessionInfoService,this._configurationRepository),this._configurationService=new Eo(We,this._configurationRepository,this._msgBus,this._cidCache,this._serverWorkerCommunicator),this._sensorDataQ=new si(this._configurationRepository,this._dataQ,this._msgBus,We,this._sensorGateKeeper),this._maskingService=new pl(this._configurationRepository),this._elementsUtils=new Si(this._configurationRepository,We,this._dataQ,this._contextMgr,this._maskingService);var f=new fa,h=new Aa(this._configurationRepository,tc,We);this._frameHandler=h.create(),this._featureService=new Fa(RM,this._frameHandler,this._configurationRepository,tc,We,f);var d=new $c(We,this._msgBus,this._configurationRepository);this._stateService=new $s(this._msgBus),this._pauseResumeMgr=new Ka(this._featureService,this._configurationRepository,this._dataQ,this._stateService,this._serverWorkerCommunicator),this._customerApiBridge=new rs(this._pauseResumeMgr,this._msgBus,t,We),this._configurationRepository.get(ct)!==zt.SECONDARY&&(this._muidService=new as(We,this._dataQ,a,this._configurationRepository),this._muidEncryptedService=new BB({domUtils:tc,utils:We,dataQ:this._dataQ,storage:a,configurationRepository:this._configurationRepository})),this._psidCache=new ls;var p=new ps(this._psidCache,this._serverWorkerCommunicator),y=new Kr(self.MutationObserver,We,tc,"resetSessionConfig"),v=new bs(We,a,this._configurationRepository);this._csidCache=new Ss;var m=new Ts(this._customerApiBridge,this._csidCache,this._serverWorkerCommunicator),b=new Kl(We,a);this._brandService=new Hl(this._serverWorkerCommunicator,b),this._coordinatesMaskingConfigurationUpdater=new $l(this._configurationRepository);var g=new QM(e.getWupServerURL()),_=new GM(e.getWupServerURL()),w=e.isMinifiedWupUriEnabled();this._sessionService=new js(this._msgBus,this._configurationService,this._configurationRepository,We,tc,this._serverWorkerCommunicator,this._contextMgr,this._muidService,this._serverStateMgr,y,v,g,this._cidCache,_,w,m,this._csidCache,this._psidCache,this._brandService,this._agentIdService),this._metadataService=new As(this._configurationRepository,this._dataQ),this._slaveListener=new Hs(this._dataQ,this._configurationRepository,We,o,this._contextMgr),this._slaveListener.listen(),this._sameChar=new Ko,this._featureBuilder=new Ks(RM,this._configurationRepository,We,this._elementsUtils,self.MutationObserver,this._dataQ,e,this._sessionService,this._muidService,this._muidEncryptedService,this._perfMonitor,this._sensorDataQ,this._msgBus,this._cidCache,this._sameChar,this._maskingService,this._contextMgr),this._contextApiHandler=new Ys(this._contextMgr,this._dataQ),this._contextMgr.onContextChange.subscribe(this._featureService.runPerContextFeatures.bind(this._featureService));var S=new su;this.heartBeatService=new oc(this._serverWorkerCommunicator,new lc,this._configurationRepository.get(D)),this.heartBeatService.start(),this._eventHandlers.push(new Yl(this._msgBus,this._muidService,S,this._serverWorkerCommunicator)),this._eventHandlers.push(new fu(this._msgBus,this._contextMgr)),this._eventHandlers.push(new yu(this._msgBus,this._sessionService)),this._eventHandlers.push(new gu(this._msgBus,this._metadataService)),this._eventHandlers.push(new Eu(this._msgBus,this._pauseResumeMgr,this._slaveListener)),this._eventHandlers.push(new Cu(this._msgBus,m)),this._eventHandlers.push(new ju(this._msgBus,p)),this._eventHandlers.push(new zu(this._msgBus,this._brandService)),this._eventHandlers.push(new Wu(this._msgBus,S)),this._eventHandlers.push(new Fu(this._msgBus,this._featureService,this._dataQ,this._pauseResumeMgr,this._metadataService,c,this._contextMgr,this._sessionService,this._sensorDataQ,this._slaveListener,this._stateService,this._perfMonitor,this.heartBeatService,this._sensorGateKeeper,v,this._coordinatesMaskingConfigurationUpdater)),this._eventHandlers.push(new Au(this._msgBus,this._featureService,this._customerApiBridge,this._contextMgr,S,this._sessionInfoService)),this._configurationRepository.get(Y)&&(d.start(new Ni(window.self)),this._eventHandlers.push(new nl(f,this._featureService,this._msgBus))),e.getLogServerURL()&&this._configurationService.updateLogUrlToWorker(this._sessionService.sessionId,this._csidCache.get(),this._serverWorkerCommunicator),e.isFlutterApp()&&(window.bcClient?window.bcClient.flutterBridge=new DM(this._msgBus):oe.error("Cannot initiate FlutterSdkBridge: bcClient object not found.")),this._stateService.updateState(or.starting)}},{key:"_runServerWorker",value:function(t){this._serverWorker=this._runWorker(t)}},{key:"_registerFeatures",value:function(t){if(t!==qt.LEAN)return oe.info("Build features per collection mode: FULL"),void RM.register();oe.info("Build features per collection mode: LEAN"),RM.registerLeanFeatures()}},{key:"_shouldEnableWorkerWupMessagesHashing",value:function(t,e){t&&e.sendAsync(rr,{enableWupMessagesHashing:t})}}])}(),AB="getConfigurations",IB="client";function NB(t){return NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NB(t)}function DB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FB(n.key),n)}}function FB(t){var e=function(t,e){if("object"!=NB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NB(e)?e:e+""}var UB=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){return e&&DB(t.prototype,e),r&&DB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,null,[{key:"extract",value:function(t){if(!t)throw new Error("Invalid wupServerURL. Parameter is empty");var e={};if(e.cid=this.getCID(t),e.serverURL=this.getServerURL(t),!e.serverURL)throw new Error("Invalid field. Failed extracting the address parameter: ".concat(t));if(!e.cid)throw new Error("Invalid field. Failed extracting the cid parameter: ".concat(t));return e}},{key:"getCID",value:function(e){var r=t.extractCid(e);return r||null}},{key:"extractCid",value:function(t){var e=t.indexOf("cid=");if(-1===e)return null;e+=4;var r=t.indexOf("&",e);return r=-1===r?void 0:r,t.substring(e,r)}},{key:"getServerURL",value:function(t){var e=t.indexOf("/client/v",t);return(e=-1===e?null:e)?t.substring(0,e):null}}])}();function HB(t){return HB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HB(t)}function GB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WB(n.key),n)}}function WB(t){var e=function(t,e){if("object"!=HB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HB(e)?e:e+""}var VB=function(){return function(t,e,r){return e&&GB(t.prototype,e),r&&GB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),null,[{key:"build",value:function(t,e){var r="/client/v3.1/web/wup";if(!t)throw new Error("Invalid server URL. Parameter is empty");return We.hasProtocol(t)?t.toString().concat(r,"?cid=",e):"https".concat("://",t,r,"?cid=",e)}},{key:"buildCustomServerUrl",value:function(t){if(!t)throw new Error("Invalid server URL. Parameter is empty");return We.hasProtocol(t)?t:"https".concat("://",t)}}])}();function KB(t){return KB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KB(t)}function QB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zB(n.key),n)}}function zB(t){var e=function(t,e){if("object"!=KB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KB(e)?e:e+""}function qB(t,e,r){return e=ZB(e),function(t,e){if(e&&("object"==KB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,JB()?Reflect.construct(e,r||[],ZB(t).constructor):e.apply(t,r))}function YB(t){var e="function"==typeof Map?new Map:void 0;return YB=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(JB())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&XB(o,r.prototype),o}(t,arguments,ZB(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),XB(r,t)},YB(t)}function JB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JB=function(){return!!t})()}function XB(t,e){return XB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XB(t,e)}function ZB(t){return ZB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZB(t)}var $B=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qB(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XB(t,e)}(e,t),function(t,e,r){return e&&QB(t.prototype,e),r&&QB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e)}(YB(Error)),tj="enableRestart",ej="enableFlush",rj="enableCustomElements";function nj(t){return nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nj(t)}function oj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ij(n.key),n)}}function ij(t){var e=function(t,e){if("object"!=nj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nj(e)?e:e+""}var aj=function(){return function(t,e,r){return e&&oj(t.prototype,e),r&&oj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._utils=e}),[{key:"getCustomerSessionID",value:function(t){this._getFromApiOrEmpty("getCustomerSessionID",(function(e){t(e)}))}},{key:"getLogServerAddress",value:function(t){this._getFromApiOrEmpty("getLogServerAddress",(function(e){t(e)}))}},{key:"getServerAddress",value:function(t){this._getFromApiOrEmpty("getCustomerConfigLocation",(function(e){t(e)}))}},{key:"getConfigurations",value:function(t){var e=this,r=null;this.isApiAvailable(AB)?this._getFromApiOrEmpty(AB,(function(e){var n=null;if(e){if(e.isWupServerURLProxy)r=e.wupServerURL;else if(e[Pt])r=VB.buildCustomServerUrl(e[Pt]);else{if(!e[xt]||!e[jt])throw new Error("Invalid serverURL or cid. Parameter is empty");r=VB.build(e[jt],e[xt])}n=(new me).mapStartupConfigurations(r,e)}t(n)})):this.getLogServerAddress((function(n){e.getServerAddress((function(e){var o=UB.extract(e);r=VB.build(o.serverURL,o.cid),t(new de(r,n,null,!1,"",null))}))}))}},{key:"createClientInterface",value:function(t,e){if(!this.isCDAPIAvailable())throw oe.error("Failed setting client facade. cdApi is unavailable."),new $B("Failed setting client facade. cdApi is unavailable.");var r={setCoordinatesMasking:function(e){t.setCoordinatesMasking(e)}};e&&e[tj]&&(r.restart=function(){t.restart()}),e&&e[ej]&&(r.flush=function(){t.flush()}),e&&e[rj]&&(r.submitCustomElement=function(e){t.submitCustomElement(e)}),window.cdApi[IB]=r}},{key:"isCDAPIAvailable",value:function(){return!!window.cdApi}},{key:"isApiAvailable",value:function(t){return!!window.cdApi&&!!window.cdApi[t]}},{key:"_getFromApiOrEmpty",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!window.cdApi)return r>=20?void oe.error("Failed getting cdApi after all retries."):(0===r&&oe.warn("cdApi not found in retry ".concat(r)),r++,void setTimeout(this._getFromApiOrEmpty.bind(this,t,e,r),100));if(!window.cdApi[t])return oe.warn("User did not implement cdApi method: ".concat(t)),void e("");try{window.cdApi[t](e)}catch(e){throw oe.error("An error has occurred while calling cdApi ".concat(t," function. Exception was thrown from client implementation."),e),e}}}])}();function sj(t){return sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sj(t)}function uj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cj(n.key),n)}}function cj(t){var e=function(t,e){if("object"!=sj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sj(e)?e:e+""}var lj=function(){return function(t,e,r){return e&&uj(t.prototype,e),r&&uj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"autoStart",value:function(t){var e=this,r=new aj;r.getConfigurations((function(n){n?n.getWupServerURL()?n.getUseUrlWorker()&&""===n.getWorkerUrl()?oe.error("Failed starting the JS SDK. Received invalid WorkerUrl configuration"):e.start(r,n,t):oe.error("Missing server URL. Unable to start the library."):oe.error("Failed starting the JS SDK. Received invalid start configurations")}))}},{key:"manualStart",value:function(t,e,r){var n=new aj;this.start(n,t,r)}},{key:"start",value:function(t,e,r){var n;this._cdApiFacade=t,this._startupConfigurations=e,this._configurationLoadedCallback=r,this.systemBootstrapper=new RB,t.createClientInterface(this,e.getClientSettings()),this.systemBootstrapper.start(t,e),oe.info("Got server address: ".concat(e.getWupServerURL()));var o=this.systemBootstrapper.getPerfMonitor();o.startMonitor("t.timeTillServerConfig"),o.startMonitor("t.timeTillDataCollect"),this.configurationService=this.systemBootstrapper.getConfigurationService(),this.sessionService=this.systemBootstrapper.getSessionService(),this.configurationService.setConfigurationLoadedCallback(r),this.systemBootstrapper.getFeatureService().buildFrameRelatedLists(),this.systemBootstrapper.getFeatureBuilder().buildFeatures(),oe.info("Started default features collection"),this.systemBootstrapper.getFeatureService().runDefault(),this.systemBootstrapper.getApiBridge().enableApi(),this.systemBootstrapper.getContextMgr().initContextHandling(),this.systemBootstrapper.registerPostLoadEvents(),null===(n=this.systemBootstrapper.getMuidService())||void 0===n||n.initMuid(),this.systemBootstrapper.getConfigurationRepository().get(ht)?this.sessionService.startNewSession():this.sessionService.resumeOrStartSession()}},{key:"stop",value:function(){this.systemBootstrapper.stop()}},{key:"pause",value:function(){window.cdApi.pauseCollection()}},{key:"resume",value:function(){window.cdApi.resumeCollection()}},{key:"updateCustomerSessionID",value:function(t){window.cdApi.setCustomerSessionId(t)}},{key:"changeContext",value:function(t){window.cdApi.changeContext(t)}},{key:"startNewSession",value:function(t){window.cdApi.startNewSession(t)}},{key:"restart",value:function(){this.stop(),this.start(this._cdApiFacade,this._startupConfigurations,this._configurationLoadedCallback)}},{key:"flush",value:function(){this.systemBootstrapper.flushAllMessages()}},{key:"setCoordinatesMasking",value:function(t){this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(t)}},{key:"submitCustomElement",value:function(t){this.systemBootstrapper.getMessageBus().publish(vo,t)}}])}();function fj(){return new v(new lj,new _,new me,new Ee)}fj()}(),cdwpb=n}();